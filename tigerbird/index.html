<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
      
        NetBird Cloud &amp; TigerVNC: Secure SSH &amp; VNC Access - infoBAG
      
    </title>
    <meta name="title" content="NetBird Cloud &amp; TigerVNC: Secure SSH &amp; VNC Access - infoBAG" />
    <meta name="description" content="">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://ib.bsb.br/tigerbird/">
    <meta property="og:title" content="NetBird Cloud &amp; TigerVNC: Secure SSH &amp; VNC Access - infoBAG">
    <meta property="og:description" content="">
    <meta property="og:image" content="/favicon.ico">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://ib.bsb.br/tigerbird/">
    <meta name="twitter:title" content="NetBird Cloud &amp; TigerVNC: Secure SSH &amp; VNC Access - infoBAG">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="/favicon.ico">
    <link rel="canonical" href="https://ib.bsb.br/tigerbird/">
    <link rel="alternate" type="application/rss+xml" title="infoBAG" href="https://ib.bsb.br/rss.xml">
    
      <meta name="keywords" content="aid&gt;software&gt;linux">
      
        <meta property="article:tag" content="aid&gt;software&gt;linux">
      
    
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    
    <link rel="stylesheet" href="/style.css">
  </head>
  <body class="post-content-body">
    <header class="header-container">
      <nav aria-label="Main navigation" class="header-content">
        <a href="/" aria-label="Home">
          <img src="/favicon.ico" alt="Home" class="favicon search-link" width="32" height="32" loading="lazy">
        </a>
        <a href="/tags" aria-label="Tags">
          <img src="/assets/Label.gif" alt="Tags" class="favicon search-link" width="32" height="32" loading="lazy">
        </a>
        <a href="/send" aria-label="send">
          <img src="/assets/rot.gif" alt="send" class="favicon search-link" width="32" height="32" loading="lazy">
        </a> 
        <a href="/created" aria-label="archive created">
          <img src="/assets/Loose_Stone_Pile.gif" alt="archive created" class="favicon search-link" width="32" height="32" loading="lazy">
        </a>
        <a href="/events" aria-label="Events">
          <img src="/assets/Paralyse_Rune.gif" alt="Events" class="favicon search-link" width="32" height="32" loading="lazy">
        </a>
        <a href="/modified" aria-label="archive modified">
          <img src="/assets/Hole_(Rock).gif" alt="archive modified" class="favicon search-link" width="32" height="32" loading="lazy">
        </a>
    </nav>
      <h5 class="post-title">
        <a href="#bottom-of-page" aria-label="Go to bottom">
          NetBird Cloud & TigerVNC: Secure SSH & VNC Access
        </a>
      </h5>
      <div class="post-meta">
        <time datetime="2025-05-10T00:00:00+00:00" class="post-date">
          10 May 2025
        </time>
        
          <span class="post-updated">
            ↣
            <time datetime="2025-06-17T15:41:59+00:00">
              17 Jun 2025
            </time>
          </span>
        
        
          <p class="post-slug">
            Slug: <a href="https://ib.bsb.br/tigerbird" class="tag">tigerbird</a>
          </p>
        
        
          <p class="post-tags">
            Tags:
            
              <a href="https://ib.bsb.br/tags/#aid-software-linux" class="tag">aid>software>linux</a>
            
          </p>
        
      </div>
      <div class="post-actions">
        <div class="page-stats mt-3" role="status" aria-label="Page statistics">
      
      <span class="badge bg-primary">
        18838 characters
      </span>
        <span class="separator mx-2" aria-hidden="true">•</span>
        <span class="badge bg-primary">
        2457 words
      </span>
      </div>
        <div class="action-buttons d-flex flex-wrap gap-2">
          
            
              <form action="https://github.com/ib-bsb-br/ib-bsb-br.github.io/edit/main/_posts/2025-05-10-tigerbird.md"
                    method="GET"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="d-inline-block">
                <button type="submit" class="btn btn-danger" aria-label="Edit page content">
                  <span class="button-text">Improve this page?</span>
                  <span class="info-text">aberto.</span>
                </button>
              </form>
            
            <form action="https://github.com/ib-bsb-br/ib-bsb-br.github.io/commits/main/_posts/2025-05-10-tigerbird.md"
                  method="GET"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="d-inline-block">
              <button type="submit" class="btn btn-danger" aria-label="View page revision history">
                View revision history
              </button>
            </form>
          
        </div>
      </div>
    </header>
    <main class="content">
      <article class="post-wrapper">
        <div class="post-content-body">
          
<ul><li><a href="#netbird-cloud--tigervnc-for-secure-remote-access">NetBird Cloud &amp; TigerVNC for Secure Remote Access</a></li></ul>
          <h2 id="netbird-cloud--tigervnc-for-secure-remote-access">
    
    
     <a href="#netbird-cloud--tigervnc-for-secure-remote-access">#</a><a href="#" aria-label="Back to top">NetBird Cloud &amp; TigerVNC for Secure Remote Access</a>
        
    
  </h2>
      

<p>This guide details how to use NetBird Cloud in conjunction with TigerVNC to establish secure command-line (SSH) and graphical desktop (VNC) access to your Debian-based servers. It refactors a previous guide that focused on Tailscale, adapting the principles and steps for NetBird Cloud.</p>

<p><strong>Always refer to the official NetBird Cloud documentation (<a href="https://netbird.io">netbird.io</a>) for the most current installation commands and feature details, as cloud services and their tools evolve.</strong></p>

<p><strong>Part 1: Secure Command-Line Access (SSH via NetBird Cloud)</strong></p>

<p>Secure command-line access via SSH is a cornerstone of server management. NetBird Cloud significantly enhances its security and ease of use by creating a private, peer-to-peer encrypted network.</p>

<p><strong>1.1. Key NetBird Cloud Benefits for SSH:</strong></p>
<ul>
  <li><strong>No Public SSH Port Exposure</strong>: Your server’s SSH port (default 22) does not need to be open on your internet router. NetBird creates a secure overlay network, meaning only authenticated and authorized peers on your NetBird network can reach the server.</li>
  <li><strong>Simplified Firewall Management</strong>: While the local firewall on the Debian machine (e.g., <code class="language-plaintext highlighter-rouge">ufw</code>) still needs to allow SSH traffic (e.g., <code class="language-plaintext highlighter-rouge">sudo ufw allow ssh</code>), NetBird Access Controls become the primary gatekeeper for <em>which peers</em> on your NetBird network can even attempt to connect.</li>
  <li><strong>Identity-Based Access</strong>: Authenticate using your NetBird identity, which supports Single Sign-On (SSO) with providers like Google, Microsoft, and GitHub. NetBird Access Controls define which peers (associated with users/groups) can connect to which machines.</li>
  <li><strong>Private DNS</strong>: Access servers using simple, stable hostnames (e.g., <code class="language-plaintext highlighter-rouge">my-debian-server.netbird.self</code>) within your NetBird network, instead of relying on potentially changing IP addresses.</li>
  <li><strong>Automated Setup</strong>: NetBird agents can be brought online automatically using setup keys, facilitating non-interactive joining to your NetBird network, which is ideal for scripted deployments.</li>
  <li><strong>Peer-to-peer connections &amp; encryption</strong>: All traffic between your devices on the NetBird network is end-to-end encrypted using WireGuard®.</li>
</ul>

<p><strong>1.2. Core Components for SSH Access:</strong></p>
<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">openssh-server</code></strong>: This must be installed and running on the Debian server. NetBird provides the secure transport layer for your existing SSH connections; <code class="language-plaintext highlighter-rouge">openssh-server</code> handles the SSH protocol itself.
    <div class="language-bash highlighter-rouge"><div class="highlight"><section><code><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>openssh-server
<span class="nb">sudo </span>systemctl <span class="nb">enable</span> <span class="nt">--now</span> ssh
</code></section></div>    </div>
  </li>
  <li><strong>NetBird Agent</strong>: Installed on both the server and client machines.</li>
</ul>

<p><strong>1.3. Implementation Steps for SSH over NetBird Cloud:</strong></p>

<ol>
  <li><strong>On the Debian Server:</strong>
    <ul>
      <li>Install <code class="language-plaintext highlighter-rouge">openssh-server</code> (as shown above).</li>
      <li><strong>Install NetBird Agent:</strong>
The recommended method for Debian is often to add NetBird’s package repository and install via <code class="language-plaintext highlighter-rouge">apt</code>. Always check the <a href="https://docs.netbird.io/how-to/installation">official NetBird installation guide</a> for the latest instructions.
<em>Example (verify on netbird.io):</em>
        <div class="language-bash highlighter-rouge"><div class="highlight"><section><code><span class="c"># Add NetBird repository (command may vary)</span>
<span class="c"># sudo curl -sSL https://pkgs.netbird.io/debian/gpg.key | sudo gpg --dearmor -o /usr/share/keyrings/netbird-archive-keyring.gpg</span>
<span class="c"># echo "deb [signed-by=/usr/share/keyrings/netbird-archive-keyring.gpg] https://pkgs.netbird.io/debian stable main" | sudo tee /etc/apt/sources.list.d/netbird.list</span>
<span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>netbird
</code></section></div>        </div>
        <p>Alternatively, a script-based installation might be available:</p>
        <div class="language-bash highlighter-rouge"><div class="highlight"><section><code><span class="c"># curl -fsSL https://pkgs.netbird.io/install.sh | sudo bash</span>
</code></section></div>        </div>
      </li>
      <li><strong>Obtain a NetBird Setup Key:</strong> Go to your NetBird Management Portal (e.g., <code class="language-plaintext highlighter-rouge">app.netbird.io</code>), navigate to the “Setup Keys” tab, and create a new key.</li>
      <li><strong>Join NetBird:</strong>
        <div class="language-bash highlighter-rouge"><div class="highlight"><section><code><span class="nb">sudo </span>netbird up <span class="nt">--setup-key</span> YOUR_NETBIRD_SETUP_KEY <span class="nt">--hostname</span> my-debian-server
</code></section></div>        </div>
        <p>The <code class="language-plaintext highlighter-rouge">--hostname</code> flag helps identify the peer in the NetBird UI and can influence its DNS name. You can also assign the server to <strong>Groups</strong> in the NetBird Management Portal for easier policy management, especially as your network grows.</p>
      </li>
    </ul>
  </li>
  <li><strong>In Your NetBird Management Portal (e.g., <code class="language-plaintext highlighter-rouge">app.netbird.io</code>):</strong>
    <ul>
      <li>Verify the machine (<code class="language-plaintext highlighter-rouge">my-debian-server</code>) appears in the “Peers” list.</li>
      <li><strong>Define Access Controls (Policies):</strong> Navigate to “Access Control” -&gt; “Policies”. Create a policy to allow SSH traffic. NetBird policies apply to ‘Peers’ (devices), which are enrolled by users.
        <ul>
          <li><strong>Name:</strong> e.g., “Allow SSH to Debian Servers”</li>
          <li><strong>Action:</strong> <code class="language-plaintext highlighter-rouge">Accept</code></li>
          <li><strong>Sources:</strong> Select the NetBird <strong>Groups</strong> (e.g., <code class="language-plaintext highlighter-rouge">group:developers</code>) or individual <strong>Peers</strong> that should be allowed to initiate SSH connections.</li>
          <li><strong>Destinations:</strong> Select the NetBird <strong>Group</strong> containing <code class="language-plaintext highlighter-rouge">my-debian-server</code> (e.g., <code class="language-plaintext highlighter-rouge">group:production-servers</code>) or <code class="language-plaintext highlighter-rouge">my-debian-server</code> itself by its peer name.</li>
          <li><strong>Protocol:</strong> <code class="language-plaintext highlighter-rouge">TCP</code></li>
          <li><strong>Ports (Destination Ports):</strong> <code class="language-plaintext highlighter-rouge">22</code></li>
          <li>Ensure the policy is enabled.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>On Your Client Machine:</strong>
    <ul>
      <li>Install the NetBird Agent (follow the same installation steps as for the server, appropriate for your client’s OS).</li>
      <li><strong>Log in to NetBird:</strong>
        <div class="language-bash highlighter-rouge"><div class="highlight"><section><code><span class="nb">sudo </span>netbird up
</code></section></div>        </div>
        <p>This command will typically open a browser window for you to authenticate with your chosen SSO provider.</p>
      </li>
      <li><strong>Connect via SSH:</strong> Use the server’s NetBird Private DNS name (usually ending in <code class="language-plaintext highlighter-rouge">.netbird.self</code>) and the local Linux username on the server.
        <div class="language-bash highlighter-rouge"><div class="highlight"><section><code>ssh localuser@my-debian-server.netbird.self
<span class="c"># Replace 'localuser' with the actual username on the Debian server.</span>
<span class="c"># Replace 'my-debian-server.netbird.self' with the server's NetBird DNS name.</span>
</code></section></div>        </div>
      </li>
    </ul>
  </li>
</ol><hr />

<p><strong>Part 2: Secure Graphical Desktop Access (VNC over NetBird Cloud)</strong></p>

<p>For tasks requiring a graphical desktop environment, VNC is a common solution. By routing VNC traffic over your NetBird network, you gain security and connectivity benefits similar to those for SSH, notably avoiding public VNC port exposure.</p>

<p><strong>2.1. Why VNC?</strong>
VNC (Virtual Network Computing) allows you to view and interact with a remote computer’s graphical desktop environment. This is useful for applications that don’t have a command-line interface or for tasks that are easier to perform graphically.</p>

<p><strong>2.2. Key NetBird Cloud Benefits for VNC:</strong></p>
<ul>
  <li><strong>No Public VNC Port Exposure</strong>: The VNC server port (commonly 5900, 5901, etc.) does not need to be open on your internet router. NetBird creates a secure, encrypted tunnel directly to the VNC server peer on your NetBird network.</li>
  <li><strong>Simplified Firewall Management</strong>: Your local firewall on the Debian machine (<code class="language-plaintext highlighter-rouge">ufw</code>) must allow traffic to the VNC port <em>from the NetBird interface</em>. NetBird Access Controls then determine which NetBird peers can reach this port on the server over the NetBird network.</li>
  <li><strong>Private DNS</strong>: Connect to your VNC server using its NetBird Private DNS name (e.g., <code class="language-plaintext highlighter-rouge">my-debian-server.netbird.self:1</code> or <code class="language-plaintext highlighter-rouge">my-debian-server.netbird.self:5901</code>).</li>
</ul>

<p><strong>2.3. Core TigerVNC Components:</strong>
You’ll need a VNC server on the remote machine and a VNC viewer on your local machine. TigerVNC is a high-performance, open-source VNC implementation.</p>

<ul>
  <li><strong>VNC Server Options:</strong>
    <ul>
      <li><strong><code class="language-plaintext highlighter-rouge">Xvnc</code></strong>: Creates a <em>virtual</em> desktop session, independent of any physical display. Ideal for headless servers.</li>
      <li><strong><code class="language-plaintext highlighter-rouge">x0vncserver</code></strong>: Shares an <em>existing</em> X display (e.g., the physical console display or an active X11 session).</li>
    </ul>
  </li>
  <li><strong>VNC Server Management &amp; Configuration:</strong>
    <ul>
      <li><strong><code class="language-plaintext highlighter-rouge">vncsession</code></strong>: A script to manage <code class="language-plaintext highlighter-rouge">Xvnc</code> sessions, often integrated with systemd for user services. Configuration is typically in <code class="language-plaintext highlighter-rouge">$HOME/.config/tigervnc/config</code> (user-specific) or <code class="language-plaintext highlighter-rouge">/etc/tigervnc/vncserver-config-defaults</code>.
<em>Example user config (<code class="language-plaintext highlighter-rouge">$HOME/.config/tigervnc/config</code>):</em>
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><section><code># geometry=1920x1080
# depth=24
# securitytypes=VncAuth,TLSVnc # Default often includes TLSVnc
# session=xfce # Specify your installed desktop environment
</code></section></div>        </div>
      </li>
      <li><strong><code class="language-plaintext highlighter-rouge">vncconfig</code></strong>: A utility to configure and control a <em>running</em> instance of <code class="language-plaintext highlighter-rouge">Xvnc</code>.</li>
      <li><strong><code class="language-plaintext highlighter-rouge">vncpasswd</code></strong>: Crucial for setting the password to access VNC desktops. This must be run by the Linux user who will own the VNC session.
        <div class="language-bash highlighter-rouge"><div class="highlight"><section><code><span class="c"># As the VNC user (e.g., 'localuser')</span>
vncpasswd <span class="c"># Stores obfuscated password in $HOME/.vnc/passwd or $HOME/.config/tigervnc/passwd</span>
</code></section></div>        </div>
      </li>
    </ul>
  </li>
  <li><strong>VNC Client:</strong>
    <ul>
      <li><strong><code class="language-plaintext highlighter-rouge">vncviewer</code></strong>: The client application used to connect to the VNC server.</li>
    </ul>
  </li>
</ul>

<p><strong>2.4. Implementation Steps for VNC over NetBird Cloud:</strong></p>

<p><strong>2.4.1. Setting up a Virtual Desktop with <code class="language-plaintext highlighter-rouge">Xvnc</code> (via <code class="language-plaintext highlighter-rouge">vncsession</code>)</strong>
This is suitable for headless servers or creating independent graphical sessions. Using a systemd service is highly recommended for persistence.</p>

<ol>
  <li><strong>On the Debian Server (as <code class="language-plaintext highlighter-rouge">root</code> or with <code class="language-plaintext highlighter-rouge">sudo</code>):</strong>
    <ul>
      <li>Ensure the NetBird Agent is installed and running (see section 1.3).</li>
      <li>Install a Desktop Environment (if not already present). XFCE is a good lightweight option:
        <div class="language-bash highlighter-rouge"><div class="highlight"><section><code><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>xfce4 xfce4-goodies
</code></section></div>        </div>
      </li>
      <li>Install TigerVNC Server components:
        <div class="language-bash highlighter-rouge"><div class="highlight"><section><code><span class="nb">sudo </span>apt <span class="nb">install </span>tigervnc-standalone-server tigervnc-common
</code></section></div>        </div>
      </li>
      <li><strong>Configure VNC User and Password (as the intended VNC user, e.g., <code class="language-plaintext highlighter-rouge">localuser</code>):</strong>
If you are <code class="language-plaintext highlighter-rouge">root</code>, switch to the user: <code class="language-plaintext highlighter-rouge">su - localuser</code>
        <div class="language-bash highlighter-rouge"><div class="highlight"><section><code>vncpasswd <span class="c"># Set the VNC-specific password</span>
<span class="c"># (Optional) Create/edit $HOME/.config/tigervnc/config as shown in section 2.3</span>
</code></section></div>        </div>
        <p>If you switched user, type <code class="language-plaintext highlighter-rouge">exit</code> to return to your previous shell.</p>
      </li>
      <li><strong>Start the VNC Server Session (Persistent Session with Systemd Recommended):</strong>
As the VNC user (<code class="language-plaintext highlighter-rouge">localuser</code>), create a systemd user service file: <code class="language-plaintext highlighter-rouge">~/.config/systemd/user/tigervnc@.service</code>:
        <div class="language-ini highlighter-rouge"><div class="highlight"><section><code><span class="nn">[Unit]</span>
<span class="py">Description</span><span class="p">=</span><span class="s">TigerVNC remote desktop server for %I</span>
<span class="py">After</span><span class="p">=</span><span class="s">network-online.target netbird.service # Ensure NetBird is up</span>

<span class="nn">[Service]</span>
<span class="py">Type</span><span class="p">=</span><span class="s">forking</span>
<span class="c"># Use %h for user's home directory in ExecStart path
</span><span class="py">ExecStart</span><span class="p">=</span><span class="s">/usr/bin/vncsession %i -SecurityTypes VncAuth,TLSVnc -rfbauth %h/.config/tigervnc/passwd -geometry 1920x1080 -localhost no</span>
<span class="py">ExecStop</span><span class="p">=</span><span class="s">/usr/bin/vncsession -kill %i</span>
<span class="py">Restart</span><span class="p">=</span><span class="s">on-failure</span>
<span class="py">RestartSec</span><span class="p">=</span><span class="s">5</span>

<span class="nn">[Install]</span>
<span class="py">WantedBy</span><span class="p">=</span><span class="s">default.target</span>
</code></section></div>        </div>
        <p><em>Note on <code class="language-plaintext highlighter-rouge">-localhost no</code></em>: This ensures <code class="language-plaintext highlighter-rouge">Xvnc</code> listens on all interfaces, including the NetBird virtual interface.
Then, as the VNC user (ensure lingering is enabled: <code class="language-plaintext highlighter-rouge">sudo loginctl enable-linger localuser</code> – this allows systemd user services to run even when the user <code class="language-plaintext highlighter-rouge">localuser</code> is not actively logged in):</p>
        <div class="language-bash highlighter-rouge"><div class="highlight"><section><code>systemctl <span class="nt">--user</span> daemon-reload
systemctl <span class="nt">--user</span> <span class="nb">enable</span> <span class="nt">--now</span> tigervnc@:1 <span class="c"># Starts VNC on display :1 (port 5901)</span>
<span class="c"># To check status: systemctl --user status tigervnc@:1</span>
</code></section></div>        </div>
      </li>
      <li><strong>Configure Local Firewall (<code class="language-plaintext highlighter-rouge">ufw</code>):</strong>
Allow incoming connections to the VNC port (e.g., 5901 for display :1) <em>specifically from the NetBird interface</em>. First, identify your NetBird interface name (e.g., <code class="language-plaintext highlighter-rouge">wt0</code>, <code class="language-plaintext highlighter-rouge">nb-xxxx</code>) using <code class="language-plaintext highlighter-rouge">ip link show</code> or <code class="language-plaintext highlighter-rouge">nmcli device show</code>.
        <div class="language-bash highlighter-rouge"><div class="highlight"><section><code><span class="c"># Replace 'YOUR_NETBIRD_INTERFACE' with the actual interface name</span>
<span class="nb">sudo </span>ufw allow <span class="k">in </span>on YOUR_NETBIRD_INTERFACE to any port 5901 proto tcp
</code></section></div>        </div>
      </li>
    </ul>
  </li>
</ol>

<p><strong>2.4.2. Sharing an Existing X Display with <code class="language-plaintext highlighter-rouge">x0vncserver</code></strong>
This is for sharing a display that is already active (e.g., a physical monitor).</p>

<ol>
  <li><strong>On the Debian Server:</strong>
    <ul>
      <li>Ensure NetBird Agent is installed and running.</li>
      <li>Ensure an X server is running with the session you want to share.</li>
      <li>Install <code class="language-plaintext highlighter-rouge">tigervnc-scraping-server</code> (usually provides <code class="language-plaintext highlighter-rouge">x0vncserver</code>):
        <div class="language-bash highlighter-rouge"><div class="highlight"><section><code><span class="nb">sudo </span>apt <span class="nb">install </span>tigervnc-scraping-server
</code></section></div>        </div>
      </li>
      <li><strong>Set VNC Password (as the user whose X session will be shared):</strong> <code class="language-plaintext highlighter-rouge">vncpasswd</code></li>
      <li><strong>Start <code class="language-plaintext highlighter-rouge">x0vncserver</code> (as the user owning the X session):</strong>
This command needs to be run from within the active X session or with the <code class="language-plaintext highlighter-rouge">DISPLAY</code> environment variable correctly set.
        <div class="language-bash highlighter-rouge"><div class="highlight"><section><code>x0vncserver <span class="nt">-rfbauth</span> <span class="nv">$HOME</span>/.config/tigervnc/passwd <span class="nt">-SecurityTypes</span> VncAuth,TLSVnc <span class="nt">-display</span> :0 <span class="nt">-localhost</span> no
</code></section></div>        </div>
      </li>
      <li><strong>Configure Local Firewall (<code class="language-plaintext highlighter-rouge">ufw</code>):</strong>
Allow incoming connections to the VNC port (default 5900 if <code class="language-plaintext highlighter-rouge">x0vncserver</code> attaches to display :0) from the NetBird interface.
        <div class="language-bash highlighter-rouge"><div class="highlight"><section><code><span class="c"># Replace 'YOUR_NETBIRD_INTERFACE' with the actual interface name</span>
<span class="nb">sudo </span>ufw allow <span class="k">in </span>on YOUR_NETBIRD_INTERFACE to any port 5900 proto tcp
</code></section></div>        </div>
      </li>
    </ul>
  </li>
</ol>

<p><strong>2.4.3. NetBird Access Controls for VNC Access</strong>
In your NetBird Management Portal (“Access Control” -&gt; “Policies”):</p>
<ul>
  <li>Create a new policy or modify an existing one.</li>
  <li><strong>Name:</strong> e.g., “Allow VNC to Debian Servers”</li>
  <li><strong>Action:</strong> <code class="language-plaintext highlighter-rouge">Accept</code></li>
  <li><strong>Sources:</strong> Select the NetBird <strong>Groups</strong> or individual <strong>Peers</strong> allowed to initiate VNC connections.</li>
  <li><strong>Destinations:</strong> Select the NetBird <strong>Group</strong> containing <code class="language-plaintext highlighter-rouge">my-debian-server</code> or <code class="language-plaintext highlighter-rouge">my-debian-server</code> itself.</li>
  <li><strong>Protocol:</strong> <code class="language-plaintext highlighter-rouge">TCP</code></li>
  <li><strong>Ports (Destination Ports):</strong> <code class="language-plaintext highlighter-rouge">5901</code> (for <code class="language-plaintext highlighter-rouge">Xvnc</code> on display :1) or <code class="language-plaintext highlighter-rouge">5900</code> (for <code class="language-plaintext highlighter-rouge">x0vncserver</code> on display :0). Create separate rules or use a port list if multiple VNC displays are active.</li>
  <li>Ensure the policy is enabled.</li>
</ul>

<p><strong>2.4.4. Connecting from the Client Machine</strong></p>

<ol>
  <li>Ensure the NetBird Agent is installed on your client and you are logged in (<code class="language-plaintext highlighter-rouge">sudo netbird up</code>).</li>
  <li>Install a VNC Viewer (e.g., <code class="language-plaintext highlighter-rouge">tigervnc-viewer</code> on Linux, or RealVNC Viewer, TightVNC Viewer on other OSes).
    <div class="language-bash highlighter-rouge"><div class="highlight"><section><code><span class="c"># For Debian/Ubuntu clients</span>
<span class="nb">sudo </span>apt <span class="nb">install </span>tigervnc-viewer
</code></section></div>    </div>
  </li>
  <li>Connect using the VNC Viewer to the server’s NetBird Private DNS name and display/port:
    <ul>
      <li>For <code class="language-plaintext highlighter-rouge">Xvnc</code> on display <code class="language-plaintext highlighter-rouge">:1</code>: <code class="language-plaintext highlighter-rouge">my-debian-server.netbird.self:1</code> (or <code class="language-plaintext highlighter-rouge">my-debian-server.netbird.self:5901</code>)</li>
      <li>For <code class="language-plaintext highlighter-rouge">x0vncserver</code> on display <code class="language-plaintext highlighter-rouge">:0</code>: <code class="language-plaintext highlighter-rouge">my-debian-server.netbird.self:0</code> (or <code class="language-plaintext highlighter-rouge">my-debian-server.netbird.self:5900</code>)
You will be prompted for the VNC password set on the server.</li>
    </ul>
  </li>
</ol>

<p><strong>2.5. VNC Security Considerations:</strong></p>
<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">SecurityTypes</code> Parameter for TigerVNC:</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">VncAuth</code>: Basic password authentication. The password itself is not sent in cleartext but the VNC protocol’s own encryption for this is not considered strong by modern standards.</li>
      <li><code class="language-plaintext highlighter-rouge">TLSVnc</code>: Encapsulates the VNC protocol within TLS, providing strong encryption for the VNC session itself. This requires X.509 certificates on the server (TigerVNC can generate self-signed ones).</li>
    </ul>
  </li>
  <li><strong>Interaction with NetBird Encryption:</strong> NetBird Cloud provides strong, end-to-end WireGuard® encryption for all traffic between peers on your NetBird network. This means your VNC traffic is already well-protected.
    <ul>
      <li>Using <code class="language-plaintext highlighter-rouge">VncAuth</code> over NetBird is often considered sufficient due to NetBird’s robust underlying encryption.</li>
      <li>Opting for <code class="language-plaintext highlighter-rouge">TLSVnc</code> provides an <em>additional layer</em> of security directly within the VNC protocol. This offers defense-in-depth, which could be beneficial if, hypothetically, the NetBird agent on an endpoint were compromised or if you wanted VNC security independent of the overlay network for any reason. However, it adds complexity to the VNC server setup (certificate management).</li>
    </ul>
  </li>
</ul><hr />

<p><strong>Key Features, Benefits, and Improvements of this NetBird-based Framework</strong></p>

<ul>
  <li><strong>Comprehensive Access:</strong> Provides secure solutions for both command-line (SSH) and graphical desktop (VNC) access.</li>
  <li><strong>Unified Security Layer:</strong> NetBird Cloud acts as a common security and connectivity backbone, leveraging peer-to-peer encryption, SSO integration, and centralized access policies.</li>
  <li><strong>Reduced Attack Surface:</strong> Eliminates the need to expose SSH or VNC ports directly to the public internet, drastically minimizing vulnerability to external threats.</li>
  <li><strong>Centralized Network Access Control:</strong> NetBird Access Controls (Policies) manage network reachability to services (SSH, VNC ports) based on peer identity and group membership. Application-level authentication (SSH keys, VNC passwords) remains distinct and is handled by the respective services.</li>
  <li><strong>Simplified Connectivity:</strong> NetBird’s Private DNS allows using consistent, human-readable hostnames for all connections within the private network.</li>
  <li><strong>Flexibility &amp; Modernity:</strong> Users can choose the appropriate remote access method, secured by a modern, zero-trust networking solution.</li>
  <li><strong>Builds on Proven Technology:</strong> Leverages NetBird (for secure overlay networking using WireGuard®) and TigerVNC (a robust, open-source VNC implementation).</li>
</ul>

<p><strong>Hypothesis Evaluation:</strong>
The initial hypothesis that a comprehensive Secure Remote Access framework can be constructed by integrating TigerVNC with NetBird Cloud’s security model (analogous to a previous Tailscale-based framework) is <strong>strongly supported</strong>. This guide successfully demonstrates the merging of these components, showcasing how NetBird can secure both SSH and VNC traffic effectively.</p><hr />

<p><strong>Limitations and Areas for Further Development</strong></p>

<ul>
  <li><strong>VNC Authentication vs. NetBird Identity:</strong> VNC session authentication (password) is separate from the NetBird SSO identity. There’s no direct SSO into the VNC session itself.</li>
  <li><strong>VNC Performance:</strong> While generally good, VNC performance can vary based on network latency, bandwidth, display resolution, and desktop environment complexity.</li>
  <li><strong>Complexity of VNC Server &amp; Desktop Environment Setup:</strong> Detailed configuration of desktop environments and advanced VNC server tuning can be intricate and OS-dependent.</li>
  <li><strong>Granularity of VNC Session Control:</strong> Fine-grained control <em>within</em> an active VNC session (e.g., clipboard sharing, read-only access) is managed by TigerVNC’s capabilities, not by NetBird Access Controls.</li>
</ul><hr />

<p><strong>Broader Implications of this Framework for Secure Remote Access Practices</strong></p>

<ul>
  <li><strong>Enhanced Productivity:</strong> Offers flexible, secure, and easy-to-use access to essential tools, boosting remote work capabilities.</li>
  <li><strong>Simplified IT Administration:</strong> Centralizes network access control via the NetBird Management Portal, reducing the complexity of managing firewalls and individual VPN configurations.</li>
  <li><strong>Improved Security Posture:</strong> Significantly enhances security by adopting zero-trust principles, ensuring that only authenticated and explicitly authorized peers can connect to services.</li>
  <li><strong>Shift Towards Modern Solutions:</strong> Encourages the adoption of modern, software-defined perimeter solutions like NetBird Cloud over traditional VPNs or direct public exposure of services.</li>
</ul><hr />

<p><strong>Actionable Next Steps for Implementing, Refining, and Further Developing this Framework</strong></p>

<ol>
  <li><strong>Detailed Implementation Guides:</strong>
    <ul>
      <li>Create specific tutorials for various desktop environments (KDE, GNOME) used with <code class="language-plaintext highlighter-rouge">vncsession</code> and systemd user services over NetBird.</li>
      <li>Develop a more focused guide for <code class="language-plaintext highlighter-rouge">x0vncserver</code> scenarios, perhaps including auto-starting it within a desktop session.</li>
    </ul>
  </li>
  <li><strong>Refinement and Advanced Configuration:</strong>
    <ul>
      <li>Provide advanced NetBird Access Control policy examples (e.g., restricting access based on specific source peer IPs within the NetBird network, though group-based access is generally preferred for scalability).</li>
      <li>Include a dedicated troubleshooting section for common VNC-over-NetBird and SSH-over-NetBird issues.</li>
      <li>Detail the setup of <code class="language-plaintext highlighter-rouge">TLSVnc</code> with self-signed or CA-signed certificates for users desiring that additional VNC-specific encryption layer.</li>
      <li>Explore and document the use of NetBird’s “Network Routes” and “DNS Forwarding” features for scenarios involving access to legacy networks or services through a NetBird peer acting as a gateway.</li>
    </ul>
  </li>
</ol>

        </div>
        
          URL: https://ib.bsb.br/tigerbird
        
      </article>
      <nav class="post-navigation-combined" aria-label="Post navigation">
        <!-- Chronological Navigation (always visible at 40vh) -->
        
          <div class="nav-arrow chronological prev">
            <a href="/compare/" title="compare" rel="prev">
              <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAAAXNSR0IArs4c6QAAAxVJREFUaEPt18FqG1cUBuD/nLkzI42UiVInkFLTCAKhS+9KA+3Kq1L8AAHjhR7AKz+ADV55qUfoqhvThTfdmC4KzTKmYJrELshJW9PIlSeKRpqZe88pUtouihvVRknqMNoMzD1zdPXNrzMM4RJ+6BLuGeWm39RdK6VL6VcIlPEo41HG401loJQupS8mUM7pi7md/6p3UtoHUJzf4vVecZb0e0EQfB7H8b0kSeqqummt/eb1buN83SebNsZ8QkQCYHVpaenu/v7+ra2tLRwdHWF1ddWq6hfM3BCRE2b+FcBHACQAHo1E5v9c+5mIhkR0e3z0VQ8LotuqWlXVw/GRmT8QkdMK89McuAOAAfwoIu8z85yIHBPRKRGN1/IAeDx0rul53hivo6psrf2ejDGfEtFOu92u7O3tBWtra2i322g0GhgOh9je3ka325UPax7fCR0iw+lp4aLxr70aeOmgkChTRY3JGSb73EroERD73uB54WpOgdhwZkXNQNQLiVDzOU1yFymAhu+lqZVopIqISQKmPLFS+atHv3A1q8AVQ+lXP/VHRPQx+b6frKysxMvLy1hfX0ez2USv18PCwgLiOEaSJKhWq/jhwQN8dnIfVOS4dsWHqCJ5YREGjBuNEMfd0eTc9WshBqnFYGhRqxrUIoNuLwMT4eb1Cp6dZshywdW6mZzr9QsEPuPmXIhfno3gnGKuEWCUC14MLKoVb1L72+8Zvj3JOl/udZt/S7darUqn0wlarRZ2d3cxPz+PJ8dPsPP1Doq8kIbL+cawjxBIM8MRFAidpBlRpIbhFc55gM2NF5IIQtVBRlRTZgTWZQ4wzvc8spO1NPM4Gr9Wh1bSDIjU98C5E0PIC8OVSX+Rlz08hl+4/LsML6X/menFxcW7BwcHtzY2NvDw8CE21zf/NdMAHskFMs3MT/EfMg3gsTsr02f8byfTo16v3+v3+//f6fGKgXNp5vT5huZbqH4nH+NvwXH6V5bS041mU1FKz8ZxepdSerrRbCpK6dk4Tu9SSk83mk1FKT0bx+ldSunpRrOpuJTSfwBcuImxpyA7XgAAAABJRU5ErkJggg==" alt="Previous article" width="45" height="45" loading="lazy">
            </a>
          </div>
        
        
          <div class="nav-arrow chronological next">
            <a href="/backup-bash-script/" title="backup bash script" rel="next">
              <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAAAXNSR0IArs4c6QAAAwdJREFUaEPtl01rG1cUht9z7p070ijKWLVS3I9YULtNMBRn2UIXxZtuvCjedNWfoKVXBvsHeOUfoIUx5AeY0pVXXSR052UxBJSi0kDiRplII83HvadI9CMtOFjCmBjubC7cc8+Zc555eYdLuIEP3cCe4Zu+rq/mSXvSbyHg5eHl4eVxXRrwpD3p+Qh4n56P2+xZnvTszC7MCAAUF0XfOdJa62+IaCeO40GSJA/zPP8RwB9vDjBtWmv9JRE5ImpZawdVpbo58CkAIyJnIrLAzEvOuXNm/h3AfQDOAGdj5z5m5gXn3G9ENCKilckaiDwpiFZEpCoiTyYrM3/knOtXmHs58BkABvCLc+4DZl6cxIjoh4ODA728vIzt7W2sra09PT4+fgTgQES4LMvHZIy5LyI/f/dJvfK6FKMJqAdqmBS2ZgWINY9zJyZ1whUiRJrTfmGjybSxUemwcFEmghqT1UxlUrpQEXD7jRq3NWelEz10okIi1AJOX+U2EgALgUrT0kVnmcKvQ+uazSZvbW2hWq2i3++j3W5jf38f6+vrebvdHovI5pT09+vN7teLYev990K8GpQYjS1u1TQqhnHez6EU4cM7FTw7z5AXDo16ACcyPRsaxp2FEM9ejKd7zUaIYVpiOCpRq2rUIo0XLzMwEZaaFTzvZ8hyh/iWnu69fF1AAoOfFr/A5w8eYDQaIY5jJEmC09NTNBoNdLtd7O3t4ejoCIeHh8k/pL8KUSkCZcg6hCLDjLk2ufYGpRuXAuOMYiosQiDNNEcQILQuzYgi0QxVWKuAMtcqJPdXDaKaMMOUNrOAtoFSVE5jaaY4mtQPS5dmQPS8WkdfGReYgDe/3cTdpbvo9XrY2NhAp9NBq9XKO53Ov6T/r2mlVBeX0DSAMzeHppm5h7doemdvR99buYfd3V2srq4+PTk5+a+mr9CmrqTU3+5Rr9cHg8HgYve4krddbZGb5dOXmf2d+7n4pi9D4LrOeHl40v42fl0a8KQ96fkIeJ+ej9vsWZ707Mzmy/Ck5+M2e9afhmuAz1BhwewAAAAASUVORK5CYII=" alt="Next article" width="45" height="45" loading="lazy">
            </a>
          </div>
        
            
            
              
              
                
              
                
                  
                  
              
              
              
              <!-- Navigation block for tag "aid>software>linux"; default display for the first tag -->
              <div class="nav-group tags" id="tag-nav-aid-software-linux" style="display: block;">
                <div class="nav-arrow tags prev">
                  
                    <a href="/fileserver/" title="`simple-fileserver` on RK3588" rel="prev">
                      <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAAAXNSR0IArs4c6QAAAxVJREFUaEPt18FqG1cUBuD/nLkzI42UiVInkFLTCAKhS+9KA+3Kq1L8AAHjhR7AKz+ADV55qUfoqhvThTfdmC4KzTKmYJrELshJW9PIlSeKRpqZe88pUtouihvVRknqMNoMzD1zdPXNrzMM4RJ+6BLuGeWm39RdK6VL6VcIlPEo41HG401loJQupS8mUM7pi7md/6p3UtoHUJzf4vVecZb0e0EQfB7H8b0kSeqqummt/eb1buN83SebNsZ8QkQCYHVpaenu/v7+ra2tLRwdHWF1ddWq6hfM3BCRE2b+FcBHACQAHo1E5v9c+5mIhkR0e3z0VQ8LotuqWlXVw/GRmT8QkdMK89McuAOAAfwoIu8z85yIHBPRKRGN1/IAeDx0rul53hivo6psrf2ejDGfEtFOu92u7O3tBWtra2i322g0GhgOh9je3ka325UPax7fCR0iw+lp4aLxr70aeOmgkChTRY3JGSb73EroERD73uB54WpOgdhwZkXNQNQLiVDzOU1yFymAhu+lqZVopIqISQKmPLFS+atHv3A1q8AVQ+lXP/VHRPQx+b6frKysxMvLy1hfX0ez2USv18PCwgLiOEaSJKhWq/jhwQN8dnIfVOS4dsWHqCJ5YREGjBuNEMfd0eTc9WshBqnFYGhRqxrUIoNuLwMT4eb1Cp6dZshywdW6mZzr9QsEPuPmXIhfno3gnGKuEWCUC14MLKoVb1L72+8Zvj3JOl/udZt/S7darUqn0wlarRZ2d3cxPz+PJ8dPsPP1Doq8kIbL+cawjxBIM8MRFAidpBlRpIbhFc55gM2NF5IIQtVBRlRTZgTWZQ4wzvc8spO1NPM4Gr9Wh1bSDIjU98C5E0PIC8OVSX+Rlz08hl+4/LsML6X/menFxcW7BwcHtzY2NvDw8CE21zf/NdMAHskFMs3MT/EfMg3gsTsr02f8byfTo16v3+v3+//f6fGKgXNp5vT5huZbqH4nH+NvwXH6V5bS041mU1FKz8ZxepdSerrRbCpK6dk4Tu9SSk83mk1FKT0bx+ldSunpRrOpuJTSfwBcuImxpyA7XgAAAABJRU5ErkJggg==" alt="Previous in Tag" width="45" height="45" loading="lazy">
                    </a>
                  
                </div>
                <div class="nav-arrow tags next">
                  
                    <a href="/clipse-listener-systemd-user-service/" title="Clipse Listener Systemd User Service" rel="next">
                      <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAAAXNSR0IArs4c6QAAAwdJREFUaEPtl01rG1cUht9z7p070ijKWLVS3I9YULtNMBRn2UIXxZtuvCjedNWfoKVXBvsHeOUfoIUx5AeY0pVXXSR052UxBJSi0kDiRplII83HvadI9CMtOFjCmBjubC7cc8+Zc555eYdLuIEP3cCe4Zu+rq/mSXvSbyHg5eHl4eVxXRrwpD3p+Qh4n56P2+xZnvTszC7MCAAUF0XfOdJa62+IaCeO40GSJA/zPP8RwB9vDjBtWmv9JRE5ImpZawdVpbo58CkAIyJnIrLAzEvOuXNm/h3AfQDOAGdj5z5m5gXn3G9ENCKilckaiDwpiFZEpCoiTyYrM3/knOtXmHs58BkABvCLc+4DZl6cxIjoh4ODA728vIzt7W2sra09PT4+fgTgQES4LMvHZIy5LyI/f/dJvfK6FKMJqAdqmBS2ZgWINY9zJyZ1whUiRJrTfmGjybSxUemwcFEmghqT1UxlUrpQEXD7jRq3NWelEz10okIi1AJOX+U2EgALgUrT0kVnmcKvQ+uazSZvbW2hWq2i3++j3W5jf38f6+vrebvdHovI5pT09+vN7teLYev990K8GpQYjS1u1TQqhnHez6EU4cM7FTw7z5AXDo16ACcyPRsaxp2FEM9ejKd7zUaIYVpiOCpRq2rUIo0XLzMwEZaaFTzvZ8hyh/iWnu69fF1AAoOfFr/A5w8eYDQaIY5jJEmC09NTNBoNdLtd7O3t4ejoCIeHh8k/pL8KUSkCZcg6hCLDjLk2ufYGpRuXAuOMYiosQiDNNEcQILQuzYgi0QxVWKuAMtcqJPdXDaKaMMOUNrOAtoFSVE5jaaY4mtQPS5dmQPS8WkdfGReYgDe/3cTdpbvo9XrY2NhAp9NBq9XKO53Ov6T/r2mlVBeX0DSAMzeHppm5h7doemdvR99buYfd3V2srq4+PTk5+a+mr9CmrqTU3+5Rr9cHg8HgYve4krddbZGb5dOXmf2d+7n4pi9D4LrOeHl40v42fl0a8KQ96fkIeJ+ej9vsWZ707Mzmy/Ck5+M2e9afhmuAz1BhwewAAAAASUVORK5CYII=" alt="Next in Tag" width="45" height="45" loading="lazy">
                    </a>
                  
                </div>
              </div>
            
          
          <!-- JavaScript to Toggle the Tag-based Navigation -->
          <script>
            document.addEventListener("DOMContentLoaded", function(){
              var tagLinks = document.querySelectorAll('.tag-option');
              tagLinks.forEach(function(link){
                link.addEventListener('click', function(event){
                  event.preventDefault();
                  // Remove "active" class from all tag options.
                  tagLinks.forEach(function(el){ el.classList.remove('active'); });
                  // Add active class to the clicked tag option.
                  this.classList.add('active');
                  // Hide all tag navigation blocks.
                  document.querySelectorAll('.nav-group.tags').forEach(function(block){
                    block.style.display = 'none';
                  });
                  // Show the navigation block corresponding to the selected tag.
                  var tagSlug = this.getAttribute('data-tag');
                  var target = document.getElementById('tag-nav-' + tagSlug);
                  if(target) {
                    target.style.display = 'block';
                  }
                });
              });
            });
          </script>
      </nav>
      
    </main>
    <footer id="bottom-of-page" class="site-footer">
      <div class="footer-content">
        <!-- Back to top link -->
        <a href="#" aria-label="Back to top" class="back2top-link">
          <span class="sronly">Back to top</span>
        </a>
    
        <!-- Liquid Time Calculation and Display -->
        
        
        
        <a href="https://ib.bsb.br/404" aria-label="404">
          2025-09-14 09:51:41
        </a>
        &#x23;
    
        <!-- Tag Selector -->
        <ul class="tag-selector">
          
            
            
              <li>
                <a href="#" class="tag-option active" data-tag="aid-software-linux">
                  aid>software>linux
                </a>
              </li>
            
          
        </ul>
        &hArr;
    
        <!-- GitHub Link -->
        <a href="https://github.com/ib-bsb-br/ib-bsb-br.github.io" aria-label="GitHub">
          &#8505;
        </a>
    
        <!-- Homepage Link -->
        <a href="/" aria-label="Homepage">
          infoBAG
        </a>
    
        <!-- Copy All Code Button -->
        <button id="copyAllButton" aria-label="Copy all code">
          &copy;
        </button>
      </div>
    </footer>
    <style>
      .back2top-link {
        display: inline-block;
        width: 32px;
        height: 32px;
        background: url("/assets/Rope_(Old).gif") center center no-repeat;
        background-size: contain;
        text-decoration: none;
        vertical-align: middle;
      }
      .sronly {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }
    </style>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Article",
        "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "https://ib.bsb.br/tigerbird/"
        },
        "headline": "NetBird Cloud & TigerVNC: Secure SSH & VNC Access",
        "description": "",
        "datePublished": "2025-05-10T00:00:00+00:00",
        "dateModified": "2025-06-17T15:41:59+00:00",
        "author": {
          "@type": "Person",
          "name": "Author"
        },
        "publisher": {
          "@type": "Organization",
          "name": "infoBAG"
          
        }
        
      }
    </script>
    <script src="/assets/js/prism.js" defer></script>
    <script src="/assets/js/copy-all-code.js"></script>
  </body>
</html>
