<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Basic Metadata -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Title with fallback for home or page title -->
    <title>
      
        AnkiApp interactively AI chat (python) - infoBAG
      
    </title>
    <meta name="title" content="AnkiApp interactively AI chat (python) - infoBAG" />
    
    <!-- Description with fallback and truncation -->
    <meta name="description" content="">
    
    <!-- Open Graph Tags -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://ib.bsb.br/ankiapp-interactively-ai-chat-python/">
    <meta property="og:title" content="AnkiApp interactively AI chat (python) - infoBAG">
    <meta property="og:description" content="">
    <meta property="og:image" content="/favicon.ico">
    
    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://ib.bsb.br/ankiapp-interactively-ai-chat-python/">
    <meta name="twitter:title" content="AnkiApp interactively AI chat (python) - infoBAG">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="/favicon.ico">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://ib.bsb.br/ankiapp-interactively-ai-chat-python/">
    
    <!-- RSS Feed -->
    <link rel="alternate" type="application/rss+xml" title="infoBAG" href="https://ib.bsb.br/rss.xml">
    
    <!-- Keywords / Tags -->
    
      <meta name="keywords" content="scripts&gt;AI">
      
        <meta property="article:tag" content="scripts&gt;AI">
      
    
    
    <!-- Favicons -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    
    
    <!-- Main Stylesheet -->
    <link rel="stylesheet" href="/style.css">
    
    <!-- Additional CSS (compiled SCSS and inline styles) -->
    <style>
      /* SCSS compiled styles for post navigation */
      .post-navigation-combined {
        clear: both;
        width: 100%;
        display: flex;
        justify-content: space-between;
      }
      .nav-arrow {
        z-index: 1;
        position: fixed;
        font-size: 1.5rem;
      }
      .nav-arrow.chronological {
        top: 40vh;
      }
      .nav-arrow.tags {
        top: 60vh;
      }
      .nav-arrow.prev {
        left: 0;
      }
      .nav-arrow.next {
        right: 0;
      }
      .nav-arrow a {
        line-height: inherit;
        background-color: transparent;
        border-radius: 50%;
        padding: 0;
        transition: all 0.3s ease;
      }
      .nav-arrow a:hover {
        background-color: rgba(0, 0, 0, 0.1);
      }
      .nav-arrow a:before {
        content: ' ';
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        cursor: pointer;
        background-color: transparent;
      }
      @media print {
        .post-navigation-combined .nav-arrow {
          display: none;
        }
        .cluster rect {
          fill: #ffffff;
          stroke: #000000;
        }
        .cluster text,
        .node text {
          fill: #000000;
        }
        .edgeLabel {
          background-color: #ffffff;
          border: 1px solid #000000;
          color: #000000;
        }
        .edgePath .path,
        .edgePath .arrowheadPath,
        .edgePath .arrow-tagsheadPath {
          stroke: #000000;
        }
        .node rect,
        .node circle,
        .node ellipse,
        .node polygon {
          fill: #ffffff;
          stroke: #000000;
          transition: fill 0.3s ease;
        }
        .node rect:hover,
        .node circle:hover,
        .node ellipse:hover,
        .node polygon:hover {
          fill: #cccccc;
        }
      }
      /* Footer inline styles */
      .back-to-top-link {
        display: inline-block;
        width: 32px;
        height: 32px;
        background: url("/assets/Rope_(Old).gif") center center no-repeat;
        background-size: contain;
        text-decoration: none;
        vertical-align: middle;
      }
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }
    </style>
  </head>
  <body class="post-content-body">
    <header class="header-container">
      <nav aria-label="Main navigation" class="header-content">
        <a href="/" aria-label="Home">
          <img src="/favicon.ico" alt="Home" class="favicon search-link" width="45" height="45" loading="lazy">
        </a>
        <a href="/tags" aria-label="Tags">
          <img src="/assets/Label.gif" alt="Tags" class="favicon search-link" width="45" height="45" loading="lazy">
        </a>
        <a href="/archive" aria-label="Archive">
          <img src="/assets/Loose_Stone_Pile.gif" alt="Archive" class="favicon search-link" width="45" height="45" loading="lazy">
        </a>
        <a href="/events" aria-label="Events">
          <img src="/assets/Paralyse_Rune.gif" alt="Events" class="favicon search-link" width="45" height="45" loading="lazy">
        </a>
        <a href="/archive-created" aria-label="Archive created">
          <img src="/assets/Hole_(Rock).gif" alt="Archive created" class="favicon search-link" width="32" height="32" loading="lazy">
        </a>
        <a href="/rot64" aria-label="rot">
          <img src="/assets/rot.gif" alt="rot" class="favicon search-link" width="32" height="32" loading="lazy">
        </a>
      </nav>
      <h5 class="post-title">
        <a href="#bottom-of-page" aria-label="Go to bottom">
          AnkiApp interactively AI chat (python)
        </a>
      </h5>
      <div class="post-meta">
        <time datetime="2024-10-20T00:00:00+00:00" class="post-date">
          20 Oct 2024
        </time>
        
          <span class="post-updated">
            ↣
            <time datetime="2024-10-20T12:35:35+00:00">
              20 Oct 2024
            </time>
          </span>
        
        
          <p class="post-slug">
            Slug: <a href="https://ib.bsb.br/ankiapp-interactively-ai-chat-python" class="tag">ankiapp-interactively-ai-chat-python</a>
          </p>
        
        
          <p class="post-tags">
            Tags:
            
              <a href="https://ib.bsb.br/tags/#scripts-ai" class="tag">scripts>AI</a>
            
          </p>
        
      </div>
      <div class="post-actions">
        <div class="page-stats mt-3" role="status" aria-label="Page statistics">
          <span class="badge bg-primary">
            6777 characters
          </span>
          <span class="separator mx-2" aria-hidden="true">•</span>
          <span class="badge bg-primary">
            740 words
          </span>
        </div>
        <div class="action-buttons d-flex flex-wrap gap-2">
          
            
              <form action="https://github.com/ib-bsb-br/ib-bsb-br.github.io/edit/main/_posts/2024-10-20-ankiapp-interactively-ai-chat-python.md"
                    method="GET"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="d-inline-block">
                <button type="submit" class="btn btn-danger" aria-label="Edit page content">
                  <span class="button-text">Improve this page?</span>
                  <span class="info-text">aberto.</span>
                </button>
              </form>
            
            <form action="https://github.com/ib-bsb-br/ib-bsb-br.github.io/commits/main/_posts/2024-10-20-ankiapp-interactively-ai-chat-python.md"
                  method="GET"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="d-inline-block">
              <button type="submit" class="btn btn-danger" aria-label="View page revision history">
                View revision history
              </button>
            </form>
          
        </div>
      </div>
    </header>
    <main class="content">
      <article class="post-wrapper">
        <div class="post-content-body">
          

          <section data-filename="python_code-block.py" data-code="import requests
import json
import os
# Authentication details (INSECURE - DO NOT USE IN PRODUCTION). Environment variables are preferred
# Extracting these to env vars should be done before moving the python code
# for interactivelly prompting into the phone
#for setting this on a-shell (ios):
#client_id=$(echo &quot;&lt;clientId from the hardcoded python vars extraction below gathered on script generation phase&gt;&quot; | base64)
#client_token=$(echo &quot;&lt;clientToken&gt;&quot; | base64) #client token does not need adjustments before putting it on base64 for security.
#client_version=&quot;&lt;clientVersion from hardcoded vars as simple string&gt;”
client_ids = [&quot;12e5d390c33649d7b1e6c66b5d98bb80&quot;]  # From your .har file
client_tokens = [&quot;LdGInADDy99mbqWmkfh5YmfzHP9SMhmWwXs7ymfEEJc=&quot;] # From your .har file
client_versions = [&quot;9.6.1&quot;] # From your .har file
def anki_ai_chat(client_id, client_token, client_version):
url = &quot;https://api.ankiapp.com/decks/ai&quot;
headers = {
&quot;accept&quot;: &quot;*/*&quot;,
&quot;accept-language&quot;: &quot;en&quot;,
&quot;ankiapp-client-id&quot;: client_id,
&quot;ankiapp-client-token&quot;: client_token,
&quot;ankiapp-client-version&quot;: client_version,
&quot;content-type&quot;: &quot;application/json&quot;
}
session_id = None
deck = {&quot;layouts&quot;: [], &quot;config&quot;: {}}
while True:
prompt = input(&quot;Enter your prompt (or type 'quit' to exit): &quot;)
if prompt.lower() == &quot;quit&quot;:
break
data = {
&quot;prompt&quot;: prompt,
&quot;deck&quot;: deck,
&quot;pending&quot;: []  # Essential for newer API versions
}
if session_id:
data[&quot;session_id&quot;] = session_id
try:
response = requests.post(url, headers=headers, data=json.dumps(data))
response.raise_for_status()
response_json = response.json()
if &quot;session_id&quot; in response_json and not session_id: #Handles only from the very first time since a single user can and should only generate one of it. Multiple users is to be seen...
session_id = response_json[&quot;session_id&quot;]
if 'data' in response_json:
print(&quot;Response:&quot;)
for item in response_json[&quot;data&quot;]:
print(f&quot;{item[0]}: {item[1]}&quot;)
elif 'pending' in response_json:
print(&quot;Response:&quot;)
for item in response_json[&quot;pending&quot;]:
print(f&quot;{item['Front']}: {item['Back']}&quot;)
else:
print(f&quot;Unexpected response structure:\n{json.dumps(response_json, indent=4)}&quot;)
except requests.exceptions.RequestException as e:
print(f&quot;AnkiApp API Error: {e}&quot;)
if response.content:  # Check for content before attempting decode
try:
error_json = response.json()
print(f&quot;Error details: {json.dumps(error_json, indent=4)}&quot;)
except json.JSONDecodeError: #Handles empty or corrupted data as a raw text format (utf-8 or others...).
print(f&quot;Raw error response: {response.content}&quot;)
except json.JSONDecodeError as e: #If nothing worked, also try converting response's data to raw utf-8 string or even raw data, before continuing the conversation, which will probably halt in errors if done and some new error is introduced, so maybe remove it or adjust...
print(f&quot;Couldn't parse JSON response: {e}. Printing raw content instead...\nResponse content:{response.content}&quot;)
# Example usage (single credential). Extract multiple credentials and pass by user
anki_ai_chat(client_ids[0], client_tokens[0], client_versions[0])" data-download-link="" data-download-link-label="Download Python"><code class="language-python">import requests
import json
import os
# Authentication details (INSECURE - DO NOT USE IN PRODUCTION). Environment variables are preferred
# Extracting these to env vars should be done before moving the python code
# for interactivelly prompting into the phone
#for setting this on a-shell (ios):
#client_id=$(echo "<clientId from="" the="" hardcoded="" python="" vars="" extraction="" below="" gathered="" on="" script="" generation="" phase="">" | base64)
#client_token=$(echo "<clientToken>" | base64) #client token does not need adjustments before putting it on base64 for security.
#client_version="<clientVersion from="" hardcoded="" vars="" as="" simple="" string="">”
client_ids = ["12e5d390c33649d7b1e6c66b5d98bb80"]  # From your .har file
client_tokens = ["LdGInADDy99mbqWmkfh5YmfzHP9SMhmWwXs7ymfEEJc="] # From your .har file
client_versions = ["9.6.1"] # From your .har file
def anki_ai_chat(client_id, client_token, client_version):
url = "https://api.ankiapp.com/decks/ai"
headers = {
"accept": "*/*",
"accept-language": "en",
"ankiapp-client-id": client_id,
"ankiapp-client-token": client_token,
"ankiapp-client-version": client_version,
"content-type": "application/json"
}
session_id = None
deck = {"layouts": [], "config": {}}
while True:
prompt = input("Enter your prompt (or type 'quit' to exit): ")
if prompt.lower() == "quit":
break
data = {
"prompt": prompt,
"deck": deck,
"pending": []  # Essential for newer API versions
}
if session_id:
data["session_id"] = session_id
try:
response = requests.post(url, headers=headers, data=json.dumps(data))
response.raise_for_status()
response_json = response.json()
if "session_id" in response_json and not session_id: #Handles only from the very first time since a single user can and should only generate one of it. Multiple users is to be seen...
session_id = response_json["session_id"]
if 'data' in response_json:
print("Response:")
for item in response_json["data"]:
print(f"{item[0]}: {item[1]}")
elif 'pending' in response_json:
print("Response:")
for item in response_json["pending"]:
print(f"{item['Front']}: {item['Back']}")
else:
print(f"Unexpected response structure:\n{json.dumps(response_json, indent=4)}")
except requests.exceptions.RequestException as e:
print(f"AnkiApp API Error: {e}")
if response.content:  # Check for content before attempting decode
try:
error_json = response.json()
print(f"Error details: {json.dumps(error_json, indent=4)}")
except json.JSONDecodeError: #Handles empty or corrupted data as a raw text format (utf-8 or others...).
print(f"Raw error response: {response.content}")
except json.JSONDecodeError as e: #If nothing worked, also try converting response's data to raw utf-8 string or even raw data, before continuing the conversation, which will probably halt in errors if done and some new error is introduced, so maybe remove it or adjust...
print(f"Couldn't parse JSON response: {e}. Printing raw content instead...\nResponse content:{response.content}")
# Example usage (single credential). Extract multiple credentials and pass by user
anki_ai_chat(client_ids[0], client_tokens[0], client_versions[0])
</clientVersion></clientToken></clientId></code></section>

        </div>
        
          URL: https://ib.bsb.br/ankiapp-interactively-ai-chat-python
        
      </article>
      <nav class="post-navigation-combined" aria-label="Post navigation"><!-- Tag Selector UI: Let visitors choose a tag for navigation -->
<div class="tag-selector">
  <p>Select a tag for navigation:</p>
  <ul>
    
      
      
        <li>
          <a href="#" class="tag-option" data-tag="scripts-ai">
            scripts>AI
          </a>
        </li>
      
    
  </ul>
</div>

<!-- Pre-generated Navigation Blocks for Each Tag -->

  
  
    
    
      
    
      
        
        
    
    
    

    <!-- Navigation block for tag "scripts>AI"; initially hidden -->
    <div class="nav-group tags" id="tag-nav-scripts-ai" style="display: none;">
      <div class="nav-arrow tags prev">
        
          <a href="/longer-inputs-on-whisper-api/"
             title="Longer inputs on WHISPER API"
             rel="prev">
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAAAXNSR0IArs4c6QAAAxVJREFUaEPt18FqG1cUBuD/nLkzI42UiVInkFLTCAKhS+9KA+3Kq1L8AAHjhR7AKz+ADV55qUfoqhvThTfdmC4KzTKmYJrELshJW9PIlSeKRpqZe88pUtouihvVRknqMNoMzD1zdPXNrzMM4RJ+6BLuGeWm39RdK6VL6VcIlPEo41HG401loJQupS8mUM7pi7md/6p3UtoHUJzf4vVecZb0e0EQfB7H8b0kSeqqummt/eb1buN83SebNsZ8QkQCYHVpaenu/v7+ra2tLRwdHWF1ddWq6hfM3BCRE2b+FcBHACQAHo1E5v9c+5mIhkR0e3z0VQ8LotuqWlXVw/GRmT8QkdMK89McuAOAAfwoIu8z85yIHBPRKRGN1/IAeDx0rul53hivo6psrf2ejDGfEtFOu92u7O3tBWtra2i322g0GhgOh9je3ka325UPax7fCR0iw+lp4aLxr70aeOmgkChTRY3JGSb73EroERD73uB54WpOgdhwZkXNQNQLiVDzOU1yFymAhu+lqZVopIqISQKmPLFS+atHv3A1q8AVQ/lXP/VHRPQx+b6frKysxMvLy1hfX0ez2USv18PCwgLiOEaSJKhWq/jhwQN8dnIfVOS4dsWHqCJ5YREGjBuNEMfd0eTc9WshBqnFYGhRqxrUIoNuLwMT4eb1Cp6dZshywdW6mZzr9QsEPuPmXIhfno3gnGKuEWCUC14MLKoVb1L72+8Zvj3JOl/udZt/S7darUqn0wlarRZ2d3cxPz+PJ8dPsPP1Doq8kIbL+cawjxBIM8MRFAidpBlRpIbhFc55gM2NF5IIQtVBRlRTZgTWZQ4wzvc8spO1NPM4Gr9Wh1bSDIjU98C5E0PIC8OVSX+Rlz08hl+4/LsML6X/menFxcW7BwcHtzY2NvDw8CE21zf/NdMAHskFMs3MT/EfMg3gsTsr02f8byfTo16v3+v3+//f6fGKgXNp5vT5huZbqH4nH+NvwXH6V5bS041mU1FKz8ZxepdSerrRbCpK6dk4Tu9SSk83mk1FKT0bx+ldSunpRrOpuJTSfwBcuImxpyA7XgAAAABJRU5ErkJggg==" alt="Previous in Tag" width="45" height="45" loading="lazy">
          </a>
        
      </div>
      <div class="nav-arrow tags next">
        
          <a href="javascript:void(0)" class="disabled" aria-disabled="true" title="No next in tag">
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAAAXNSR0IArs4c6QAAAxVJREFUaEPt18FqG1cUBuD/nLkzI42UiVInkFLTCAKhS+9KA+3Kq1L8AAHjhR7AKz+ADV55qUfoqhvThTfdmC4KzTKmYJrELshJW9PIlSeKRpqZe88pUtouihvVRknqMNoMzD1zdPXNrzMM4RJ+6BLuGeWm39RdK6VL6VcIlPEo41HG401loJQupS8mUM7pi7md/6p3UtoHUJzf4vVecZb0e0EQfB7H8b0kSeqqummt/eb1buN83SebNsZ8QkQCYHVpaenu/v7+ra2tLRwdHWF1ddWq6hfM3BCRE2b+FcBHACQAHo1E5v9c+5mIhkR0e3z0VQ8LotuqWlXVw/GRmT8QkdMK89McuAOAAfwoIu8z85yIHBPRKRGN1/IAeDx0rul53hivo6psrf2ejDGfEtFOu92u7O3tBWtra2i322g0GhgOh9je3ka325UPax7fCR0iw+lp4aLxr70aeOmgkChTRY3JGSb73EroERD73uB54WpOgdhwZkXNQNQLiVDzOU1yFymAhu+lqZVopIqISQKmPLFS+atHv3A1q8AVQ/lXP/VHRPQx+b6frKysxMvLy1hfX0ez2USv18PCwgLiOEaSJKhWq/jhwQN8dnIfVOS4dsWHqCJ5YREGjBuNEMfd0eTc9WshBqnFYGhRqxrUIoNuLwMT4eb1Cp6dZshywdW6mZzr9QsEPuPmXIhfno3gnGKuEWCUC14MLKoVb1L72+8Zvj3JOl/udZt/S7darUqn0wlarRZ2d3cxPz+PJ8dPsPP1Doq8kIbL+cawjxBIM8MRFAidpBlRpIbhFc55gM2NF5IIQtVBRlRTZgTWZQ4wzvc8spO1NPM4Gr9Wh1bSDIjU98C5E0PIC8OVSX+Rlz08hl+4/LsML6X/menFxcW7BwcHtzY2NvDw8CE21zf/NdMAHskFMs3MT/EfMg3gsTsr02f8byfTo16v3+v3+//f6fGKgXNp5vT5huZbqH4nH+NvwXH6V5bS041mU1FKz8ZxepdSerrRbCpK6dk4Tu9SSk83mk1FKT0bx+ldSunpRrOpuJTSfwBcuImxpyA7XgAAAABJRU5ErkJggg==" alt="No next in Tag" width="45" height="45" loading="lazy">
          </a>
        
      </div>
    </div>
  


<!-- JavaScript to Toggle the Navigation Block Based on Tag Selection -->
<script>
document.addEventListener("DOMContentLoaded", function(){
  var tagLinks = document.querySelectorAll('.tag-option');
  tagLinks.forEach(function(link){
    link.addEventListener('click', function(event){
      event.preventDefault();
      // Hide all pre-generated navigation blocks
      document.querySelectorAll('.nav-group.tags').forEach(function(block){
        block.style.display = 'none';
      });
      // Show the navigation block corresponding to the selected tag
      var tagSlug = this.getAttribute('data-tag');
      var target = document.getElementById('tag-nav-' + tagSlug);
      if(target) {
        target.style.display = 'block';
      }
    });
  });
});
</script>
      </nav>
    </main>
    <footer id="bottom-of-page" class="site-footer">
      <p>
        <a href="#" aria-label="Back to top" class="back-to-top-link">
          <span class="sr-only">Back to top</span>
        </a>
        
        
        
        <a href="https://ib.bsb.br/404" aria-label="404">
          2025-02-01 15:03:17
        </a>
        &hArr;
        <a href="https://github.com/ib-bsb-br/ib-bsb-br.github.io" aria-label="GitHub">&#8505;</a>
        <a href="/" aria-label="Homepage">
          infoBAG
        </a>
        <button id="copyAllButton" aria-label="Copy all code">
          &copy;
        </button>
      </p>
    </footer>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Article",
        "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "https://ib.bsb.br/ankiapp-interactively-ai-chat-python/"
        },
        "headline": "AnkiApp interactively AI chat (python)",
        "description": "",
        "datePublished": "2024-10-20T00:00:00+00:00",
        "dateModified": "2024-10-20T12:35:35+00:00",
        "author": {
          "@type": "Person",
          "name": "Author"
        },
        "publisher": {
          "@type": "Organization",
          "name": "infoBAG"
          
        }
        
      }
    </script>
    <script src="/assets/js/prism.js" defer></script>
    <script src="/assets/js/copy-all-code.js"></script>
  </body>
</html>
