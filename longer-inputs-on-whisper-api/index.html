<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>
    
      Longer inputs on WHISPER API — infoBAG
    
  </title>
  <meta name="title" content="Longer inputs on WHISPER API">
  <meta name="description" content="can't steer unless already moving">
  <meta property="og:title" content="Longer inputs on WHISPER API — infoBAG">
  <meta property="og:description" content="can't steer unless already moving">
  <meta property="og:url" content="https://ib.bsb.br/longer-inputs-on-whisper-api/">
  <meta property="og:type" content="article">
  <meta property="og:site_name" content="infoBAG">
  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Longer inputs on WHISPER API — infoBAG">
  <meta name="twitter:description" content="can't steer unless already moving">
  

  <link rel="canonical" href="https://ib.bsb.br/longer-inputs-on-whisper-api/">
  <link rel="alternate" type="application/rss+xml" title="infoBAG" href="https://ib.bsb.br/rss.xml">

  
    <meta name="keywords" content="scripts>AI">
    
      <meta property="article:tag" content="scripts>AI">
    
  
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  

  <link href="/style.css" rel="stylesheet">
</head>
<body class="post-content-body">
  <header class="header-container">
    <nav aria-label="Main navigation" class="header-content">
      <a href="/" aria-label="Home">
        <img src="/favicon.ico" alt="Home" class="favicon search-link" width="45" height="45" loading="lazy">
      </a>
      <a href="/tags" aria-label="Tags">
        <img src="/assets/Label.gif" alt="Tags" class="favicon search-link" width="45" height="45" loading="lazy">
      </a>
      <a href="/archive" aria-label="Archive">
        <img src="/assets/Loose_Stone_Pile.gif" alt="Archive" class="favicon search-link" width="45" height="45" loading="lazy">
      </a>
      <a href="/events" aria-label="Events">
        <img src="/assets/Paralyse_Rune.gif" alt="Events" class="favicon search-link" width="45" height="45" loading="lazy">
      </a>
      <a href="/archive-created" aria-label="Archive created">
          <img src="/assets/Hole_(Rock).gif" alt="Archive created" class="favicon search-link" width="32" height="32" loading="lazy">
      </a>
      <a href="/rot64" aria-label="rot">
          <img src="/assets/rot.gif" alt="rot" class="favicon search-link" width="32" height="32" loading="lazy">
      </a>
    </nav>
    <h5 class="post-title">
      <a href="#bottom-of-page" aria-label="Go to bottom">
        Longer inputs on WHISPER API
      </a>
    </h5>
    <div class="post-meta">
      <time datetime="2024-07-21T00:00:00+00:00" class="post-date">
        21 Jul 2024
      </time>
      
        <span class="post-updated">
          ↣
          <time datetime="2024-09-20T02:37:06+00:00">20 Sep 2024</time>
        </span>
      
      
        <p class="post-slug">
          Slug: <a href="https://ib.bsb.br/longer-inputs-on-whisper-api" class="tag">longer-inputs-on-whisper-api</a>
        </p>
      
      
        <p class="post-tags">
          Tags:
          
            <a href="https://ib.bsb.br/tags/#scripts-ai" class="tag">scripts>AI</a>
          
        </p>
      
    </div>
    <div class="post-actions">
      <div class="page-stats mt-3" role="status" aria-label="Page statistics">
        <span class="badge bg-primary">
          2498 characters
        </span>
        <span class="separator mx-2" aria-hidden="true">•</span>
        <span class="badge bg-primary">
          302 words
        </span>
      </div>
      <div class="action-buttons d-flex flex-wrap gap-2">
        
          
            <form action="https://github.com/ib-bsb-br/ib-bsb-br.github.io/edit/main/_posts/2024-07-21-longer-inputs-on-whisper-api.md"
                  method="GET"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="d-inline-block">
              <button type="submit" class="btn btn-danger" aria-label="Edit page content">
                <span class="button-text">Improve this page?</span>
                <span class="info-text">aberto.</span>
              </button>
            </form>
          
          <form action="https://github.com/ib-bsb-br/ib-bsb-br.github.io/commits/main/_posts/2024-07-21-longer-inputs-on-whisper-api.md"
                method="GET"
                target="_blank"
                rel="noopener noreferrer"
                class="d-inline-block">
            <button type="submit" class="btn btn-danger" aria-label="View page revision history">
              View revision history
            </button>
          </form>
        
      </div>
    </div>
  </header>
  <main class="content">
    <article class="post-wrapper">
      <div class="post-content-body">
        
<ul><li><a href="#audio-file-limitations"><a href="https://console.groq.com/docs/speech-text#audio-file-limitations">Audio file limitations</a></a></li></ul>
        <h3 id="audio-file-limitations">
    
    
     <a href="#audio-file-limitations">#</a><a href="#" aria-label="Back to top"><a href="https://console.groq.com/docs/speech-text#audio-file-limitations">Audio file limitations</a></a>
        
    
  </h3>
      

<ul>
  <li>File uploads are limited to 25 MB</li>
  <li>The following input file types are supported: <code class="language-plaintext highlighter-rouge">mp3</code>, <code class="language-plaintext highlighter-rouge">mp4</code>, <code class="language-plaintext highlighter-rouge">mpeg</code>, <code class="language-plaintext highlighter-rouge">mpga</code>, <code class="language-plaintext highlighter-rouge">m4a</code>, <code class="language-plaintext highlighter-rouge">wav</code>, and <code class="language-plaintext highlighter-rouge">webm</code></li>
  <li>If a file contains multiple audio tracks, for example a video with dubs, only the first track will be transcribed</li>
</ul>

<p>Whisper will downsample audio to 16,000 Hz mono before transcribing. This preprocessing can be performed client-side to reduce file size and allow longer files to be uploaded to groq. The following ffmpeg command can be used to reduce file size:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><section><code>ffmpeg \
  -i &lt;your file&gt; \
  -ar 16000 \
  -ac 1 \
  -map 0:a: \
  &lt;output file name&gt;
</code></section></div></div>

<p>By default, the Whisper API only supports files that are less than 25 MB. If you have an audio file that is longer than that, you will need to break it up into chunks of 25 MB’s or less or used a compressed audio format. To get the best performance, we suggest that you avoid breaking the audio up mid-sentence as this may cause some context to be lost.</p>

<p>One way to handle this is to use the PyDub open source Python package to split the audio:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><section><code>from pydub import AudioSegment

song = AudioSegment.from_mp3("good_morning.mp3")

# PyDub handles time in milliseconds
ten_minutes = 10 * 60 * 1000

first_10_minutes = song[:ten_minutes]

first_10_minutes.export("good_morning_10.mp3", format="mp3")
</code></section></div></div>

<p>To preserve the context of a file that was split into segments, you can prompt the model with the transcript of the preceding segment. This will make the transcript more accurate, as the model will use the relevant information from the previous audio. The model will only consider the final 224 tokens of the prompt and ignore anything earlier.</p>

      </div>
      
        URL: https://ib.bsb.br/longer-inputs-on-whisper-api
      
    </article>
        <nav class="post-navigation same-tag-navigation" aria-label="Posts sharing the same tag">
          
          
        </nav>
    
    
      
      
      
        
          
          
      
    
    
  </main>
  <footer id="bottom-of-page" class="site-footer">
    <p>
      <a
        href="#"
        aria-label="Back to top"
        class="back-to-top-link">
        <span class="sr-only">Back to top</span>
      </a>
      
      
      
      <a href="https://ib.bsb.br/404" aria-label="404">
        2025-01-28 19:36:04
      </a>
      &hArr;
      <a href="https://github.com/ib-bsb-br/ib-bsb-br.github.io" aria-label="GitHub">&#8505;</a>
      <a href="/" aria-label="Homepage">
        infoBAG
      </a>
      <button id="copyAllButton" aria-label="Copy all code">
        &copy;
      </button>
    </p>
  </footer>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://ib.bsb.br/longer-inputs-on-whisper-api/"
    },
    "headline": "Longer inputs on WHISPER API",
    "description": "",
    "datePublished": "2024-07-21T00:00:00+00:00",
    "dateModified": "2024-09-20T02:37:06+00:00",
    "author": {
      "@type": "Person",
      "name": "Author"
    },
    "publisher": {
      "@type": "Organization",
      "name": "infoBAG"
      
    }
    
  }
  </script>
  <script src="/assets/js/prism.js" defer></script>
  <script src="/assets/js/copy-all-code.js"></script>
</body>
</html>
