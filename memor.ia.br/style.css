:root { color-scheme: light dark; --bg:#fff; --fg:#111; --muted:#777; --border:#ddd; --accent:#111; --ok:#0a7f2e; --warn:#a00; --chip:#f1f1f1; --chipA:#d1e9ff; --focus:#5b9cff; --publish: #8e44ad; }
@media (prefers-color-scheme: dark) {
  :root { --bg:#0c0c0c; --fg:#eee; --muted:#aaa; --border:#222; --accent:#e5e5e5; --ok:#4cc27f; --warn:#ff736a; --chip:#171717; --chipA:#0f3050; --focus:#6aa3ff; --publish: #9b59b6; }
}
*, *::before, *::after { box-sizing: border-box; }
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.5 system-ui,Segoe UI,Roboto,Arial}
.wrap{max-width:920px;margin:0 auto;padding:18px}
.box{border:1px solid var(--border);border-radius:12px;padding:14px;background:rgba(0,0,0,0.02)}
.row{display:flex;gap:.5rem;align-items:center;flex-wrap:wrap}
input[type=text], input[type=search]{flex:1 1 auto;min-width:0;padding:.65rem;border:1px solid var(--border);border-radius:10px;background:transparent;color:var(--fg)}
button{padding:.6rem .9rem;border:0;border-radius:10px;background:var(--accent);color:#fff;cursor:pointer}
button.secondary{background:transparent;color:var(--fg);border:1px solid var(--border)}
button.warn{background:var(--warn)}
button.ok{background:var(--ok)}
button.publish{background:var(--publish); color: #fff;}
ul{list-style:none;padding:0;margin:12px 0}
li{display:flex;align-items:center;gap:.5rem;padding:.45rem .3rem;border-bottom:1px solid var(--border);flex-wrap:wrap}
li:focus{outline:2px solid var(--focus);outline-offset:2px;border-radius:8px}
li.done .txt{text-decoration:line-through;color:var(--muted)}
li.published .txt{font-style:italic; color: var(--publish);}
.txt{flex:1 1 auto;min-width:0;outline:none}
.txt:focus{background:rgba(127,127,127,.1);border-radius:4px;padding:2px}
.meta{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-top:10px}
.small{font-size:.9rem;color:var(--muted)}
.pill{padding:.1rem .5rem;border:1px solid var(--border);border-radius:999px}
.offline{display:none;margin:12px 0;padding:10px;border-radius:10px;background:#fffbcc;color:#333;border:1px solid #e0dca6}
.offline.show{display:block}
.right{margin-left:auto}
.kbd{font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;background:rgba(127,127,127,.18);border:1px solid var(--border);border-bottom-color:rgba(0,0,0,.3);border-radius:6px;padding:0 .3rem}
.toolbar{display:flex;gap:.5rem;flex-wrap:wrap;align-items:center;margin-bottom:.6rem}
.chips{display:flex;gap:.4rem;flex-wrap:wrap}
.chip{padding:.35rem .6rem;border-radius:999px;border:1px solid var(--border);background:var(--chip);cursor:pointer}
.chip.active{background:var(--chipA)}
.drag{cursor:grab;user-select:none;color:var(--muted);padding:0 .4rem}
.count{margin-left:.4rem}
.status{min-height:1.4rem}
.status button{margin-left:.5rem}
.sr{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;}
li > .drag, li > input[type=checkbox], li > button { flex:0 0 auto }
.wrap, .box, .txt, #title, #newtodo, #search, #shareUrl { overflow-wrap:anywhere; word-break:break-word; }
@media (max-width: 620px) {
  .wrap{padding:12px}
  .toolbar .row{flex:1 1 100%}
  .toolbar .row.right{order:2; font-size:.95rem}
}
.box > .row:first-of-type > #title{flex:1 1 320px; min-width:0}
@media (max-width: 820px) { .box > .row:first-of-type > #title{flex:1 1 100%} }
@media (max-width: 620px) {
  .box > .row:first-of-type > #title{flex:1 1 100%}
  .box > .row:first-of-type > button{ flex:1 1 calc(50% - .5rem); min-width:0; }
}
@media (max-width: 420px) { .box > .row:first-of-type > button{flex:1 1 100%} }
#newtodo{flex:2 1 260px; min-width:0}
#search{flex:1 1 180px; min-width:0}
@media (max-width: 620px) {
  .box > .row:nth-of-type(2) > #newtodo, .box > .row:nth-of-type(2) > #search, .chips {flex:1 1 100%}
  #slug, #search, #shareUrl { max-width:100% !important; }
}
@media (max-width: 420px) {
  li{row-gap:.35rem}
  li > button[aria-label="Delete task"]{margin-left:auto}
}

/* PKM Navigation Bar Styles */
.pkm-nav { background: #0c0c0c; padding: 8px 18px; display: flex; gap: 24px; align-items: center; border-bottom: 1px solid #222; }
.pkm-nav a { color: #eee; text-decoration: none; font-size: 14px; font-weight: 500; }
.pkm-nav a:hover { text-decoration: underline; color: #fff; }
.pkm-nav .brand { font-weight: bold; color: #fff; margin-right: auto; }
@media (prefers-color-scheme: light) {
  .pkm-nav { background: #f8f9fa; border-bottom: 1px solid #dee2e6; }
  .pkm-nav a { color: #495057; }
  .pkm-nav .brand { color: #000; }
}
