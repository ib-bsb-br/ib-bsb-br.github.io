---
layout: favicon
slug: events
title: Agenda & Notes
---

<style>
  .notes-section {
    margin-top: 2rem;
    padding-top: 1.5rem;
    border-top: 1px solid #eee;
  }
  @media (prefers-color-scheme: dark) {
    .notes-section {
      border-top-color: #333;
    }
  }
  .notes-list {
    list-style: none;
    padding-left: 0;
  }
  .note-item {
    padding: 0.75rem;
    border-bottom: 1px solid #eee;
  }
  @media (prefers-color-scheme: dark) {
    .note-item {
      border-bottom-color: #333;
    }
  }
  .note-item:last-child {
    border-bottom: none;
  }
  .note-text {
    display: block;
    font-size: 1.1rem;
  }
  .note-meta {
    display: block;
    font-size: 0.85rem;
    color: #888;
    margin-top: 0.25rem;
  }
</style>

<h1 class="post-title">{{ page.title | strip_html | strip }}</h1>

<p>A consolidated view of calendar events and published notes from the productivity system.</p>

<div id="calendar"></div>

<div class="notes-section">
  <h2>Published Notes</h2>
  <div id="notes-container">
    <p>Loading notes...</p>
  </div>
</div>

{% raw %}
<script src="/assets/js/vendor/fullcalendar/index.global.min.js"></script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const calendarEl = document.getElementById('calendar');
    const notesContainer = document.getElementById('notes-container');

    fetch('/assets/data/published_content.json')
      .then(response => {
        if (!response.ok) {
          throw new Error(`Network response was not ok: ${response.statusText}`);
        }
        return response.json();
      })
      .then(data => {
        // Render the FullCalendar with events data
        const calendar = new FullCalendar.Calendar(calendarEl, {
          initialView: 'listMonth',
          events: data.events || [], // Use events array
          headerToolbar: {
            left: 'prev,next today',
            center: 'title',
            right: 'listMonth,dayGridMonth,timeGridWeek'
          },
          navLinks: true,
          dayMaxEvents: true,
        });
        calendar.render();

        // Render the published notes
        const notes = data.notes || [];
        if (notes.length > 0) {
          notesContainer.innerHTML = ''; // Clear "Loading..." message
          const notesList = document.createElement('ul');
          notesList.className = 'notes-list';
          notes.forEach(note => {
            const item = document.createElement('li');
            item.className = 'note-item';

            const textSpan = document.createElement('span');
            textSpan.className = 'note-text';
            textSpan.textContent = note.text;

            const metaSpan = document.createElement('span');
            metaSpan.className = 'note-meta';
            const updatedDate = new Date(note.updated_at);
            metaSpan.textContent = `Published on: ${updatedDate.toLocaleDateString()}`;

            item.appendChild(textSpan);
            item.appendChild(metaSpan);
            notesList.appendChild(item);
          });
          notesContainer.appendChild(notesList);
        } else {
          notesContainer.innerHTML = '<p>No notes have been published yet.</p>';
        }
      })
      .catch(error => {
        console.error('Error loading content:', error);
        calendarEl.innerHTML = '<p style="color:red;">Could not load calendar events.</p>';
        notesContainer.innerHTML = '<p style="color:red;">Could not load published notes.</p>';
      });
  });
</script>
{% endraw %}
