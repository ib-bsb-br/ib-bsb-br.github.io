<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
      
        Windows 11 within an Incus VM - infoBAG
      
    </title>
    <meta name="title" content="Windows 11 within an Incus VM - infoBAG" />
    <meta name="description" content="">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://ib.bsb.br/windows11-incus/">
    <meta property="og:title" content="Windows 11 within an Incus VM - infoBAG">
    <meta property="og:description" content="">
    <meta property="og:image" content="/favicon.ico">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://ib.bsb.br/windows11-incus/">
    <meta name="twitter:title" content="Windows 11 within an Incus VM - infoBAG">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="/favicon.ico">
    <link rel="canonical" href="https://ib.bsb.br/windows11-incus/">
    <link rel="alternate" type="application/rss+xml" title="infoBAG" href="https://ib.bsb.br/rss.xml">
    
      <meta name="keywords" content="scratchpad">
      
        <meta property="article:tag" content="scratchpad">
      
    
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    
    <link rel="stylesheet" href="/style.css">
  </head>
  <body class="post-content-body">
    <header class="header-container">
      <nav aria-label="Main navigation" class="header-content">
        <a href="/" aria-label="Home">
          <img src="/favicon.ico" alt="Home" class="favicon search-link" width="32" height="32" loading="lazy">
        </a>
        <a href="/tags" aria-label="Tags">
          <img src="/assets/Label.gif" alt="Tags" class="favicon search-link" width="32" height="32" loading="lazy">
        </a>
        <a href="/send" aria-label="send">
          <img src="/assets/rot.gif" alt="send" class="favicon search-link" width="32" height="32" loading="lazy">
        </a> 
        <a href="/created" aria-label="archive created">
          <img src="/assets/Loose_Stone_Pile.gif" alt="archive created" class="favicon search-link" width="32" height="32" loading="lazy">
        </a>
        <a href="/events" aria-label="Events">
          <img src="/assets/Paralyse_Rune.gif" alt="Events" class="favicon search-link" width="32" height="32" loading="lazy">
        </a>
        <a href="/modified" aria-label="archive modified">
          <img src="/assets/Hole_(Rock).gif" alt="archive modified" class="favicon search-link" width="32" height="32" loading="lazy">
        </a>
    </nav>
      <h5 class="post-title">
        <a href="#bottom-of-page" aria-label="Go to bottom">
          Windows 11 within an Incus VM
        </a>
      </h5>
      <div class="post-meta">
        <time datetime="2025-04-14T00:00:00+00:00" class="post-date">
          14 Apr 2025
        </time>
        
          <span class="post-updated">
            ↣
            <time datetime="2025-05-13T11:18:01+00:00">
              13 May 2025
            </time>
          </span>
        
        
          <p class="post-slug">
            Slug: <a href="https://ib.bsb.br/windows11-incus" class="tag">windows11-incus</a>
          </p>
        
        
          <p class="post-tags">
            Tags:
            
              <a href="https://ib.bsb.br/tags/#scratchpad" class="tag">scratchpad</a>
            
          </p>
        
      </div>
      <div class="post-actions">
        <div class="page-stats mt-3" role="status" aria-label="Page statistics">
      
      <span class="badge bg-primary">
        13843 characters
      </span>
        <span class="separator mx-2" aria-hidden="true">•</span>
        <span class="badge bg-primary">
        1876 words
      </span>
      </div>
        <div class="action-buttons d-flex flex-wrap gap-2">
          
            
              <form action="https://github.com/ib-bsb-br/ib-bsb-br.github.io/edit/main/_posts/2025-04-14-windows11-incus.md"
                    method="GET"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="d-inline-block">
                <button type="submit" class="btn btn-danger" aria-label="Edit page content">
                  <span class="button-text">Improve this page?</span>
                  <span class="info-text">aberto.</span>
                </button>
              </form>
            
            <form action="https://github.com/ib-bsb-br/ib-bsb-br.github.io/commits/main/_posts/2025-04-14-windows11-incus.md"
                  method="GET"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="d-inline-block">
              <button type="submit" class="btn btn-danger" aria-label="View page revision history">
                View revision history
              </button>
            </form>
          
        </div>
      </div>
    </header>
    <main class="content">
      <article class="post-wrapper">
        <div class="post-content-body">
          
<ul><li><a href="#1-prerequisites"><strong>1. Prerequisites</strong></a></li><li><a href="#2-install-and-initialize-incus-if-not-already-done"><strong>2. Install and Initialize Incus (If Not Already Done)</strong></a></li><li><a href="#3-create-and-configure-the-windows-11-vm-instance"><strong>3. Create and Configure the Windows 11 VM Instance</strong></a></li><li><a href="#4-start-the-vm-and-install-windows-11"><strong>4. Start the VM and Install Windows 11</strong></a></li><li><a href="#5-install-virtio-drivers--guest-tools-post-installation"><strong>5. Install VirtIO Drivers &amp; Guest Tools Post-Installation</strong></a></li><li><a href="#6-final-steps--troubleshooting"><strong>6. Final Steps &amp; Troubleshooting</strong></a></li></ul>
          <p>Running Windows 11 Enterprise within an Incus VM can be essential for various purposes, such as application compatibility testing, software development in a clean Windows environment, accessing specific Windows-only tools, creating isolated environments for security research, or general desktop use.</p>

<p>This guide focuses on using Incus commands for VM creation and management. Incus abstracts many complexities of direct hypervisor interaction, offering benefits like easier VM lifecycle management, simplified configuration through profiles and instance settings, built-in snapshot capabilities, and streamlined network and storage setup.</p>

<p><strong>Assumptions:</strong></p>

<ul>
  <li>You have a functional installation of Incus on your Linux host system.</li>
  <li>Your Incus installation has been initialized (e.g., via <code class="language-plaintext highlighter-rouge">sudo incus admin init</code>) with at least one storage pool and a network bridge configured.</li>
  <li>Your host system’s CPU supports hardware virtualization (Intel VT-x or AMD-V / AMD-SVM), and these features are enabled in the BIOS/UEFI.</li>
  <li>Your host system ideally has TPM 2.0 capabilities and Secure Boot enabled in the BIOS/UEFI for full Windows 11 compatibility.</li>
  <li>You possess sufficient hardware resources (CPU processing power, adequate RAM, and ample Disk Space) to comfortably run both the host Linux system and the Windows 11 Enterprise guest VM.</li>
  <li>You have a basic understanding of navigating the Linux command line and possess <code class="language-plaintext highlighter-rouge">sudo</code> privileges or are a member of the <code class="language-plaintext highlighter-rouge">incus-admin</code> group for managing Incus.</li>
</ul>
  <h2 id="1-prerequisites">
    
    
     <a href="#1-prerequisites">#</a><a href="#" aria-label="Back to top"><strong>1. Prerequisites</strong></a>
        
    
  </h2>
      

<p>Before embarking on the installation process, ensure all the following prerequisites are met:</p>

<ul>
  <li><strong>Windows 11 Enterprise Installation ISO:</strong> You must possess a legitimate <strong>Windows_11_Enterprise_x64.iso</strong> file (or a similarly named ISO image) containing the 64-bit installation media for Windows 11 Enterprise.
    <ul>
      <li><strong>Licensing:</strong> Ensure you have a valid license for Windows 11 Enterprise. Evaluation versions might be available from the Microsoft Evaluation Center.</li>
      <li>This guide cannot provide this copyrighted software. <strong>Crucially, remember the exact, full path to this ISO file on your host Linux system.</strong></li>
    </ul>
  </li>
  <li><strong>VirtIO Drivers ISO (Essential for Performance):</strong> For optimal disk, network, and guest integration performance, download the latest stable <strong>virtio-win.iso</strong> file. This ISO contains paravirtualized drivers and guest tools. Obtain it from the official Fedora project repository: <a href="https://fedorapeople.org/groups/virt/virtio-win/direct-downloads/stable-virtio/virtio-win.iso">https://fedorapeople.org/groups/virt/virtio-win/direct-downloads/stable-virtio/virtio-win.iso</a>. <strong>Remember the exact, full path to this downloaded file as well.</strong></li>
  <li><strong>Hardware Virtualization Enabled (Essential):</strong> Modern CPUs include hardware features (Intel VT-x or AMD-V / AMD-SVM) that KVM (and thus Incus VMs) use for acceleration. Verify it’s enabled in your system’s BIOS/UEFI settings and detectable by Linux:
    <div class="language-bash highlighter-rouge"><div class="highlight"><section><code>egrep <span class="nt">-c</span> <span class="s1">'(vmx|svm)'</span> /proc/cpuinfo
</code></section></div>    </div>
    <p>The output <em>must</em> be 1 or greater. If 0, enable “Virtualization Technology,” “VT-x,” “AMD-V,” or “SVM Mode” in your BIOS/UEFI.</p>
  </li>
  <li><strong>TPM 2.0 Module on Host (Highly Recommended for Windows 11):</strong> Windows 11 officially requires TPM 2.0.
    <ul>
      <li>Ensure your host machine has a TPM 2.0 module and it’s enabled in the BIOS/UEFI (often listed as “Security Chip,” “TPM Device,” etc.).</li>
    </ul>
  </li>
  <li><strong>Secure Boot on Host (Recommended for Windows 11):</strong> For enhanced security, ensure Secure Boot is enabled in your host’s BIOS/UEFI settings if you intend to use it for the VM.</li>
  <li><strong>Sufficient System Resources:</strong>
    <ul>
      <li><strong>RAM:</strong> Windows 11 requires a minimum of 4GB RAM. For Enterprise and smooth operation, allocate at least <strong>8GB or more</strong> to the VM. Ensure your host has enough <em>additional</em> RAM.</li>
      <li><strong>CPU:</strong> A modern multi-core 64-bit processor. Allocate at least <strong>2 vCPUs</strong> to the VM, with 4 or more recommended.</li>
      <li><strong>Disk Space:</strong> Windows 11 requires a minimum of 64GB. A virtual disk size of <strong>100GB or more is strongly recommended</strong>. Ensure your Incus storage pool has sufficient free space.</li>
    </ul>
  </li>
</ul>
  <h2 id="2-install-and-initialize-incus-if-not-already-done">
    
    
     <a href="#2-install-and-initialize-incus-if-not-already-done">#</a><a href="#" aria-label="Back to top"><strong>2. Install and Initialize Incus (If Not Already Done)</strong></a>
        
    
  </h2>
      

<p>If Incus is not yet installed and configured, follow these general steps.</p>

<ol>
  <li><strong>Install Incus:</strong> Use your Linux distribution’s package manager.
    <div class="language-bash highlighter-rouge"><div class="highlight"><section><code><span class="c"># Example using APT (Debian, Ubuntu, Mint derivatives)</span>
<span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>incus
</code></section></div>    </div>
    <p>For other distributions, refer to the official Incus documentation: <a href="https://linuxcontainers.org/incus/docs/main/installing/">https://linuxcontainers.org/incus/docs/main/installing/</a>.</p>
  </li>
  <li><strong>Add User to <code class="language-plaintext highlighter-rouge">incus-admin</code> Group (Recommended):</strong> To manage Incus without <code class="language-plaintext highlighter-rouge">sudo</code> for every command:
    <div class="language-bash highlighter-rouge"><div class="highlight"><section><code><span class="nb">sudo </span>usermod <span class="nt">-aG</span> incus-admin <span class="nv">$USER</span>
</code></section></div>    </div>
    <p>You <strong>must log out completely and log back in</strong> for this group change to take effect. Otherwise, continue using <code class="language-plaintext highlighter-rouge">sudo incus ...</code>.</p>
  </li>
  <li><strong>Initialize Incus Daemon (If First Time):</strong> If this is a new Incus setup, initialize the daemon:
    <div class="language-bash highlighter-rouge"><div class="highlight"><section><code><span class="nb">sudo </span>incus admin init
</code></section></div>    </div>
    <p>Follow the prompts. For storage, <code class="language-plaintext highlighter-rouge">dir</code> is simple for beginners, while <code class="language-plaintext highlighter-rouge">zfs</code> or <code class="language-plaintext highlighter-rouge">btrfs</code> offer advanced features. For networking, creating a new bridge (e.g., <code class="language-plaintext highlighter-rouge">incusbr0</code>) with NAT is common. This is a one-time setup for the Incus service.</p>
  </li>
  <li><strong>Verify Incus:</strong>
    <div class="language-bash highlighter-rouge"><div class="highlight"><section><code>incus <span class="nt">--version</span>
incus profile list
incus storage list
incus network list
</code></section></div>    </div>
  </li>
</ol>
  <h2 id="3-create-and-configure-the-windows-11-vm-instance">
    
    
     <a href="#3-create-and-configure-the-windows-11-vm-instance">#</a><a href="#" aria-label="Back to top"><strong>3. Create and Configure the Windows 11 VM Instance</strong></a>
        
    
  </h2>
      

<p>We’ll create an empty VM instance, then configure its properties and devices. Let’s name our VM <code class="language-plaintext highlighter-rouge">win11-ent</code>.</p>

<ol>
  <li><strong>Create an Empty VM Instance:</strong>
    <div class="language-bash highlighter-rouge"><div class="highlight"><section><code>incus init win11-ent <span class="nt">--empty</span> <span class="nt">--vm</span>
</code></section></div>    </div>
    <p>This command creates a new virtual machine instance named <code class="language-plaintext highlighter-rouge">win11-ent</code> without any pre-installed OS.</p>
  </li>
  <li><strong>Configure VM Resources and Features:</strong>
    <ul>
      <li><strong>CPU and Memory:</strong>
        <div class="language-bash highlighter-rouge"><div class="highlight"><section><code>incus config <span class="nb">set </span>win11-ent limits.cpu 4      <span class="c"># Allocate 4 vCPUs (adjust as needed)</span>
incus config <span class="nb">set </span>win11-ent limits.memory 8GB <span class="c"># Allocate 8GB RAM (adjust as needed)</span>
</code></section></div>        </div>
      </li>
      <li><strong>TPM (Trusted Platform Module):</strong> Essential for Windows 11.
        <div class="language-bash highlighter-rouge"><div class="highlight"><section><code>incus config <span class="nb">set </span>win11-ent security.tpm<span class="o">=</span><span class="nb">true</span>
</code></section></div>        </div>
        <p>This enables an emulated TPM device for the VM.</p>
      </li>
      <li><strong>Secure Boot:</strong> Recommended for Windows 11.
        <div class="language-bash highlighter-rouge"><div class="highlight"><section><code>incus config <span class="nb">set </span>win11-ent security.secureboot<span class="o">=</span><span class="nb">true</span>
</code></section></div>        </div>
        <p><em>Note: This requires Secure Boot to be supported and properly configured on your host system and by Incus. If Windows 11 setup fails specifically due to Secure Boot and host-side issues are complex to resolve, you might temporarily set this to <code class="language-plaintext highlighter-rouge">false</code> for installation, but it’s not recommended for production or secure environments.</em></p>
      </li>
    </ul>
  </li>
  <li><strong>Add Virtual Disk for Windows Installation:</strong>
Replace <code class="language-plaintext highlighter-rouge">&lt;your_storage_pool_name&gt;</code> with the name of your Incus storage pool (e.g., <code class="language-plaintext highlighter-rouge">default</code> if you used that during <code class="language-plaintext highlighter-rouge">incus admin init</code>).
    <div class="language-bash highlighter-rouge"><div class="highlight"><section><code>incus config device add win11-ent root disk <span class="nv">pool</span><span class="o">=</span>&lt;your_storage_pool_name&gt; <span class="nv">size</span><span class="o">=</span>100GB
</code></section></div>    </div>
    <p>This adds a 100GB virtual disk to the VM, which will serve as its primary storage.</p>
  </li>
  <li><strong>Attach Installation ISOs:</strong>
Replace <code class="language-plaintext highlighter-rouge">/path/to/your/...</code> with the actual, full paths to your ISO files.
    <ul>
      <li><strong>Windows 11 Installation ISO:</strong>
        <div class="language-bash highlighter-rouge"><div class="highlight"><section><code>incus config device add win11-ent install-iso disk <span class="nb">source</span><span class="o">=</span>/path/to/your/Windows_11_Enterprise_x64.iso boot.priority<span class="o">=</span>10
</code></section></div>        </div>
        <p>The <code class="language-plaintext highlighter-rouge">boot.priority=10</code> tells Incus to attempt booting from this virtual CD-ROM first.</p>
      </li>
      <li><strong>VirtIO Drivers ISO:</strong>
        <div class="language-bash highlighter-rouge"><div class="highlight"><section><code>incus config device add win11-ent virtio-iso disk <span class="nb">source</span><span class="o">=</span>/path/to/your/virtio-win.iso
</code></section></div>        </div>
        <p>This attaches the VirtIO driver ISO, which will be needed during and after OS installation.</p>
      </li>
    </ul>
  </li>
</ol>
  <h2 id="4-start-the-vm-and-install-windows-11">
    
    
     <a href="#4-start-the-vm-and-install-windows-11">#</a><a href="#" aria-label="Back to top"><strong>4. Start the VM and Install Windows 11</strong></a>
        
    
  </h2>
      

<p>Now, launch the VM and proceed with the Windows 11 installation.</p>

<ol>
  <li><strong>Start the VM:</strong>
    <div class="language-bash highlighter-rouge"><div class="highlight"><section><code>incus start win11-ent
</code></section></div>    </div>
  </li>
  <li><strong>Access the VM Console:</strong>
This will open a graphical console window (usually SPICE-based).
    <div class="language-bash highlighter-rouge"><div class="highlight"><section><code>incus console win11-ent <span class="nt">--type</span><span class="o">=</span>vga
</code></section></div>    </div>
  </li>
  <li><strong>Windows Setup Process:</strong>
    <ul>
      <li>The VM should boot from the attached Windows 11 ISO. You’ll see a prompt like “Press any key to boot from CD or DVD…”.</li>
      <li>Follow the on-screen prompts: select language, time format, and keyboard input.</li>
      <li>Click “Install now”.</li>
      <li>Enter your Windows 11 Enterprise product key or choose “I don’t have a product key” for later activation.</li>
      <li>Select the edition of Windows 11 Enterprise.</li>
      <li>Accept the license terms.</li>
      <li>Choose “Custom: Install Windows only (advanced)”.</li>
      <li><strong>Disk Selection / VirtIO Driver Loading (Crucial Step):</strong>
        <ul>
          <li>At the “Where do you want to install Windows?” screen, the 100GB virtual disk might not be visible initially. This is because Windows 11 doesn’t have built-in VirtIO storage drivers, which Incus VMs typically use for best performance.</li>
          <li>Click “<strong>Load driver</strong>”.</li>
          <li>Click “<strong>Browse</strong>”.</li>
          <li>Navigate to the attached VirtIO ISO (it will appear as a CD/DVD drive, e.g., D: or E:).</li>
          <li>Locate the storage driver folder. This is typically <code class="language-plaintext highlighter-rouge">viostor\w11\amd64</code> (for VirtIO SCSI/block). If using a different VirtIO controller type, the path might vary slightly (e.g., <code class="language-plaintext highlighter-rouge">vioscsi\w11\amd64</code>). Select the <code class="language-plaintext highlighter-rouge">amd64</code> subfolder for 64-bit Windows.</li>
          <li>Click “OK”. Windows should find the “Red Hat VirtIO SCSI controller” (or similar). Select it and click “Next”.</li>
          <li>The 100GB virtual disk (e.g., “Drive 0 Unallocated Space”) should now appear. Select it.</li>
          <li>Click “Next”. Windows will partition and format the drive and begin copying files.</li>
        </ul>
      </li>
      <li><strong>Reboots and Configuration:</strong> The VM will reboot several times. Incus should automatically boot from the virtual hard disk after the initial installation phase.</li>
      <li>Complete the Out-Of-Box Experience (OOBE): select region, keyboard layout, name your PC, set up user accounts, configure privacy settings, etc.</li>
    </ul>
  </li>
</ol>

<p><strong>Pro Tip:</strong> For managing multiple similar VMs, consider using Incus profiles. You can define common settings (CPU, memory, TPM, Secure Boot, even base devices) in a profile and apply it when creating new VMs: <code class="language-plaintext highlighter-rouge">incus init &lt;vm_name&gt; --empty --vm -p &lt;your_profile_name&gt;</code>.</p>
  <h2 id="5-install-virtio-drivers--guest-tools-post-installation">
    
    
     <a href="#5-install-virtio-drivers--guest-tools-post-installation">#</a><a href="#" aria-label="Back to top"><strong>5. Install VirtIO Drivers &amp; Guest Tools Post-Installation</strong></a>
        
    
  </h2>
      

<p>Even if Windows 11 installed some basic drivers, installing the full VirtIO guest tools package from the VirtIO ISO is highly recommended for optimal performance and features.</p>

<ol>
  <li><strong>Log In to Windows 11:</strong> Access your newly installed Windows 11 Enterprise VM.</li>
  <li><strong>Install Guest Tools:</strong>
    <ul>
      <li>Open File Explorer. You should see the virtual CD drive containing the VirtIO drivers (e.g., labeled “virtio-win”).</li>
      <li>Run the <strong><code class="language-plaintext highlighter-rouge">virtio-win-guest-tools.exe</code></strong> installer from the root of the VirtIO ISO. This application will install all relevant VirtIO drivers (Network: NetKVM, Disk/SCSI: viostor/vioscsi, Memory Ballooning: virtio-balloon, Input: vioinput, GPU: viogpu if applicable) and guest services.</li>
      <li>Follow the installer prompts. A reboot will likely be required.</li>
    </ul>
  </li>
  <li><strong>Reboot the VM:</strong> After the installation is complete, <strong>reboot</strong> the Windows 11 VM to ensure all drivers and services are loaded correctly.</li>
</ol>

<p><strong>Understanding VirtIO Benefits:</strong>
Paravirtualized drivers like VirtIO provide an optimized communication path between the guest OS and the KVM hypervisor, resulting in:</p>
<ul>
  <li><strong>Faster Disk I/O:</strong> Higher throughput and lower latency.</li>
  <li><strong>Improved Network Performance:</strong> Higher throughput and lower latency.</li>
  <li><strong>Reduced CPU Overhead:</strong> Less host CPU time spent emulating generic hardware.</li>
  <li><strong>Memory Ballooning:</strong> Allows the host to reclaim unused memory from the guest dynamically.</li>
  <li><strong>Better Guest Integration:</strong> Features like shared clipboard (if SPICE agent is included and console supports it), stable time, etc.</li>
</ul>
  <h2 id="6-final-steps--troubleshooting">
    
    
     <a href="#6-final-steps--troubleshooting">#</a><a href="#" aria-label="Back to top"><strong>6. Final Steps &amp; Troubleshooting</strong></a>
        
    
  </h2>
      

<p>With Windows 11 Enterprise installed and optimized:</p>

<ul>
  <li><strong>Detach Installation ISOs (Optional):</strong> Once Windows is stable, you can detach the ISOs if desired.
    <div class="language-bash highlighter-rouge"><div class="highlight"><section><code>incus stop win11-ent <span class="c"># Stop the VM first</span>
incus config device remove win11-ent install-iso
<span class="c"># incus config device remove win11-ent virtio-iso # Keep if you might need to repair/reinstall tools</span>
incus start win11-ent
</code></section></div>    </div>
  </li>
  <li><strong>Windows Updates &amp; Security:</strong>
    <ul>
      <li>Connect your VM to the internet (Incus default NAT bridge usually provides this).</li>
      <li>Run Windows Update to install all critical updates and security patches.</li>
      <li>Configure Windows Security (Defender) or install preferred third-party security software.</li>
    </ul>
  </li>
  <li><strong>Install Applications:</strong> Install your required software within the VM.</li>
  <li><strong>Common Troubleshooting Tips:</strong>
    <ul>
      <li><strong>Permission Denied (Incus commands):</strong> Ensure your user is in the <code class="language-plaintext highlighter-rouge">incus-admin</code> group and has re-logged in, or use <code class="language-plaintext highlighter-rouge">sudo incus ...</code>.</li>
      <li><strong>VM Fails to Start/Boot:</strong> Check VM logs: <code class="language-plaintext highlighter-rouge">incus info win11-ent</code> (for current state), <code class="language-plaintext highlighter-rouge">incus operation log &lt;UUID&gt;</code> (for failed operations). Check host system logs (<code class="language-plaintext highlighter-rouge">dmesg</code>, <code class="language-plaintext highlighter-rouge">journalctl -u incus.service</code>).</li>
      <li><strong>TPM/Secure Boot Issues:</strong> If <code class="language-plaintext highlighter-rouge">security.tpm=true</code> or <code class="language-plaintext highlighter-rouge">security.secureboot=true</code> cause boot failures, double-check host BIOS/UEFI settings. Ensure your Incus version fully supports these features for Windows VMs.</li>
      <li><strong>Cannot Find ISO File:</strong> Double-check the <code class="language-plaintext highlighter-rouge">source=</code> path in <code class="language-plaintext highlighter-rouge">incus config device add ...</code> commands. Use absolute paths.</li>
      <li><strong>No Network/Disk Access in VM (Post-Install):</strong> Ensure VirtIO drivers are correctly installed (check Device Manager in Windows). Re-run <code class="language-plaintext highlighter-rouge">virtio-win-guest-tools.exe</code> if necessary.</li>
      <li><strong>Console/Display Issues:</strong> Ensure your host has necessary packages for graphical console (e.g., <code class="language-plaintext highlighter-rouge">spice-client-gtk</code> or similar).</li>
      <li><strong>Windows Activation:</strong> Ensure network access for activation. Use a valid product key or appropriate volume licensing method.</li>
    </ul>
  </li>
  <li><strong>Incus Advanced Management:</strong>
    <ul>
      <li><strong>Snapshots:</strong> <code class="language-plaintext highlighter-rouge">incus snapshot create win11-ent &lt;snapshot_name&gt;</code>, <code class="language-plaintext highlighter-rouge">incus snapshot restore win11-ent &lt;snapshot_name&gt;</code>, <code class="language-plaintext highlighter-rouge">incus delete win11-ent/&lt;snapshot_name&gt;</code>.</li>
      <li><strong>File Transfer:</strong> <code class="language-plaintext highlighter-rouge">incus file push &lt;source_path&gt; win11-ent/&lt;destination_path_in_vm&gt;</code>, <code class="language-plaintext highlighter-rouge">incus file pull win11-ent/&lt;source_path_in_vm&gt; &lt;destination_path&gt;</code> (requires guest agent from VirtIO tools).</li>
      <li><strong>Execute Commands:</strong> <code class="language-plaintext highlighter-rouge">incus exec win11-ent -- cmd.exe /c "ipconfig"</code> (requires guest agent).</li>
    </ul>
  </li>
</ul>

        </div>
        
          URL: https://ib.bsb.br/windows11-incus
        
      </article>
      <nav class="post-navigation-combined" aria-label="Post navigation">
        <!-- Chronological Navigation (always visible at 40vh) -->
        
          <div class="nav-arrow chronological prev">
            <a href="/internet-connection-sharing-ics-within-windows-11/" title="Internet Connection Sharing (ICS) within Windows 11" rel="prev">
              <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAAAXNSR0IArs4c6QAAAxVJREFUaEPt18FqG1cUBuD/nLkzI42UiVInkFLTCAKhS+9KA+3Kq1L8AAHjhR7AKz+ADV55qUfoqhvThTfdmC4KzTKmYJrELshJW9PIlSeKRpqZe88pUtouihvVRknqMNoMzD1zdPXNrzMM4RJ+6BLuGeWm39RdK6VL6VcIlPEo41HG401loJQupS8mUM7pi7md/6p3UtoHUJzf4vVecZb0e0EQfB7H8b0kSeqqummt/eb1buN83SebNsZ8QkQCYHVpaenu/v7+ra2tLRwdHWF1ddWq6hfM3BCRE2b+FcBHACQAHo1E5v9c+5mIhkR0e3z0VQ8LotuqWlXVw/GRmT8QkdMK89McuAOAAfwoIu8z85yIHBPRKRGN1/IAeDx0rul53hivo6psrf2ejDGfEtFOu92u7O3tBWtra2i322g0GhgOh9je3ka325UPax7fCR0iw+lp4aLxr70aeOmgkChTRY3JGSb73EroERD73uB54WpOgdhwZkXNQNQLiVDzOU1yFymAhu+lqZVopIqISQKmPLFS+atHv3A1q8AVQ+lXP/VHRPQx+b6frKysxMvLy1hfX0ez2USv18PCwgLiOEaSJKhWq/jhwQN8dnIfVOS4dsWHqCJ5YREGjBuNEMfd0eTc9WshBqnFYGhRqxrUIoNuLwMT4eb1Cp6dZshywdW6mZzr9QsEPuPmXIhfno3gnGKuEWCUC14MLKoVb1L72+8Zvj3JOl/udZt/S7darUqn0wlarRZ2d3cxPz+PJ8dPsPP1Doq8kIbL+cawjxBIM8MRFAidpBlRpIbhFc55gM2NF5IIQtVBRlRTZgTWZQ4wzvc8spO1NPM4Gr9Wh1bSDIjU98C5E0PIC8OVSX+Rlz08hl+4/LsML6X/menFxcW7BwcHtzY2NvDw8CE21zf/NdMAHskFMs3MT/EfMg3gsTsr02f8byfTo16v3+v3+//f6fGKgXNp5vT5huZbqH4nH+NvwXH6V5bS041mU1FKz8ZxepdSerrRbCpK6dk4Tu9SSk83mk1FKT0bx+ldSunpRrOpuJTSfwBcuImxpyA7XgAAAABJRU5ErkJggg==" alt="Previous article" width="45" height="45" loading="lazy">
            </a>
          </div>
        
        
          <div class="nav-arrow chronological next">
            <a href="/sysprep/" title="Requirements for sysprep.bat on Windows (Server 2003 + Win11)" rel="next">
              <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAAAXNSR0IArs4c6QAAAwdJREFUaEPtl01rG1cUht9z7p070ijKWLVS3I9YULtNMBRn2UIXxZtuvCjedNWfoKVXBvsHeOUfoIUx5AeY0pVXXSR052UxBJSi0kDiRplII83HvadI9CMtOFjCmBjubC7cc8+Zc555eYdLuIEP3cCe4Zu+rq/mSXvSbyHg5eHl4eVxXRrwpD3p+Qh4n56P2+xZnvTszC7MCAAUF0XfOdJa62+IaCeO40GSJA/zPP8RwB9vDjBtWmv9JRE5ImpZawdVpbo58CkAIyJnIrLAzEvOuXNm/h3AfQDOAGdj5z5m5gXn3G9ENCKilckaiDwpiFZEpCoiTyYrM3/knOtXmHs58BkABvCLc+4DZl6cxIjoh4ODA728vIzt7W2sra09PT4+fgTgQES4LMvHZIy5LyI/f/dJvfK6FKMJqAdqmBS2ZgWINY9zJyZ1whUiRJrTfmGjybSxUemwcFEmghqT1UxlUrpQEXD7jRq3NWelEz10okIi1AJOX+U2EgALgUrT0kVnmcKvQ+uazSZvbW2hWq2i3++j3W5jf38f6+vrebvdHovI5pT09+vN7teLYev990K8GpQYjS1u1TQqhnHez6EU4cM7FTw7z5AXDo16ACcyPRsaxp2FEM9ejKd7zUaIYVpiOCpRq2rUIo0XLzMwEZaaFTzvZ8hyh/iWnu69fF1AAoOfFr/A5w8eYDQaIY5jJEmC09NTNBoNdLtd7O3t4ejoCIeHh8k/pL8KUSkCZcg6hCLDjLk2ufYGpRuXAuOMYiosQiDNNEcQILQuzYgi0QxVWKuAMtcqJPdXDaKaMMOUNrOAtoFSVE5jaaY4mtQPS5dmQPS8WkdfGReYgDe/3cTdpbvo9XrY2NhAp9NBq9XKO53Ov6T/r2mlVBeX0DSAMzeHppm5h7doemdvR99buYfd3V2srq4+PTk5+a+mr9CmrqTU3+5Rr9cHg8HgYve4krddbZGb5dOXmf2d+7n4pi9D4LrOeHl40v42fl0a8KQ96fkIeJ+ej9vsWZ707Mzmy/Ck5+M2e9afhmuAz1BhwewAAAAASUVORK5CYII=" alt="Next article" width="45" height="45" loading="lazy">
            </a>
          </div>
        
            
            
              
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
                  
                  
              
              
              
              <!-- Navigation block for tag "scratchpad"; default display for the first tag -->
              <div class="nav-group tags" id="tag-nav-scratchpad" style="display: block;">
                <div class="nav-arrow tags prev">
                  
                    <a href="/internet-connection-sharing-ics-within-windows-11/" title="Internet Connection Sharing (ICS) within Windows 11" rel="prev">
                      <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAAAXNSR0IArs4c6QAAAxVJREFUaEPt18FqG1cUBuD/nLkzI42UiVInkFLTCAKhS+9KA+3Kq1L8AAHjhR7AKz+ADV55qUfoqhvThTfdmC4KzTKmYJrELshJW9PIlSeKRpqZe88pUtouihvVRknqMNoMzD1zdPXNrzMM4RJ+6BLuGeWm39RdK6VL6VcIlPEo41HG401loJQupS8mUM7pi7md/6p3UtoHUJzf4vVecZb0e0EQfB7H8b0kSeqqummt/eb1buN83SebNsZ8QkQCYHVpaenu/v7+ra2tLRwdHWF1ddWq6hfM3BCRE2b+FcBHACQAHo1E5v9c+5mIhkR0e3z0VQ8LotuqWlXVw/GRmT8QkdMK89McuAOAAfwoIu8z85yIHBPRKRGN1/IAeDx0rul53hivo6psrf2ejDGfEtFOu92u7O3tBWtra2i322g0GhgOh9je3ka325UPax7fCR0iw+lp4aLxr70aeOmgkChTRY3JGSb73EroERD73uB54WpOgdhwZkXNQNQLiVDzOU1yFymAhu+lqZVopIqISQKmPLFS+atHv3A1q8AVQ+lXP/VHRPQx+b6frKysxMvLy1hfX0ez2USv18PCwgLiOEaSJKhWq/jhwQN8dnIfVOS4dsWHqCJ5YREGjBuNEMfd0eTc9WshBqnFYGhRqxrUIoNuLwMT4eb1Cp6dZshywdW6mZzr9QsEPuPmXIhfno3gnGKuEWCUC14MLKoVb1L72+8Zvj3JOl/udZt/S7darUqn0wlarRZ2d3cxPz+PJ8dPsPP1Doq8kIbL+cawjxBIM8MRFAidpBlRpIbhFc55gM2NF5IIQtVBRlRTZgTWZQ4wzvc8spO1NPM4Gr9Wh1bSDIjU98C5E0PIC8OVSX+Rlz08hl+4/LsML6X/menFxcW7BwcHtzY2NvDw8CE21zf/NdMAHskFMs3MT/EfMg3gsTsr02f8byfTo16v3+v3+//f6fGKgXNp5vT5huZbqH4nH+NvwXH6V5bS041mU1FKz8ZxepdSerrRbCpK6dk4Tu9SSk83mk1FKT0bx+ldSunpRrOpuJTSfwBcuImxpyA7XgAAAABJRU5ErkJggg==" alt="Previous in Tag" width="45" height="45" loading="lazy">
                    </a>
                  
                </div>
                <div class="nav-arrow tags next">
                  
                    <a href="/setting-up-ssh-key-based-authentication-on-debian/" title="Setting Up SSH Key-Based Authentication on Debian" rel="next">
                      <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAAAXNSR0IArs4c6QAAAwdJREFUaEPtl01rG1cUht9z7p070ijKWLVS3I9YULtNMBRn2UIXxZtuvCjedNWfoKVXBvsHeOUfoIUx5AeY0pVXXSR052UxBJSi0kDiRplII83HvadI9CMtOFjCmBjubC7cc8+Zc555eYdLuIEP3cCe4Zu+rq/mSXvSbyHg5eHl4eVxXRrwpD3p+Qh4n56P2+xZnvTszC7MCAAUF0XfOdJa62+IaCeO40GSJA/zPP8RwB9vDjBtWmv9JRE5ImpZawdVpbo58CkAIyJnIrLAzEvOuXNm/h3AfQDOAGdj5z5m5gXn3G9ENCKilckaiDwpiFZEpCoiTyYrM3/knOtXmHs58BkABvCLc+4DZl6cxIjoh4ODA728vIzt7W2sra09PT4+fgTgQES4LMvHZIy5LyI/f/dJvfK6FKMJqAdqmBS2ZgWINY9zJyZ1whUiRJrTfmGjybSxUemwcFEmghqT1UxlUrpQEXD7jRq3NWelEz10okIi1AJOX+U2EgALgUrT0kVnmcKvQ+uazSZvbW2hWq2i3++j3W5jf38f6+vrebvdHovI5pT09+vN7teLYev990K8GpQYjS1u1TQqhnHez6EU4cM7FTw7z5AXDo16ACcyPRsaxp2FEM9ejKd7zUaIYVpiOCpRq2rUIo0XLzMwEZaaFTzvZ8hyh/iWnu69fF1AAoOfFr/A5w8eYDQaIY5jJEmC09NTNBoNdLtd7O3t4ejoCIeHh8k/pL8KUSkCZcg6hCLDjLk2ufYGpRuXAuOMYiosQiDNNEcQILQuzYgi0QxVWKuAMtcqJPdXDaKaMMOUNrOAtoFSVE5jaaY4mtQPS5dmQPS8WkdfGReYgDe/3cTdpbvo9XrY2NhAp9NBq9XKO53Ov6T/r2mlVBeX0DSAMzeHppm5h7doemdvR99buYfd3V2srq4+PTk5+a+mr9CmrqTU3+5Rr9cHg8HgYve4krddbZGb5dOXmf2d+7n4pi9D4LrOeHl40v42fl0a8KQ96fkIeJ+ej9vsWZ707Mzmy/Ck5+M2e9afhmuAz1BhwewAAAAASUVORK5CYII=" alt="Next in Tag" width="45" height="45" loading="lazy">
                    </a>
                  
                </div>
              </div>
            
          
          <!-- JavaScript to Toggle the Tag-based Navigation -->
          <script>
            document.addEventListener("DOMContentLoaded", function(){
              var tagLinks = document.querySelectorAll('.tag-option');
              tagLinks.forEach(function(link){
                link.addEventListener('click', function(event){
                  event.preventDefault();
                  // Remove "active" class from all tag options.
                  tagLinks.forEach(function(el){ el.classList.remove('active'); });
                  // Add active class to the clicked tag option.
                  this.classList.add('active');
                  // Hide all tag navigation blocks.
                  document.querySelectorAll('.nav-group.tags').forEach(function(block){
                    block.style.display = 'none';
                  });
                  // Show the navigation block corresponding to the selected tag.
                  var tagSlug = this.getAttribute('data-tag');
                  var target = document.getElementById('tag-nav-' + tagSlug);
                  if(target) {
                    target.style.display = 'block';
                  }
                });
              });
            });
          </script>
      </nav>
      
    </main>
    <footer id="bottom-of-page" class="site-footer">
      <div class="footer-content">
        <!-- Back to top link -->
        <a href="#" aria-label="Back to top" class="back2top-link">
          <span class="sronly">Back to top</span>
        </a>
    
        <!-- Liquid Time Calculation and Display -->
        
        
        
        <a href="https://ib.bsb.br/404" aria-label="404">
          2025-07-17 17:47:37
        </a>
        &#x23;
    
        <!-- Tag Selector -->
        <ul class="tag-selector">
          
            
            
              <li>
                <a href="#" class="tag-option active" data-tag="scratchpad">
                  scratchpad
                </a>
              </li>
            
          
        </ul>
        &hArr;
    
        <!-- GitHub Link -->
        <a href="https://github.com/ib-bsb-br/ib-bsb-br.github.io" aria-label="GitHub">
          &#8505;
        </a>
    
        <!-- Homepage Link -->
        <a href="/" aria-label="Homepage">
          infoBAG
        </a>
    
        <!-- Copy All Code Button -->
        <button id="copyAllButton" aria-label="Copy all code">
          &copy;
        </button>
      </div>
    </footer>
    <style>
      .back2top-link {
        display: inline-block;
        width: 32px;
        height: 32px;
        background: url("/assets/Rope_(Old).gif") center center no-repeat;
        background-size: contain;
        text-decoration: none;
        vertical-align: middle;
      }
      .sronly {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }
    </style>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Article",
        "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "https://ib.bsb.br/windows11-incus/"
        },
        "headline": "Windows 11 within an Incus VM",
        "description": "",
        "datePublished": "2025-04-14T00:00:00+00:00",
        "dateModified": "2025-05-13T11:18:01+00:00",
        "author": {
          "@type": "Person",
          "name": "Author"
        },
        "publisher": {
          "@type": "Organization",
          "name": "infoBAG"
          
        }
        
      }
    </script>
    <script src="/assets/js/prism.js" defer></script>
    <script src="/assets/js/copy-all-code.js"></script>
  </body>
</html>
