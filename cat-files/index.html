<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>
    
      cat files contents — infoBAG
    
  </title>
  <meta name="title" content="cat files contents">
  <meta name="description" content="can't steer unless already moving">

  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="cat files contents — infoBAG">
  <meta property="og:description" content="can't steer unless already moving">
  <meta property="og:url" content="https://ib.bsb.br/cat-files/">
  <meta property="og:type" content="article">
  <meta property="og:site_name" content="infoBAG">
  

  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="cat files contents — infoBAG">
  <meta name="twitter:description" content="can't steer unless already moving">
  

  <link rel="canonical" href="https://ib.bsb.br/cat-files/">
  <link rel="alternate" type="application/rss+xml" title="infoBAG" href="https://ib.bsb.br/rss.xml">

  
    <meta name="keywords" content="scripts">
    
      <meta property="article:tag" content="scripts">
    
  

  <!-- Favicons and Icons -->
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  

  <link href="/style.css" rel="stylesheet">
</head>
  <body class="post-content-body">
    
    
    
    
        
        
        "<ol>\n    
        
        
        "  <li>\n    
        
        
        "    <p><strong>Paths to Files or Directories</strong>: The script takes one or more paths to files or directories as arguments. These paths are processed to read and display the contents of the files.</p>\n    
        
        
        "  </li>\n    
        
        
        "  <li>\n    
        
        
        "    <p><strong>.gitignore Files</strong> (optional): If present in the provided directories, these files will be used to determine which files and directories should be ignored based on the rules defined in them.</p>\n    
        
        
        "  </li>\n    
        
        
        "  <li>\n    
        
        
        "    <p><strong>Jinja2 Template File</strong> (optional): If specified with the <code class="language-plaintext highlighter-rouge">--template-file</code> option, this file will be used to format the output using Jinja2 templates.</p>\n    
        
        
        "  </li>\n    
        
        
        "</ol>\n    
        
        
        "\n    
        
        
        "<p>Here is a detailed list of what you need:</p>\n    
        
        
        "\n    
        
        
        "<h3 id="1-paths-to-files-or-directories">1. Paths to Files or Directories</h3>\n    
        
        
        "\n    
        
        
        "<p>You need to provide at least one path to a file or directory. These are specified as arguments to the script.</p>\n    
        
        
        "\n    
        
        
        "<p>Example:</p>\n    
        
        
        "<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/path/to/directory1 /path/to/file1.txt\n    
        
        
        "</code></pre></div></div>\n    
        
        
        "\n    
        
        
        "<h3 id="2-gitignore-files-optional">2. .gitignore Files (optional)</h3>\n    
        
        
        "\n    
        
        
        "<p>If you want the script to respect <code class="language-plaintext highlighter-rouge">.gitignore</code> rules, you should have <code class="language-plaintext highlighter-rouge">.gitignore</code> files in the directories you provide. The script will read these files to ignore certain files and directories.</p>\n    
        
        
        "\n    
        
        
        "<p>Example:</p>\n    
        
        
        "<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/path/to/directory1/.gitignore\n    
        
        
        "</code></pre></div></div>\n    
        
        
        "\n    
        
        
        "<h3 id="3-jinja2-template-file-optional">3. Jinja2 Template File (optional)</h3>\n    
        
        
        "\n    
        
        
        "<p>If you want to format the output using a Jinja2 template, you need to provide a template file and specify its path using the <code class="language-plaintext highlighter-rouge">--template-file</code> or <code class="language-plaintext highlighter-rouge">-t</code> option.</p>\n    
        
        
        "\n    
        
        
        "<p>Example:</p>\n    
        
        
        "<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/path/to/template.jinja2\n    
        
        
        "</code></pre></div></div>\n    
        
        
        "\n    
        
        
        "<h3 id="running-the-script">Running the Script</h3>\n    
        
        
        "\n    
        
        
        "<p>To run the script with these inputs, you would use a command like:</p>\n    
        
        
        "\n    
        
        
        "<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python3 your_script.py /path/to/directory1 /path/to/directory2 <span class="nt">-t</span> /path/to/template.jinja2\n    
        
        
        "</code></pre></div></div>\n    
        
        
        "\n    
        
        
        "<h3 id="sample-gitignore">Sample .gitignore</h3>\n    
        
        
        "\n    
        
        
        "<p>Here is a sample <code class="language-plaintext highlighter-rouge">.gitignore</code> file that you might place in your directories:</p>\n    
        
        
        "\n    
        
        
        "<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Ignore all .log files\n    
        
        
        "*.log\n    
        
        
        "\n    
        
        
        "# Ignore all files in the temp directory\n    
        
        
        "temp/\n    
        
        
        "\n    
        
        
        "# Ignore a specific file\n    
        
        
        "ignore_this_file.txt\n    
        
        
        "</code></pre></div></div>\n    
        
        
        "\n    
        
        
        "<h3 id="sample-jinja2-template">Sample Jinja2 Template</h3>\n    
        
        
        "\n    
        
        
        "<p>Here is a sample Jinja2 template (<code class="language-plaintext highlighter-rouge">template.jinja2</code>) that you might use:</p>\n    
        
        
        "\n    
        
        
        "<pre><code class="language-jinja2">File: {{ path }}\n    
        
        
        "Index: {{ index }}\n    
        
        
        "---\n    
        
        
        "{{ content }}\n    
        
        
        "---\n    
        
        
        "</code></pre>\n    
        
        
        "\n    
        
        
        "<h1 id="python-script">python script:</h1>\n    
        
        
        "\n    
        
        
        "<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import os\n    
        
        
        "from fnmatch import fnmatch\n    
        
        
        "import click\n    
        
        
        "from jinja2 import Environment, FileSystemLoader\n    
        
        
        "\n    
        
        
        "\n    
        
        
        "def should_ignore(path, gitignore_rules):\n    
        
        
        "    for rule in gitignore_rules:\n    
        
        
        "        if fnmatch(os.path.basename(path), rule):\n    
        
        
        "            return True\n    
        
        
        "        if os.path.isdir(path) and fnmatch(os.path.basename(path) + "/", rule):\n    
        
        
        "            return True\n    
        
        
        "    return False\n    
        
        
        "\n    
        
        
        "\n    
        
        
        "def read_gitignore(path):\n    
        
        
        "    gitignore_path = os.path.join(path, ".gitignore")\n    
        
        
        "    if os.path.isfile(gitignore_path):\n    
        
        
        "        with open(gitignore_path, "r") as f:\n    
        
        
        "            return [\n    
        
        
        "                line.strip() for line in f if line.strip() and not line.startswith("#")\n    
        
        
        "            ]\n    
        
        
        "    return []\n    
        
        
        "\n    
        
        
        "\n    
        
        
        "def print_from_template(template_file, path, content, index):\n    
        
        
        "    """Renders the content using the provided Jinja2 template."""\n    
        
        
        "    env = Environment(loader=FileSystemLoader(os.path.dirname(template_file)))\n    
        
        
        "    template = env.get_template(os.path.basename(template_file))\n    
        
        
        "    rendered_content = template.render(\n    
        
        
        "        content=content, path=path, index=index\n    
        
        
        "    )  # Pass path and index to the template\n    
        
        
        "    click.echo(rendered_content)\n    
        
        
        "\n    
        
        
        "\n    
        
        
        "def process_path(\n    
        
        
        "    path,\n    
        
        
        "    include_hidden,\n    
        
        
        "    ignore_gitignore,\n    
        
        
        "    gitignore_rules,\n    
        
        
        "    ignore_patterns,\n    
        
        
        "    template_file,\n    
        
        
        "    index,\n    
        
        
        "):\n    
        
        
        "    if os.path.isfile(path):\n    
        
        
        "        try:\n    
        
        
        "            with open(path, "r") as f:\n    
        
        
        "                content = f.read()\n    
        
        
        "                if template_file:\n    
        
        
        "                    print_from_template(template_file, path, content, index)\n    
        
        
        "                else:\n    
        
        
        "                    click.echo(path)  # Default output: just the path\n    
        
        
        "                    click.echo("---")\n    
        
        
        "                    click.echo(content)\n    
        
        
        "                    click.echo("---")\n    
        
        
        "                index += 1\n    
        
        
        "        except UnicodeDecodeError:\n    
        
        
        "            warning_message = f"Warning: Skipping file {path} due to UnicodeDecodeError"\n    
        
        
        "            click.echo(click.style(warning_message, fg="red"), err=True)\n    
        
        
        "    elif os.path.isdir(path):\n    
        
        
        "        for root, dirs, files in os.walk(path):\n    
        
        
        "            if not include_hidden:\n    
        
        
        "                dirs[:] = [d for d in dirs if not d.startswith(".")]\n    
        
        
        "                files = [f for f in files if not f.startswith(".")]\n    
        
        
        "            if not ignore_gitignore:\n    
        
        
        "                gitignore_rules.extend(read_gitignore(root))\n    
        
        
        "            dirs[:] = [\n    
        
        
        "                d\n    
        
        
        "                for d in dirs\n    
        
        
        "                if not should_ignore(os.path.join(root, d), gitignore_rules)\n    
        
        
        "            ]\n    
        
        
        "            files = [\n    
        
        
        "                f\n    
        
        
        "                for f in files\n    
        
        
        "                if not should_ignore(os.path.join(root, f), gitignore_rules)\n    
        
        
        "            ]\n    
        
        
        "            if ignore_patterns:\n    
        
        
        "                files = [\n    
        
        
        "                    f\n    
        
        
        "                    for f in files\n    
        
        
        "                    if not any(fnmatch(f, pattern) for pattern in ignore_patterns)\n    
        
        
        "                ]\n    
        
        
        "            for file in sorted(files):\n    
        
        
        "                file_path = os.path.join(root, file)\n    
        
        
        "                try:\n    
        
        
        "                    with open(file_path, "r") as f:\n    
        
        
        "                        content = f.read()\n    
        
        
        "                        if template_file:\n    
        
        
        "                            print_from_template(\n    
        
        
        "                                template_file, file_path, content, index\n    
        
        
        "                            )\n    
        
        
        "                        else:\n    
        
        
        "                            click.echo(file_path)  # Default output: just the path\n    
        
        
        "                            click.echo("---")\n    
        
        
        "                            click.echo(content)\n    
        
        
        "                            click.echo("---")\n    
        
        
        "                        index += 1\n    
        
        
        "                except UnicodeDecodeError:\n    
        
        
        "                    warning_message = (\n    
        
        
        "                        f"Warning: Skipping file {file_path} due to UnicodeDecodeError"\n    
        
        
        "                    )\n    
        
        
        "                    click.echo(click.style(warning_message, fg="red"), err=True)\n    
        
        
        "    return index\n    
        
        
        "\n    
        
        
        "\n    
        
        
        "@click.command()\n    
        
        
        "@click.argument("paths", nargs=-1, type=click.Path(exists=True))\n    
        
        
        "@click.option(\n    
        
        
        "    "--include-hidden",\n    
        
        
        "    is_flag=True,\n    
        
        
        "    help="Include files and folders starting with .",\n    
        
        
        ")\n    
        
        
        "@click.option(\n    
        
        
        "    "--ignore-gitignore",\n    
        
        
        "    is_flag=True,\n    
        
        
        "    help="Ignore .gitignore files and include all files",\n    
        
        
        ")\n    
        
        
        "@click.option(\n    
        
        
        "    "ignore_patterns",\n    
        
        
        "    "--ignore",\n    
        
        
        "    multiple=True,\n    
        
        
        "    default=[],\n    
        
        
        "    help="List of patterns to ignore",\n    
        
        
        ")\n    
        
        
        "@click.option(\n    
        
        
        "    "--template-file",\n    
        
        
        "    "-t",\n    
        
        
        "    type=click.Path(exists=True),\n    
        
        
        "    help="Path to a Jinja2 template file for formatting context items.",\n    
        
        
        ")\n    
        
        
        "@click.version_option()\n    
        
        
        "def cli(paths, include_hidden, ignore_gitignore, ignore_patterns, template_file):\n    
        
        
        "    """\n    
        
        
        "    Takes one or more paths to files or directories and outputs every file,\n    
        
        
        "    recursively, each one preceded with its filename like this:\n    
        
        
        "    path/to/file.py\n    
        
        
        "    ----\n    
        
        
        "    Contents of file.py goes here\n    
        
        
        "    ---\n    
        
        
        "    path/to/file2.py\n    
        
        
        "    ---\n    
        
        
        "    ...\n    
        
        
        "    """\n    
        
        
        "    gitignore_rules = []\n    
        
        
        "    for path in paths:\n    
        
        
        "        if not os.path.exists(path):\n    
        
        
        "            raise click.BadArgumentUsage(f"Path does not exist: {path}")\n    
        
        
        "        if not ignore_gitignore:\n    
        
        
        "            gitignore_rules.extend(read_gitignore(os.path.dirname(path)))\n    
        
        
        "    index = 1\n    
        
        
        "    for path in paths:\n    
        
        
        "        index = process_path(\n    
        
        
        "            path,\n    
        
        
        "            include_hidden,\n    
        
        
        "            ignore_gitignore,\n    
        
        
        "            gitignore_rules,\n    
        
        
        "            ignore_patterns,\n    
        
        
        "            template_file,\n    
        
        
        "            index,\n    
        
        
        "        )\n    
        
        
        "</code></pre></div></div>\n    
        
        
        "\n    
        
        
        "<h1 id="bash-script">bash script:</h1>\n    
        
        
        "\n    
        
        
        "<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>\n    
        
        
        "#!/bin/bash\n    
        
        
        "\n    
        
        
        "# Function to display help information\n    
        
        
        "display_help() {\n    
        
        
        "    echo "Usage: $0 [search_directory] [destination_directory]"\n    
        
        
        "    echo "Extracts text from files in the specified search directory, concatenates them,"\n    
        
        
        "    echo "and saves the result in the specified destination directory."\n    
        
        
        "    echo "If no arguments are provided, default directories are used:"\n    
        
        
        "    echo "  - Search Directory: \$HOME/Documents"\n    
        
        
        "    echo "  - Destination Directory: \$HOME/Desktop"\n    
        
        
        "}\n    
        
        
        "\n    
        
        
        "# Check if help argument is provided\n    
        
        
        "if [[ "$1" == "-h" || "$1" == "--help" ]]; then\n    
        
        
        "    display_help\n    
        
        
        "    exit 0\n    
        
        
        "fi\n    
        
        
        "\n    
        
        
        "# Define directories and files\n    
        
        
        "search_directory="${1:-$HOME/Documents}"\n    
        
        
        "destination_directory="${2:-$HOME/Desktop}"\n    
        
        
        "final_file="${destination_directory}/final_concatenated_file.txt"\n    
        
        
        "unsupported_file="${destination_directory}/concatenated_contents_unsupported.txt"\n    
        
        
        "temp_file_list="${destination_directory}/temp_file_list.txt"\n    
        
        
        "\n    
        
        
        "# Supported file types\n    
        
        
        "supported_types=(\n    
        
        
        "    "text/plain" "text/markdown" "text/x-log" "text/x-srt" "text/x-microdvd" "text/csv"\n    
        
        
        "    "text/xml" "application/json" "application/mbox" "application/vnd.ms-word"\n    
        
        
        "    "application/vnd.openxmlformats-officedocument.wordprocessingml.document"\n    
        
        
        "    "application/vnd.oasis.opendocument.text" "application/vnd.oasis.opendocument.spreadsheet"\n    
        
        
        "    "application/vnd.oasis.opendocument.presentation" "application/pdf" "application/rtf"\n    
        
        
        "    "text/html" "application/x-python" "application/java-archive" "text/javascript"\n    
        
        
        "    "text/x-c++src" "text/x-chdr" "application/x-zip-compressed" "application/x-rar-compressed"\n    
        
        
        "    "application/x-tar" "application/gzip" "application/vnd.ms-powerpoint"\n    
        
        
        "    "application/vnd.openxmlformats-officedocument.presentationml.presentation" "text/x-tex"\n    
        
        
        ")\n    
        
        
        "\n    
        
        
        "# Function to check if output is textual\n    
        
        
        "is_output_textual() {\n    
        
        
        "    local file="$1"\n    
        
        
        "    local is_text=0\n    
        
        
        "\n    
        
        
        "    # Check if the file contains null bytes\n    
        
        
        "    if grep -q $'\0' "$file"; then\n    
        
        
        "        is_text=0\n    
        
        
        "    else\n    
        
        
        "        # Extract printable strings from the file\n    
        
        
        "        local strings_output=$(strings "$file")\n    
        
        
        "        local strings_length=${#strings_output}\n    
        
        
        "        local file_size=$(stat -c%s "$file")\n    
        
        
        "\n    
        
        
        "        # Check if the length of extracted strings is significant\n    
        
        
        "        if [ $strings_length -ge $((file_size / 2)) ]; then\n    
        
        
        "            is_text=1\n    
        
        
        "        else\n    
        
        
        "            is_text=0\n    
        
        
        "        fi\n    
        
        
        "    fi\n    
        
        
        "\n    
        
        
        "    if [[ $is_text -eq 0 ]]; then\n    
        
        
        "        # Check if the file MIME type is in the supported types list\n    
        
        
        "        local mime_type=$(file -b --mime-type "$file")\n    
        
        
        "        for supported_type in "${supported_types[@]}"; do\n    
        
        
        "            if [[ "${mime_type}" == "${supported_type}" ]]; then\n    
        
        
        "                is_text=1\n    
        
        
        "                break\n    
        
        
        "            fi\n    
        
        
        "        done\n    
        
        
        "    fi\n    
        
        
        "\n    
        
        
        "    if [[ $is_text -eq 0 ]]; then\n    
        
        
        "        return 1\n    
        
        
        "    else\n    
        
        
        "        return 0\n    
        
        
        "    fi\n    
        
        
        "}\n    
        
        
        "\n    
        
        
        "# Function to process individual file\n    
        
        
        "process_file() {\n    
        
        
        "    local file="$1"\n    
        
        
        "    local text_file_path="$2"\n    
        
        
        "\n    
        
        
        "    if [[ -f "$file" ]]; then\n    
        
        
        "        case "${file##*.}" in\n    
        
        
        "            pdf|docx|html|htm|srt|sub|log|tex|latex|doc|ppt|pptx|zip|rar|tar|gz|odt|ods|odp|rtf|csv|xml|json|py|java|js|cpp|h|md|markdown|txt|eml|mbox)\n    
        
        
        "                echo "Processing file: $file"\n    
        
        
        "                # Convert file to text and check if conversion is successful\n    
        
        
        "                convert_to_text "$file" "$text_file_path"\n    
        
        
        "                if [[ $? -ne 0 ]]; then\n    
        
        
        "                    echo "Error: Failed to convert $file" &gt;&amp;2\n    
        
        
        "                    return 1\n    
        
        
        "                fi\n    
        
        
        "                ;;\n    
        
        
        "            *)\n    
        
        
        "                # Unsupported file types are processed using 'cat' command\n    
        
        
        "                echo "Warning: Unsupported file type '${file##*.}'. Processing using 'cat' command." &gt;&amp;2\n    
        
        
        "                cat "$file" &gt; "$text_file_path" 2&gt;/dev/null\n    
        
        
        "                \n    
        
        
        "                # Initialize a counter for failed checks\n    
        
        
        "                failed_checks=0\n    
        
        
        "                \n    
        
        
        "                # Check for null bytes\n    
        
        
        "                if grep -q $'\0' "$text_file_path"; then\n    
        
        
        "                    failed_checks=$((failed_checks + 1))\n    
        
        
        "                fi\n    
        
        
        "                \n    
        
        
        "                # Check the significance of extracted printable strings\n    
        
        
        "                strings_output=$(strings "$text_file_path")\n    
        
        
        "                strings_length=${#strings_output}\n    
        
        
        "                file_size=$(stat -c%s "$text_file_path")\n    
        
        
        "                if [ $strings_length -lt $((file_size / 2)) ]; then\n    
        
        
        "                    failed_checks=$((failed_checks + 1))\n    
        
        
        "                fi\n    
        
        
        "                \n    
        
        
        "                # Check the file's MIME type\n    
        
        
        "                mime_type=$(file -b --mime-type "$text_file_path")\n    
        
        
        "                supported_type=0\n    
        
        
        "                for type in "${supported_types[@]}"; do\n    
        
        
        "                    if [[ "${mime_type}" == "${type}" ]]; then\n    
        
        
        "                        supported_type=1\n    
        
        
        "                        break\n    
        
        
        "                    fi\n    
        
        
        "                done\n    
        
        
        "                if [[ $supported_type -eq 0 ]]; then\n    
        
        
        "                    failed_checks=$((failed_checks + 1))\n    
        
        
        "                fi\n    
        
        
        "                \n    
        
        
        "                # Determine the output file based on the number of failed checks\n    
        
        
        "                if [[ $failed_checks -gt 2 ]]; then\n    
        
        
        "                    echo "Warning: Output of $file failed more than two checks. Appending to unsupported file." &gt;&amp;2\n    
        
        
        "                    echo "&lt;!-- $file --&gt;:" &gt;&gt; "$unsupported_file"\n    
        
        
        "                    echo "\`\`\`" &gt;&gt; "$unsupported_file"\n    
        
        
        "                    cat "$text_file_path" &gt;&gt; "$unsupported_file"\n    
        
        
        "                    echo "\`\`\`" &gt;&gt; "$unsupported_file"\n    
        
        
        "                    rm -f "$text_file_path"\n    
        
        
        "                else\n    
        
        
        "                    echo "Output of $file passed the checks. Appending to final file."\n    
        
        
        "                    echo "&lt;!-- $file --&gt;:" &gt;&gt; "$final_file"\n    
        
        
        "                    echo "\`\`\`" &gt;&gt; "$final_file"\n    
        
        
        "                    cat "$text_file_path" &gt;&gt; "$final_file"\n    
        
        
        "                    echo "\`\`\`" &gt;&gt; "$final_file"\n    
        
        
        "                    rm -f "$text_file_path"\n    
        
        
        "                fi\n    
        
        
        "                return 1\n    
        
        
        "                ;;\n    
        
        
        "        esac\n    
        
        
        "\n    
        
        
        "        if ! is_output_textual "$text_file_path"; then\n    
        
        
        "            echo "Warning: Output of $file is not textual. Skipping." &gt;&amp;2\n    
        
        
        "            rm -f "$text_file_path"\n    
        
        
        "            return 1\n    
        
        
        "        fi\n    
        
        
        "    else\n    
        
        
        "        echo "Warning: '$file' is not a regular file. Skipping." &gt;&amp;2\n    
        
        
        "        return 1\n    
        
        
        "    fi\n    
        
        
        "\n    
        
        
        "    echo "File $file processed successfully"\n    
        
        
        "    return 0\n    
        
        
        "}\n    
        
        
        "\n    
        
        
        "# Function to convert file to text based on its type\n    
        
        
        "convert_to_text() {\n    
        
        
        "    local file="$1"\n    
        
        
        "    local text_file_path="$2"\n    
        
        
        "\n    
        
        
        "    case "${file##*.}" in\n    
        
        
        "        pdf)\n    
        
        
        "            echo "Converting $file using pdftotext..."\n    
        
        
        "            pdftotext "$file" "$text_file_path" 2&gt;/dev/null\n    
        
        
        "            ;;\n    
        
        
        "        docx|odt|ods|odp)\n    
        
        
        "            echo "Converting $file using pandoc..."\n    
        
        
        "            pandoc "$file" -t plain -o "$text_file_path" 2&gt;/dev/null\n    
        
        
        "            ;;\n    
        
        
        "        html|htm)\n    
        
        
        "            echo "Converting $file using lynx..."\n    
        
        
        "            lynx -dump -nolist -assume_charset UTF-8 -display_charset UTF-8 "$file" &gt; "$text_file_path" 2&gt;/dev/null\n    
        
        
        "            ;;\n    
        
        
        "        srt|sub|log|tex|latex|py|java|js|cpp|h|md|markdown|txt|eml|mbox)\n    
        
        
        "            echo "Copying $file..."\n    
        
        
        "            cat "$file" &gt; "$text_file_path" 2&gt;/dev/null\n    
        
        
        "            ;;\n    
        
        
        "        doc)\n    
        
        
        "            echo "Converting $file using antiword..."\n    
        
        
        "            antiword "$file" &gt; "$text_file_path" 2&gt;/dev/null\n    
        
        
        "            ;;\n    
        
        
        "        ppt|pptx)\n    
        
        
        "            echo "Converting $file using catppt..."\n    
        
        
        "            catppt "$file" &gt; "$text_file_path" 2&gt;/dev/null\n    
        
        
        "            ;;\n    
        
        
        "        zip|rar|tar|gz)\n    
        
        
        "            echo "Extracting and processing $file..."\n    
        
        
        "            extract_and_process_archive "$file" "$text_file_path"\n    
        
        
        "            ;;\n    
        
        
        "        rtf)\n    
        
        
        "            echo "Converting $file using unrtf..."\n    
        
        
        "            unrtf --text "$file" &gt; "$text_file_path" 2&gt;/dev/null\n    
        
        
        "            ;;\n    
        
        
        "        csv)\n    
        
        
        "            echo "Processing $file using awk..."\n    
        
        
        "            awk -F, '{print}' "$file" &gt; "$text_file_path"\n    
        
        
        "            ;;\n    
        
        
        "        xml)\n    
        
        
        "            echo "Processing $file using xmllint..."\n    
        
        
        "            xmllint --xpath "//text()" "$file" &gt; "$text_file_path" 2&gt;/dev/null\n    
        
        
        "            ;;\n    
        
        
        "        json)\n    
        
        
        "            echo "Converting $file using jq..."\n    
        
        
        "            jq -r '.' "$file" &gt; "$text_file_path" 2&gt;/dev/null\n    
        
        
        "            ;;\n    
        
        
        "    esac\n    
        
        
        "\n    
        
        
        "    if [[ $? -ne 0 ]]; then\n    
        
        
        "        echo "Error: Failed to convert $file" &gt;&amp;2\n    
        
        
        "        return 1\n    
        
        
        "    fi\n    
        
        
        "\n    
        
        
        "    echo "Conversion of $file completed successfully"\n    
        
        
        "    return 0\n    
        
        
        "}\n    
        
        
        "\n    
        
        
        "# Function to extract and process archive files\n    
        
        
        "extract_and_process_archive() {\n    
        
        
        "    local file="$1"\n    
        
        
        "    local text_file_path="$2"\n    
        
        
        "    local temp_dir=$(mktemp -d)\n    
        
        
        "\n    
        
        
        "    case "${file##*.}" in\n    
        
        
        "        zip)\n    
        
        
        "            echo "Extracting $file using unzip..."\n    
        
        
        "            unzip -q "$file" -d "$temp_dir"\n    
        
        
        "            ;;\n    
        
        
        "        rar)\n    
        
        
        "            echo "Extracting $file using unrar..."\n    
        
        
        "            unrar x "$file" "$temp_dir"\n    
        
        
        "            ;;\n    
        
        
        "        tar)\n    
        
        
        "            echo "Extracting $file using tar..."\n    
        
        
        "            tar -xf "$file" -C "$temp_dir"\n    
        
        
        "            ;;\n    
        
        
        "        gz)\n    
        
        
        "            echo "Extracting $file using gunzip..."\n    
        
        
        "            gunzip -c "$file" &gt; "$temp_dir/$(basename "$file" .gz)"\n    
        
        
        "            ;;\n    
        
        
        "    esac\n    
        
        
        "\n    
        
        
        "    if [[ $? -ne 0 ]]; then\n    
        
        
        "        echo "Error: Failed to extract archive '$file'" &gt;&amp;2\n    
        
        
        "        rm -rf "$temp_dir"\n    
        
        
        "        return 1\n    
        
        
        "    fi\n    
        
        
        "\n    
        
        
        "    echo "Extraction of $file completed successfully"\n    
        
        
        "\n    
        
        
        "    while IFS= read -r -d '' nested_file; do\n    
        
        
        "        echo "Processing nested file: $nested_file"\n    
        
        
        "        process_file "$nested_file" "$text_file_path"\n    
        
        
        "    done &lt; &lt;(find "$temp_dir" -type f -print0)\n    
        
        
        "\n    
        
        
        "    rm -rf "$temp_dir"\n    
        
        
        "    return 0\n    
        
        
        "}\n    
        
        
        "\n    
        
        
        "# Function to concatenate files\n    
        
        
        "concatenate_files() {\n    
        
        
        "    local text_file_path="$1"\n    
        
        
        "    local file="$2"\n    
        
        
        "\n    
        
        
        "    echo "&lt;!-- $file --&gt;:" &gt;&gt; "$final_file"\n    
        
        
        "    echo "\`\`\`" &gt;&gt; "$final_file"\n    
        
        
        "    cat "$text_file_path" &gt;&gt; "$final_file"\n    
        
        
        "    echo "\`\`\`" &gt;&gt; "$final_file"\n    
        
        
        "\n    
        
        
        "    if [[ $? -ne 0 ]]; then\n    
        
        
        "        echo "Error: Failed to concatenate $text_file_path" &gt;&amp;2\n    
        
        
        "        return 1\n    
        
        
        "    fi\n    
        
        
        "\n    
        
        
        "    echo "Concatenation of $text_file_path completed successfully"\n    
        
        
        "    return 0\n    
        
        
        "}\n    
        
        
        "\n    
        
        
        "# Function to cleanup temporary files\n    
        
        
        "cleanup_temp_files() {\n    
        
        
        "    find "$destination_directory" -type f -name "*.txt" ! -name "$(basename "$final_file")" ! -name "$(basename "$unsupported_file")" -delete\n    
        
        
        "    echo "Cleanup of temporary files completed successfully"\n    
        
        
        "}\n    
        
        
        "\n    
        
        
        "# Main script execution starts here\n    
        
        
        "mkdir -p "$search_directory" "$destination_directory"\n    
        
        
        "&gt; "$final_file"\n    
        
        
        "&gt; "$unsupported_file"\n    
        
        
        "find "$search_directory" -type f &gt; "$temp_file_list"\n    
        
        
        "\n    
        
        
        "while IFS= read -r file; do\n    
        
        
        "    text_file_name=$(echo "$file" | sed 's/[^a-zA-Z0-9]/_/g')\n    
        
        
        "    text_file_path="${destination_directory}/${text_file_name}.txt"\n    
        
        
        "    if process_file "$file" "$text_file_path"; then\n    
        
        
        "        concatenate_files "$text_file_path" "$file"\n    
        
        
        "    fi\n    
        
        
        "done &lt; "$temp_file_list"\n    
        
        
        "\n    
        
        
        "cleanup_temp_files\n    
        
        
        "rm -f "$temp_file_list"\n    
        
        
        "\n    
        
        
        "echo "Process completed. All files have been processed and concatenated into ${final_file}."\n    
        
        
        "echo "Unsupported file types have been processed using 'cat' command and concatenated into ${unsupported_file}."\n    
        
        
        "\n    
        
        
        "</code></pre></div></div>\n    "
  <header class="header-container">
    <nav aria-label="Main navigation" class="header-content">
      <a href="/" aria-label="Home">
        <img src="/favicon.ico" alt="Home" class="favicon search-link" width="45" height="45" loading="lazy">
      </a>
      <a href="/tags" aria-label="Tags">
        <img src="/assets/Label.gif" alt="Tags" class="favicon search-link" width="45" height="45" loading="lazy">
      </a>
      <a href="/events" aria-label="Events">
        <img src="/assets/Paralyse_Rune.gif" alt="Events" class="favicon search-link" width="45" height="45" loading="lazy">
      </a>
      <a href="/archive" aria-label="Archive">
        <img src="/assets/Loose_Stone_Pile.gif" alt="Archive" class="favicon search-link" width="45" height="45" loading="lazy">
      </a>
    </nav>
    <h1 class="post-title">cat files contents</h1>
    <div class="post-meta">
      <time datetime="2024-02-22T00:00:00+00:00" class="post-date">
        22 Feb 2024
      </time>
      
        <span class="post-updated">
          ↣
          <time datetime="2024-10-14T21:40:11+00:00">14 Oct 2024</time>
        </span>
      
      
        <p class="post-slug">
          Slug: <a href="https://ib.bsb.br/cat-files" class="tag">cat-files</a>
        </p>
      
      
        <p class="post-tags">
          Tags:
          
            <a href="https://ib.bsb.br/tags/#scripts" class="tag">scripts</a>
          
        </p>
      
    </div>
    <div class="post-actions">
      <div class="page-stats mt-3" role="status" aria-label="Page statistics">
        <span class="badge bg-primary">
          20149 characters
        </span>
        <span class="separator mx-2" aria-hidden="true">•</span>
        <span class="badge bg-primary">
          1811 words
        </span>
      </div>
      <div class="action-buttons d-flex flex-wrap gap-2">
        
          
            <form action="https://github.com/ib-bsb-br/ib-bsb-br.github.io/edit/main/_posts/2024-02-22-cat-files.md"
                  method="GET"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="d-inline-block">
              <button type="submit" class="btn btn-danger" aria-label="Edit page content">
                <span class="button-text">Improve this page?</span>
                <span class="info-text">aberto.</span>
              </button>
            </form>
          
          <form action="https://github.com/ib-bsb-br/ib-bsb-br.github.io/commits/main/_posts/2024-02-22-cat-files.md"
                method="GET"
                target="_blank"
                rel="noopener noreferrer"
                class="d-inline-block">
            <button type="submit" class="btn btn-danger" aria-label="View page revision history">
              View revision history
            </button>
          </form>
        
      </div>
    </div>
  </header>
  <main class="content">
    <article class="post-wrapper">
      <div class="post-content-body">
        

        

      </div>
      
        URL: https://ib.bsb.br/cat-files
      
    </article>
    <nav class="post-navigation" aria-label="Post navigation">
      
        <div class="nav-arrow prev">
          <a href="/tampermonkey-dify/" title="tampermonkey dify hit-testing [script]" rel="prev">
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAAAXNSR0IArs4c6QAAAxVJREFUaEPt18FqG1cUBuD/nLkzI42UiVInkFLTCAKhS+9KA+3Kq1L8AAHjhR7AKz+ADV55qUfoqhvThTfdmC4KzTKmYJrELshJW9PIlSeKRpqZe88pUtouihvVRknqMNoMzD1zdPXNrzMM4RJ+6BLuGeWm39RdK6VL6VcIlPEo41HG401loJQupS8mUM7pi7md/6p3UtoHUJzf4vVecZb0e0EQfB7H8b0kSeqqummt/eb1buN83SebNsZ8QkQCYHVpaenu/v7+ra2tLRwdHWF1ddWq6hfM3BCRE2b+FcBHACQAHo1E5v9c+5mIhkR0e3z0VQ8LotuqWlXVw/GRmT8QkdMK89McuAOAAfwoIu8z85yIHBPRKRGN1/IAeDx0rul53hivo6psrf2ejDGfEtFOu92u7O3tBWtra2i322g0GhgOh9je3ka325UPax7fCR0iw+lp4aLxr70aeOmgkChTRY3JGSb73EroERD73uB54WpOgdhwZkXNQNQLiVDzOU1yFymAhu+lqZVopIqISQKmPLFS+atHv3A1q8AVQ/lXP/VHRPQx+b6frKysxMvLy1hfX0ez2USv18PCwgLiOEaSJKhWq/jhwQN8dnIfVOS4dsWHqCJ5YREGjBuNEMfd0eTc9WshBqnFYGhRqxrUIoNuLwMT4eb1Cp6dZshywdW6mZzr9QsEPuPmXIhfno3gnGKuEWCUC14MLKoVb1L72+8Zvj3JOl/udZt/S7darUqn0wlarRZ2d3cxPz+PJ8dPsPP1Doq8kIbL+cawjxBIM8MRFAidpBlRpIbhFc55gM2NF5IIQtVBRlRTZgTWZQ4wzvc8spO1NPM4Gr9Wh1bSDIjU98C5E0PIC8OVSX+Rlz08hl+4/LsML6X/menFxcW7BwcHtzY2NvDw8CE21zf/NdMAHskFMs3MT/EfMg3gsTsr02f8byfTo16v3+v3+//f6fGKgXNp5vT5huZbqH4nH+NvwXH6V5bS041mU1FKz8ZxepdSerrRbCpK6dk4Tu9SSk83mk1FKT0bx+ldSunpRrOpuJTSfwBcuImxpyA7XgAAAABJRU5ErkJggg==" alt="Previous article" width="45" height="45" loading="lazy">
          </a>
        </div>
      
      
        <div class="nav-arrow next">
          <a href="/aposentadoria/" title="QRU Aposentadoria" rel="next">
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAAAXNSR0IArs4c6QAAAwdJREFUaEPtl01rG1cUht9z7p070ijKWLVS3I9YULtNMBRn2UIXxZtuvCjedNWfoKVXBvsHeOUfoIUx5AeY0pVXXSR052UxBJSi0kDiRplII83HvadI9CMtOFjCmBjubC7cc8+Zc555eYdLuIEP3cCe4Zu+rq/mSXvSbyHg5eHl4eVxXRrwpD3p+Qh4n56P2+xZnvTszC7MCAAUF0XfOdJa62+IaCeO40GSJA/zPP8RwB9vDjBtWmv9JRE5ImpZawdVpbo58CkAIyJnIrLAzEvOuXNm/h3AfQDOAGdj5z5m5gXn3G9ENCKilckaiDwpiFZEpCoiTyYrM3/knOtXmHs58BkABvCLc+4DZl6cxIjoh4ODA728vIzt7W2sra09PT4+fgTgQES4LMvHZIy5LyI/f/dJvfK6FKMJqAdqmBS2ZgWINY9zJyZ1whUiRJrTfmGjybSxUemwcFEmghqT1UxlUrpQEXD7jRq3NWelEz10okIi1AJOX+U2EgALgUrT0kVnmcKvQ+uazSZvbW2hWq2i3++j3W5jf38f6+vrebvdHovI5pT09+vN7teLYev990K8GpQYjS1u1TQqhnHez6EU4cM7FTw7z5AXDo16ACcyPRsaxp2FEM9ejKd7zUaIYVpiOCpRq2rUIo0XLzMwEZaaFTzvZ8hyh/iWnu69fF1AAoOfFr/A5w8eYDQaIY5jJEmC09NTNBoNdLtd7O3t4ejoCIeHh8k/pL8KUSkCZcg6hCLDjLk2ufYGpRuXAuOMYiosQiDNNEcQILQuzYgi0QxVWKuAMtcqJPdXDaKaMMOUNrOAtoFSVE5jaaY4mtQPS5dmQPS8WkdfGReYgDe/3cTdpbvo9XrY2NhAp9NBq9XKO53Ov6T/r2mlVBeX0DSAMzeHppm5h7doemdvR99buYfd3V2srq4+PTk5+a+mr9CmrqTU3+5Rr9cHg8HgYve4krddbZGb5dOXmf2d+7n4pi9D4LrOeHl40v42fl0a8KQ96fkIeJ+ej9vsWZ707Mzmy/Ck5+M2e9afhmuAz1BhwewAAAAASUVORK5CYII=" alt="Next article" width="45" height="45" loading="lazy">
          </a>
        </div>
      
    </nav>
    
    <div class="comment-box">
        Reference: <a href="https://github.com/pzaback/files-to-prompt" title="https://github.com/pzaback/files-to-prompt">https://github.com/pzaback/files-to-prompt</a>
    </div>
    
  </main>
  <footer class="site-footer">
    <p>
      <a href="#" aria-label="Back to top">
        <img src="/assets/Rope_(Old).gif" alt="Back to top" width="32" height="32" loading="lazy">
      </a><a href="https://ib.bsb.br/404" aria-label="404">2024-12-28 18:00:44</a>‎ ⇔‎ <a href="https://github.com/ib-bsb-br/ib-bsb-br.github.io" aria-label="GitHub">ℹ</a>‎ <a href="/" aria-label="Homepage">infoBAG</a>
    </p>
  </footer>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://ib.bsb.br/cat-files/"
    },
    "headline": "cat files contents",
    "description": "",
    "datePublished": "2024-02-22T00:00:00+00:00",
    "dateModified": "2024-10-14T21:40:11+00:00",
    "author": {
      "@type": "Person",
      "name": "Author"
    },
    "publisher": {
      "@type": "Organization",
      "name": "infoBAG"
      
    }
    
  }
  </script>
  <script src="/assets/js/prism.js" defer></script>
</body>
</html>
