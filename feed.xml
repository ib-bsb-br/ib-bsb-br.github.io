<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.4.1">Jekyll</generator><link href="https://ib.bsb.br/feed.xml" rel="self" type="application/atom+xml" /><link href="https://ib.bsb.br/" rel="alternate" type="text/html" /><updated>2025-06-11T16:39:13+00:00</updated><id>https://ib.bsb.br/feed.xml</id><title type="html">infoBAG</title><entry><title type="html">Reinforcement fine-tuning use cases - OpenAI API</title><link href="https://ib.bsb.br/reinforcement-fine-tuning-use-cases-openai-api/" rel="alternate" type="text/html" title="Reinforcement fine-tuning use cases - OpenAI API" /><published>2025-06-11T00:00:00+00:00</published><updated>2025-06-11T16:35:48+00:00</updated><id>https://ib.bsb.br/reinforcement-fine-tuning-use-cases-openai-api</id><content type="html" xml:base="https://ib.bsb.br/reinforcement-fine-tuning-use-cases-openai-api/"><![CDATA[<p>Title: Reinforcement fine-tuning use cases - OpenAI API</p>

<p>URL Source: https://platform.openai.com/docs/guides/rft-use-cases</p>

<p>Markdown Content:
Learn use cases and best practices for reinforcement fine-tuning.</p>

<p><a href="https://platform.openai.com/docs/guides/reinforcement-fine-tuning">Reinforcement fine-tuning</a> (RFT) provides a way to improve your model’s performance at specific tasks. The task must be clear and have verifiable answers.</p>

<h2 id="when-to-use-reinforcement-fine-tuning">When to use reinforcement fine-tuning</h2>

<p>Agentic workflows are designed to make decisions that are both correct and verifiable. RFT can help by providing explicit rubrics and using code‑based or LLM‑based graders to measure functional success, factual accuracy, or policy compliance.</p>

<p>Across early users, three clear use cases have emerged:</p>

<ol>
  <li><strong>Turn instructions into working code</strong>: Convert open-ended prompts into structured code, configs, or templates that must pass deterministic tests.</li>
  <li><strong>Pull facts into a clean format</strong>: Extract verifiable facts and summaries from messy, unstructured text and return JSON-structured or other schema-based outputs.</li>
  <li><strong>Apply complex rules correctly</strong>: Make fine-grained label or policy decisions when the information provided is nuanced, large in quantity, hierarchical, or high-stakes.</li>
</ol>

<p><a href="https://platform.openai.com/docs/guides/reinforcement-fine-tuning">Ready to use reinforcement fine-tuning? Skip to the guide →</a></p>

<h3 id="1-turn-instructions-into-working-code">1. Turn instructions into working code</h3>

<p>In this use case, models reason over hidden domain constraints to produce structured outputs like code, queries, or infrastructure templates. Outputs must satisfy multiple correctness conditions, and success is usually deterministically graded: the artifact either compiles, passes tests, or meets an explicit schema.</p>

<h4 id="wiring-verification-ips-for-semiconductor-design">Wiring verification IPs for semiconductor design</h4>

<p>Use case</p>

<blockquote>
  <p><strong>Company</strong>: <a href="https://www.chipstack.ai/">ChipStack</a> is building the next-generation of AI-powered tools for chip design and verification, aimed at significantly reducing the time and cost of developing and validating complex semiconductor chips.</p>

  <p><strong>Problem to solve</strong>: One task that’s challenging and time-consuming for humans is binding design interfaces to verification IPs (pre-created verification components that, when properly applied, can signifcantly enhance quality and coverage of verification). There are many verification IPs, and each can contain dozens to hundreds of signals that may be mapped. Someone must understand this domain well in order to apply the verification IP correctly.</p>

  <p><strong>Objective</strong>: To train OpenAI reasoning models to do this instead, ChipStack prepared a dataset consisting of less than 50 samples, then performed several RFT variations. For the final evaluation report, they ran this evaluation set three times against each model and variation—o1-mini base and fine-tuned, o3-mini base and fine-tuned—and averaged the results per-sample then overall.</p>
</blockquote>

<p>Prompt</p>

<blockquote>
  <p>Below is a piece of example data provided.</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1
2
3
4
[
    {“name”: “BLOCK_SIZE”, “value”: “8”},
    {“name”: “ADDR_WIDTH”, “value”: “4”}
]
</code></pre></div></div>

<p>Grader code</p>

<blockquote>
  <p>Below is a grader definition in Python of a string map, represented as a list of objects with <code class="language-plaintext highlighter-rouge">name</code> and <code class="language-plaintext highlighter-rouge">value</code> properties.</p>

  <p>Conceptually, this is meant to model a type like <code class="language-plaintext highlighter-rouge">Dict[str, str]</code>.</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
{
  "type": "python",
  "name": "donors_caas",
  "image_tag": "alpha",
  "source": "from collections import Counter

def grade(sample: dict[str, str], item: dict[str, str]) -&gt; float:
    # multisets of (name, value) pairs
    predicted = sample[\"output_json\"][\"predicted\"]
    expected  = item[\"reference_answer\"]
    pred_counts = Counter((d[\"name\"], d[\"value\"]) for d in predicted)
    exp_counts  = Counter((d[\"name\"], d[\"value\"]) for d in expected)

    true_pos = sum(min(pred_counts[p], exp_counts[p]) for p in pred_counts)
    pred_total = sum(pred_counts.values())
    exp_total  = sum(exp_counts.values())

    precision = true_pos / pred_total if pred_total else 0.0
    recall    = true_pos / exp_total  if exp_total  else 0.0

    if precision + recall == 0.0:
        return 0.0
    return 2 * precision * recall / (precision + recall)"
}
</code></pre></div></div>

<p>Results</p>

<blockquote>
  <p>For both o1-mini and o3-mini, performance improved by ~12 percentage points. The fine-tuned variants got much better about recognizing when not to apply wiring. Many commercial verification IPs can contain hundreds of optional signals, most of which are not meant to be applied.</p>

  <p>“Thanks to powerful base models and easy-to-use Reinforced Fine-Tuning APIs, we were able to significantly boost performance on our task with a small set of high-quality samples.”</p>

  <p>—<a href="https://www.chipstack.ai/">ChipStack</a>, next-generation of AI-powered tools for chip design and verification</p>
</blockquote>

<h4 id="production-ready-api-snippets-that-compile-and-pass-ast-checks">Production-ready API snippets that compile and pass AST checks</h4>

<p>Use case</p>

<blockquote>
  <p><strong>Company</strong>: <a href="https://www.runloop.ai/">Runloop</a> is a platform for AI-powered coding agents to be deployed into production and built with public and custom benchmarking capabilities to refine performance.</p>

  <p><strong>Problem to solve</strong>: Runloop wanted to improve model performance at using third-party APIs, such as the Stripe API, which can be large and complex without a human in the loop. If they could train a model to use the Stripe API, Runloop could turn economically impactful business cases into working code.</p>

  <p><strong>Objective</strong>: Their goal was teaching the model to master usage of the Stripe API, including writing complete code snippets for arbitrary user requests by either adapting information from existing integration guides, merging information from multiple guides, or inferring information not explicitly stated in the guides. They used RFT with two primary rewards:</p>

  <ol>
    <li>Reward the model for outputting the answer in a Markdown format that aligns with expectation of how a “dynamic” integration guide should look.</li>
    <li>Reward the model for producing “correct” code snippets by validating the outputted code via AST Grep. This allows them to confirm the model is making the correct Stripe SDK calls with the correct parameters and in some cases even in the correct order.</li>
  </ol>
</blockquote>

<p>Grader code</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
# Note this file gets uploaded to the OpenAI API as a grader
from ast_grep_py import SgRoot
from pydantic import BaseModel, Field  # type: ignore
from typing import Any, List, Optional
import re

SUPPORTED_LANGUAGES = ['typescript', 'javascript', 'ts', 'js']

class CodeBlock(BaseModel):    
    language: str = Field(
        description="Programming language of the code block (e.g., 'python', 'javascript')",
        examples=["python", "javascript", "typescript"]
    )
    path: str = Field(
        description="Target file path where the code should be written",
        examples=["main.py", "src/app.js", "index.html"]
    )
    code: str = Field(
        description="Actual code content extracted from the code block"
    )

class ASTGrepPattern(BaseModel):
    file_path_mask: str = Field(..., description="The file path pattern to match against")
    pattern: str = Field(..., description="The main AST grep pattern to search for")
    additional_greps: Optional[List[str]] = Field(
        default=None,
        description="Additional patterns that must also be present in the matched code"
    )

def extract_code_blocks(llm_output: str) -&gt; List[CodeBlock]:
    # Regular expression to match code blocks with optional language and path
    try:
        pattern = r"```(\w+\s+)?([\w./-]+)?\n([\s\S]*?)\n```"
        matches = list(re.finditer(pattern, llm_output, re.DOTALL))

        print(f"Found {len(matches)} code blocks in the LLM output")

        # Check if any code blocks were found
        if not matches:
            raise Exception("No code blocks found in the LLM response")

        code_blocks: list[CodeBlock] = []
        for match in matches:
            language = match.group(1) or ""
            path = match.group(2) or ""
            code = match.group(3)

            # Clean the path and language
            path = path.strip()
            language = language.strip()

            # If path is relative (doesn't start with /), prefix with /home/user/testbed/
            if path and not path.startswith("/"):
                original_path = path
                path = f"/home/user/testbed/{path}"
                print(
                    f"Converting relative path '{original_path}' to absolute path '{path}'"
                )

            code_blocks.append(
                CodeBlock(language=language, path=path, code=code.strip())
            )

        # Check for missing language or path in code blocks
        missing_language = [
            i for i, block in enumerate(code_blocks) if not block.language
        ]
        missing_path = [i for i, block in enumerate(code_blocks) if not block.path]

        if missing_language:
            print(
                f"WARNING: Code blocks at positions {missing_language} are missing language identifiers"
            )
            raise Exception(
                f"Code blocks at positions {missing_language} are missing language identifiers"
            )

        if missing_path:
            print(
                f"WARNING: Code blocks at positions {missing_path} are missing file paths"
            )
            raise Exception(
                f"Code blocks at positions {missing_path} are missing file paths"
            )

        paths = [block.path for block in code_blocks if block.path]
        print(
            f"Successfully extracted {len(code_blocks)} code blocks with paths: {', '.join(paths)}"
        )

    except Exception as e:
        print(f"Error extracting code blocks: {str(e)}")
        raise

    return code_blocks

def calculate_ast_grep_score(code_blocks: List[CodeBlock], ast_greps: Any) -&gt; float: 
    # Convert ast_greps to list if it's a dict
    if isinstance(ast_greps, dict):
        ast_greps = [ast_greps]
    
    # Parse each grep pattern into the Pydantic model
    parsed_patterns: List[ASTGrepPattern] = []
    for grep in ast_greps:
        try:
            pattern = ASTGrepPattern(**grep)
            parsed_patterns.append(pattern)
        except Exception as e:
            print(f"Error parsing AST grep pattern: {e}")
            return 0.0
    
    if not parsed_patterns:
        return 0.0

    total_score = 0.0    
    pattern_count = len(parsed_patterns)
    
    # Filter code blocks to only include TypeScript and JavaScript files
    supported_blocks = [
        block for block in code_blocks 
        if block.language.lower() in SUPPORTED_LANGUAGES
    ]

    if not supported_blocks:
        print("No TypeScript or JavaScript code blocks found to analyze")
        return 0.0

    for pattern in parsed_patterns:
        # Find matching code blocks based on path prefix
        matching_blocks = [
            block for block in supported_blocks 
            if block.path.startswith(pattern.file_path_mask)
        ]

        if not matching_blocks:
            print(f"No matching code blocks found for path prefix: {pattern.file_path_mask}")
            continue

        pattern_found = False
        for block in matching_blocks:
            try:
                # Create AST root for the code block
                root = SgRoot(block.code, block.language)
                node = root.root()
                
                # Check main pattern
                matches = node.find(pattern=pattern.pattern)
                if not matches:
                    continue

                # If we have additional greps, check them too
                if pattern.additional_greps:
                    all_additional_found = True
                    for additional_grep in pattern.additional_greps:
                        if additional_grep not in block.code:
                            all_additional_found = False
                            break
                    
                    if not all_additional_found:
                        continue

                # If we get here, we found a match with all required patterns
                pattern_found = True
                break

            except Exception as e:
                print(f"Error processing code block {block.path}: {e}")
                continue

        if pattern_found:
            total_score += 1.0

    # Return average score across all patterns
    return total_score / pattern_count if pattern_count &gt; 0 else 0.0

def grade_format(output_text: str) -&gt; float:
        # Find &lt;plan&gt; and &lt;/plan&gt; tags
    plan_start = output_text.find('&lt;plan&gt;')
    plan_end = output_text.find('&lt;/plan&gt;')
    
    # Find &lt;code&gt; and &lt;/code&gt; tags
    code_start = output_text.find('&lt;code&gt;')
    code_end = output_text.find('&lt;/code&gt;')

    reward = 0.0
    
    if plan_start == -1 or plan_end == -1 or code_start == -1 or code_end == -1:
        print(f'missing plan or code tags. format reward: {reward}')
        return reward
    reward += 0.1 # total: 0.1
    
    if not (plan_start &lt; plan_end &lt; code_start &lt; code_end):
        print(f'tags present but not in the correct order. format reward: {reward}')
        return reward
    reward += 0.1 # total: 0.2

    # Check if there are any stray tags
    plan_tags = re.findall(r'&lt;/?plan&gt;', output_text)
    code_tags = re.findall(r'&lt;/?code&gt;', output_text)
    
    if len(plan_tags) != 2 or len(code_tags) != 2:
        print(f'found stray plan or code tags. format reward: {reward}')
        return reward
    reward += 0.2 # total: 0.4
    
    # Extract content after &lt;/code&gt; tag
    after_tags = output_text[code_end + len('&lt;/code&gt;'):].strip()
    if after_tags:
        print(f'found text after code tags. format reward: {reward}')
        return reward
    reward += 0.2 # total: 0.6
    
    # Extract content inside &lt;plan&gt; tags
    plan_content = output_text[plan_start + len('&lt;plan&gt;'):plan_end].strip()
    if not plan_content:
        print(f'no plan content found. format reward: {reward}')
        return reward
    reward += 0.1 # total: 0.7
    
    # Extract content inside &lt;code&gt; tags
    code_content = output_text[code_start + len('&lt;code&gt;'):code_end].strip()
    if not code_content:
        print(f'no code content found. format reward: {reward}')
        return reward
    reward += 0.1 # total: 0.8

    # Extract content between &lt;/plan&gt; and &lt;code&gt; tags
    between_tags = output_text[plan_end + len('&lt;/plan&gt;'):code_start].strip()
    if between_tags:
        print(f'found text between plan and code tags. format reward: {reward}')
        return reward
    reward += 0.2 # total: 1.0
    
    if reward == 1.0:
        print(f'global format reward: {reward}')

    return reward

def grade(sample: Any, item: Any) -&gt; float:
    try:
        output_text = sample["output_text"]    

        format_reward = grade_format(output_text)
        if format_reward &lt; 1.0:
            return format_reward
        
        # Extract code content for grading
        code_start = output_text.find('&lt;code&gt;')
        code_end = output_text.find('&lt;/code&gt;')
        code_to_grade: str = output_text[code_start + len('&lt;code&gt;'):code_end].strip()
        code_blocks: List[CodeBlock] = []
        try:
            code_blocks = extract_code_blocks(code_to_grade)
        except Exception as e:
            print(f'error extracting code blocks: {e}')
            return 0.5
        
        ast_greps = item["reference_answer"]["ast_greps"]
        ast_grep_score = calculate_ast_grep_score(code_blocks, ast_greps)
        
        return (format_reward + ast_grep_score) / 2.0
    except Exception as e:
        print(f"Error during grading: {str(e)}")
        return 0.0
</code></pre></div></div>

<p>Results</p>

<blockquote>
  <p>Looking at the total reward (format and AST Grep) together, Runloop has seen improvements of on average <strong>12%</strong> of the RFT model compared to the base o3-mini model on the benchmark.</p>

  <p>They implement two types of tests, one providing explicit content from the integration guides (assessing reasoning and instruction following) and one without (assessing knowledge recall). Both variants saw improvement of over <strong>8%</strong>.</p>

  <p>“OpenAIs RFT platform gives us access to the best generalized reasoning models in the world, with the toolset to supercharge that reasoning on problem domains important to our business.”</p>

  <p>—<a href="https://www.runloop.ai/">Runloop</a></p>
</blockquote>

<h4 id="correct-handling-of-conflicts-and-dupes-in-a-schedule-manager">Correct handling of conflicts and dupes in a schedule manager</h4>

<p>Use case</p>

<blockquote>
  <p><strong>Company</strong>: <a href="https://www.joinmilo.com/">Milo</a> helps busy parents manage chaotic family schedules by converting messy inputs—like text convos with to-dos, school newsletter PDFs, weekly reminders, sports schedule emails—into reliable calendar and list actions.</p>

  <p><strong>Problem to solve</strong>: Base GPT-4o prompting and SFT fell short of trust thresholds.</p>

  <p><strong>Objective</strong>: Milo used RFT to properly create coding tasks like event vs. list classification, recurrence rule generation, accurate updates and deletes, conflict detection, and strict output formatting. They defined a grader that checked whether generated item objects were complete, categorized correctly, and were a duplicate or had a calendar conflict.</p>
</blockquote>

<p>Results</p>

<blockquote>
  <p>Results showed performance improvements across the board, with average correctness scores <strong>increasing from 0.86 to 0.91</strong>, while the most challenging scenarios improved from <strong>0.46 to 0.71</strong> (where a perfect score=1).</p>

  <p>“Accuracy isn’t just a metric—it’s peace of mind for busy parents. These are still early days but with such important improvements in base performance, we’re able to push more aggressively into complex reasoning needs.”</p>

  <p>“Navigating and supporting family dynamics involves understanding nuanced implications of the data. Take conflicts—knowing soccer for Ethan conflicts with Ella’s recital because Dad has to drive both kids goes deeper than simple overlapping times.”</p>

  <p>—<a href="https://www.joinmilo.com/">Milo</a>, AI scheduling tool for families</p>
</blockquote>

<h3 id="2-pull-facts-into-a-clean-format">2. Pull facts into a clean format</h3>

<p>These tasks typically involve subtle distinctions that demand clear classification guidelines. Successful framing requires explicit and hierarchical labeling schemes defined through consensus by domain experts. Without consistent agreement, grading signals become noisy, weakening RFT effectiveness.</p>

<h4 id="assigning-icd-10-medical-codes">Assigning ICD-10 medical codes</h4>

<p>Use case</p>

<blockquote>
  <p><strong>Company</strong>: <a href="https://www.ambiencehealthcare.com/">Ambience</a> is an AI platform that eliminates administrative burden for clinicians and ensures accurate, compliant documentation across 100+ specialties, helping physicians focus on patient care while increasing documentation quality and reducing compliance risk for health systems.</p>

  <p><strong>Problem to solve</strong>: ICD-10 coding is one of the most intricate administrative tasks in medicine. After every patient encounter, clinicians must map each diagnosis to one of ~70,000 codes—navigating payor-specific rules on specificity, site-of-care, and mutually exclusive pairings. Errors can trigger audits and fines that stretch into nine figures.</p>

  <p><strong>Objective</strong>: Using reinforcement fine-tuning on OpenAI frontier models, Ambience wanted to train a reasoning system that listens to the visit audio, pulls in relevant EHR context, and recommends ICD-10 codes with accuracy exceeding expert clinicians.</p>
</blockquote>

<p>Results</p>

<blockquote>
  <p>Ambience achieved model improvements that can lead human experts.</p>

  <p>On a gold-panel test set spanning hundreds of encounters, reinforcement fine-tuning moved the model from trailing humans to leading them by <strong>12 points—eliminating roughly one quarter of the coding errors trained physicians make</strong>:</p>

  <ul>
    <li>o3-mini (base): 0.39 (-6 pts)</li>
    <li>Physician baseline: 0.45</li>
    <li>RFT-tuned o3-mini: 0.57 (+12 pts)</li>
  </ul>

  <p>The result is a real-time, point-of-care coding support that can raise reimbursement integrity while reducing compliance risk.</p>

  <p>“Accurate ICD-10 selection is mission-critical for compliant documentation. RFT unlocked a new level of coding precision we hadn’t seen from any foundation model and set a new bar for automated coding.”</p>

  <p>—<a href="https://www.ambiencehealthcare.com/">Ambience Healthcare</a></p>
</blockquote>

<h4 id="extracting-excerpts-to-support-legal-claims">Extracting excerpts to support legal claims</h4>

<p>Use case</p>

<blockquote>
  <p><strong>Company</strong>: <a href="https://www.harvey.ai/">Harvey</a> is building AI that legal teams trust—and that trust hinges on retrieving precisely the right evidence from a sprawling corpora of contracts, statutes, and case law. Legal professionals aren’t satisfied with models that merely generate plausible-sounding summaries or paraphrased answers. They demand verifiable citations—passages that can be traced directly back to source documents.</p>

  <p><strong>Problem to solve</strong>: Harvey’s clients use its models to triage litigation risk, construct legal arguments, and support due diligence for legal professionals—all tasks where a single missed or misquoted sentence can flip an outcome. Models must be able to parse long, dense legal documents and extract only the portions that matter. In practice, these inputs are often messy and inconsistent: some claims are vague, while others hinge on rare legal doctrines buried deep in boilerplate.</p>

  <p><strong>Objective</strong>: The task’s requirements are to interpret nuanced legal claims, navigate long-form documents, and select on-point support with verbatim excerpts.</p>
</blockquote>

<p>Prompt</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1
2
3
4
5
6
## Instructions
You will be provided with a question and a text excerpt. Identify any passages in the text that are directly relevant to answering the question.
- If there are no relevant passages, return an empty list.
- Passages must be copied **exactly** from the text. Do not paraphrase or summarize.
## Excerpt
"""{text_excerpt}"""
</code></pre></div></div>

<p>Grader</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
from rapidfuzz import fuzz

# Similarity ratio helper
def fuzz_ratio(a: str, b: str) -&gt; float:
    """Return a normalized similarity ratio using RapidFuzz.
    """
    if len(a) == 0 and len(b) == 0:
        return 1.0
    return fuzz.ratio(a, b) / 100.0

# Main grading entrypoint (must be named `grade`)
def grade(sample: dict, item: dict) -&gt; float:
    """Compute an F1‑style score for citation extraction answers using RapidFuzz.
    """
    model_passages = (sample.get('output_json') or {}).get('passages', [])
    ref_passages = (item.get('reference_answer') or {}).get('passages', [])

    # If there are no reference passages, return 0.
    if not ref_passages:
        return 0.0

    # Recall: average best match for each reference passage.
    recall_scores = []
    for ref in ref_passages:
        best = 0.0
        for out in model_passages:
            score = fuzz_ratio(ref, out)
            if score &gt; best:
                best = score
        recall_scores.append(best)
    recall = sum(recall_scores) / len(recall_scores)

    # Precision: average best match for each model passage.
    if not model_passages:
        precision = 0.0
    else:
        precision_scores = []
        for out in model_passages:
            best = 0.0
            for ref in ref_passages:
                score = fuzz_ratio(ref, out)
                if score &gt; best:
                    best = score
            precision_scores.append(best)
        precision = sum(precision_scores) / len(precision_scores)

    if precision + recall == 0:
        return 0.0

    return 2 * precision * recall / (precision + recall)
</code></pre></div></div>

<p>Results</p>

<blockquote>
  <p>After reinforcement fine-tuning, Harvey saw a <strong>20% increase</strong> in the F1 score:</p>

  <ul>
    <li>Baseline F1: 0.563</li>
    <li>Post-RFT F1 - 0.6765</li>
  </ul>

  <p>Using RFT, Harvey significantly improved legal fact-extraction performance, surpassing GPT-4o efficiency and accuracy. Early trials showed RFT <strong>winning or tying in 93% of comparisons</strong> against GPT-4o.</p>

  <p>“The RFT model demonstrated comparable or superior performance to GPT-4o, but with significantly faster inference, proving particularly beneficial for real-world legal use cases.</p>

  <p>—<a href="https://www.harvey.ai/">Harvey</a>, AI for legal teams</p>
</blockquote>

<h3 id="3-apply-complex-rules-correctly">3. Apply complex rules correctly</h3>

<p>This use case involves pulling verifiable facts or entities from unstructured inputs into clearly defined schemas (e.g., JSON objects, condition codes, medical codes, legal citations, or financial metrics).</p>

<p>Successful extraction tasks typically benefit from precise, continuous grading methodologies—like span-level F1 scores, fuzzy text-matching metrics, or numeric accuracy checks—to evaluate how accurately the extracted information aligns with ground truth. Define explicit success criteria and detailed rubrics. Then, the model can achieve reliable, repeatable improvements.</p>

<h4 id="expert-level-reasoning-in-tax-analysis">Expert-level reasoning in tax analysis</h4>

<p>Use case</p>

<blockquote>
  <p><strong>Company</strong>: <a href="https://www.accordance.com/">Accordance</a> is building a platform for tax, audit, and CPA teams.</p>

  <p><strong>Problem to solve</strong>: Taxation is a highly complex domain, requiring deep reasoning across nuanced fact patterns and intricate regulations. It’s also a field that continues changing.</p>

  <p><strong>Objective</strong>: Accordance wanted a high-trust system for sophisticated tax scenarios while maintaining accuracy. Unlike traditional hardcoded software, it’s important that their data extraction tool adapts as the tax landscape evolves.</p>
</blockquote>

<p>Grader code</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1
2
3
4
5
6
7
8
9
10
11
12
[+0.05] For correctly identifying Alex (33.33%), Barbara (33.33% → 20%), Chris (33.33%), and Dana (13.33%) ownership percentages
[+0.1] For correctly calculating Barbara's annual allocation as 26.67% and Dana's as 6.67% without closing of books
[+0.15] For properly allocating Alex ($300,000), Barbara ($240,030), Chris ($300,000), and Dana ($60,030) ordinary income
[+0.1] For calculating Alex's ending stock basis as $248,333 and debt basis as $75,000
[+0.05] For calculating Barbara's remaining basis after sale as $264,421
[+0.1] For calculating AAA before distributions as $1,215,000 and ending AAA as $315,000
[+0.1] For identifying all distributions as tax-free return of capital under AAA
[+0.1] For calculating Barbara's capital gain on stock sale as $223,720 ($400,000 - $176,280)
[+0.1] For explaining that closing of books would allocate based on actual half-year results
[+0.05] For identifying the ordering rules: AAA first, then E&amp;P ($120,000), then remaining basis
[+0.05] For noting distributions exceeding $1,215,000 would be dividends up to $120,000 E&amp;P
[+0.05] For correctly accounting for separately stated items in basis calculations (e.g., $50,000 Section 1231 gain)
</code></pre></div></div>

<p>Results</p>

<blockquote>
  <p>By collaborating with OpenAI and their in-house tax experts, Accordance achieved:</p>

  <ul>
    <li>Almost <strong>40% improvement</strong> in tax analysis tasks over base models</li>
    <li>Superior performance compared to all other leading models on benchmarks like TaxBench</li>
    <li>The RFT-trained models demonstrated an ability to handle advanced tax scenarios with high accuracy—when evaluated by tax professionals, Accordance’s fine-tuned models showed expert-level reasoning, with the potential to save thousands of hours of manual work</li>
  </ul>

  <p>“We’ve achieved a 38.89% improvement in our tax analysis tasks over base models and significantly outperformed all other leading models on key tax benchmarks (including TaxBench). The RFT-trained models’ abilities to handle sophisticated tax scenarios while maintaining accuracy demonstrates the readiness of reinforcement fine-tuning—and AI more broadly—for professional applications. Most importantly, RFT provides a foundation for continuous adaptation as the tax landscape evolves, ensuring sustained value and relevance. When evaluated by tax experts, our fine-tuned models demonstrated expert-level reasoning capabilities that will save thousands of professional hours—this isn’t just an incremental improvement, it’s a paradigm shift in how tax work can be done.”</p>

  <p>—<a href="https://www.accordance.com/">Accordance</a>, AI tax accounting company</p>
</blockquote>

<h4 id="enforcement-of-nuanced-content-moderation-policies">Enforcement of nuanced content moderation policies</h4>

<p>Use case</p>

<blockquote>
  <p><strong>Company</strong>: <a href="https://www.safetykit.com/">SafetyKit</a> is a risk and compliance platform that helps organizations make decisions across complex content moderation workflows.</p>

  <p><strong>Porblem to solve</strong>: These systems must handle large volumes of content and apply intricate policy logic that requires multistep reasoning. Because of the volume of data and subtle distinctions in labelling, these types of tasks can be difficult for general purpose models.</p>

  <p><strong>Objective</strong>: SafetyKit aimed to replace multiple nodes in their most complex workflows with a single reasoning agent using a reinforcement fine-tuned model. The goal is to reduce SafetyKit’s time-to-market for novel policy enforcements even in challenging, nuanced domains.</p>
</blockquote>

<p>Results</p>

<blockquote>
  <p>SafetyKit is using their o3-mini RFT model to support advanced content moderation capabilities, ensuring user safety for one of the largest AI chatbot companies in the world. They have successfully improved F1-score <strong>from 86% to 90%</strong>, soon to replace dozens of 4o calls within their production pipeline.</p>

  <p>“SafetyKit’s RFT-enabled moderation achieved substantial improvements in nuanced content moderation tasks, crucial for safeguarding users in dynamic, real-world scenarios.”</p>

  <p>—<a href="https://www.safetykit.com/">SafetyKit</a></p>
</blockquote>

<h4 id="legal-document-reviews-comparisons-and-summaries">Legal document reviews, comparisons, and summaries</h4>

<p>Use case</p>

<blockquote>
  <p><strong>Company</strong>: <a href="https://www.thomsonreuters.com/">Thomson Reuters</a> is an AI and technology company empowering professionals with trusted content and workflow automation.</p>

  <p><strong>Problem to solve</strong>: Legal professionals must read through large amounts of content before making any decisions. Thomson Reuter’s CoCounsel product is designed to help these experts move faster by providing an AI assistant with content and industry knowledge. The models that power this tool must understand complex legal rules.</p>

  <p><strong>Objective</strong>: Thomson Reuters aimed to create a reinforcement fine-tuned model excelling in legal AI skills. They conducted preliminary evaluations of RFT to see if they could achieve model performance improvements, using specialized datasets from three highly-used CoCounsel Legal AI skills for legal professionals:</p>

  <ol>
    <li>Review documents: Generates detailed answers to questions asked against contracts, transcripts, and other legal documents</li>
    <li>Compare documents: Highlights substantive differences between two or more different contracts or documents</li>
    <li>Summarize: Summarizes the most important information within one or more documents to enable rapid legal review</li>
  </ol>
</blockquote>

<p>Results</p>

<blockquote>
  <p><img src="https://cdn.openai.com/API/docs/images/thomsonreuters-results.png" alt="Image 1: Provide example data and create a fine-tuning job to optimize model performance for your use case" /></p>

  <p>“LLM as a judge has been helpful in demonstrating the possibility of improving upon the reasoning models - in preliminary evaluations, the RFT model consistently performed better than the baseline o3-mini and o1 model”</p>

  <p>—<a href="https://www.thomsonreuters.com/">Thomson Reuters</a>, AI and technology company</p>
</blockquote>

<h2 id="evals-are-the-foundation">Evals are the foundation</h2>

<p><strong>Before implementing RFT, we strongly recommended creating and running an eval for the task you intend to fine-tune on</strong>. If the model you intend to fine-tune scores at either the absolute minimum or absolute maximum possible score, then RFT won’t be useful to you.</p>

<p>RFT works by reinforcing better answers to provided prompts. If we can’t distinguish the quality of different answers (i.e., if they all receive the minimum or maximum possible score), then there’s no training signal to learn from. However, if your eval scores somewhere in the range between the minimum and maximum possible scores, there’s enough data to work with.</p>

<p>An effective eval reveals opportunities where human experts consistently agree but current frontier models struggle, presenting a valuable gap for RFT to close. <a href="https://platform.openai.com/docs/guides/evals">Get started with evals</a>.</p>

<h2 id="how-to-get-better-results-from-rft">How to get better results from RFT</h2>

<p>To see improvements in your fine-tuned model, there are two main places to revisit and refine: making sure your task is well defined, and making your grading scheme more robust.</p>

<h3 id="reframe-or-clarify-your-task">Reframe or clarify your task</h3>

<p>Good tasks give the model a fair chance to learn and let you quantify improvements.</p>

<ul>
  <li><strong>Start with a task the model can already solve occasionally</strong>. RFT works by sampling many answers, keeping what looks best, and nudging the model toward those answers. If the model never gets the answer correct today, it cannot improve.</li>
  <li><strong>Make sure each answer can be graded</strong>. A grader must read an answer and produce a score without a person in the loop. We support multiple <a href="https://platform.openai.com/docs/guides/graders">grader types</a>, including custom Python graders and LLM judges. If you can’t write code to judge the answer with an available grader, RFT is not the right tool.</li>
  <li><strong>Remove doubt about the “right” answer</strong>. If two careful people often disagree on the solution, the task is too fuzzy. Rewrite the prompt, add context, or split the task into clearer parts until domain experts agree.</li>
  <li><strong>Limit lucky guesses</strong>. If the task is multiple choice with one obvious best pick, the model can win by chance. Add more classes, ask for short open‑ended text, or tweak the format so guessing is costly.</li>
</ul>

<h3 id="strengthen-your-grader">Strengthen your grader</h3>

<p>Clear, robust grading schemes are essential for RFT.</p>

<ul>
  <li><strong>Produce a smooth score, not a pass/fail stamp</strong>. A score that shifts gradually as answers improve provides a better training signal.</li>
  <li><strong>Guard against reward hacking</strong>. This happens when the model finds a shortcut that earns high scores without real skill.</li>
  <li><strong>Avoid skewed data</strong>. Datasets in which one label shows up most of the time invite the model to guess that label. Balance the set or up‑weight rare cases so the model must think.</li>
  <li><strong>Use an LLM judge when code falls short</strong>. For rich, open‑ended answers, have a <a href="https://platform.openai.com/docs/guides/graders#model-graders">separate OpenAI model grade</a> your fine-tuned model’s answers. Make sure you:
    <ul>
      <li><strong>Evaluate the judge</strong>: Run multiple candidate responses and correct answers through your LLM judge to ensure the grade returned is stable and aligned with preference.</li>
      <li><strong>Provide few-shot examples</strong>. Include great, fair, and poor answers in the prompt to improve the grader’s effectiveness.</li>
    </ul>
  </li>
</ul>

<p>Learn more about <a href="https://platform.openai.com/docs/guides/graders">grader types</a>.</p>

<h2 id="other-resources">Other resources</h2>

<p>For more inspiration, visit the <a href="https://cookbook.openai.com/">OpenAI Cookbook</a>, which contains example code and links to third-party resources, or learn more about our models and reasoning capabilities:</p>

<ul>
  <li><a href="https://platform.openai.com/docs/models">Meet the models</a></li>
  <li><a href="https://platform.openai.com/docs/guides/reinforcement-fine-tuning">Reinforcement fine-tuning guide</a></li>
  <li><a href="https://platform.openai.com/docs/guides/graders">Graders</a></li>
  <li>
    <p><a href="https://platform.openai.com/docs/guides/model-optimization">Model optimization overview</a></p>
  </li>
  <li><a href="https://platform.openai.com/docs/guides/rft-use-cases#top">Overview</a></li>
  <li><a href="https://platform.openai.com/docs/guides/rft-use-cases#when-to-use-reinforcement-fine-tuning">When to use reinforcement fine-tuning</a></li>
  <li><a href="https://platform.openai.com/docs/guides/rft-use-cases#evals-are-the-foundation">Evals are the foundation</a></li>
  <li><a href="https://platform.openai.com/docs/guides/rft-use-cases#how-to-get-better-results-from-rft">How to get better results from RFT</a></li>
  <li><a href="https://platform.openai.com/docs/guides/rft-use-cases#other-resources">Other resources</a></li>
</ul>]]></content><author><name></name></author><category term="scratchpad" /></entry><entry><title type="html">Windows 11 ratpoison</title><link href="https://ib.bsb.br/windows-11-ratpoison/" rel="alternate" type="text/html" title="Windows 11 ratpoison" /><published>2025-06-09T00:00:00+00:00</published><updated>2025-06-09T23:33:56+00:00</updated><id>https://ib.bsb.br/windows-11-ratpoison</id><content type="html" xml:base="https://ib.bsb.br/windows-11-ratpoison/"><![CDATA[<h1 id="powershell-script-to-create-final-ratpoison-like-ahk-config">PowerShell Script to Create Final Ratpoison-like AHK Config</h1>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># #####################################################################
# # PowerShell Script to Configure a Ratpoison-like Environment on Windows
# # Version 2.1 - AutoHotkey Centric (AHK v1 Syntax Fix)
# #
# # This script automates the setup of a ratpoison-like tiling window manager
# # environment using Komorebi and a detailed AutoHotkey script. It is designed
# # to be run once with Administrator privileges.
# #
# # Right-click the .ps1 file -&gt; Run with PowerShell (as Admin) or execute:
# # Set-ExecutionPolicy Bypass -Scope Process -Force; .\path\to\this_script.ps1
# #####################################################################

# --- PRE-FLIGHT CHECKS AND SETUP ---

Function Test-IsAdmin {
    $currentUser = New-Object Security.Principal.WindowsPrincipal $([Security.Principal.WindowsIdentity]::GetCurrent())
    return $currentUser.IsInRole([Security.Principal.WindowsBuiltInRole]::Administrator)
}

if (-NOT (Test-IsAdmin)) {
    Write-Error "This script must be run with Administrator privileges. Please re-run from an elevated PowerShell terminal."
    if ($Host.Name -eq "ConsoleHost") {
        Write-Host "Press any key to continue..."
        $Host.UI.RawUI.ReadKey("NoEcho,IncludeKeyDown") | Out-Null
    }
    exit 1
}

$userProfile = $env:USERPROFILE
$startupPath = Join-Path -Path $userProfile -ChildPath "AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup"
$scriptsPath = Join-Path -Path $userProfile -ChildPath "RatpoisonScripts"
$komorebiConfigPath = Join-Path -Path $userProfile -ChildPath ".config\komorebi"

Write-Host "--- Ratpoison to Komorebi Setup (AHK Edition) ---" -ForegroundColor Yellow
Write-Host "This script will install and configure all necessary tools."
Write-Host "User Profile Path: $userProfile"
Write-Host "Startup Path: $startupPath"
Write-Host "Custom Scripts Path: $scriptsPath"
Write-Host ""

# --- STEP 1: INSTALL CHOCOLATEY AND CORE APPLICATIONS ---

Write-Host "Step 1: Installing Chocolatey, Komorebi, PowerToys, and AutoHotkey..." -ForegroundColor Cyan
if (-not (Get-Command choco -ErrorAction SilentlyContinue)) {
    Write-Host "Chocolatey not found. Installing now..."
    Set-ExecutionPolicy Bypass -Scope Process -Force;
    [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072;
    try {
        iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1'))
        Write-Host "Chocolatey installed successfully." -ForegroundColor Green
    } catch {
        Write-Error "Failed to install Chocolatey. Please install it manually from https://chocolatey.org and re-run this script."
        exit 1
    }
} else {
    Write-Host "Chocolatey is already installed." -ForegroundColor Green
}

# Install core packages including AutoHotkey v1
$packages = @("komorebi", "powertoys", "autohotkey.install")
foreach ($pkg in $packages) {
    if (-not (choco list --local-only --exact $pkg | Select-String $pkg)) {
        Write-Host "Installing $pkg..."
        choco install $pkg -y --force
    } else {
        Write-Host "$pkg is already installed." -ForegroundColor Green
    }
}


# --- STEP 2: CREATE PLACEHOLDER DIRECTORIES AND SCRIPTS ---

Write-Host "`nStep 2: Creating placeholder directories and user scripts..." -ForegroundColor Cyan
if (-not (Test-Path -Path $scriptsPath)) {
    New-Item -Path $scriptsPath -ItemType Directory | Out-Null
    Write-Host "Created custom scripts directory at $scriptsPath"
}

# Create placeholders for all user shell scripts, ported to PowerShell
$placeholderScripts = @{
    "clipse.ps1" = "# Placeholder for clipse functionality"
    "split1.ps1" = "komorebic.exe layout split horizontal 0.25"
    "split2.ps1" = "komorebic.exe layout split horizontal 0.75"
    "thermal.ps1" = "Write-Host 'Thermal script executed.'"
    "llm_scrot.ps1" = "Write-Host 'LLM Screenshot script executed.'"
    "llm_sF12_extract_last.ps1" = "Write-Host 'LLM Extract Last script executed.'"
    "llm_sF9_attachment.ps1" = "Write-Host 'LLM Attachment script executed.'"
    "llm_analyze_file.ps1" = "Write-Host 'LLM Analyze File script executed.'"
    "llm_sF8_fragment.ps1" = "Write-Host 'LLM Fragment script executed.'"
    "llm_pipe_selected_sys.ps1" = "Write-Host 'LLM Pipe Selected script executed.'"
    "llm_sF6_system_prompt.ps1" = "Write-Host 'LLM System Prompt script executed.'"
    "llm_sF4_prompt.ps1" = "Write-Host 'LLM Prompt script executed.'"
    "dratmenu.py" = "print('dratmenu.py executed')"
}

foreach ($item in $placeholderScripts.GetEnumerator()) {
    $fullPath = Join-Path -Path $scriptsPath -ChildPath $item.Name
    if (-not (Test-Path -Path $fullPath)) {
        Set-Content -Path $fullPath -Value $item.Value
    }
}
Write-Host "Created placeholder user scripts in '$scriptsPath'. Please edit them with your own logic." -ForegroundColor Green


# --- STEP 3: CREATE KOMOREBI CONFIGURATION ---

Write-Host "`nStep 3: Creating Komorebi configuration file..." -ForegroundColor Cyan

# Ensure the .config directory for Komorebi exists
if (-not (Test-Path -Path $komorebiConfigPath)) {
    New-Item -Path $komorebiConfigPath -ItemType Directory -Force | Out-Null
}

$komorebiConfig = @"
{
    `"border_width`": 0,
    `"border_color`": `"0c0c0c`",
    `"active_border_color`": `"d75f00`",
    `"default_workspace_padding`": 0,
    `"default_container_padding`": 8,
    `"float_rules`": [
        {
            `"id`": `"rpbar`",
            `"kind`": `"Class`"
        },
        {
            `"id`": `"PowerToys.PowerLauncher.exe`",
            `"kind`": `"Exe`"
        },
        {
            `"id`": `"CalculatorApp.exe`",
            `"kind`": `"Exe`"
        },
        {
            `"id`": `"galculator.exe`",
            `"kind`": `"Exe`"
        }
    ]
}
"@
Set-Content -Path (Join-Path $komorebiConfigPath "komorebi.json") -Value $komorebiConfig -Force
Write-Host "komorebi.json created successfully." -ForegroundColor Green

# --- STEP 4: CREATE THE DEFINITIVE AUTOHOTKEY SCRIPT ---

Write-Host "`nStep 4: Generating the master AutoHotkey script (MyRatpoisonConfig.ahk)..." -ForegroundColor Cyan

# This heredoc contains the entire, corrected AutoHotkey script.
$autoHotkeyConfig = @"
#NoEnv
#Warn
#SingleInstance force
#Persistent
SendMode Input
SetWorkingDir, %A_ScriptDir%

; --- GLOBAL VARIABLES ---
global rp_prefix_key := "LWin"
global rp_prefix_timeout_ms := 2000
global komorebi_cli := "komorebic.exe"
global user_scripts_path := A_UserProfileDir . "\RatpoisonScripts\"
global rpws_layout_path := A_UserProfileDir . "\Desktop\ratpoison_layout.json"

; #####################################################################
; # PREFIX KEY HANDLER (Commands after Super_L)
; #####################################################################
Hotkey, %rp_prefix_key%, RatpoisonPrefixHandler, On

RatpoisonPrefixHandler() {
    global
    local next_key, is_shift
    
    Input, next_key, "L1 T" . rp_prefix_timeout_ms . " M V", "{Esc}"
    
    if (ErrorLevel = "Timeout" || ErrorLevel = "EndKey:Escape" || next_key = "") {
        SendInput, "{LWin}"
        return
    }
    
    ; --- Check for Shift modifier and get lowercase key (AHK v1 Syntax) ---
    is_shift := false
    local upper_key
    StringUpper, upper_key, next_key
    if (next_key == upper_key and next_key != " " and next_key != "")
    {
        is_shift := true
    }
    
    local key_lower
    StringLower, key_lower, next_key
    
    ; --- MODAL COMMAND DISPATCHER ---
    if (is_shift) {
        ; --- SHIFT + KEY COMMANDS (e.g., bind s-k) ---
        if (key_lower = "s") { ; bind s-s hsplit
            Run, %komorebi_cli% layout split horizontal 0.5
        } else if (key_lower = "z") { ; bind s-z redo
            Run, %komorebi_cli% redo
        } else if (key_lower = "x") { ; bind s-x fselect
            Run, %komorebi_cli% focus-mode toggle
        } else if (key_lower = "w") { ; bind s-w select
            Run, %komorebi_cli% focus-mode toggle
        } else if (key_lower = "r") { ; bind s-r remove
            Run, %komorebi_cli% close
        } else if (key_lower = "u") { ; bind s-u exec rpws restore
            Run, %komorebi_cli% load-layout "%rpws_layout_path%"
        } else if (key_lower = "i") { ; bind s-i exec nm-connection-editor
            Run, ms-settings:network-status
        } else if (key_lower = "g") { ; bind s-g exec galculator
            Run, calc.exe
        } else if (key_lower = "e") { ; bind s-e exec xnc
            Run, notepad.exe
        } else if (key_lower = "a") { ; bind s-a title
            InputBox, NewName, "Rename Workspace", "Enter new name for current workspace:"
            if (!ErrorLevel &amp;&amp; NewName != "") {
                Run, %komorebi_cli% workspace-name current "%NewName%"
            }
        } else if (key_lower = "t") { ; bind s-t exec sudo pcmanfm-qt
            Run, *RunAs explorer.exe
        } else if (key_lower = "o") { ; bind s-o iother
            Run, %komorebi_cli% focus-monitor next
        } else if (key_lower = " ") { ; bind s-space exec dratmenu.py
            Run, python.exe "%user_scripts_path%dratmenu.py"
        } else if (key_lower = "1") { ; bind s-1 swap 1
            Run, %komorebi_cli% move-to-workspace 0
        } else if (key_lower = "2") { ; bind s-2 swap 2
            Run, %komorebi_cli% move-to-workspace 1
        } else if (key_lower = "3") { ; bind s-3 swap 3
            Run, %komorebi_cli% move-to-workspace 2
        } else if (key_lower = "4") { ; bind s-4 swap 4
            Run, %komorebi_cli% move-to-workspace 3
        } else if (key_lower = "5") { ; bind s-5 swap 5
            Run, %komorebi_cli% move-to-workspace 4
        } else if (key_lower = "6") { ; bind s-6 swap 6
            Run, %komorebi_cli% move-to-workspace 5
        } else if (key_lower = "7") { ; bind s-7 swap 7
            Run, %komorebi_cli% move-to-workspace 6
        } else if (key_lower = "8") { ; bind s-8 swap 8
            Run, %komorebi_cli% move-to-workspace 7
        } else if (key_lower = "9") { ; bind s-9 swap 9
            Run, %komorebi_cli% move-to-workspace 8
        } else if (key_lower = "0") { ; bind s-0 swap 0
            Run, %komorebi_cli% move-to-workspace 9
        } else if (key_lower = "-") { ; bind s-minus exec split1.sh
            Run, powershell.exe -NoProfile -File "%user_scripts_path%split1.ps1"
        } else if (key_lower = "=") { ; bind s-equal exec split2.sh
            Run, powershell.exe -NoProfile -File "%user_scripts_path%split2.ps1"
        } else if (key_lower = ";") { ; bind s-semicolon colon
            SendInput, !{Space}
        } else if (key_lower = "'") { ; bind s-apostrophe colon exec x-terminal-emulator -e sudo
            Run, *RunAs wt.exe
        } else {
            SendInput, {LWin}{%next_key%}
        }
    } else {
        ; --- REGULAR KEY COMMANDS (e.g., bind k) ---
        if (key_lower = "z") { ; bind z undo
            Run, %komorebi_cli% undo
        } else if (key_lower = "x") { ; bind x swap
            Run, %komorebi_cli% swap next
        } else if (key_lower = "w") { ; bind w exec thorium-browser
            Run, thorium-browser.exe
        } else if (key_lower = "v") { ; bind v meta S-Insert
            SendInput, +{Insert}
        } else if (key_lower = "u") { ; bind u exec rpws dump
            Run, %komorebi_cli% save-layout "%rpws_layout_path%"
        } else if (key_lower = "t") { ; bind t exec pcmanfm-qt
            Run, explorer.exe
        } else if (key_lower = "r") { ; bind r resize
            Run, %komorebi_cli% resize-edge right +50
        } else if (key_lower = "q") { ; bind q delete
            Run, %komorebi_cli% close
        } else if (key_lower = "p") { ; bind p dedicate
            Run, %komorebi_cli% toggle-float
        } else if (key_lower = "o") { ; bind o cother
            Run, %komorebi_cli% focus previous
        } else if (key_lower = "i") { ; bind i exec viewnior
            Run, irfanview.exe
        } else if (key_lower = "h") { ; bind h exec x-terminal-emulator -e bpytop
            Run, wt.exe btop.exe
        } else if (key_lower = "g") { ; bind g exec gsimplecal
            Run, calc.exe
        } else if (key_lower = "f") { ; bind f only
            Run, %komorebi_cli% layout monocle
        } else if (key_lower = "e") { ; bind e exec xnedit
            Run, notepad.exe
        } else if (key_lower = "c") { ; bind c redisplay
            Run, %komorebi_cli% retile
        } else if (key_lower = "b") { ; bind b exec vorta
            Run, vorta.exe
        } else if (key_lower = "k") { ; bind k gother
            Run, %komorebi_cli% focus next
        } else if (key_lower = "-") { ; bind minus vsplit
            Run, %komorebi_cli% layout split vertical 0.5
        } else if (key_lower = "=") { ; bind equal hsplit
            Run, %komorebi_cli% layout split horizontal 0.5
        } else if (key_lower = "'") { ; bind apostrophe colon exec x-terminal-emulator -e
            Run, wt.exe
        } else if (key_lower = ";") { ; bind semicolon exec
            InputBox, Cmd, "Execute Command", "Enter command to run:"
            if (!ErrorLevel &amp;&amp; Cmd != "") {
                Run, %Cmd%
            }
        } else if (key_lower = " ") { ; bind space exec xboomx
            MsgBox, Boom!
        } else if (key_lower = "return") { ; bind Return exec x-terminal-emulator
            Run, wt.exe
        } else if (key_lower = "backspace") { ; bind BackSpace next
            Run, %komorebi_cli% focus next
        } else if (key_lower = "tab") { ; bind Tab focus
            Run, %komorebi_cli% focus next
        } else if (key_lower = "escape") { ; bind Escape abort
            Run, %komorebi_cli% toggle-pause
        } else {
             SendInput, {LWin}{%next_key%}
        }
    }
    return
}
return ; End of auto-execute section

; #####################################################################
; # DIRECT HOTKEYS (No Prefix Needed)
; #####################################################################

; --- From 'definekey top ...' ---
PrintScreen::Run, ShareX.exe -workflow "Fullscreen screenshot"
!PrintScreen::Run, powershell.exe -NoProfile -File "%user_scripts_path%clipse.ps1"

; --- Direct focus keys ---
Up::Run, %komorebi_cli% focus up
Down::Run, %komorebi_cli% focus down
Left::Run, %komorebi_cli% focus left
Right::Run, %komorebi_cli% focus right

; --- Direct window move/swap keys ---
#Up::Run, %komorebi_cli% swap up
#Down::Run, %komorebi_cli% swap down
#Left::Run, %komorebi_cli% swap left
#Right::Run, %komorebi_cli% swap right

; --- Workspace Navigation ---
PgUp::Run, %komorebi_cli% cycle-workspace next
PgDn::Run, %komorebi_cli% cycle-workspace prev
^Tab::Run, %komorebi_cli% cycle-workspace prev
#PgUp::Run, %komorebi_cli% cycle-move-to-workspace next
#PgDn::Run, %komorebi_cli% cycle-move-to-workspace prev
#^Tab::Run, %komorebi_cli% cycle-move-to-workspace prev

; --- From 'bind M-...' (xdotool emulation) ---
!1::
Loop, 6
{
    SendInput, {`}
}
return
!2::
Loop, 6
{
    SendInput, {~}
}
return
!3::
Loop, 3
{
    SendInput, {"}
}
return
!4::
Loop, 3
{
    SendInput, {'}
}
return

; --- LLM Script Binds ---
!F1::Run, powershell.exe -NoProfile -File "%user_scripts_path%llm_sF4_prompt.ps1"
!F2::Run, powershell.exe -NoProfile -File "%user_scripts_path%llm_sF6_system_prompt.ps1"
!F3::Run, powershell.exe -NoProfile -File "%user_scripts_path%llm_pipe_selected_sys.ps1"
!F4::Run, powershell.exe -NoProfile -File "%user_scripts_path%llm_sF8_fragment.ps1"
!F5::Run, powershell.exe -NoProfile -File "%user_scripts_path%llm_analyze_file.ps1"
!F6::Run, powershell.exe -NoProfile -File "%user_scripts_path%llm_sF9_attachment.ps1"
!F7::Run, powershell.exe -NoProfile -File "%user_scripts_path%llm_sF12_extract_last.ps1"

; --- Direct Function Key Binds ---
F1::Run, notepad.exe "%user_scripts_path%RAM.txt"
F4::Run, filezilla.exe
F5::Run, wt.exe
F6::Run, treesheets.exe
F7::Run, obs64.exe
F8::Run, qmplay2.exe

; --- Direct System Control ---
Home::Run, ShareX.exe -workflow "Region screenshot"
#F1::Run, powershell.exe -NoProfile -File "%user_scripts_path%thermal.ps1"
#F2::Run, wallp.exe "C:\Users\$($env:USERNAME)\Desktop\02-media\pics\wallpaper1.png" Fill
#F9::Run, nircmd.exe mutesysvolume 2
#F10::Run, nircmd.exe changesysvolume -3277
#F11::Run, nircmd.exe changesysvolume 3277

; --- Direct Workspace Switching ---
Numpad1::Run, %komorebi_cli% workspace 0
Numpad2::Run, %komorebi_cli% workspace 1
Numpad3::Run, %komorebi_cli% workspace 2
Numpad4::Run, %komorebi_cli% workspace 3
Numpad5::Run, %komorebi_cli% workspace 4
Numpad6::Run, %komorebi_cli% workspace 5
Numpad7::Run, %komorebi_cli% workspace 6
Numpad8::Run, %komorebi_cli% workspace 7
Numpad9::Run, %komorebi_cli% workspace 8
^1::Run, %komorebi_cli% workspace 0
^2::Run, %komorebi_cli% workspace 1
^3::Run, %komorebi_cli% workspace 2
^4::Run, %komorebi_cli% workspace 3
^5::Run, %komorebi_cli% workspace 4
^6::Run, %komorebi_cli% workspace 5
^7::Run, %komorebi_cli% workspace 6
^8::Run, %komorebi_cli% workspace 7
^9::Run, %komorebi_cli% workspace 8
#^1::Run, %komorebi_cli% move-to-workspace 0
#^2::Run, %komorebi_cli% move-to-workspace 1
#^3::Run, %komorebi_cli% move-to-workspace 2
#^4::Run, %komorebi_cli% move-to-workspace 3
#^5::Run, %komorebi_cli% move-to-workspace 4
#^6::Run, %komorebi_cli% move-to-workspace 5
#^7::Run, %komorebi_cli% move-to-workspace 6
#^8::Run, %komorebi_cli% move-to-workspace 7
#^9::Run, %komorebi_cli% move-to-workspace 8
"@

Set-Content -Path (Join-Path $scriptsPath "MyRatpoisonConfig.ahk") -Value $autoHotkeyConfig -Force
Write-Host "The master AutoHotkey script has been generated at '$($scriptsPath)\MyRatpoisonConfig.ahk'." -ForegroundColor Green


# --- STEP 5: CREATE STARTUP SCRIPT ---

Write-Host "`nStep 5: Creating the final startup script..." -ForegroundColor Cyan

$startupScriptContent = @"
@echo off
REM ==========================================================
REM == Ratpoison Environment Startup Script for Windows
REM == This script launches the core components on user login.
REM ==========================================================
echo Starting Komorebi Tiling Window Manager...
start "" komorebi.exe start

timeout /t 2 /nobreak &gt; nul

echo Starting AutoHotkey for keybindings...
start "" "C:\Program Files\AutoHotkey\AutoHotkey.exe" "$scriptsPath\MyRatpoisonConfig.ahk"

REM ==========================================================
REM == Other startup applications from .ratpoisonrc
REM == Ensure these are installed and in the system PATH
REM ==========================================================
echo Launching background applications...

REM xfce4-power-manager has no direct equivalent, Windows Power Plan is used instead.
REM start "" xfce4-power-manager.exe

REM unclutter has no direct equivalent, this is handled by Windows settings.
REM start "" unclutter.exe --timeout 2 --jitter 5

REM numlockx is handled by Windows registry or BIOS settings.
REM start "" numlockx.exe on

REM OpenVPN should be configured to start with Windows via its own settings.
REM start "" "C:\Program Files\OpenVPN\bin\openvpn-gui.exe" --connect mullvad_us_lax.ovpn

REM Start clipse listener
start "" powershell.exe -NoProfile -File "$scriptsPath\clipse.ps1" -listen
"@
# Replace placeholder with dynamic path
$startupScriptContent = $startupScriptContent.Replace('$scriptsPath', $scriptsPath)

Set-Content -Path (Join-Path $startupPath "StartRatpoisonEnv.bat") -Value $startupScriptContent -Force
Write-Host "Startup script created in '$startupPath'." -ForegroundColor Green


# --- FINAL INSTRUCTIONS ---

Write-Host "`n--- SETUP COMPLETE ---" -ForegroundColor Yellow
Write-Host "What's been done:"
Write-Host "  - Installed Komorebi, PowerToys, and AutoHotkey."
Write-Host "  - Created a robust Komorebi configuration file."
Write-Host "  - Generated a complete, logically-correct AutoHotkey script in '$scriptsPath'."
Write-Host "  - Created a startup script to launch the environment when you log in."
Write-Host ""
Write-Host "ACTION REQUIRED:" -ForegroundColor Red
Write-Host "  1. RESTART your computer for all changes to take effect."
Write-Host "  2. VERIFY application paths inside 'MyRatpoisonConfig.ahk' if programs like"
Write-Host "     'thorium-browser.exe' or 'irfanview.exe' are not in your system PATH."
Write-Host "  3. EDIT the placeholder PowerShell and Python scripts in '$scriptsPath' to"
Write-Host "     add your custom logic. The current files are just empty placeholders."
Write-Host ""
Write-Host "Enjoy your new keyboard-driven tiling experience on Windows!"
Write-Host ""

if ($Host.Name -eq "ConsoleHost") {
    Write-Host "Press any key to exit..."
    $Host.UI.RawUI.ReadKey("NoEcho,IncludeKeyDown") | Out-Null
}
</code></pre></div></div>

<h2 id="1-introduction-understanding-the-ratpoison-philosophy-and-windows-11-constraints"><strong>1. Introduction: Understanding the ratpoison Philosophy and Windows 11 Constraints</strong></h2>

<p>The ratpoison window manager, a staple for many Debian Linux users, embodies a philosophy of extreme keyboard-centric control, minimalism, and efficiency. Its core tenets include operation entirely without a mouse, the absence of window decorations (title bars, borders), efficient screen space utilization through tiling, and a modal command system initiated by a prefix key (your configuration uses Super_L, though Ctrl+t or C-t is also common).44 This starkly contrasts with the graphical user interface (GUI) and mouse-driven paradigm inherent to Microsoft Windows 11.</p>

<p>Replicating your specific ratpoison experience on Windows 11 is therefore not a direct port but an exercise in approximation and adaptation. The goal is to achieve a setup that is functionally and philosophically as close as possible to your provided .ratpoisonrc, leveraging third-party tools to bridge the gap between these differing operating system philosophies. This tutorial will detail a step-by-step approach to constructing such an environment, primarily utilizing a dedicated tiling window manager for Windows, the Microsoft PowerToys suite (particularly its FancyZones utility if a simpler approach is desired), and the powerful scripting capabilities of AutoHotkey.</p>

<h2 id="2-core-components-for-emulation"><strong>2. Core Components for Emulation</strong></h2>

<p>To effectively emulate your ratpoison environment on Windows 11, several key software components are necessary. These components will provide the foundational tiling capabilities, the global keyboard control, and the scriptable system interactions that are central to your ratpoison workflow.</p>

<h3 id="a-tiling-window-managers-for-windows-11"><strong>A. Tiling Window Managers for Windows 11</strong></h3>

<p>While Windows offers basic window snapping, it lacks the sophisticated, keyboard-driven tiling capabilities of ratpoison. Therefore, a dedicated tiling window manager (TWM) or a highly configurable zone manager is essential.</p>

<ul>
  <li>FancyWM:<br />
FancyWM is a dynamic tiling window manager designed for Windows 10 and 11.25 It allows users to create dynamic tiling layouts using either the mouse or keyboard. Key features include keyboard-driven window focus movement (e.g., Shift+Win, then →), window swapping (Shift+Win, then Shift+→), and the creation of horizontal, vertical, and stacked (tabbed) panels.25 FancyWM also supports virtual desktops, allowing users to jump to specific desktops (e.g., Shift+Win, then 2) or move focused windows to them. It includes a floating window mode, can auto-float windows that don’t fit tiling layouts, and offers customizable keybindings. Notably, FancyWM aims for low CPU usage (&lt;1%) and provides an option to disable animations.25 Installation can be performed via winget install fancywm or from the Microsoft Store.25 The default activation hotkey for command sequences is Shift+Win, which can be remapped.25</li>
  <li>Komorebi:<br />
Komorebi is another tiling window manager for Windows 10 and above, functioning as an extension to the native Desktop Window Manager.13 It is controlled via a command-line interface (komorebic.exe), which can be integrated with tools like AutoHotkey or whkd (a companion hotkey daemon) for user-defined keyboard shortcuts.13 Komorebi aims for minimal OS modification by default, leaving extensive customization to user configuration files.13 It also includes komorebi-bar.exe, an integrated status bar.13 Installation is available via Scoop (scoop install komorebi whkd) or WinGet.14 For optimal operation, enabling long path support in Windows is recommended before installation.14 Some users have reported positive experiences with Komorebi, highlighting its simplicity, lightweight nature, and effective automatic tiling.45</li>
  <li>GlazeWM:<br />
GlazeWM offers tiling window management with configuration via a simple YAML file.15 It supports multiple monitors and allows customizable rules for specific windows. GlazeWM can be integrated with Zebar, a status bar application.15 While some users have found it functional, others have encountered glitches or issues with certain applications not tiling correctly, leading them to prefer alternatives like Komorebi.45 GlazeWM also provides a JavaScript library for inter-process communication (IPC), allowing programmatic querying of its state and execution of commands.27</li>
  <li>Microsoft PowerToys FancyZones (as a TWM alternative/supplement):<br />
FancyZones, a utility within the Microsoft PowerToys suite, allows users to create complex window layouts and quickly position windows into predefined zones.20 Users can open the FancyZones editor (default: Win+Shift+\``) to define custom layouts or use templates.46 Windows can be snapped into zones by holdingShift(or another configured key) while dragging. FancyZones supports keyboard shortcuts for moving focused windows between zones and cycling between windows in the same zone.46 While useful for organizing windows, FancyZones primarily relies on pre-defined static zones rather than the fluid, dynamic tiling characteristic ofratpoison`.<br />
The choice between a true dynamic TWM (like FancyWM or Komorebi) and a zone-based manager like FancyZones depends on how closely one wishes to emulate ratpoison. For a ratpoison user accustomed to minimal configuration for basic tiling and extensive keyboard control over the tiling structure itself, a dedicated TWM is likely to be a more fitting choice.<br />
<strong>Table 2.1: Comparison of Windows Tiling Solutions for ratpoison Emulation</strong></li>
</ul>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Feature</th>
      <th style="text-align: left">FancyWM</th>
      <th style="text-align: left">Komorebi</th>
      <th style="text-align: left">GlazeWM</th>
      <th style="text-align: left">PowerToys FancyZones</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Tiling Type</strong></td>
      <td style="text-align: left">Dynamic</td>
      <td style="text-align: left">Dynamic</td>
      <td style="text-align: left">Dynamic</td>
      <td style="text-align: left">Zone-based (pre-defined layouts)</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Primary Control</strong></td>
      <td style="text-align: left">Keyboard &amp; Mouse</td>
      <td style="text-align: left">CLI (komorebic.exe), Hotkey Daemon (whkd)</td>
      <td style="text-align: left">Config (YAML), CLI (via IPC)</td>
      <td style="text-align: left">Mouse (drag-to-zone), Keyboard shortcuts</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Configuration</strong></td>
      <td style="text-align: left">GUI Settings</td>
      <td style="text-align: left">JSON config file, whkdrc for hotkeys</td>
      <td style="text-align: left">YAML config file</td>
      <td style="text-align: left">GUI Layout Editor</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Virtual Desktops</strong></td>
      <td style="text-align: left">Supported</td>
      <td style="text-align: left">Via CLI commands</td>
      <td style="text-align: left">Via CLI commands</td>
      <td style="text-align: left">Native Windows support</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Status Bar</strong></td>
      <td style="text-align: left">None explicitly mentioned</td>
      <td style="text-align: left">komorebi-bar.exe (integrated) 13</td>
      <td style="text-align: left">Zebar (integration) 15</td>
      <td style="text-align: left">Windows Taskbar</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Scriptability</strong></td>
      <td style="text-align: left">Key remapping</td>
      <td style="text-align: left">Extensive via komorebic.exe &amp; AHK/whkd 13</td>
      <td style="text-align: left">Extensive via IPC and JS library 27</td>
      <td style="text-align: left">Limited to invoking editor/layouts</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Ease of Setup</strong></td>
      <td style="text-align: left">High (MS Store, winget) 25</td>
      <td style="text-align: left">Medium (Scoop/WinGet, config files) 14</td>
      <td style="text-align: left">Medium (config file) 15</td>
      <td style="text-align: left">High (part of PowerToys) 20</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>ratpoison-like Feel</strong></td>
      <td style="text-align: left">Medium-High</td>
      <td style="text-align: left">High</td>
      <td style="text-align: left">Medium-High</td>
      <td style="text-align: left">Low-Medium</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Pros</strong></td>
      <td style="text-align: left">User-friendly, low CPU, dynamic panels 25</td>
      <td style="text-align: left">Highly scriptable, minimal OS mods, status bar 13</td>
      <td style="text-align: left">YAML config, multi-monitor, IPC 15</td>
      <td style="text-align: left">Easy to use, stable, part of PowerToys</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Cons</strong></td>
      <td style="text-align: left">Less “raw” CLI control than Komorebi</td>
      <td style="text-align: left">Steeper learning curve for full customization</td>
      <td style="text-align: left">Some user reports of glitches 45</td>
      <td style="text-align: left">Not true dynamic tiling</td>
    </tr>
  </tbody>
</table>

<h3 id="b-autohotkey-ahk-for-global-keyboard-control-and-scripting"><strong>B. AutoHotkey (AHK) for Global Keyboard Control and Scripting</strong></h3>

<p>AutoHotkey (AHK) is a free, open-source scripting language for Windows that allows users to automate tasks, remap keys, and create custom hotkeys. For replicating your ratpoison environment, AHK is indispensable for:</p>

<ul>
  <li>Implementing a global prefix key system (your Super_L equivalent).</li>
  <li>Defining custom keyboard shortcuts for window manipulation, application launching (like your exec bindings), and system control.</li>
  <li>Scripting complex behaviors, such as emulating xdotool functionality or custom scripts like rpws.</li>
  <li>Potentially removing window decorations.</li>
</ul>

<p>Users create text files with an .ahk extension to write scripts.2</p>

<h3 id="c-command-line-interface-cli-utilities--windows-equivalents"><strong>C. Command-Line Interface (CLI) Utilities &amp; Windows Equivalents</strong></h3>

<p>To emulate ratpoison’s ability to control system aspects via keyboard commands, a collection of CLI utilities and knowledge of Windows equivalents is beneficial:</p>

<ul>
  <li><strong>NirCmd</strong> by NirSoft: For system control like volume (changesysvolume, setsysvolume, mutesysvolume, changeappvolume).37</li>
  <li><strong>ControlMyMonitor</strong> by NirSoft: For monitor settings like brightness (if DDC/CI supported).40</li>
  <li><strong>ShareX:</strong> For scriptable screenshots, replacing scrot functionality.20</li>
  <li><strong>WallP:</strong> For command-line wallpaper changes, replacing hsetroot or xsetroot -name for basic wallpaper setting.41</li>
  <li><strong>Windows Built-in Tools:</strong> PowerShell for various tasks, reg.exe for registry modifications.</li>
  <li><strong>Application Equivalents:</strong> For tools like pcmanfm-qt, viewnior, bpytop, etc., you’ll need to find Windows equivalents or ensure the Linux versions have Windows ports. These can then be launched via AHK’s Run command.</li>
</ul>

<h2 id="3-implementing-ratpoison-style-keyboard-control-with-autohotkey"><strong>3. Implementing ratpoison-style Keyboard Control with AutoHotkey</strong></h2>

<p>The cornerstone of ratpoison interaction is its prefix key (your escape Super_L), followed by a command key.</p>

<h3 id="a-the-prefix-key-super_l-equivalent"><strong>A. The Prefix Key (Super_L Equivalent)</strong></h3>

<p>Your .ratpoisonrc specifies escape Super_L. In AutoHotkey, Super_L is typically represented as LWin (Left Windows key).13 We’ll use the AHK Input command for its suitability in capturing subsequent keystrokes with timeouts and specific end keys.1</p>

<p>AutoHotkey</p>

<p>; -– In your AutoHotkey script -–<br />
global MyRatpoisonPrefixKey := “LWin” ; Your Super_L<br />
global MyRatpoisonPrefixTimeout := 2000 ; 2 seconds, adjust as needed</p>

<p>Hotkey MyRatpoisonPrefixKey, HandleRatpoisonPrefix</p>

<p>HandleRatpoisonPrefix() {<br />
    global ; Make global variables accessible<br />
    local next_key_pressed, command_was_executed := false</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>; Options: L1 (one char), T\&lt;ms\&gt; (timeout), M (modified keys like Ctrl+C), V (visible input)  
; EndKeys: {Esc} to cancel prefix mode  
Input next\_key\_pressed, "L1 T". MyRatpoisonPrefixTimeout. " M V", "{Esc}"  
  
if (ErrorLevel \= "Timeout" |   | ErrorLevel \= "EndKey:Escape" |   | next\_key\_pressed \= "") {  
    ; If timed out, Esc pressed, or no valid key, send the original prefix key.  
    ; This allows LWin to still function (e.g., open Start Menu) if no command follows.  
    SendInput "{". MyRatpoisonPrefixKey. "}"  
    return  
}

; \--- Branch based on 'next\_key\_pressed' (translate your.ratpoisonrc binds here) \---  
if (next\_key\_pressed \= "s") { ; Example: Super\_L then s  
    ; Check for s-s (Shift+s) if your TWM handles splits that way or if you script it  
    ; For now, let's assume 's' maps to hsplit  
    ; For Komorebi: Run "komorebic.exe layout split horizontal 0.5"  
    ; For FancyWM (default Shift+Win+H): SendInput "+\#h"   
    MsgBox "Command: Horizontal Split (s)"  
    command\_was\_executed := true  
} else if (next\_key\_pressed \= "w") { ; Example: Super\_L then w (for launching thorium-browser)  
    Run "thorium-browser.exe" ; Ensure thorium-browser is in PATH or use full path  
    command\_was\_executed := true  
}  
;... Add many more 'else if' blocks for other ratpoison commands...

if (\!command\_was\_executed) {  
    ; If the pressed key didn't match any defined command,  
    ; send the original prefix and the pressed key.  
    ; The 'V' option in Input should handle passing the key through.  
    ; However, explicitly sending might be needed if LWin was "consumed" by the hotkey.  
    SendInput "{". MyRatpoisonPrefixKey. "}"  
    SendInput "{Text}". next\_key\_pressed ; Use {Text} for reliable character sending  
}   }   Return ; End of auto-execute section
</code></pre></div></div>

<p><strong>Note on Input command options</strong> 1<strong>:</strong></p>

<ul>
  <li>L1: Wait for a single character.</li>
  <li>T&lt;milliseconds&gt;: Timeout (e.g., T2000 for 2 seconds).</li>
  <li>M: Allows modified keystrokes (e.g., Ctrl+C) to be recognized. Ctrl+A through Ctrl+Z correspond to Chr(1) through Chr(26).</li>
  <li>V: Visible - the user’s keystrokes are sent to the active window if not matched by the Input command’s MatchList or EndKeys. This is crucial for allowing non-command keys to pass through naturally after the prefix.</li>
  <li>EndKeys: A list of keys that terminate the input (e.g., {Esc}).</li>
</ul>

<h3 id="b-scripting-core-window-manipulations-examples"><strong>B. Scripting Core Window Manipulations (Examples)</strong></h3>

<ul>
  <li><strong>Focus Switching (Up, Down, Left, Right):</strong>
    <ul>
      <li>TWM-specific: Run “komorebic.exe focus &lt;direction&gt;” or SendInput “+#{ArrowKey}” for FancyWM.</li>
      <li>AHK: ControlFocus, WinActivate.</li>
    </ul>
  </li>
  <li><strong>Moving/Swapping Windows (s-Up, s-x):</strong>
    <ul>
      <li>TWM-specific: Run “komorebic.exe move &lt;direction&gt;” or SendInput “+#+{ArrowKey}” for FancyWM.</li>
      <li>AHK: WinMove.</li>
    </ul>
  </li>
  <li><strong>Resizing (r):</strong>
    <ul>
      <li>TWM-specific commands are best.</li>
      <li>AHK: WinMove with width/height.</li>
    </ul>
  </li>
  <li><strong>Splits (s-s hsplit, minus vsplit, equal hsplit):</strong>
    <ul>
      <li>Highly TWM-dependent. Run “komorebic.exe layout split &lt;axis&gt; &lt;ratio&gt;” or FancyWM’s panel commands (SendInput “+#h” for horizontal, SendInput “+#v” for vertical).25</li>
    </ul>
  </li>
  <li><strong>Killing Windows (q delete, s-Escape kill):</strong>
    <ul>
      <li>AHK: WinClose “A” (for active window).</li>
    </ul>
  </li>
  <li><strong>Virtual Desktops/Workspaces/Groups (rpws commands, KP_1 etc.):</strong>
    <ul>
      <li>Windows 11 native: SendInput “^#{Left/Right}” (switch), SendInput “^#{d}” (create).</li>
      <li>TWMs have their own (e.g., Komorebi: komorebic.exe workspace &lt;index&gt;). Your rpws scripts would need to be translated to call these TWM commands.</li>
    </ul>
  </li>
</ul>

<h3 id="c-removing-window-decorations-set-border-0"><strong>C. Removing Window Decorations (set border 0)</strong></h3>

<p>Your .ratpoisonrc has set border 0. AHK’s WinSet command can attempt to remove standard Windows decorations 43:</p>

<ul>
  <li>WinSet, Style, -0xC00000, A ; Removes title bar (WS_CAPTION)</li>
  <li>WinSet, Style, -0x800000, A ; Removes thin border (WS_BORDER)</li>
  <li>WinSet, Style, -0x40000, A ; Removes sizing border (WS_THICKFRAME/WS_SIZEBOX) <strong>Caveats:</strong> This won’t work for all apps (especially UWP or custom-drawn windows) and can sometimes cause issues. Apply selectively using IfWinActive and Window Spy to get ahk_class. Some TWMs might also offer border management.</li>
</ul>

<h2 id="4-replicating-essential-ratpoisonrc-interactions"><strong>4. Replicating Essential .ratpoisonrc Interactions</strong></h2>

<h3 id="a-application-launcher-s-space-exec-python3dratmenupy"><strong>A. Application Launcher (s-space exec python3…dratmenu.py)</strong></h3>

<p>Your dratmenu.py script acts as a launcher. Windows alternatives include:</p>

<ul>
  <li><strong>Wox:</strong> Extensible with plugins (Python supported, but detailed creation guides were not in provided snippets 6). Default: Alt+Space.</li>
  <li><strong>Ueli:</strong> Cross-platform, features “Workflows” for custom tasks.49 Default: Alt+Space.</li>
  <li><strong>Fluent Search:</strong> Powerful, indexes files, apps, tabs.51</li>
  <li><strong>PowerToys Run:</strong> Part of PowerToys, quick and simple.20 Default: Alt+Space.</li>
</ul>

<p>Your AHK script would map Super_L then Space to trigger your chosen launcher or your Python script (if it’s adapted for Windows):</p>

<p>AutoHotkey</p>

<p>; Inside HandleRatpoisonPrefix()<br />
else if (next_key_pressed = “ “) { ; Super_L then Space<br />
    ; Option 1: Run a Windows launcher<br />
    ; SendInput “!{Space}” ; If launcher uses Alt+Space<br />
    ; Option 2: Run your Python script (ensure Python is in PATH)<br />
    Run “python.exe C:\path\to\your\dratmenu.py”<br />
    command_was_executed := true<br />
}</p>

<p>For the most dmenu-like scriptability, Wox or Ueli are strong candidates.</p>

<p>Table 4.1: Windows Application Launcher Comparison<br />
(Refer to Table 4.1 in the original response, it remains largely accurate.)</p>

<h3 id="b-status-bar-information-exec-env-homehome-rpbar-addhook-exec-rpbarsend"><strong>B. Status Bar Information (exec env HOME=$HOME rpbar, addhook… exec rpbarsend)</strong></h3>

<p>Your setup uses rpbar, updated by hooks.28</p>

<ul>
  <li><strong>Komorebi:</strong> Includes komorebi-bar.exe.13 This is the closest to an integrated solution.</li>
  <li><strong>GlazeWM:</strong> Integrates with Zebar.15</li>
  <li><strong>Windows Taskbar:</strong> Can be auto-hidden and minimally configured 53, but not a true rpbar replacement.</li>
  <li><strong>AHK GUI:</strong> A custom AHK GUI is possible but a very advanced project.</li>
</ul>

<p>If using Komorebi, its bar might suffice. Otherwise, this is hard to replicate faithfully. The addhook commands in your .ratpoisonrc that call rpbarsend would need to be mapped to AHK’s ShellHook or timer-based checks that then update whatever status display you choose/create, or rely on the TWM’s bar updating itself.</p>

<h3 id="c-clipboard-management-clipse-related-bind-v-meta-s-insert"><strong>C. Clipboard Management (clipse related, bind v meta S-Insert)</strong></h3>

<p>Your config mentions clipse and a paste binding.</p>

<ul>
  <li><strong>Windows Clipboard History:</strong> Win+V (stores last 25 items, can sync).54 Can be cleared via Settings or PowerShell (with limitations for ::ClearHistory() 17). Get-Clipboard can retrieve content.56</li>
  <li><strong>Ditto:</strong> Powerful open-source manager with CLI options like Ditto.exe /Open, Ditto.exe /Paste:(clip_id) 16, making it scriptable.</li>
  <li><strong>PasteBar:</strong> Organizes clips, supports Markdown.57 Your bind v meta S-Insert likely pastes from clipse. In AHK, Super_L then v could be:</li>
</ul>

<p>AutoHotkey</p>

<p>; Inside HandleRatpoisonPrefix()<br />
else if (next_key_pressed = “v”) {<br />
    ; This emulates Shift+Insert, a common paste shortcut<br />
    SendInput “+{Insert}”<br />
    ; If ‘clipse’ has a Windows CLI for pasting, use that:<br />
    ; Run “clipse.exe --paste” ; Hypothetical command<br />
    command_was_executed := true<br />
}</p>

<h3 id="d-xdotool-emulation-bind-m-1-exec-xdotool-key---repeat-6-dead_grave"><strong>D. xdotool Emulation (bind M-1 exec xdotool key --repeat 6 dead_grave)</strong></h3>

<p>Windows does not have xdotool. AutoHotkey’s Send / SendInput commands are the primary way to simulate keyboard input.<br />
Your binding bind M-1 exec xdotool key --repeat 6 dead_grave could translate to:</p>

<p>AutoHotkey</p>

<p>; This is a direct hotkey, not part of the prefix system, as M-1 is Alt+1<br />
!1:: ; Alt+1<br />
Loop 6 {<br />
    SendInput “{`}” ; Sends a backtick. Adjust if ‘dead_grave’ is different.<br />
    ; Or, for specific ASCII/Unicode: SendInput “{ASC 096}” or SendInput “{U+0060}”<br />
}<br />
return</p>

<p>Similarly for M-2, M-3, M-4. You’ll need to find the correct AHK syntax for dead_tilde, quotedbl, and apostrophe.</p>

<h3 id="e-custom-scripts-rpws-llm_sh-split1sh-thermalsh"><strong>E. Custom Scripts (rpws, llm_*.sh, split1.sh, thermal.sh)</strong></h3>

<p>Scripts like rpws init 9, rpws dump, llm_scrot.sh are custom.</p>

<ul>
  <li>rpws (RatPoison WorkSpace) commands manage workspaces. These would need to be rewritten as AHK functions or external scripts that call your chosen TWM’s CLI for workspace management (e.g., komorebic.exe workspace &lt;ID&gt;, komorebic.exe move-to-workspace &lt;ID&gt;).</li>
  <li>Shell scripts (.sh) need to be ported to Windows batch, PowerShell, or rewritten in a language available on Windows (like Python, if your dratmenu.py is an example).</li>
  <li>AHK can then Run these Windows-compatible scripts. For example, bind s-u exec /usr/bin/rpws restore… becomes an AHK hotkey calling the translated rpws restore logic.</li>
</ul>

<h2 id="5-system-control-via-keyboard-scripting-with-ahk-and-cli-tools"><strong>5. System Control via Keyboard (Scripting with AHK and CLI Tools)</strong></h2>

<p>Your .ratpoisonrc includes bindings for volume, screenshots, etc.</p>

<h3 id="a-volume-control-s-f9-toggle-s-f10-5--s-f11-5"><strong>A. Volume Control (s-F9 toggle, s-F10 5%-, s-F11 5%+)</strong></h3>

<ul>
  <li><strong>nircmd.exe:</strong>
    <ul>
      <li>nircmd.exe changesysvolume 3276 (approx 5% of 65535).37</li>
      <li>nircmd.exe mutesysvolume 2 (toggle).37</li>
      <li>App-specific: nircmd.exe changeappvolume focused 0.05 (increase focused app volume by 5%).39</li>
    </ul>
  </li>
  <li><strong>PowerShell:</strong> Can mimic media keys or use COM objects.37</li>
  <li><strong>vccli.exe:</strong> Dedicated app-specific volume CLI.58</li>
</ul>

<p>AHK example for s-F11 (assuming s- means Super_L or Win key):</p>

<p>AutoHotkey</p>

<p>#F11::Run “nircmd.exe changesysvolume 3276” ; Win+F11<br />
#F10::Run “nircmd.exe changesysvolume -3276” ; Win+F10<br />
#F9::Run “nircmd.exe mutesysvolume 2”      ; Win+F9</p>

<h3 id="b-screen-brightness-your-config-doesnt-show-explicit-brightness-binds-but-its-a-common-need"><strong>B. Screen Brightness (Your config doesn’t show explicit brightness binds, but it’s a common need)</strong></h3>

<ul>
  <li><strong>ControlMyMonitor.exe:</strong> ControlMyMonitor.exe /ChangeValue Primary 10 5 (increase by 5%).40 Requires DDC/CI.</li>
  <li><strong>PowerShell:</strong> (Get-WmiObject -Namespace root/WMI -Class WmiMonitorBrightnessMethods).WmiSetBrightness(1, &lt;level_0_to_100&gt;) (often for built-in displays).59</li>
</ul>

<h3 id="c-screenshots-home-exec-scrot--s-definekey-top-print-exec-xfce4-screenshooter"><strong>C. Screenshots (Home exec scrot -s…, definekey top Print exec xfce4-screenshooter)</strong></h3>

<ul>
  <li><strong>ShareX:</strong> Highly scriptable.20
    <ul>
      <li>ShareX.exe -RectangleRegion: Interactive region selection.</li>
      <li>Your scrot -s -e ‘xclip…’ command captures a selection and copies to clipboard. ShareX can do this with a configured “After capture” task to “Copy image to clipboard.” AHK:</li>
    </ul>
  </li>
</ul>

<p>AutoHotkey<br />
#Home::Run “ShareX.exe -RectangleRegion” ; Win+Home for region, then configure ShareX task<br />
PrintScreen::Run “ShareX.exe -PrintScreen” ; Or use xfce4-screenshooter if available on Win</p>

<ul>
  <li><strong>Windows Snipping Tool:</strong> Win+Shift+S for region to clipboard.18</li>
</ul>

<h3 id="d-wallpaper-management-s-f2-exec-hsetroot--fill-s-f3-exec-xsetroot--name"><strong>D. Wallpaper Management (s-F2 exec hsetroot -fill…, s-F3 exec xsetroot -name…)</strong></h3>

<ul>
  <li><strong>WallP.exe:</strong> WallP.exe 0 “C:\Path\To\Image.jpg” Fill.41</li>
  <li>
    <table>
      <tbody>
        <tr>
          <td><strong>AHK/reg.exe:</strong> Modify HKCU\Control Panel\Desktop keys (Wallpaper, WallpaperStyle, TileWallpaper) then call DllCall(“SystemParametersInfo”, “UInt”, 20, “UInt”, 0, “Ptr”, 0, “UInt”, 0x01</td>
          <td>0x02) to refresh.24 xsetroot -name functionality (setting root window name) doesn’t directly translate; status information would be handled by the chosen status bar.</td>
        </tr>
      </tbody>
    </table>
  </li>
</ul>

<p>AHK for s-F2:</p>

<p>AutoHotkey</p>

<p>#F2::Run “WallP.exe 0 ““C:\home\linaro\Desktop\02-media\pics\wallpaper1.png”” Fill” ; Win+F2</p>

<h2 id="6-step-by-step-implementation-guide"><strong>6. Step-by-Step Implementation Guide</strong></h2>

<h3 id="a-pre-requisites-and-initial-setup"><strong>A. Pre-requisites and Initial Setup</strong></h3>

<ol>
  <li><strong>Install a Tiling Window Manager:</strong> Choose from Section 2.A (e.g., Komorebi for deeper scripting, FancyWM for ease of use). Follow their specific installation instructions.25</li>
  <li><strong>Install AutoHotkey:</strong> Download from <a href="https://autohotkey.com">autohotkey.com</a> (v1 recommended for these examples). Create MyRatpoisonConfig.ahk.2</li>
  <li><strong>Install Application Launcher:</strong> Choose from Section 4.A (e.g., Wox, Ueli).</li>
  <li><strong>Download CLI Utilities:</strong> NirCmd, ControlMyMonitor, ShareX, WallP. Place them in a folder (e.g., C:\Utils) and add this folder to your system PATH.</li>
  <li><strong>Install Your Applications:</strong> Ensure Windows versions or equivalents of thorium-browser, pcmanfm-qt, bpytop, etc., are installed.</li>
</ol>

<h3 id="b-basic-configuration-of-the-window-manager"><strong>B. Basic Configuration of the Window Manager</strong></h3>

<ul>
  <li>Consult the chosen TWM’s documentation to set basic preferences (gaps, initial layouts, focus behavior). Komorebi uses komorebi.json 14, GlazeWM uses config.yaml.15 FancyWM has GUI settings.25</li>
</ul>

<h3 id="c-creating-the-initial-autohotkey-script-myratpoisonconfigahk"><strong>C. Creating the Initial AutoHotkey Script (MyRatpoisonConfig.ahk)</strong></h3>

<p>AutoHotkey</p>

<p>#SingleInstance force<br />
#Persistent<br />
SetWorkingDir A_ScriptDir</p>

<p>; -– Global definition for the ratpoison prefix key -–<br />
global rp_prefix_key_ahk_notation := “LWin” ; Your Super_L from ‘escape Super_L’<br />
global rp_prefix_timeout_ms := 2000</p>

<p>; -– Assign the prefix key to its handler function -–<br />
Hotkey rp_prefix_key_ahk_notation, RatpoisonPrefixHandler</p>

<p>RatpoisonPrefixHandler() {<br />
    global<br />
    local next_key, command_executed := false, input_options</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>input\_options := "L1 T". rp\_prefix\_timeout\_ms. " M V"  
Input next\_key, input\_options, "{Esc}"  
  
if (ErrorLevel \= "Timeout" |   | ErrorLevel \= "EndKey:Escape" |   | next\_key \= "") {  
    SendInput "{". rp\_prefix\_key\_ahk\_notation. "}"  
    return  
}

; \--- Translate.ratpoisonrc 'bind' commands here \---  
if (next\_key \= "w") { ; Super\_L then w \-\&gt; launch thorium-browser  
    Run "thorium-browser.exe" ; Ensure it's in PATH or use full path  
    command\_executed := true  
} else if (next\_key \= "h") { ; Super\_L then h \-\&gt; launch bpytop  
    Run "x-terminal-emulator.exe \-e bpytop" ; Assuming x-terminal-emulator is configured  
                                            ; Or directly Run "bpytop.exe" if it's a Windows native app  
    command\_executed := true  
} else if (next\_key \= "q") { ; Super\_L then q \-\&gt; delete (close window)  
    WinClose "A"  
    command\_executed := true  
} else if (next\_key \= "s") { ; Super\_L then s (from 'bind s-s hsplit')  
    ; This is a bit ambiguous with 'bind s-s hsplit' vs 'bind equal hsplit'  
    ; Assuming 's' after prefix is for hsplit  
    ; For Komorebi: Run "komorebic.exe layout split horizontal 0.5"  
    ; For FancyWM: SendInput "+\#h"  
    MsgBox "Temp: Horizontal Split" ; Replace with actual TWM command  
    command\_executed := true  
} else if (next\_key \= " ") { ; Super\_L then Space \-\&gt; dratmenu.py  
    Run "python.exe C:\\home\\linaro\\.local\\bin\\dratmenu.py" ; Use correct Windows path  
    command\_executed := true  
}  
;... Add more 'else if' blocks from your 'bind' commands...  
; Example for a command that was 'bind s-k someaction' (Super\_L \+ Shift \+ k)  
; The 'M' option in Input should make next\_key 'K' if Shift+k is pressed.  
else if (next\_key \= "K") { ; Super\_L then Shift+k  
    MsgBox "Action for Super\_L then Shift+K"  
    command\_executed := true  
}

if (\!command\_executed) {  
    SendInput "{". rp\_prefix\_key\_ahk\_notation. "}"  
    SendInput "{Text}". next\_key  
}  
return   }
</code></pre></div></div>

<p>; -– Translate direct ‘bind’ commands (not needing prefix) -–<br />
; Example for: bind M-1 exec xdotool key --repeat 6 dead_grave<br />
!1:: ; Alt+1<br />
Loop 6 {<br />
    SendInput “{`}” ; Backtick for dead_grave, adjust if needed<br />
}<br />
return</p>

<p>; Example for: bind Home exec scrot -s -e ‘xclip…’<br />
#Home::Run “ShareX.exe -RectangleRegion” ; Win+Home. Configure ShareX to copy to clipboard.</p>

<p>; Example for: bind s-F11 exec amixer set Master 5%+<br />
#F11::Run “nircmd.exe changesysvolume 3276” ; Win+F11 for vol up ~5%</p>

<p>;… Add other direct binds (s-F10, s-F9, s-F1, s-F2, s-F3 etc.)…<br />
; For s-F1 exec thermal.sh -&gt; #F1::Run “C:\path\to\thermal.bat_or_ps1” (ported script)<br />
; For s-F2 exec hsetroot… -&gt; #F2::Run “WallP.exe 0 ““C:\home\linaro\Desktop\02-media\pics\wallpaper1.png”” Fill”<br />
; For s-F3 exec xsetroot -name “$wspl” -&gt; This is for status bar, handle with TWM’s bar or AHK GUI.</p>

<p>; -– Startup commands from ‘exec’ lines at the end of.ratpoisonrc -–<br />
; Run “alttab.exe” ; If alttab is a specific program<br />
Run “xfce4-power-manager.exe” ; If available and needed on Windows<br />
Run “unclutter.exe --timeout 2 --jitter 5” ; If available<br />
; Run “rpws init 9” ; This would be part of TWM setup or an AHK function call at start<br />
Run “nm-applet.exe” ; If needed<br />
; Run “env HOME=$HOME/.config rpbar” ; Start your status bar if using Komorebi/Zebar or custom<br />
Run “brightnessctl.exe s 7” ; If brightnessctl has a Windows version or use NirCmd/ControlMyMonitor<br />
Run “numlockx.exe” ; If needed<br />
; Run “sh -c ‘nohup sudo openvpn…’” ; Needs specific Windows OpenVPN client setup &amp; CLI<br />
; Run “sh -c ‘nohup /home/linaro/.local/bin/clipse -listen…’” ; Needs clipse ported/configured</p>

<p>; -– Hooks (‘addhook’) -–<br />
; For hooks like ‘addhook switchwin exec rpbarsend’, you’d use AHK’s ShellHook or SetTimer<br />
; to monitor window events and then call the equivalent of ‘rpbarsend’ if you have a custom bar.<br />
; If using Komorebi’s bar, it should update automatically.</p>

<p>Return ; End of auto-execute section</p>

<p>Error Handling Note: For Run commands, consider wrapping them in Try…Catch blocks if the target might not exist or fail, e.g.:<br />
Try Run “nonexistent.exe”<br />
Catch { MsgBox “Failed to run nonexistent.exe” } 31<br />
<strong>Admin Privileges:</strong> If scripts or commands require admin rights, you might need to run the entire AHK script as administrator, or use Run *RunAs path\to\program.exe within the script for specific commands.</p>

<h3 id="d-setting-up-application-launcher-and-status-bar"><strong>D. Setting up Application Launcher and Status Bar</strong></h3>

<ul>
  <li>Configure your chosen launcher and status bar (if not using Windows Taskbar).</li>
  <li>Ensure AHK triggers them correctly.</li>
</ul>

<h3 id="e-configuring-tools-and-ahk-script-to-run-on-startup"><strong>E. Configuring Tools and AHK Script to Run on Startup</strong></h3>

<ul>
  <li>Place shortcuts to your TWM, AHK script (MyRatpoisonConfig.ahk), launcher, and status bar executables into the Startup folder (shell:startup).61</li>
  <li>You can compile your AHK script to an .exe using Ahk2Exe.47</li>
</ul>

<h2 id="7-fine-tuning-troubleshooting-and-adapting-your-ratpoisonrc-logic"><strong>7. Fine-Tuning, Troubleshooting, and Adapting Your ratpoisonrc Logic</strong></h2>

<h3 id="a-addressing-common-issues-with-specific-applications"><strong>A. Addressing Common Issues with Specific Applications</strong></h3>

<ul>
  <li>Use TWM rules (floating/ignore) for problematic apps (Java, Electron, UWP, games).25</li>
  <li>Use AHK’s Window Spy (right-click AHK tray icon) to get ahk_class or window titles for specific IfWinActive conditions or TWM rules.</li>
</ul>

<h3 id="b-tips-for-translating-logic-from-your-ratpoisonrc"><strong>B. Tips for Translating Logic from Your ratpoisonrc</strong></h3>

<ul>
  <li><strong>set variable value:</strong> AHK variables (myVar := “value”) or TWM settings.</li>
  <li><strong>addhook:</strong> AHK SetTimer for polling or ShellHook for event-driven actions. TWMs like Komorebi or GlazeWM might have their own event systems.27</li>
  <li><strong>unmanage rpbar:</strong> Your TWM should have a way to ignore your status bar window if it’s a separate application.</li>
</ul>

<p><strong>Table 7.1: ratpoisonrc to Windows/AHK/TWM Mapping Quick Reference</strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">ratpoisonrc Command</th>
      <th style="text-align: left">Windows/AHK/TWM Equivalent</th>
      <th style="text-align: left">Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">escape Super_L</td>
      <td style="text-align: left">AHK: rp_prefix_key_ahk_notation := “LWin”</td>
      <td style="text-align: left">Define your prefix key</td>
    </tr>
    <tr>
      <td style="text-align: left">bind key action</td>
      <td style="text-align: left">AHK: if (next_key = “key”) { TWM_Cmd / AHK_Action }</td>
      <td style="text-align: left">Inside prefix handler function</td>
    </tr>
    <tr>
      <td style="text-align: left">bind modifier-key action</td>
      <td style="text-align: left">AHK: Direct hotkey, e.g., !1:: action (for Alt+1)</td>
      <td style="text-align: left">Outside prefix handler</td>
    </tr>
    <tr>
      <td style="text-align: left">exec program args</td>
      <td style="text-align: left">AHK: Run “program.exe args” or AHK function call</td>
      <td style="text-align: left">Ensure program/script is Windows compatible and in PATH or use full path</td>
    </tr>
    <tr>
      <td style="text-align: left">set variable value</td>
      <td style="text-align: left">AHK: variable := value or TWM configuration file setting</td>
      <td style="text-align: left">For behavior, colors, fonts, gaps - often TWM specific</td>
    </tr>
    <tr>
      <td style="text-align: left">set border 0</td>
      <td style="text-align: left">TWM config or AHK: WinSet, Style, -0xStyleValue, WinTitle</td>
      <td style="text-align: left">e.g., WinSet, Style, -0x800000, A (removes WS_BORDER) 43</td>
    </tr>
    <tr>
      <td style="text-align: left">addhook event cmd</td>
      <td style="text-align: left">AHK: SetTimer, ShellHook, or TWM’s event system</td>
      <td style="text-align: left">For reacting to window creation, focus changes, etc.</td>
    </tr>
    <tr>
      <td style="text-align: left">unmanage window_name</td>
      <td style="text-align: left">TWM: Configuration rules to float or ignore specific windows</td>
      <td style="text-align: left">Based on window title or class</td>
    </tr>
    <tr>
      <td style="text-align: left">definekey top key action</td>
      <td style="text-align: left">AHK: Direct hotkey, e.g., PrintScreen:: action</td>
      <td style="text-align: left">For keys that don’t use the ratpoison prefix</td>
    </tr>
    <tr>
      <td style="text-align: left">xdotool…</td>
      <td style="text-align: left">AHK: SendInput, SendPlay, ControlSend with loops/counts</td>
      <td style="text-align: left">AHK is the Windows equivalent for input automation</td>
    </tr>
    <tr>
      <td style="text-align: left">Custom shell scripts</td>
      <td style="text-align: left">Port to Batch, PowerShell, Python on Windows, or AHK functions</td>
      <td style="text-align: left">Call via Run</td>
    </tr>
  </tbody>
</table>

<h3 id="c-performance-considerations"><strong>C. Performance Considerations</strong></h3>

<ul>
  <li>Optimize complex AHK scripts; prefer event-driven over polling.</li>
  <li>Most TWMs are lightweight.25 Disable system/TWM animations if needed.14</li>
</ul>

<h3 id="d-debugging"><strong>D. Debugging</strong></h3>

<ul>
  <li>AHK: MsgBox, ToolTip, ListVars, OutputDebug, main window’s key history.13</li>
  <li>TWMs: Check for logs or debug modes.13</li>
  <li>Launchers: May have debug options.50</li>
</ul>

<h2 id="8-conclusion-your-ratpoison-inspired-windows-11-desktop"><strong>8. Conclusion: Your ratpoison-inspired Windows 11 Desktop</strong></h2>

<p>By combining a Windows TWM, AutoHotkey, a suitable launcher, and CLI tools, you can build a Windows 11 environment that strongly emulates your ratpoison setup’s functionality and keyboard-centric nature. This involves translating your .ratpoisonrc logic into AHK scripts and TWM configurations.</p>

<p>Perfect replication is impossible due to OS differences, but a high degree of functional similarity is achievable. This guide provides the foundational blocks and strategies. The process will be iterative as you fine-tune your AHK scripts and TWM settings to match your workflow as closely as possible. Your detailed .ratpoisonrc provides an excellent blueprint for this customization.</p>]]></content><author><name></name></author><category term="scratchpad" /></entry><entry><title type="html">Convert everything to readable PDFs</title><link href="https://ib.bsb.br/convert-everything-to-readable-pdfs/" rel="alternate" type="text/html" title="Convert everything to readable PDFs" /><published>2025-06-02T00:00:00+00:00</published><updated>2025-06-02T15:03:29+00:00</updated><id>https://ib.bsb.br/convert-everything-to-readable-pdfs</id><content type="html" xml:base="https://ib.bsb.br/convert-everything-to-readable-pdfs/"><![CDATA[<section class="code-block-container" role="group" aria-label="Bash Code Block" data-filename="bash_code_block.sh" data-code="#!/bin/bash
# enhanced_batch_convert_to_pdf.sh
# Converts diverse files to PDFs with readable text, metadata, or hex dumps.

# --- Configuration ---
# Optional: Set a common path prefix to strip from input file paths when creating output subdirectories.
# If your files are in /mnt/data/project1/docs and you set this to /mnt/data/project1,
# output for /mnt/data/project1/docs/file.txt will be in converted_pdfs/docs/file.pdf.
# If empty or not set, full paths (minus leading /) will be used for subdirectory structure.
COMMON_PREFIX_TO_STRIP=&quot;/mnt/mSATA/linaro/Desktop/00-TEMP/TCC/unique&quot;

# How to handle binary/unconvertible files:
# &quot;metadata&quot;: Create a PDF with file info (name, type, size).
# &quot;hex&quot;: Create a PDF with a hex dump of the file.
# &quot;strings&quot;: Create a PDF with printable strings from the file.
DEFAULT_BINARY_HANDLING=&quot;strings&quot;

# Force OCR on all existing PDFs, even if they seem to have a text layer.
# If false, OCRs only if no text layer is detected or if it&#39;s an image-to-PDF conversion.
FORCE_OCR_ALL_EXISTING_PDFS=false

# For images converted to PDF, should OCR be attempted?
OCR_IMAGES_TO_PDF=true

OUTPUT_DIR_BASE=&quot;converted_pdfs&quot; # All output will go into subdirectories here
LOG_FILE=&quot;conversion_log_enhanced.txt&quot;

# --- Helper Functions ---

# Function to log messages
log_msg() {
    echo &quot;$(date &#39;+%Y-%m-%d %H:%M:%S&#39;) - $1&quot; &gt;&gt; &quot;$LOG_FILE&quot;
}

# Check for required commands
check_commands() {
    local missing_cmds=0
    local cmds_to_check=(
        &quot;file&quot; &quot;libreoffice&quot; &quot;pandoc&quot; &quot;pdflatex&quot; &quot;convert&quot; &quot;jq&quot; &quot;enscript&quot;
        &quot;ps2pdf&quot; &quot;pdffonts&quot; &quot;ocrmypdf&quot; &quot;xxd&quot; &quot;man&quot; &quot;realpath&quot; &quot;mktemp&quot; &quot;dirname&quot; &quot;basename&quot;
    )
    log_msg &quot;INFO: Checking for required commands...&quot;
    for cmd in &quot;${cmds_to_check[@]}&quot;; do
        if ! command -v &quot;$cmd&quot; &amp;&gt; /dev/null; then
            log_msg &quot;ERROR: Required command &#39;$cmd&#39; not found. Please install it.&quot;
            echo &quot;ERROR: Required command &#39;$cmd&#39; not found. Please install it.&quot; &gt;&amp;2
            missing_cmds=$((missing_cmds + 1))
        fi
    done
    if [[ $missing_cmds -gt 0 ]]; then
        log_msg &quot;FATAL: $missing_cmds required command(s) are missing. Exiting.&quot;
        echo &quot;FATAL: $missing_cmds required command(s) are missing. Exiting.&quot; &gt;&amp;2
        exit 1
    fi
    log_msg &quot;INFO: All required commands found.&quot;
}

# Check for embedded text in PDF
has_text_layer() {
    # Returns 0 if text layer exists, 1 if not or error
    if ! pdffonts &quot;$1&quot; &amp;&gt;/dev/null; then return 1; fi # pdffonts error
    if [[ $(pdffonts &quot;$1&quot; | awk &#39;NR&gt;2 {if ($NF != &quot;no&quot;) c++} END{print c+0}&#39;) -gt 0 ]]; then
        return 0 # Has text
    else
        return 1 # No text
    fi
}

# Normalize extension to lowercase
normalize_ext() {
    local filename=$(basename &quot;$1&quot;)
    local ext=&quot;${filename##*.}&quot;
    if [[ &quot;$ext&quot; == &quot;$filename&quot; ]]; then # No extension
        echo &quot;&quot;
    else
        echo &quot;${ext}&quot; | tr &#39;[:upper:]&#39; &#39;[:lower:]&#39;
    fi
}

# Create placeholder PDF with metadata
create_metadata_pdf() {
    local infile=&quot;$1&quot;
    local outfile=&quot;$2&quot;
    local detected_mimetype=&quot;$3&quot;
    local file_description=&quot;$4&quot;
    local reason=&quot;$5&quot;
    local filesize=$(du -b &quot;$infile&quot; | cut -f1) # Size in bytes

    log_msg &quot;INFO: Creating metadata PDF for &#39;$infile&#39;. Reason: $reason&quot;
    (
        echo &quot;File Information&quot;
        echo &quot;----------------&quot;
        echo &quot;Original Filename: $(basename &quot;$infile&quot;)&quot;
        echo &quot;Full Path: $infile&quot;
        echo &quot;Detected MIME Type: $detected_mimetype&quot;
        echo &quot;File Command Description: $file_description&quot;
        echo &quot;Size: $filesize bytes ($(du -h &quot;$infile&quot; | cut -f1))&quot;
        echo &quot;Modification Date: $(date -r &quot;$infile&quot;)&quot;
        echo &quot;&quot;
        echo &quot;Reason for this Metadata PDF:&quot;
        echo &quot;$reason&quot;
        echo &quot;The content of the original file could not be meaningfully rendered as a standard document.&quot;
    ) | enscript -B --font=Courier10 --word-wrap --margins=50:50:50:50 -p - -o - | ps2pdf - &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1
    if [[ $? -eq 0 &amp;&amp; -s &quot;$outfile&quot; ]]; then
        log_msg &quot;OK: Metadata PDF created for &#39;$infile&#39; at &#39;$outfile&#39;.&quot;
    else
        log_msg &quot;ERROR: Metadata PDF creation FAILED for &#39;$infile&#39;.&quot;
    fi
}

# Create hex dump PDF
create_hexdump_pdf() {
    local infile=&quot;$1&quot;
    local outfile=&quot;$2&quot;
    local detected_mimetype=&quot;$3&quot;
    local file_description=&quot;$4&quot;
    local filesize=$(du -b &quot;$infile&quot; | cut -f1)

    log_msg &quot;INFO: Creating hex dump PDF for &#39;$infile&#39;.&quot;
    (
        echo &quot;File Information &amp; Hex Dump&quot;
        echo &quot;---------------------------&quot;
        echo &quot;Original Filename: $(basename &quot;$infile&quot;)&quot;
        echo &quot;Full Path: $infile&quot;
        echo &quot;Detected MIME Type: $detected_mimetype&quot;
        echo &quot;File Command Description: $file_description&quot;
        echo &quot;Size: $filesize bytes ($(du -h &quot;$infile&quot; | cut -f1))&quot;
        echo &quot;Modification Date: $(date -r &quot;$infile&quot;)&quot;
        echo &quot;&quot;
        echo &quot;Hex Dump (first 1MB or full file if smaller):&quot;
        xxd -l 1048576 &quot;$infile&quot; # Limit to 1MB to avoid huge PDFs
    ) | enscript -B --font=Courier8 --word-wrap --margins=50:50:50:50 -r -p - -o - | ps2pdf - &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 # -r for landscape
     if [[ $? -eq 0 &amp;&amp; -s &quot;$outfile&quot; ]]; then
        log_msg &quot;OK: Hex dump PDF created for &#39;$infile&#39; at &#39;$outfile&#39;.&quot;
    else
        log_msg &quot;ERROR: Hex dump PDF creation FAILED for &#39;$infile&#39;.&quot;
    fi
}

# Create strings PDF
create_strings_pdf() {
    local infile=&quot;$1&quot;
    local outfile=&quot;$2&quot;
    local detected_mimetype=&quot;$3&quot;
    local file_description=&quot;$4&quot;
    local filesize=$(du -b &quot;$infile&quot; | cut -f1)

    log_msg &quot;INFO: Creating extracted strings PDF for &#39;$infile&#39;.&quot;
     (
        echo &quot;File Information &amp; Extracted Strings&quot;
        echo &quot;------------------------------------&quot;
        echo &quot;Original Filename: $(basename &quot;$infile&quot;)&quot;
        echo &quot;Full Path: $infile&quot;
        echo &quot;Detected MIME Type: $detected_mimetype&quot;
        echo &quot;File Command Description: $file_description&quot;
        echo &quot;Size: $filesize bytes ($(du -h &quot;$infile&quot; | cut -f1))&quot;
        echo &quot;Modification Date: $(date -r &quot;$infile&quot;)&quot;
        echo &quot;&quot;
        echo &quot;Extracted Printable Strings (UTF-8, min length 4):&quot;
        strings -n 4 -a -t d --encoding=S &quot;$infile&quot; # Show offset, include all file
    ) | enscript -B --font=Courier10 --word-wrap --margins=50:50:50:50 -p - -o - | ps2pdf - &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1
    if [[ $? -eq 0 &amp;&amp; -s &quot;$outfile&quot; ]]; then
        log_msg &quot;OK: Strings PDF created for &#39;$infile&#39; at &#39;$outfile&#39;.&quot;
    else
        log_msg &quot;ERROR: Strings PDF creation FAILED for &#39;$infile&#39;.&quot;
    fi
}


# --- Main Conversion Function ---
convert_file() {
    local infile=&quot;$1&quot;
    local binary_handling_method=&quot;$2&quot;
    local conversion_done=false

    # Determine output path
    local relative_path_to_input=&quot;$infile&quot;
    if [[ -n &quot;$COMMON_PREFIX_TO_STRIP&quot; ]]; then
        # Ensure prefix ends with / if it&#39;s not empty and doesn&#39;t have one, for clean stripping
        local temp_prefix=&quot;$COMMON_PREFIX_TO_STRIP&quot;
        [[ &quot;${temp_prefix: -1}&quot; != &quot;/&quot; &amp;&amp; -n &quot;$temp_prefix&quot; ]] &amp;&amp; temp_prefix=&quot;$temp_prefix/&quot;
        
        # Strip prefix if infile starts with it
        if [[ &quot;$infile&quot; == &quot;$temp_prefix&quot;* ]]; then
             relative_path_to_input=&quot;${infile#&quot;$temp_prefix&quot;}&quot;
        else # Prefix not found, use infile as is (minus leading / for safety with mkdir -p)
            relative_path_to_input=&quot;${infile#/}&quot;
        fi
    else # No prefix to strip, use infile as is (minus leading /)
        relative_path_to_input=&quot;${infile#/}&quot;
    fi
    
    local out_subdir=&quot;$OUTPUT_DIR_BASE/$relative_path_to_input&quot;
    out_subdir=$(dirname &quot;$out_subdir&quot;) # Get directory part for output
    mkdir -p &quot;$out_subdir&quot;

    local in_filename=$(basename &quot;$infile&quot;)
    local in_base=&quot;${in_filename%.*}&quot;
    # If filename has no extension, in_base becomes in_filename
    if [[ &quot;$in_filename&quot; == &quot;$in_base&quot; ]]; then
        in_base=&quot;$in_filename&quot;
    fi
    local outfile=&quot;$out_subdir/$in_base.pdf&quot;
    
    # Handle cases where infile itself is already $outfile (e.g. input is a.pdf, output is a.pdf)
    # or if infile is foo and outfile becomes foo.pdf, this is fine.
    # If infile is foo.txt and outfile is foo.pdf, this is fine.
    # If infile is foo.pdf and outfile is foo.pdf, this is fine.
    # The main concern is overwriting source if $infile == $outfile AND it&#39;s not a PDF already.
    # This is unlikely given $outfile always gets .pdf extension.
    # However, if $infile is /path/foo and $outfile is /path/foo.pdf, this is the desired outcome.

    local ext=$(normalize_ext &quot;$in_filename&quot;)
    local mimetype=$(file -b --mime-type &quot;$infile&quot; | cut -d&#39;;&#39; -f1) # Remove charset
    local filedesc=$(file -b &quot;$infile&quot;)

    log_msg &quot;-----------------------------------------------------&quot;
    log_msg &quot;START Processing: &#39;$infile&#39;&quot;
    log_msg &quot;INFO: MIME=&#39;$mimetype&#39;, Ext=&#39;$ext&#39;, Desc=&#39;$filedesc&#39;, OutFile=&#39;$outfile&#39;&quot;

    if [[ -f &quot;$outfile&quot; &amp;&amp; &quot;$outfile&quot; -nt &quot;$infile&quot; ]]; then
        log_msg &quot;SKIP: Output &#39;$outfile&#39; exists and is newer than &#39;$infile&#39;.&quot;
        return 0 # Indicate skipped
    fi

    case &quot;$mimetype&quot; in
        application/pdf)
            if $FORCE_OCR_ALL_EXISTING_PDFS; then
                log_msg &quot;INFO: PDF &#39;$infile&#39; - OCR FORCED.&quot;
                ocrmypdf --force-ocr &quot;$infile&quot; &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1
            elif ! has_text_layer &quot;$infile&quot;; then
                log_msg &quot;INFO: PDF &#39;$infile&#39; needs OCR (no text layer detected).&quot;
                ocrmypdf &quot;$infile&quot; &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 # Default: adds layer if missing
            else
                log_msg &quot;INFO: PDF &#39;$infile&#39; has text layer. Copying.&quot;
                cp &quot;$infile&quot; &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1
                if [[ $? -eq 0 ]]; then conversion_done=true; else log_msg &quot;ERROR: Failed to copy PDF &#39;$infile&#39;.&quot;; fi
            fi
            if [[ -f &quot;$outfile&quot; &amp;&amp; $? -eq 0 ]]; then # Check if ocrmypdf or cp succeeded
                log_msg &quot;OK: PDF &#39;$infile&#39; processed to &#39;$outfile&#39;.&quot;
                conversion_done=true
            elif [[ ! -f &quot;$outfile&quot; ]]; then # If ocrmypdf failed and didn&#39;t create outfile
                log_msg &quot;ERROR: Processing PDF &#39;$infile&#39; failed. Output file not created.&quot;
            fi
            ;;

        application/msword|application/vnd.ms-word*|\
        application/vnd.openxmlformats-officedocument.wordprocessingml.document|\
        application/vnd.oasis.opendocument.text*|application/rtf|\
        application/vnd.ms-excel*|application/vnd.openxmlformats-officedocument.spreadsheetml.sheet|\
        application/vnd.oasis.opendocument.spreadsheet*)
            log_msg &quot;INFO: Office document &#39;$infile&#39;. Converting with LibreOffice.&quot;
            # LibreOffice --convert-to pdf uses the input filename with .pdf extension in the --outdir
            local lo_expected_out_name=&quot;$out_subdir/$in_base.pdf&quot; # This should match $outfile
            libreoffice --headless --convert-to pdf &quot;$infile&quot; --outdir &quot;$out_subdir&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1
            if [[ -f &quot;$lo_expected_out_name&quot; ]]; then
                 # If $lo_expected_out_name is different from $outfile (e.g. due to sanitization or complex base name)
                 # This should not happen if $outfile is correctly constructed as $out_subdir/$in_base.pdf
                if [[ &quot;$lo_expected_out_name&quot; != &quot;$outfile&quot; ]]; then
                    log_msg &quot;WARN: LibreOffice output &#39;$lo_expected_out_name&#39; differs from expected &#39;$outfile&#39;. Moving.&quot;
                    mv &quot;$lo_expected_out_name&quot; &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1
                fi
                log_msg &quot;OK: &#39;$infile&#39; converted via LibreOffice to &#39;$outfile&#39;.&quot;
                conversion_done=true
            else
                log_msg &quot;ERROR: LibreOffice conversion FAILED for &#39;$infile&#39;. Output &#39;$lo_expected_out_name&#39; not found.&quot;
            fi
            ;;

        text/csv|text/tab-separated-values)
            log_msg &quot;INFO: CSV/TSV &#39;$infile&#39;. Converting with Pandoc.&quot;
            pandoc &quot;$infile&quot; -o &quot;$outfile&quot; --from=csv --toc --standalone &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; converted via Pandoc.&quot;; conversion_done=true; } \
                || log_msg &quot;ERROR: Pandoc (CSV) FAILED for &#39;$infile&#39;.&quot;
            ;;

        text/markdown)
            log_msg &quot;INFO: Markdown &#39;$infile&#39;. Converting with Pandoc.&quot;
            pandoc &quot;$infile&quot; -o &quot;$outfile&quot; --standalone &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; converted via Pandoc.&quot;; conversion_done=true; } \
                || log_msg &quot;ERROR: Pandoc (Markdown) FAILED for &#39;$infile&#39;.&quot;
            ;;
        
        application/json)
            log_msg &quot;INFO: JSON &#39;$infile&#39;. Attempting pretty-print with jq then Pandoc.&quot;
            local tmp_json_pretty=$(mktemp &quot;$out_subdir/json_pretty_XXXXXX.json&quot;)
            if jq . &quot;$infile&quot; &gt; &quot;$tmp_json_pretty&quot; 2&gt;/dev/null; then
                pandoc &quot;$tmp_json_pretty&quot; -o &quot;$outfile&quot; --standalone &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                    &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; (pretty JSON) converted via Pandoc.&quot;; conversion_done=true; } \
                    || { log_msg &quot;ERROR: Pandoc (pretty JSON) FAILED for &#39;$infile&#39;. Trying enscript.&quot;;
                         enscript &quot;$infile&quot; --font=Courier10 -p - -o - | ps2pdf - &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                            &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; (JSON) converted via enscript fallback.&quot;; conversion_done=true; } \
                            || log_msg &quot;ERROR: enscript fallback for JSON &#39;$infile&#39; FAILED.&quot;; }
            else
                log_msg &quot;WARN: jq failed for &#39;$infile&#39;. Trying Pandoc on raw, then enscript.&quot;
                pandoc &quot;$infile&quot; -o &quot;$outfile&quot; --standalone &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                    &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; (raw JSON) converted via Pandoc.&quot;; conversion_done=true; } \
                    || { log_msg &quot;ERROR: Pandoc (raw JSON) FAILED for &#39;$infile&#39;. Trying enscript.&quot;;
                         enscript &quot;$infile&quot; --font=Courier10 -p - -o - | ps2pdf - &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                            &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; (JSON) converted via enscript fallback.&quot;; conversion_done=true; } \
                            || log_msg &quot;ERROR: enscript fallback for JSON &#39;$infile&#39; FAILED.&quot;; }
            fi
            rm -f &quot;$tmp_json_pretty&quot;
            ;;

        image/png|image/jpeg|image/gif|image/bmp|image/tiff|image/webp)
            log_msg &quot;INFO: Image &#39;$infile&#39;.&quot;
            if $OCR_IMAGES_TO_PDF &amp;&amp; command -v ocrmypdf &amp;&gt; /dev/null; then
                log_msg &quot;Attempting OCR with ocrmypdf for image &#39;$infile&#39;.&quot;
                ocrmypdf &quot;$infile&quot; &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                    &amp;&amp; { log_msg &quot;OK: Image &#39;$infile&#39; OCR&#39;d via ocrmypdf to &#39;$outfile&#39;.&quot;; conversion_done=true; } \
                    || { log_msg &quot;ERROR: ocrmypdf FAILED for image &#39;$infile&#39;. Falling back to ImageMagick&#39;s convert.&quot;;
                         convert &quot;$infile&quot; &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                            &amp;&amp; { log_msg &quot;OK: Image &#39;$infile&#39; converted via ImageMagick (no OCR).&quot;; conversion_done=true; } \
                            || log_msg &quot;ERROR: ImageMagick&#39;s convert also FAILED for &#39;$infile&#39;.&quot;; }
            else
                log_msg &quot;Converting image &#39;$infile&#39; with ImageMagick&#39;s convert (no OCR).&quot;
                convert &quot;$infile&quot; &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                    &amp;&amp; { log_msg &quot;OK: Image &#39;$infile&#39; converted via ImageMagick.&quot;; conversion_done=true; } \
                    || log_msg &quot;ERROR: ImageMagick&#39;s convert FAILED for &#39;$infile&#39;.&quot;
            fi
            ;;

        application/x-tex|text/x-tex|application/x-latex)
            if [[ &quot;$ext&quot; == &quot;cls&quot; || &quot;$ext&quot; == &quot;sty&quot; ]]; then # LaTeX class/style files
                log_msg &quot;INFO: LaTeX Class/Style file &#39;$infile&#39;. Converting as syntax-highlighted text.&quot;
                pandoc &quot;$infile&quot; --standalone --highlight-style=kate -o &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                    &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; converted via Pandoc (as LaTeX source).&quot;; conversion_done=true; } \
                    || { log_msg &quot;ERROR: Pandoc (LaTeX source) FAILED for &#39;$infile&#39;. Trying enscript.&quot;;
                         enscript &quot;$infile&quot; --font=Courier10 --highlight=latex -p - -o - | ps2pdf - &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                            &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; converted via enscript (highlighted LaTeX).&quot;; conversion_done=true; } \
                            || log_msg &quot;ERROR: enscript (highlighted LaTeX) FAILED for &#39;$infile&#39;.&quot;; }
            else # Regular .tex files
                log_msg &quot;INFO: LaTeX document &#39;$infile&#39;. Compiling with pdflatex.&quot;
                local temp_tex_dir=$(mktemp -d &quot;$out_subdir/tex_compile_XXXXXX&quot;)
                cp &quot;$infile&quot; &quot;$temp_tex_dir/&quot; # Copy tex file to temp dir
                # If there are associated .bib files or images, they&#39;d need to be copied too or paths adjusted.
                # This simplified version assumes self-contained .tex or resolvable paths from temp_tex_dir.
                
                local tex_filename_only=$(basename &quot;$infile&quot;)
                (cd &quot;$temp_tex_dir&quot; &amp;&amp; \
                 pdflatex -interaction=nonstopmode &quot;$tex_filename_only&quot; &amp;&amp; \
                 pdflatex -interaction=nonstopmode &quot;$tex_filename_only&quot;) &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1
                
                local compiled_pdf_base=&quot;${tex_filename_only%.*}&quot;
                local compiled_pdf_path=&quot;$temp_tex_dir/$compiled_pdf_base.pdf&quot;

                if [[ -f &quot;$compiled_pdf_path&quot; ]]; then
                    mv &quot;$compiled_pdf_path&quot; &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                        &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; compiled via pdflatex to &#39;$outfile&#39;.&quot;; conversion_done=true; } \
                        || log_msg &quot;ERROR: pdflatex compiled &#39;$infile&#39;, but FAILED to move to &#39;$outfile&#39;.&quot;
                else
                    log_msg &quot;ERROR: pdflatex compilation FAILED for &#39;$infile&#39;. Output PDF not found in &#39;$temp_tex_dir&#39;.&quot;
                fi
                rm -rf &quot;$temp_tex_dir&quot;
            fi
            ;;
        
        application/x-bibtex|text/x-bibtex)
            log_msg &quot;INFO: BibTeX file &#39;$infile&#39;. Converting with Pandoc.&quot;
            pandoc &quot;$infile&quot; --standalone -o &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; converted via Pandoc.&quot;; conversion_done=true; } \
                || { log_msg &quot;ERROR: Pandoc (BibTeX) FAILED for &#39;$infile&#39;. Trying enscript.&quot;;
                     enscript &quot;$infile&quot; --font=Courier10 -p - -o - | ps2pdf - &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                        &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; (BibTeX) converted as plain text via enscript.&quot;; conversion_done=true; } \
                        || log_msg &quot;ERROR: enscript fallback for BibTeX &#39;$infile&#39; FAILED.&quot;; }
            ;;

        application/x-troff-man|text/troff) # Man pages
            log_msg &quot;INFO: Man page &#39;$infile&#39;. Converting with &#39;man&#39;.&quot;
            man -Tpdf &quot;$infile&quot; &gt; &quot;$outfile&quot; 2&gt;&gt; &quot;$LOG_FILE&quot; # man outputs errors to stderr
            if [[ $? -eq 0 &amp;&amp; -s &quot;$outfile&quot; ]]; then
                log_msg &quot;OK: &#39;$infile&#39; converted via &#39;man -Tpdf&#39;.&quot;
                conversion_done=true
            else
                log_msg &quot;WARN: &#39;man -Tpdf&#39; FAILED for &#39;$infile&#39;. Trying Pandoc.&quot;
                pandoc &quot;$infile&quot; --standalone -f man -t pdf -o &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                    &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; converted via Pandoc (man).&quot;; conversion_done=true; } \
                    || { log_msg &quot;ERROR: Pandoc (man) FAILED for &#39;$infile&#39;. Trying enscript.&quot;;
                         enscript &quot;$infile&quot; --font=Courier10 -p - -o - | ps2pdf - &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                            &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; (man page) converted as text via enscript.&quot;; conversion_done=true; } \
                            || log_msg &quot;ERROR: enscript fallback for man page &#39;$infile&#39; FAILED.&quot;; }
            fi
            ;;

        text/x-python|text/x-shellscript|application/x-perl|application/x-ruby|\
        text/x-csrc|text/x-chdr|text/x-c++src|text/x-java|text/html|text/css|application/javascript|application/xml|text/xml) # Code, XML, HTML
            log_msg &quot;INFO: Code/Markup file &#39;$infile&#39; ($mimetype). Converting with Pandoc (syntax highlighting).&quot;
            # Determine Pandoc format based on extension if possible for better highlighting
            local pandoc_format_opt=&quot;&quot;
            case &quot;$ext&quot; in
                py) pandoc_format_opt=&quot;python&quot; ;;
                sh|bash) pandoc_format_opt=&quot;bash&quot; ;;
                pl) pandoc_format_opt=&quot;perl&quot; ;;
                rb) pandoc_format_opt=&quot;ruby&quot; ;;
                c|h) pandoc_format_opt=&quot;c&quot; ;;
                cpp|hpp|cxx) pandoc_format_opt=&quot;cpp&quot; ;;
                java) pandoc_format_opt=&quot;java&quot; ;;
                html|htm) pandoc_format_opt=&quot;html&quot; ;;
                css) pandoc_format_opt=&quot;css&quot; ;;
                js) pandoc_format_opt=&quot;javascript&quot; ;;
                xml|bcf|run.xml) pandoc_format_opt=&quot;xml&quot; ;; # .bcf (Biber control file), .run.xml
            esac
            
            if [[ -n &quot;$pandoc_format_opt&quot; ]]; then
                pandoc &quot;$infile&quot; --from=&quot;$pandoc_format_opt&quot; --standalone --highlight-style=kate -o &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1
            else # Default to Pandoc auto-detection or plain text
                pandoc &quot;$infile&quot; --standalone --highlight-style=kate -o &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1
            fi

            if [[ $? -eq 0 &amp;&amp; -s &quot;$outfile&quot; ]]; then
                log_msg &quot;OK: &#39;$infile&#39; converted via Pandoc with highlighting.&quot;
                conversion_done=true
            else
                log_msg &quot;WARN: Pandoc with highlighting FAILED for &#39;$infile&#39;. Trying enscript.&quot;
                local enscript_hl_opt=&quot;&quot;
                [[ -n &quot;$ext&quot; ]] &amp;&amp; enscript_hl_opt=&quot;--highlight=$ext&quot;
                enscript &quot;$infile&quot; --font=Courier10 $enscript_hl_opt -p - -o - | ps2pdf - &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                    &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; converted via enscript.&quot;; conversion_done=true; } \
                    || log_msg &quot;ERROR: enscript fallback for &#39;$infile&#39; FAILED.&quot;
            fi
            ;;
        
        text/*) # Generic text files (.log, .txt, .bak, .aux, .synctex, .blg, .info, .lst, .conf etc.)
            log_msg &quot;INFO: Generic text file &#39;$infile&#39; ($mimetype, ext: .$ext). Converting with enscript.&quot;
            enscript &quot;$infile&quot; --font=Courier10 --word-wrap -p - -o - | ps2pdf - &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; converted via enscript.&quot;; conversion_done=true; } \
                || log_msg &quot;ERROR: enscript FAILED for &#39;$infile&#39;.&quot;
            ;;

        application/octet-stream|application/x-dosexec|application/x-sharedlib|\
        application/x-object|application/x-executable|application/x-sqlite3|inode/x-empty|\
        application/x-archive|application/zip|application/gzip|application/x-bzip2|application/x-xz)
            log_msg &quot;INFO: Binary/Archive/Empty/Unknown file &#39;$infile&#39; (MIME: $mimetype, Desc: $filedesc).&quot;
            if [[ &quot;$mimetype&quot; == &quot;inode/x-empty&quot; ]]; then
                create_metadata_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot; &quot;File is empty.&quot;
                conversion_done=true
            # Heuristic: if &#39;filedesc&#39; suggests text despite octet-stream, try enscript
            elif [[ &quot;$filedesc&quot; == *&quot;text&quot;* || &quot;$filedesc&quot; == *&quot;script&quot;* || &quot;$filedesc&quot; == *&quot;ASCII text&quot;* || &quot;$filedesc&quot; == *&quot;UTF-8 Unicode text&quot;* ]]; then
                log_msg &quot;INFO: MIME is &#39;$mimetype&#39;, but filedesc suggests text (&#39;$filedesc&#39;). Trying enscript.&quot;
                enscript &quot;$infile&quot; --font=Courier10 --word-wrap -p - -o - | ps2pdf - &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                    &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; converted via enscript (heuristic).&quot;; conversion_done=true; } \
                    || { log_msg &quot;ERROR: enscript (heuristic) FAILED for &#39;$infile&#39;. Using binary handling.&quot;;
                         if [[ &quot;$binary_handling_method&quot; == &quot;hex&quot; ]]; then create_hexdump_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot;;
                         elif [[ &quot;$binary_handling_method&quot; == &quot;strings&quot; ]]; then create_strings_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot;;
                         else create_metadata_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot; &quot;Binary or undetermined content type ($mimetype).&quot;; fi
                         conversion_done=true; # Placeholder PDF is a form of &quot;done&quot;
                       }
            else # Standard binary handling
                if [[ &quot;$binary_handling_method&quot; == &quot;hex&quot; ]]; then create_hexdump_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot;;
                elif [[ &quot;$binary_handling_method&quot; == &quot;strings&quot; ]]; then create_strings_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot;;
                else create_metadata_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot; &quot;Binary, archive, or undetermined content type ($mimetype).&quot;; fi
                conversion_done=true; # Placeholder PDF is a form of &quot;done&quot;
            fi
            ;;
        
        *) # Fallback for truly unrecognized/unhandled MIME types
            log_msg &quot;WARN: Unhandled MIME type &#39;$mimetype&#39; for &#39;$infile&#39;. File description: &#39;$filedesc&#39;.&quot;
            if [[ &quot;$filedesc&quot; == *&quot;text&quot;* || &quot;$filedesc&quot; == *&quot;script&quot;* || &quot;$filedesc&quot; == *&quot;ASCII text&quot;* || &quot;$filedesc&quot; == *&quot;UTF-8 Unicode text&quot;* ]]; then
                log_msg &quot;INFO: Unhandled MIME, but filedesc suggests text (&#39;$filedesc&#39;). Trying enscript.&quot;
                enscript &quot;$infile&quot; --font=Courier10 --word-wrap -p - -o - | ps2pdf - &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                    &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; converted via enscript (heuristic for unhandled MIME).&quot;; conversion_done=true; } \
                    || { log_msg &quot;ERROR: enscript (heuristic for unhandled MIME) FAILED for &#39;$infile&#39;. Using binary handling.&quot;;
                         if [[ &quot;$binary_handling_method&quot; == &quot;hex&quot; ]]; then create_hexdump_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot;;
                         elif [[ &quot;$binary_handling_method&quot; == &quot;strings&quot; ]]; then create_strings_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot;;
                         else create_metadata_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot; &quot;Unhandled MIME type ($mimetype) and not clearly text.&quot;; fi
                         conversion_done=true;
                       }
            else
                log_msg &quot;INFO: Unhandled MIME type &#39;$mimetype&#39; for &#39;$infile&#39;. Using configured binary handling.&quot;
                if [[ &quot;$binary_handling_method&quot; == &quot;hex&quot; ]]; then create_hexdump_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot;;
                elif [[ &quot;$binary_handling_method&quot; == &quot;strings&quot; ]]; then create_strings_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot;;
                else create_metadata_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot; &quot;Unhandled MIME type ($mimetype).&quot;; fi
                conversion_done=true;
            fi
            ;;
    esac

    if ! $conversion_done &amp;&amp; [[ ! -f &quot;$outfile&quot; ]]; then
        log_msg &quot;FALLBACK: No conversion method succeeded and no output file created for &#39;$infile&#39;. Creating placeholder.&quot;
        create_metadata_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot; &quot;No applicable conversion rule or all attempts failed.&quot;
    elif ! $conversion_done &amp;&amp; [[ -f &quot;$outfile&quot; ]]; then
        log_msg &quot;WARN: Conversion logic did not explicitly set &#39;done&#39; flag, but output file &#39;$outfile&#39; exists. Assuming prior step handled it.&quot;
    fi
    log_msg &quot;END Processing: &#39;$infile&#39;&quot;
    [[ -f &quot;$outfile&quot; ]] &amp;&amp; return 0 || return 1 # Return 0 if output exists, 1 otherwise
}

# --- Script Main Logic ---

# Argument Parsing
if [[ &quot;$#&quot; -lt 1 || &quot;$#&quot; -gt 4 ]]; then
    echo &quot;Usage: $0 &lt;listfile.txt&gt; [common_prefix_to_strip] [binary_handling: metadata|hex|strings] [force_ocr_all_pdfs: true|false]&quot;
    echo &quot;Example: $0 myfiles.txt \&quot;/mnt/mydata\&quot; hex true&quot;
    exit 1
fi

INPUT_LIST_FILE=&quot;$1&quot;
[[ -n &quot;$2&quot; ]] &amp;&amp; COMMON_PREFIX_TO_STRIP=&quot;$2&quot;
[[ -n &quot;$3&quot; ]] &amp;&amp; BINARY_HANDLING_USER_CHOICE=&quot;$3&quot; || BINARY_HANDLING_USER_CHOICE=&quot;$DEFAULT_BINARY_HANDLING&quot;
[[ -n &quot;$4&quot; ]] &amp;&amp; FORCE_OCR_ALL_PDFS_USER_CHOICE=&quot;$4&quot;

# Validate binary handling choice
case &quot;$BINARY_HANDLING_USER_CHOICE&quot; in
    metadata|hex|strings) BINARY_HANDLING=&quot;$BINARY_HANDLING_USER_CHOICE&quot; ;;
    *) log_msg &quot;WARN: Invalid binary_handling option &#39;$BINARY_HANDLING_USER_CHOICE&#39;. Defaulting to &#39;$DEFAULT_BINARY_HANDLING&#39;.&quot;; BINARY_HANDLING=&quot;$DEFAULT_BINARY_HANDLING&quot; ;;
esac

# Validate force OCR choice
if [[ -n &quot;$FORCE_OCR_ALL_PDFS_USER_CHOICE&quot; ]]; then
    if [[ &quot;$FORCE_OCR_ALL_PDFS_USER_CHOICE&quot; == &quot;true&quot; ]]; then
        FORCE_OCR_ALL_EXISTING_PDFS=true
    elif [[ &quot;$FORCE_OCR_ALL_PDFS_USER_CHOICE&quot; == &quot;false&quot; ]]; then
        FORCE_OCR_ALL_EXISTING_PDFS=false
    else
        log_msg &quot;WARN: Invalid force_ocr_all_pdfs option &#39;$FORCE_OCR_ALL_PDFS_USER_CHOICE&#39;. Using default ($FORCE_OCR_ALL_EXISTING_PDFS).&quot;
    fi
fi

# Initialize Log File
echo &quot;Conversion process started at $(date)&quot; &gt; &quot;$LOG_FILE&quot;
log_msg &quot;INFO: Input List File: &#39;$INPUT_LIST_FILE&#39;&quot;
log_msg &quot;INFO: Common Prefix to Strip: &#39;$COMMON_PREFIX_TO_STRIP&#39;&quot;
log_msg &quot;INFO: Binary File Handling: &#39;$BINARY_HANDLING&#39;&quot;
log_msg &quot;INFO: Force OCR All Existing PDFs: $FORCE_OCR_ALL_EXISTING_PDFS&quot;
log_msg &quot;INFO: OCR Images to PDF: $OCR_IMAGES_TO_PDF&quot;
log_msg &quot;INFO: Output Base Directory: &#39;$OUTPUT_DIR_BASE&#39;&quot;

check_commands # Check for essential tools

# Prepare clean file list (robust URL decoding)
CLEANED_LIST_FOR_PROCESSING_INTERNAL=&quot;cleaned_input_list_internal.tmp&quot;
log_msg &quot;INFO: Preparing clean file list from &#39;$INPUT_LIST_FILE&#39;...&quot;
if python3 -c &#39;import sys, urllib.parse; [print(urllib.parse.unquote(line.strip())) for line in sys.stdin if line.strip()]&#39; &lt; &quot;$INPUT_LIST_FILE&quot; &gt; &quot;$CLEANED_LIST_FOR_PROCESSING_INTERNAL&quot;; then
    log_msg &quot;INFO: Clean file list created successfully using Python.&quot;
else
    log_msg &quot;WARN: Python URL decoding failed (Python 3 not found or error). Using original list (may have issues with URL-encoded names).&quot;
    cp &quot;$INPUT_LIST_FILE&quot; &quot;$CLEANED_LIST_FOR_PROCESSING_INTERNAL&quot; # Fallback
fi

# Create output base directory
mkdir -p &quot;$OUTPUT_DIR_BASE&quot;
log_msg &quot;INFO: Ensured output base directory &#39;$OUTPUT_DIR_BASE&#39; exists.&quot;

# Process the list
total_files=0
successful_conversions=0
failed_conversions=0
skipped_up_to_date=0

while IFS= read -r file_to_process || [[ -n &quot;$file_to_process&quot; ]]; do
    # Skip empty or comment lines from the (cleaned) list
    [[ -z &quot;$file_to_process&quot; || &quot;$file_to_process&quot; =~ ^# ]] &amp;&amp; continue

    total_files=$((total_files + 1))
    if [[ ! -e &quot;$file_to_process&quot; ]]; then # Use -e to check if path exists (file or dir)
        log_msg &quot;ERROR: File or directory &#39;$file_to_process&#39; from list NOT FOUND. Skipping.&quot;
        failed_conversions=$((failed_conversions + 1))
        continue
    fi
    if [[ -d &quot;$file_to_process&quot; ]]; then
        log_msg &quot;SKIP: Path &#39;$file_to_process&#39; is a DIRECTORY. Skipping.&quot;
        # Consider if directories should be counted as skipped or failed. For now, just log.
        continue
    fi
     if [[ ! -f &quot;$file_to_process&quot; ]]; then
        log_msg &quot;SKIP: Path &#39;$file_to_process&#39; is NOT A REGULAR FILE. Skipping.&quot;
        continue
    fi
    if [[ ! -r &quot;$file_to_process&quot; ]]; then
        log_msg &quot;ERROR: File &#39;$file_to_process&#39; is NOT READABLE. Skipping.&quot;
        failed_conversions=$((failed_conversions + 1))
        continue
    fi

    # The up-to-date check is now inside convert_file, which returns 0 for success/skipped-up-to-date
    convert_file &quot;$file_to_process&quot; &quot;$BINARY_HANDLING&quot;
    status=$?
    
    # Crude status check based on return value (0 for success/skipped, 1 for failure)
    # A more refined check would involve parsing the log for &quot;SKIP&quot; vs &quot;OK&quot;
    if [[ $status -eq 0 ]]; then
        # This counts files where an output PDF was created OR skipped because it was up-to-date.
        # To differentiate, we&#39;d need more complex return codes or log parsing.
        # For now, if convert_file returns 0, it means no critical error in its own execution.
        # The actual &quot;success&quot; of conversion is in the log.
        : # Not incrementing success here, summary is tricky.
    else
        failed_conversions=$((failed_conversions + 1))
    fi
done &lt; &quot;$CLEANED_LIST_FOR_PROCESSING_INTERNAL&quot;

rm -f &quot;$CLEANED_LIST_FOR_PROCESSING_INTERNAL&quot; # Clean up temp list

# Final Summary (approximated from log counts for more detail)
successful_ops=$(grep -cE &quot;^[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2} - OK:&quot; &quot;$LOG_FILE&quot;)
error_ops=$(grep -cE &quot;^[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2} - ERROR:&quot; &quot;$LOG_FILE&quot;)
skipped_ops=$(grep -cE &quot;^[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2} - SKIP:&quot; &quot;$LOG_FILE&quot;) # Includes up-to-date and non-file skips

log_msg &quot;-----------------------------------------------------&quot;
log_msg &quot;Conversion process completed at $(date)&quot;
log_msg &quot;SUMMARY: Total items from list processed: $total_files&quot;
log_msg &quot;SUMMARY: Successful operations (OK): $successful_ops&quot;
log_msg &quot;SUMMARY: Errored operations (ERROR): $error_ops&quot;
log_msg &quot;SUMMARY: Skipped operations (SKIP/NOT FOUND/DIR): $skipped_ops (includes up-to-date, not found, directories)&quot;
log_msg &quot;INFO: Detailed log written to &#39;$LOG_FILE&#39;&quot;
log_msg &quot;INFO: Output PDFs are in subdirectories under &#39;$OUTPUT_DIR_BASE&#39;&quot;

echo &quot;Conversion complete. Log: $LOG_FILE. Output in $OUTPUT_DIR_BASE.&quot;" data-download-link="" data-download-label="Download Bash">
  <code class="language-bash">#!/bin/bash
# enhanced_batch_convert_to_pdf.sh
# Converts diverse files to PDFs with readable text, metadata, or hex dumps.

# --- Configuration ---
# Optional: Set a common path prefix to strip from input file paths when creating output subdirectories.
# If your files are in /mnt/data/project1/docs and you set this to /mnt/data/project1,
# output for /mnt/data/project1/docs/file.txt will be in converted_pdfs/docs/file.pdf.
# If empty or not set, full paths (minus leading /) will be used for subdirectory structure.
COMMON_PREFIX_TO_STRIP=&quot;/mnt/mSATA/linaro/Desktop/00-TEMP/TCC/unique&quot;

# How to handle binary/unconvertible files:
# &quot;metadata&quot;: Create a PDF with file info (name, type, size).
# &quot;hex&quot;: Create a PDF with a hex dump of the file.
# &quot;strings&quot;: Create a PDF with printable strings from the file.
DEFAULT_BINARY_HANDLING=&quot;strings&quot;

# Force OCR on all existing PDFs, even if they seem to have a text layer.
# If false, OCRs only if no text layer is detected or if it&#39;s an image-to-PDF conversion.
FORCE_OCR_ALL_EXISTING_PDFS=false

# For images converted to PDF, should OCR be attempted?
OCR_IMAGES_TO_PDF=true

OUTPUT_DIR_BASE=&quot;converted_pdfs&quot; # All output will go into subdirectories here
LOG_FILE=&quot;conversion_log_enhanced.txt&quot;

# --- Helper Functions ---

# Function to log messages
log_msg() {
    echo &quot;$(date &#39;+%Y-%m-%d %H:%M:%S&#39;) - $1&quot; &gt;&gt; &quot;$LOG_FILE&quot;
}

# Check for required commands
check_commands() {
    local missing_cmds=0
    local cmds_to_check=(
        &quot;file&quot; &quot;libreoffice&quot; &quot;pandoc&quot; &quot;pdflatex&quot; &quot;convert&quot; &quot;jq&quot; &quot;enscript&quot;
        &quot;ps2pdf&quot; &quot;pdffonts&quot; &quot;ocrmypdf&quot; &quot;xxd&quot; &quot;man&quot; &quot;realpath&quot; &quot;mktemp&quot; &quot;dirname&quot; &quot;basename&quot;
    )
    log_msg &quot;INFO: Checking for required commands...&quot;
    for cmd in &quot;${cmds_to_check[@]}&quot;; do
        if ! command -v &quot;$cmd&quot; &amp;&gt; /dev/null; then
            log_msg &quot;ERROR: Required command &#39;$cmd&#39; not found. Please install it.&quot;
            echo &quot;ERROR: Required command &#39;$cmd&#39; not found. Please install it.&quot; &gt;&amp;2
            missing_cmds=$((missing_cmds + 1))
        fi
    done
    if [[ $missing_cmds -gt 0 ]]; then
        log_msg &quot;FATAL: $missing_cmds required command(s) are missing. Exiting.&quot;
        echo &quot;FATAL: $missing_cmds required command(s) are missing. Exiting.&quot; &gt;&amp;2
        exit 1
    fi
    log_msg &quot;INFO: All required commands found.&quot;
}

# Check for embedded text in PDF
has_text_layer() {
    # Returns 0 if text layer exists, 1 if not or error
    if ! pdffonts &quot;$1&quot; &amp;&gt;/dev/null; then return 1; fi # pdffonts error
    if [[ $(pdffonts &quot;$1&quot; | awk &#39;NR&gt;2 {if ($NF != &quot;no&quot;) c++} END{print c+0}&#39;) -gt 0 ]]; then
        return 0 # Has text
    else
        return 1 # No text
    fi
}

# Normalize extension to lowercase
normalize_ext() {
    local filename=$(basename &quot;$1&quot;)
    local ext=&quot;${filename##*.}&quot;
    if [[ &quot;$ext&quot; == &quot;$filename&quot; ]]; then # No extension
        echo &quot;&quot;
    else
        echo &quot;${ext}&quot; | tr &#39;[:upper:]&#39; &#39;[:lower:]&#39;
    fi
}

# Create placeholder PDF with metadata
create_metadata_pdf() {
    local infile=&quot;$1&quot;
    local outfile=&quot;$2&quot;
    local detected_mimetype=&quot;$3&quot;
    local file_description=&quot;$4&quot;
    local reason=&quot;$5&quot;
    local filesize=$(du -b &quot;$infile&quot; | cut -f1) # Size in bytes

    log_msg &quot;INFO: Creating metadata PDF for &#39;$infile&#39;. Reason: $reason&quot;
    (
        echo &quot;File Information&quot;
        echo &quot;----------------&quot;
        echo &quot;Original Filename: $(basename &quot;$infile&quot;)&quot;
        echo &quot;Full Path: $infile&quot;
        echo &quot;Detected MIME Type: $detected_mimetype&quot;
        echo &quot;File Command Description: $file_description&quot;
        echo &quot;Size: $filesize bytes ($(du -h &quot;$infile&quot; | cut -f1))&quot;
        echo &quot;Modification Date: $(date -r &quot;$infile&quot;)&quot;
        echo &quot;&quot;
        echo &quot;Reason for this Metadata PDF:&quot;
        echo &quot;$reason&quot;
        echo &quot;The content of the original file could not be meaningfully rendered as a standard document.&quot;
    ) | enscript -B --font=Courier10 --word-wrap --margins=50:50:50:50 -p - -o - | ps2pdf - &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1
    if [[ $? -eq 0 &amp;&amp; -s &quot;$outfile&quot; ]]; then
        log_msg &quot;OK: Metadata PDF created for &#39;$infile&#39; at &#39;$outfile&#39;.&quot;
    else
        log_msg &quot;ERROR: Metadata PDF creation FAILED for &#39;$infile&#39;.&quot;
    fi
}

# Create hex dump PDF
create_hexdump_pdf() {
    local infile=&quot;$1&quot;
    local outfile=&quot;$2&quot;
    local detected_mimetype=&quot;$3&quot;
    local file_description=&quot;$4&quot;
    local filesize=$(du -b &quot;$infile&quot; | cut -f1)

    log_msg &quot;INFO: Creating hex dump PDF for &#39;$infile&#39;.&quot;
    (
        echo &quot;File Information &amp; Hex Dump&quot;
        echo &quot;---------------------------&quot;
        echo &quot;Original Filename: $(basename &quot;$infile&quot;)&quot;
        echo &quot;Full Path: $infile&quot;
        echo &quot;Detected MIME Type: $detected_mimetype&quot;
        echo &quot;File Command Description: $file_description&quot;
        echo &quot;Size: $filesize bytes ($(du -h &quot;$infile&quot; | cut -f1))&quot;
        echo &quot;Modification Date: $(date -r &quot;$infile&quot;)&quot;
        echo &quot;&quot;
        echo &quot;Hex Dump (first 1MB or full file if smaller):&quot;
        xxd -l 1048576 &quot;$infile&quot; # Limit to 1MB to avoid huge PDFs
    ) | enscript -B --font=Courier8 --word-wrap --margins=50:50:50:50 -r -p - -o - | ps2pdf - &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 # -r for landscape
     if [[ $? -eq 0 &amp;&amp; -s &quot;$outfile&quot; ]]; then
        log_msg &quot;OK: Hex dump PDF created for &#39;$infile&#39; at &#39;$outfile&#39;.&quot;
    else
        log_msg &quot;ERROR: Hex dump PDF creation FAILED for &#39;$infile&#39;.&quot;
    fi
}

# Create strings PDF
create_strings_pdf() {
    local infile=&quot;$1&quot;
    local outfile=&quot;$2&quot;
    local detected_mimetype=&quot;$3&quot;
    local file_description=&quot;$4&quot;
    local filesize=$(du -b &quot;$infile&quot; | cut -f1)

    log_msg &quot;INFO: Creating extracted strings PDF for &#39;$infile&#39;.&quot;
     (
        echo &quot;File Information &amp; Extracted Strings&quot;
        echo &quot;------------------------------------&quot;
        echo &quot;Original Filename: $(basename &quot;$infile&quot;)&quot;
        echo &quot;Full Path: $infile&quot;
        echo &quot;Detected MIME Type: $detected_mimetype&quot;
        echo &quot;File Command Description: $file_description&quot;
        echo &quot;Size: $filesize bytes ($(du -h &quot;$infile&quot; | cut -f1))&quot;
        echo &quot;Modification Date: $(date -r &quot;$infile&quot;)&quot;
        echo &quot;&quot;
        echo &quot;Extracted Printable Strings (UTF-8, min length 4):&quot;
        strings -n 4 -a -t d --encoding=S &quot;$infile&quot; # Show offset, include all file
    ) | enscript -B --font=Courier10 --word-wrap --margins=50:50:50:50 -p - -o - | ps2pdf - &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1
    if [[ $? -eq 0 &amp;&amp; -s &quot;$outfile&quot; ]]; then
        log_msg &quot;OK: Strings PDF created for &#39;$infile&#39; at &#39;$outfile&#39;.&quot;
    else
        log_msg &quot;ERROR: Strings PDF creation FAILED for &#39;$infile&#39;.&quot;
    fi
}


# --- Main Conversion Function ---
convert_file() {
    local infile=&quot;$1&quot;
    local binary_handling_method=&quot;$2&quot;
    local conversion_done=false

    # Determine output path
    local relative_path_to_input=&quot;$infile&quot;
    if [[ -n &quot;$COMMON_PREFIX_TO_STRIP&quot; ]]; then
        # Ensure prefix ends with / if it&#39;s not empty and doesn&#39;t have one, for clean stripping
        local temp_prefix=&quot;$COMMON_PREFIX_TO_STRIP&quot;
        [[ &quot;${temp_prefix: -1}&quot; != &quot;/&quot; &amp;&amp; -n &quot;$temp_prefix&quot; ]] &amp;&amp; temp_prefix=&quot;$temp_prefix/&quot;
        
        # Strip prefix if infile starts with it
        if [[ &quot;$infile&quot; == &quot;$temp_prefix&quot;* ]]; then
             relative_path_to_input=&quot;${infile#&quot;$temp_prefix&quot;}&quot;
        else # Prefix not found, use infile as is (minus leading / for safety with mkdir -p)
            relative_path_to_input=&quot;${infile#/}&quot;
        fi
    else # No prefix to strip, use infile as is (minus leading /)
        relative_path_to_input=&quot;${infile#/}&quot;
    fi
    
    local out_subdir=&quot;$OUTPUT_DIR_BASE/$relative_path_to_input&quot;
    out_subdir=$(dirname &quot;$out_subdir&quot;) # Get directory part for output
    mkdir -p &quot;$out_subdir&quot;

    local in_filename=$(basename &quot;$infile&quot;)
    local in_base=&quot;${in_filename%.*}&quot;
    # If filename has no extension, in_base becomes in_filename
    if [[ &quot;$in_filename&quot; == &quot;$in_base&quot; ]]; then
        in_base=&quot;$in_filename&quot;
    fi
    local outfile=&quot;$out_subdir/$in_base.pdf&quot;
    
    # Handle cases where infile itself is already $outfile (e.g. input is a.pdf, output is a.pdf)
    # or if infile is foo and outfile becomes foo.pdf, this is fine.
    # If infile is foo.txt and outfile is foo.pdf, this is fine.
    # If infile is foo.pdf and outfile is foo.pdf, this is fine.
    # The main concern is overwriting source if $infile == $outfile AND it&#39;s not a PDF already.
    # This is unlikely given $outfile always gets .pdf extension.
    # However, if $infile is /path/foo and $outfile is /path/foo.pdf, this is the desired outcome.

    local ext=$(normalize_ext &quot;$in_filename&quot;)
    local mimetype=$(file -b --mime-type &quot;$infile&quot; | cut -d&#39;;&#39; -f1) # Remove charset
    local filedesc=$(file -b &quot;$infile&quot;)

    log_msg &quot;-----------------------------------------------------&quot;
    log_msg &quot;START Processing: &#39;$infile&#39;&quot;
    log_msg &quot;INFO: MIME=&#39;$mimetype&#39;, Ext=&#39;$ext&#39;, Desc=&#39;$filedesc&#39;, OutFile=&#39;$outfile&#39;&quot;

    if [[ -f &quot;$outfile&quot; &amp;&amp; &quot;$outfile&quot; -nt &quot;$infile&quot; ]]; then
        log_msg &quot;SKIP: Output &#39;$outfile&#39; exists and is newer than &#39;$infile&#39;.&quot;
        return 0 # Indicate skipped
    fi

    case &quot;$mimetype&quot; in
        application/pdf)
            if $FORCE_OCR_ALL_EXISTING_PDFS; then
                log_msg &quot;INFO: PDF &#39;$infile&#39; - OCR FORCED.&quot;
                ocrmypdf --force-ocr &quot;$infile&quot; &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1
            elif ! has_text_layer &quot;$infile&quot;; then
                log_msg &quot;INFO: PDF &#39;$infile&#39; needs OCR (no text layer detected).&quot;
                ocrmypdf &quot;$infile&quot; &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 # Default: adds layer if missing
            else
                log_msg &quot;INFO: PDF &#39;$infile&#39; has text layer. Copying.&quot;
                cp &quot;$infile&quot; &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1
                if [[ $? -eq 0 ]]; then conversion_done=true; else log_msg &quot;ERROR: Failed to copy PDF &#39;$infile&#39;.&quot;; fi
            fi
            if [[ -f &quot;$outfile&quot; &amp;&amp; $? -eq 0 ]]; then # Check if ocrmypdf or cp succeeded
                log_msg &quot;OK: PDF &#39;$infile&#39; processed to &#39;$outfile&#39;.&quot;
                conversion_done=true
            elif [[ ! -f &quot;$outfile&quot; ]]; then # If ocrmypdf failed and didn&#39;t create outfile
                log_msg &quot;ERROR: Processing PDF &#39;$infile&#39; failed. Output file not created.&quot;
            fi
            ;;

        application/msword|application/vnd.ms-word*|\
        application/vnd.openxmlformats-officedocument.wordprocessingml.document|\
        application/vnd.oasis.opendocument.text*|application/rtf|\
        application/vnd.ms-excel*|application/vnd.openxmlformats-officedocument.spreadsheetml.sheet|\
        application/vnd.oasis.opendocument.spreadsheet*)
            log_msg &quot;INFO: Office document &#39;$infile&#39;. Converting with LibreOffice.&quot;
            # LibreOffice --convert-to pdf uses the input filename with .pdf extension in the --outdir
            local lo_expected_out_name=&quot;$out_subdir/$in_base.pdf&quot; # This should match $outfile
            libreoffice --headless --convert-to pdf &quot;$infile&quot; --outdir &quot;$out_subdir&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1
            if [[ -f &quot;$lo_expected_out_name&quot; ]]; then
                 # If $lo_expected_out_name is different from $outfile (e.g. due to sanitization or complex base name)
                 # This should not happen if $outfile is correctly constructed as $out_subdir/$in_base.pdf
                if [[ &quot;$lo_expected_out_name&quot; != &quot;$outfile&quot; ]]; then
                    log_msg &quot;WARN: LibreOffice output &#39;$lo_expected_out_name&#39; differs from expected &#39;$outfile&#39;. Moving.&quot;
                    mv &quot;$lo_expected_out_name&quot; &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1
                fi
                log_msg &quot;OK: &#39;$infile&#39; converted via LibreOffice to &#39;$outfile&#39;.&quot;
                conversion_done=true
            else
                log_msg &quot;ERROR: LibreOffice conversion FAILED for &#39;$infile&#39;. Output &#39;$lo_expected_out_name&#39; not found.&quot;
            fi
            ;;

        text/csv|text/tab-separated-values)
            log_msg &quot;INFO: CSV/TSV &#39;$infile&#39;. Converting with Pandoc.&quot;
            pandoc &quot;$infile&quot; -o &quot;$outfile&quot; --from=csv --toc --standalone &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; converted via Pandoc.&quot;; conversion_done=true; } \
                || log_msg &quot;ERROR: Pandoc (CSV) FAILED for &#39;$infile&#39;.&quot;
            ;;

        text/markdown)
            log_msg &quot;INFO: Markdown &#39;$infile&#39;. Converting with Pandoc.&quot;
            pandoc &quot;$infile&quot; -o &quot;$outfile&quot; --standalone &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; converted via Pandoc.&quot;; conversion_done=true; } \
                || log_msg &quot;ERROR: Pandoc (Markdown) FAILED for &#39;$infile&#39;.&quot;
            ;;
        
        application/json)
            log_msg &quot;INFO: JSON &#39;$infile&#39;. Attempting pretty-print with jq then Pandoc.&quot;
            local tmp_json_pretty=$(mktemp &quot;$out_subdir/json_pretty_XXXXXX.json&quot;)
            if jq . &quot;$infile&quot; &gt; &quot;$tmp_json_pretty&quot; 2&gt;/dev/null; then
                pandoc &quot;$tmp_json_pretty&quot; -o &quot;$outfile&quot; --standalone &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                    &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; (pretty JSON) converted via Pandoc.&quot;; conversion_done=true; } \
                    || { log_msg &quot;ERROR: Pandoc (pretty JSON) FAILED for &#39;$infile&#39;. Trying enscript.&quot;;
                         enscript &quot;$infile&quot; --font=Courier10 -p - -o - | ps2pdf - &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                            &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; (JSON) converted via enscript fallback.&quot;; conversion_done=true; } \
                            || log_msg &quot;ERROR: enscript fallback for JSON &#39;$infile&#39; FAILED.&quot;; }
            else
                log_msg &quot;WARN: jq failed for &#39;$infile&#39;. Trying Pandoc on raw, then enscript.&quot;
                pandoc &quot;$infile&quot; -o &quot;$outfile&quot; --standalone &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                    &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; (raw JSON) converted via Pandoc.&quot;; conversion_done=true; } \
                    || { log_msg &quot;ERROR: Pandoc (raw JSON) FAILED for &#39;$infile&#39;. Trying enscript.&quot;;
                         enscript &quot;$infile&quot; --font=Courier10 -p - -o - | ps2pdf - &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                            &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; (JSON) converted via enscript fallback.&quot;; conversion_done=true; } \
                            || log_msg &quot;ERROR: enscript fallback for JSON &#39;$infile&#39; FAILED.&quot;; }
            fi
            rm -f &quot;$tmp_json_pretty&quot;
            ;;

        image/png|image/jpeg|image/gif|image/bmp|image/tiff|image/webp)
            log_msg &quot;INFO: Image &#39;$infile&#39;.&quot;
            if $OCR_IMAGES_TO_PDF &amp;&amp; command -v ocrmypdf &amp;&gt; /dev/null; then
                log_msg &quot;Attempting OCR with ocrmypdf for image &#39;$infile&#39;.&quot;
                ocrmypdf &quot;$infile&quot; &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                    &amp;&amp; { log_msg &quot;OK: Image &#39;$infile&#39; OCR&#39;d via ocrmypdf to &#39;$outfile&#39;.&quot;; conversion_done=true; } \
                    || { log_msg &quot;ERROR: ocrmypdf FAILED for image &#39;$infile&#39;. Falling back to ImageMagick&#39;s convert.&quot;;
                         convert &quot;$infile&quot; &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                            &amp;&amp; { log_msg &quot;OK: Image &#39;$infile&#39; converted via ImageMagick (no OCR).&quot;; conversion_done=true; } \
                            || log_msg &quot;ERROR: ImageMagick&#39;s convert also FAILED for &#39;$infile&#39;.&quot;; }
            else
                log_msg &quot;Converting image &#39;$infile&#39; with ImageMagick&#39;s convert (no OCR).&quot;
                convert &quot;$infile&quot; &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                    &amp;&amp; { log_msg &quot;OK: Image &#39;$infile&#39; converted via ImageMagick.&quot;; conversion_done=true; } \
                    || log_msg &quot;ERROR: ImageMagick&#39;s convert FAILED for &#39;$infile&#39;.&quot;
            fi
            ;;

        application/x-tex|text/x-tex|application/x-latex)
            if [[ &quot;$ext&quot; == &quot;cls&quot; || &quot;$ext&quot; == &quot;sty&quot; ]]; then # LaTeX class/style files
                log_msg &quot;INFO: LaTeX Class/Style file &#39;$infile&#39;. Converting as syntax-highlighted text.&quot;
                pandoc &quot;$infile&quot; --standalone --highlight-style=kate -o &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                    &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; converted via Pandoc (as LaTeX source).&quot;; conversion_done=true; } \
                    || { log_msg &quot;ERROR: Pandoc (LaTeX source) FAILED for &#39;$infile&#39;. Trying enscript.&quot;;
                         enscript &quot;$infile&quot; --font=Courier10 --highlight=latex -p - -o - | ps2pdf - &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                            &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; converted via enscript (highlighted LaTeX).&quot;; conversion_done=true; } \
                            || log_msg &quot;ERROR: enscript (highlighted LaTeX) FAILED for &#39;$infile&#39;.&quot;; }
            else # Regular .tex files
                log_msg &quot;INFO: LaTeX document &#39;$infile&#39;. Compiling with pdflatex.&quot;
                local temp_tex_dir=$(mktemp -d &quot;$out_subdir/tex_compile_XXXXXX&quot;)
                cp &quot;$infile&quot; &quot;$temp_tex_dir/&quot; # Copy tex file to temp dir
                # If there are associated .bib files or images, they&#39;d need to be copied too or paths adjusted.
                # This simplified version assumes self-contained .tex or resolvable paths from temp_tex_dir.
                
                local tex_filename_only=$(basename &quot;$infile&quot;)
                (cd &quot;$temp_tex_dir&quot; &amp;&amp; \
                 pdflatex -interaction=nonstopmode &quot;$tex_filename_only&quot; &amp;&amp; \
                 pdflatex -interaction=nonstopmode &quot;$tex_filename_only&quot;) &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1
                
                local compiled_pdf_base=&quot;${tex_filename_only%.*}&quot;
                local compiled_pdf_path=&quot;$temp_tex_dir/$compiled_pdf_base.pdf&quot;

                if [[ -f &quot;$compiled_pdf_path&quot; ]]; then
                    mv &quot;$compiled_pdf_path&quot; &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                        &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; compiled via pdflatex to &#39;$outfile&#39;.&quot;; conversion_done=true; } \
                        || log_msg &quot;ERROR: pdflatex compiled &#39;$infile&#39;, but FAILED to move to &#39;$outfile&#39;.&quot;
                else
                    log_msg &quot;ERROR: pdflatex compilation FAILED for &#39;$infile&#39;. Output PDF not found in &#39;$temp_tex_dir&#39;.&quot;
                fi
                rm -rf &quot;$temp_tex_dir&quot;
            fi
            ;;
        
        application/x-bibtex|text/x-bibtex)
            log_msg &quot;INFO: BibTeX file &#39;$infile&#39;. Converting with Pandoc.&quot;
            pandoc &quot;$infile&quot; --standalone -o &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; converted via Pandoc.&quot;; conversion_done=true; } \
                || { log_msg &quot;ERROR: Pandoc (BibTeX) FAILED for &#39;$infile&#39;. Trying enscript.&quot;;
                     enscript &quot;$infile&quot; --font=Courier10 -p - -o - | ps2pdf - &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                        &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; (BibTeX) converted as plain text via enscript.&quot;; conversion_done=true; } \
                        || log_msg &quot;ERROR: enscript fallback for BibTeX &#39;$infile&#39; FAILED.&quot;; }
            ;;

        application/x-troff-man|text/troff) # Man pages
            log_msg &quot;INFO: Man page &#39;$infile&#39;. Converting with &#39;man&#39;.&quot;
            man -Tpdf &quot;$infile&quot; &gt; &quot;$outfile&quot; 2&gt;&gt; &quot;$LOG_FILE&quot; # man outputs errors to stderr
            if [[ $? -eq 0 &amp;&amp; -s &quot;$outfile&quot; ]]; then
                log_msg &quot;OK: &#39;$infile&#39; converted via &#39;man -Tpdf&#39;.&quot;
                conversion_done=true
            else
                log_msg &quot;WARN: &#39;man -Tpdf&#39; FAILED for &#39;$infile&#39;. Trying Pandoc.&quot;
                pandoc &quot;$infile&quot; --standalone -f man -t pdf -o &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                    &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; converted via Pandoc (man).&quot;; conversion_done=true; } \
                    || { log_msg &quot;ERROR: Pandoc (man) FAILED for &#39;$infile&#39;. Trying enscript.&quot;;
                         enscript &quot;$infile&quot; --font=Courier10 -p - -o - | ps2pdf - &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                            &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; (man page) converted as text via enscript.&quot;; conversion_done=true; } \
                            || log_msg &quot;ERROR: enscript fallback for man page &#39;$infile&#39; FAILED.&quot;; }
            fi
            ;;

        text/x-python|text/x-shellscript|application/x-perl|application/x-ruby|\
        text/x-csrc|text/x-chdr|text/x-c++src|text/x-java|text/html|text/css|application/javascript|application/xml|text/xml) # Code, XML, HTML
            log_msg &quot;INFO: Code/Markup file &#39;$infile&#39; ($mimetype). Converting with Pandoc (syntax highlighting).&quot;
            # Determine Pandoc format based on extension if possible for better highlighting
            local pandoc_format_opt=&quot;&quot;
            case &quot;$ext&quot; in
                py) pandoc_format_opt=&quot;python&quot; ;;
                sh|bash) pandoc_format_opt=&quot;bash&quot; ;;
                pl) pandoc_format_opt=&quot;perl&quot; ;;
                rb) pandoc_format_opt=&quot;ruby&quot; ;;
                c|h) pandoc_format_opt=&quot;c&quot; ;;
                cpp|hpp|cxx) pandoc_format_opt=&quot;cpp&quot; ;;
                java) pandoc_format_opt=&quot;java&quot; ;;
                html|htm) pandoc_format_opt=&quot;html&quot; ;;
                css) pandoc_format_opt=&quot;css&quot; ;;
                js) pandoc_format_opt=&quot;javascript&quot; ;;
                xml|bcf|run.xml) pandoc_format_opt=&quot;xml&quot; ;; # .bcf (Biber control file), .run.xml
            esac
            
            if [[ -n &quot;$pandoc_format_opt&quot; ]]; then
                pandoc &quot;$infile&quot; --from=&quot;$pandoc_format_opt&quot; --standalone --highlight-style=kate -o &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1
            else # Default to Pandoc auto-detection or plain text
                pandoc &quot;$infile&quot; --standalone --highlight-style=kate -o &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1
            fi

            if [[ $? -eq 0 &amp;&amp; -s &quot;$outfile&quot; ]]; then
                log_msg &quot;OK: &#39;$infile&#39; converted via Pandoc with highlighting.&quot;
                conversion_done=true
            else
                log_msg &quot;WARN: Pandoc with highlighting FAILED for &#39;$infile&#39;. Trying enscript.&quot;
                local enscript_hl_opt=&quot;&quot;
                [[ -n &quot;$ext&quot; ]] &amp;&amp; enscript_hl_opt=&quot;--highlight=$ext&quot;
                enscript &quot;$infile&quot; --font=Courier10 $enscript_hl_opt -p - -o - | ps2pdf - &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                    &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; converted via enscript.&quot;; conversion_done=true; } \
                    || log_msg &quot;ERROR: enscript fallback for &#39;$infile&#39; FAILED.&quot;
            fi
            ;;
        
        text/*) # Generic text files (.log, .txt, .bak, .aux, .synctex, .blg, .info, .lst, .conf etc.)
            log_msg &quot;INFO: Generic text file &#39;$infile&#39; ($mimetype, ext: .$ext). Converting with enscript.&quot;
            enscript &quot;$infile&quot; --font=Courier10 --word-wrap -p - -o - | ps2pdf - &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; converted via enscript.&quot;; conversion_done=true; } \
                || log_msg &quot;ERROR: enscript FAILED for &#39;$infile&#39;.&quot;
            ;;

        application/octet-stream|application/x-dosexec|application/x-sharedlib|\
        application/x-object|application/x-executable|application/x-sqlite3|inode/x-empty|\
        application/x-archive|application/zip|application/gzip|application/x-bzip2|application/x-xz)
            log_msg &quot;INFO: Binary/Archive/Empty/Unknown file &#39;$infile&#39; (MIME: $mimetype, Desc: $filedesc).&quot;
            if [[ &quot;$mimetype&quot; == &quot;inode/x-empty&quot; ]]; then
                create_metadata_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot; &quot;File is empty.&quot;
                conversion_done=true
            # Heuristic: if &#39;filedesc&#39; suggests text despite octet-stream, try enscript
            elif [[ &quot;$filedesc&quot; == *&quot;text&quot;* || &quot;$filedesc&quot; == *&quot;script&quot;* || &quot;$filedesc&quot; == *&quot;ASCII text&quot;* || &quot;$filedesc&quot; == *&quot;UTF-8 Unicode text&quot;* ]]; then
                log_msg &quot;INFO: MIME is &#39;$mimetype&#39;, but filedesc suggests text (&#39;$filedesc&#39;). Trying enscript.&quot;
                enscript &quot;$infile&quot; --font=Courier10 --word-wrap -p - -o - | ps2pdf - &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                    &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; converted via enscript (heuristic).&quot;; conversion_done=true; } \
                    || { log_msg &quot;ERROR: enscript (heuristic) FAILED for &#39;$infile&#39;. Using binary handling.&quot;;
                         if [[ &quot;$binary_handling_method&quot; == &quot;hex&quot; ]]; then create_hexdump_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot;;
                         elif [[ &quot;$binary_handling_method&quot; == &quot;strings&quot; ]]; then create_strings_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot;;
                         else create_metadata_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot; &quot;Binary or undetermined content type ($mimetype).&quot;; fi
                         conversion_done=true; # Placeholder PDF is a form of &quot;done&quot;
                       }
            else # Standard binary handling
                if [[ &quot;$binary_handling_method&quot; == &quot;hex&quot; ]]; then create_hexdump_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot;;
                elif [[ &quot;$binary_handling_method&quot; == &quot;strings&quot; ]]; then create_strings_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot;;
                else create_metadata_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot; &quot;Binary, archive, or undetermined content type ($mimetype).&quot;; fi
                conversion_done=true; # Placeholder PDF is a form of &quot;done&quot;
            fi
            ;;
        
        *) # Fallback for truly unrecognized/unhandled MIME types
            log_msg &quot;WARN: Unhandled MIME type &#39;$mimetype&#39; for &#39;$infile&#39;. File description: &#39;$filedesc&#39;.&quot;
            if [[ &quot;$filedesc&quot; == *&quot;text&quot;* || &quot;$filedesc&quot; == *&quot;script&quot;* || &quot;$filedesc&quot; == *&quot;ASCII text&quot;* || &quot;$filedesc&quot; == *&quot;UTF-8 Unicode text&quot;* ]]; then
                log_msg &quot;INFO: Unhandled MIME, but filedesc suggests text (&#39;$filedesc&#39;). Trying enscript.&quot;
                enscript &quot;$infile&quot; --font=Courier10 --word-wrap -p - -o - | ps2pdf - &quot;$outfile&quot; &gt;&gt; &quot;$LOG_FILE&quot; 2&gt;&amp;1 \
                    &amp;&amp; { log_msg &quot;OK: &#39;$infile&#39; converted via enscript (heuristic for unhandled MIME).&quot;; conversion_done=true; } \
                    || { log_msg &quot;ERROR: enscript (heuristic for unhandled MIME) FAILED for &#39;$infile&#39;. Using binary handling.&quot;;
                         if [[ &quot;$binary_handling_method&quot; == &quot;hex&quot; ]]; then create_hexdump_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot;;
                         elif [[ &quot;$binary_handling_method&quot; == &quot;strings&quot; ]]; then create_strings_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot;;
                         else create_metadata_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot; &quot;Unhandled MIME type ($mimetype) and not clearly text.&quot;; fi
                         conversion_done=true;
                       }
            else
                log_msg &quot;INFO: Unhandled MIME type &#39;$mimetype&#39; for &#39;$infile&#39;. Using configured binary handling.&quot;
                if [[ &quot;$binary_handling_method&quot; == &quot;hex&quot; ]]; then create_hexdump_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot;;
                elif [[ &quot;$binary_handling_method&quot; == &quot;strings&quot; ]]; then create_strings_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot;;
                else create_metadata_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot; &quot;Unhandled MIME type ($mimetype).&quot;; fi
                conversion_done=true;
            fi
            ;;
    esac

    if ! $conversion_done &amp;&amp; [[ ! -f &quot;$outfile&quot; ]]; then
        log_msg &quot;FALLBACK: No conversion method succeeded and no output file created for &#39;$infile&#39;. Creating placeholder.&quot;
        create_metadata_pdf &quot;$infile&quot; &quot;$outfile&quot; &quot;$mimetype&quot; &quot;$filedesc&quot; &quot;No applicable conversion rule or all attempts failed.&quot;
    elif ! $conversion_done &amp;&amp; [[ -f &quot;$outfile&quot; ]]; then
        log_msg &quot;WARN: Conversion logic did not explicitly set &#39;done&#39; flag, but output file &#39;$outfile&#39; exists. Assuming prior step handled it.&quot;
    fi
    log_msg &quot;END Processing: &#39;$infile&#39;&quot;
    [[ -f &quot;$outfile&quot; ]] &amp;&amp; return 0 || return 1 # Return 0 if output exists, 1 otherwise
}

# --- Script Main Logic ---

# Argument Parsing
if [[ &quot;$#&quot; -lt 1 || &quot;$#&quot; -gt 4 ]]; then
    echo &quot;Usage: $0 &lt;listfile.txt&gt; [common_prefix_to_strip] [binary_handling: metadata|hex|strings] [force_ocr_all_pdfs: true|false]&quot;
    echo &quot;Example: $0 myfiles.txt \&quot;/mnt/mydata\&quot; hex true&quot;
    exit 1
fi

INPUT_LIST_FILE=&quot;$1&quot;
[[ -n &quot;$2&quot; ]] &amp;&amp; COMMON_PREFIX_TO_STRIP=&quot;$2&quot;
[[ -n &quot;$3&quot; ]] &amp;&amp; BINARY_HANDLING_USER_CHOICE=&quot;$3&quot; || BINARY_HANDLING_USER_CHOICE=&quot;$DEFAULT_BINARY_HANDLING&quot;
[[ -n &quot;$4&quot; ]] &amp;&amp; FORCE_OCR_ALL_PDFS_USER_CHOICE=&quot;$4&quot;

# Validate binary handling choice
case &quot;$BINARY_HANDLING_USER_CHOICE&quot; in
    metadata|hex|strings) BINARY_HANDLING=&quot;$BINARY_HANDLING_USER_CHOICE&quot; ;;
    *) log_msg &quot;WARN: Invalid binary_handling option &#39;$BINARY_HANDLING_USER_CHOICE&#39;. Defaulting to &#39;$DEFAULT_BINARY_HANDLING&#39;.&quot;; BINARY_HANDLING=&quot;$DEFAULT_BINARY_HANDLING&quot; ;;
esac

# Validate force OCR choice
if [[ -n &quot;$FORCE_OCR_ALL_PDFS_USER_CHOICE&quot; ]]; then
    if [[ &quot;$FORCE_OCR_ALL_PDFS_USER_CHOICE&quot; == &quot;true&quot; ]]; then
        FORCE_OCR_ALL_EXISTING_PDFS=true
    elif [[ &quot;$FORCE_OCR_ALL_PDFS_USER_CHOICE&quot; == &quot;false&quot; ]]; then
        FORCE_OCR_ALL_EXISTING_PDFS=false
    else
        log_msg &quot;WARN: Invalid force_ocr_all_pdfs option &#39;$FORCE_OCR_ALL_PDFS_USER_CHOICE&#39;. Using default ($FORCE_OCR_ALL_EXISTING_PDFS).&quot;
    fi
fi

# Initialize Log File
echo &quot;Conversion process started at $(date)&quot; &gt; &quot;$LOG_FILE&quot;
log_msg &quot;INFO: Input List File: &#39;$INPUT_LIST_FILE&#39;&quot;
log_msg &quot;INFO: Common Prefix to Strip: &#39;$COMMON_PREFIX_TO_STRIP&#39;&quot;
log_msg &quot;INFO: Binary File Handling: &#39;$BINARY_HANDLING&#39;&quot;
log_msg &quot;INFO: Force OCR All Existing PDFs: $FORCE_OCR_ALL_EXISTING_PDFS&quot;
log_msg &quot;INFO: OCR Images to PDF: $OCR_IMAGES_TO_PDF&quot;
log_msg &quot;INFO: Output Base Directory: &#39;$OUTPUT_DIR_BASE&#39;&quot;

check_commands # Check for essential tools

# Prepare clean file list (robust URL decoding)
CLEANED_LIST_FOR_PROCESSING_INTERNAL=&quot;cleaned_input_list_internal.tmp&quot;
log_msg &quot;INFO: Preparing clean file list from &#39;$INPUT_LIST_FILE&#39;...&quot;
if python3 -c &#39;import sys, urllib.parse; [print(urllib.parse.unquote(line.strip())) for line in sys.stdin if line.strip()]&#39; &lt; &quot;$INPUT_LIST_FILE&quot; &gt; &quot;$CLEANED_LIST_FOR_PROCESSING_INTERNAL&quot;; then
    log_msg &quot;INFO: Clean file list created successfully using Python.&quot;
else
    log_msg &quot;WARN: Python URL decoding failed (Python 3 not found or error). Using original list (may have issues with URL-encoded names).&quot;
    cp &quot;$INPUT_LIST_FILE&quot; &quot;$CLEANED_LIST_FOR_PROCESSING_INTERNAL&quot; # Fallback
fi

# Create output base directory
mkdir -p &quot;$OUTPUT_DIR_BASE&quot;
log_msg &quot;INFO: Ensured output base directory &#39;$OUTPUT_DIR_BASE&#39; exists.&quot;

# Process the list
total_files=0
successful_conversions=0
failed_conversions=0
skipped_up_to_date=0

while IFS= read -r file_to_process || [[ -n &quot;$file_to_process&quot; ]]; do
    # Skip empty or comment lines from the (cleaned) list
    [[ -z &quot;$file_to_process&quot; || &quot;$file_to_process&quot; =~ ^# ]] &amp;&amp; continue

    total_files=$((total_files + 1))
    if [[ ! -e &quot;$file_to_process&quot; ]]; then # Use -e to check if path exists (file or dir)
        log_msg &quot;ERROR: File or directory &#39;$file_to_process&#39; from list NOT FOUND. Skipping.&quot;
        failed_conversions=$((failed_conversions + 1))
        continue
    fi
    if [[ -d &quot;$file_to_process&quot; ]]; then
        log_msg &quot;SKIP: Path &#39;$file_to_process&#39; is a DIRECTORY. Skipping.&quot;
        # Consider if directories should be counted as skipped or failed. For now, just log.
        continue
    fi
     if [[ ! -f &quot;$file_to_process&quot; ]]; then
        log_msg &quot;SKIP: Path &#39;$file_to_process&#39; is NOT A REGULAR FILE. Skipping.&quot;
        continue
    fi
    if [[ ! -r &quot;$file_to_process&quot; ]]; then
        log_msg &quot;ERROR: File &#39;$file_to_process&#39; is NOT READABLE. Skipping.&quot;
        failed_conversions=$((failed_conversions + 1))
        continue
    fi

    # The up-to-date check is now inside convert_file, which returns 0 for success/skipped-up-to-date
    convert_file &quot;$file_to_process&quot; &quot;$BINARY_HANDLING&quot;
    status=$?
    
    # Crude status check based on return value (0 for success/skipped, 1 for failure)
    # A more refined check would involve parsing the log for &quot;SKIP&quot; vs &quot;OK&quot;
    if [[ $status -eq 0 ]]; then
        # This counts files where an output PDF was created OR skipped because it was up-to-date.
        # To differentiate, we&#39;d need more complex return codes or log parsing.
        # For now, if convert_file returns 0, it means no critical error in its own execution.
        # The actual &quot;success&quot; of conversion is in the log.
        : # Not incrementing success here, summary is tricky.
    else
        failed_conversions=$((failed_conversions + 1))
    fi
done &lt; &quot;$CLEANED_LIST_FOR_PROCESSING_INTERNAL&quot;

rm -f &quot;$CLEANED_LIST_FOR_PROCESSING_INTERNAL&quot; # Clean up temp list

# Final Summary (approximated from log counts for more detail)
successful_ops=$(grep -cE &quot;^[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2} - OK:&quot; &quot;$LOG_FILE&quot;)
error_ops=$(grep -cE &quot;^[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2} - ERROR:&quot; &quot;$LOG_FILE&quot;)
skipped_ops=$(grep -cE &quot;^[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2} - SKIP:&quot; &quot;$LOG_FILE&quot;) # Includes up-to-date and non-file skips

log_msg &quot;-----------------------------------------------------&quot;
log_msg &quot;Conversion process completed at $(date)&quot;
log_msg &quot;SUMMARY: Total items from list processed: $total_files&quot;
log_msg &quot;SUMMARY: Successful operations (OK): $successful_ops&quot;
log_msg &quot;SUMMARY: Errored operations (ERROR): $error_ops&quot;
log_msg &quot;SUMMARY: Skipped operations (SKIP/NOT FOUND/DIR): $skipped_ops (includes up-to-date, not found, directories)&quot;
log_msg &quot;INFO: Detailed log written to &#39;$LOG_FILE&#39;&quot;
log_msg &quot;INFO: Output PDFs are in subdirectories under &#39;$OUTPUT_DIR_BASE&#39;&quot;

echo &quot;Conversion complete. Log: $LOG_FILE. Output in $OUTPUT_DIR_BASE.&quot;</code>
</section>]]></content><author><name></name></author><category term="scratchpad" /></entry><entry><title type="html">Disable Tracker processes on linux</title><link href="https://ib.bsb.br/disable-tracker-processes-on-linux/" rel="alternate" type="text/html" title="Disable Tracker processes on linux" /><published>2025-06-02T00:00:00+00:00</published><updated>2025-06-02T14:57:03+00:00</updated><id>https://ib.bsb.br/disable-tracker-processes-on-linux</id><content type="html" xml:base="https://ib.bsb.br/disable-tracker-processes-on-linux/"><![CDATA[<section class="code-block-container" role="group" aria-label="Bash Code Block" data-filename="bash_code_block.sh" data-code="#!/bin/bash
set -euo pipefail
# -----------------------------------------------------------------------------
# Script Name: disable_tracker.sh
# Purpose   : Disable Tracker processes on Debian 11 (Bullseye) for ARM64 RK3588
#	      This script appends &quot;Hidden=true&quot; to tracker-related autostart files,
#	      updates Tracker settings via gsettings to disable file crawling and
#	      monitoring, and resets the Tracker database.
#
# WARNING   : This operation modifies system autostart files and resets the Tracker
#	      database. If you rely on Tracker for desktop search or metadata indexing,
#	      this action will disable those functions. It is recommended you backup any
#	      critical data/configuration before proceeding.
#
# Usage	    : Run this script from your home directory. You must have sudo privileges.
# -----------------------------------------------------------------------------

# Prompt for explicit user confirmation before proceeding.
read -r -p &quot;WARNING: This will disable Tracker processes by modifying system autostart files and resetting the Tracker database. This may affect desktop search functionality. Do you want to continue? (yes/NO): &quot; confirmation
if [[ &quot;$confirmation&quot; != &quot;yes&quot; ]]; then
    echo &quot;Operation cancelled by user.&quot; &gt;&amp;2
    exit 1
fi

# Define an array of Tracker autostart file paths.
autostart_files=(
    &quot;/etc/xdg/autostart/tracker-extract.desktop&quot;
    &quot;/etc/xdg/autostart/tracker-miner-apps.desktop&quot;
    &quot;/etc/xdg/autostart/tracker-miner-fs.desktop&quot;
    &quot;/etc/xdg/autostart/tracker-miner-user-guides.desktop&quot;
    &quot;/etc/xdg/autostart/tracker-store.desktop&quot;
)

echo &quot;Starting Tracker disabling procedure...&quot;

# Iterate over each autostart file and append &quot;Hidden=true&quot; if not already set.
for file in &quot;${autostart_files[@]}&quot;; do
    echo &quot;Processing file: ${file}&quot;
    if [[ -f &quot;$file&quot; ]]; then
	if grep -q -E &#39;^[[:space:]]*Hidden=true&#39; &quot;$file&quot;; then
	    echo &quot;-&gt; &#39;Hidden=true&#39; already present in ${file}. Skipping.&quot;
	else
	    echo -e &quot;\nHidden=true\n&quot; | sudo tee --append &quot;$file&quot; &gt; /dev/null || {
		echo &quot;Error: Failed to modify ${file}.&quot; &gt;&amp;2
		exit 1
	    }
	    echo &quot;-&gt; Appended &#39;Hidden=true&#39; to ${file}.&quot;
	fi
    else
	echo &quot;-&gt; Warning: File ${file} does not exist. Skipping.&quot;
    fi
done

# Update Tracker settings using gsettings.
echo &quot;Disabling Tracker file crawling...&quot;
if ! gsettings set org.freedesktop.Tracker.Miner.Files crawling-interval -2; then
    echo &quot;Error: Failed to set crawling-interval to -2 via gsettings.&quot; &gt;&amp;2
    exit 1
fi
echo &quot;-&gt; Set crawling-interval to -2.&quot;

echo &quot;Disabling Tracker file monitors...&quot;
if ! gsettings set org.freedesktop.Tracker.Miner.Files enable-monitors false; then
    echo &quot;Error: Failed to disable file monitors via gsettings.&quot; &gt;&amp;2
    exit 1
fi
echo &quot;-&gt; File monitors disabled.&quot;

# Reset the Tracker database.
reset_cmd=&quot;&quot;
if command -v tracker3 &gt;/dev/null 2&gt;&amp;1; then
    reset_cmd=&quot;tracker3 reset --filesystem --rss&quot;
elif command -v tracker &gt;/dev/null 2&gt;&amp;1; then
    reset_cmd=&quot;tracker reset --hard&quot;
else
    echo &quot;Warning: Neither &#39;tracker3&#39; nor &#39;tracker&#39; is available. Skipping Tracker database reset.&quot; &gt;&amp;2
fi

if [[ -n &quot;${reset_cmd}&quot; ]]; then
    echo &quot;Resetting Tracker database with: ${reset_cmd}&quot;
    if ! ${reset_cmd}; then
	echo &quot;Error: Failed to reset Tracker database.&quot; &gt;&amp;2
	exit 1
    fi
    echo &quot;-&gt; Tracker database has been reset.&quot;
fi

echo &quot;Tracker disabling procedure completed successfully.&quot;
exit 0" data-download-link="" data-download-label="Download Bash">
  <code class="language-bash">#!/bin/bash
set -euo pipefail
# -----------------------------------------------------------------------------
# Script Name: disable_tracker.sh
# Purpose   : Disable Tracker processes on Debian 11 (Bullseye) for ARM64 RK3588
#	      This script appends &quot;Hidden=true&quot; to tracker-related autostart files,
#	      updates Tracker settings via gsettings to disable file crawling and
#	      monitoring, and resets the Tracker database.
#
# WARNING   : This operation modifies system autostart files and resets the Tracker
#	      database. If you rely on Tracker for desktop search or metadata indexing,
#	      this action will disable those functions. It is recommended you backup any
#	      critical data/configuration before proceeding.
#
# Usage	    : Run this script from your home directory. You must have sudo privileges.
# -----------------------------------------------------------------------------

# Prompt for explicit user confirmation before proceeding.
read -r -p &quot;WARNING: This will disable Tracker processes by modifying system autostart files and resetting the Tracker database. This may affect desktop search functionality. Do you want to continue? (yes/NO): &quot; confirmation
if [[ &quot;$confirmation&quot; != &quot;yes&quot; ]]; then
    echo &quot;Operation cancelled by user.&quot; &gt;&amp;2
    exit 1
fi

# Define an array of Tracker autostart file paths.
autostart_files=(
    &quot;/etc/xdg/autostart/tracker-extract.desktop&quot;
    &quot;/etc/xdg/autostart/tracker-miner-apps.desktop&quot;
    &quot;/etc/xdg/autostart/tracker-miner-fs.desktop&quot;
    &quot;/etc/xdg/autostart/tracker-miner-user-guides.desktop&quot;
    &quot;/etc/xdg/autostart/tracker-store.desktop&quot;
)

echo &quot;Starting Tracker disabling procedure...&quot;

# Iterate over each autostart file and append &quot;Hidden=true&quot; if not already set.
for file in &quot;${autostart_files[@]}&quot;; do
    echo &quot;Processing file: ${file}&quot;
    if [[ -f &quot;$file&quot; ]]; then
	if grep -q -E &#39;^[[:space:]]*Hidden=true&#39; &quot;$file&quot;; then
	    echo &quot;-&gt; &#39;Hidden=true&#39; already present in ${file}. Skipping.&quot;
	else
	    echo -e &quot;\nHidden=true\n&quot; | sudo tee --append &quot;$file&quot; &gt; /dev/null || {
		echo &quot;Error: Failed to modify ${file}.&quot; &gt;&amp;2
		exit 1
	    }
	    echo &quot;-&gt; Appended &#39;Hidden=true&#39; to ${file}.&quot;
	fi
    else
	echo &quot;-&gt; Warning: File ${file} does not exist. Skipping.&quot;
    fi
done

# Update Tracker settings using gsettings.
echo &quot;Disabling Tracker file crawling...&quot;
if ! gsettings set org.freedesktop.Tracker.Miner.Files crawling-interval -2; then
    echo &quot;Error: Failed to set crawling-interval to -2 via gsettings.&quot; &gt;&amp;2
    exit 1
fi
echo &quot;-&gt; Set crawling-interval to -2.&quot;

echo &quot;Disabling Tracker file monitors...&quot;
if ! gsettings set org.freedesktop.Tracker.Miner.Files enable-monitors false; then
    echo &quot;Error: Failed to disable file monitors via gsettings.&quot; &gt;&amp;2
    exit 1
fi
echo &quot;-&gt; File monitors disabled.&quot;

# Reset the Tracker database.
reset_cmd=&quot;&quot;
if command -v tracker3 &gt;/dev/null 2&gt;&amp;1; then
    reset_cmd=&quot;tracker3 reset --filesystem --rss&quot;
elif command -v tracker &gt;/dev/null 2&gt;&amp;1; then
    reset_cmd=&quot;tracker reset --hard&quot;
else
    echo &quot;Warning: Neither &#39;tracker3&#39; nor &#39;tracker&#39; is available. Skipping Tracker database reset.&quot; &gt;&amp;2
fi

if [[ -n &quot;${reset_cmd}&quot; ]]; then
    echo &quot;Resetting Tracker database with: ${reset_cmd}&quot;
    if ! ${reset_cmd}; then
	echo &quot;Error: Failed to reset Tracker database.&quot; &gt;&amp;2
	exit 1
    fi
    echo &quot;-&gt; Tracker database has been reset.&quot;
fi

echo &quot;Tracker disabling procedure completed successfully.&quot;
exit 0</code>
</section>]]></content><author><name></name></author><category term="scratchpad" /></entry><entry><title type="html">bash script to leverage the `fclones` rust tool for dedup directories</title><link href="https://ib.bsb.br/bash-script-to-leverage-the-fclones-rust-tool-for-dedup-directories/" rel="alternate" type="text/html" title="bash script to leverage the `fclones` rust tool for dedup directories" /><published>2025-05-29T00:00:00+00:00</published><updated>2025-05-29T08:31:30+00:00</updated><id>https://ib.bsb.br/bash-script-to-leverage-the-fclones-rust-tool-for-dedup-directories</id><content type="html" xml:base="https://ib.bsb.br/bash-script-to-leverage-the-fclones-rust-tool-for-dedup-directories/"><![CDATA[<section class="code-block-container" role="group" aria-label="Bash Code Block" data-filename="bash_code_block.sh" data-code="#!/bin/bash
set -euo pipefail

# Script to install fclones and use it to remove duplicate files from a specified directory.
# This script will:
# 1. Ensure necessary build tools (including for xattr) and Rust/Cargo are installed.
# 2. Install fclones using &#39;cargo install&#39;.
# 3. Add ~/.cargo/bin to the PATH for the current session and .bashrc for future sessions.
# 4. Set up Bash completions for fclones.
# 5. Run fclones to group and remove duplicate files from the target directory,
#    keeping only unique files and the first encountered copy of duplicates, after user confirmation.
#
# Target Environment: Debian 11 (Bullseye) on ARM64 RK3588
# Tutorial Name: Leveraging `fclones` to remove each and every duplicated file, so, keeping only the uniques and the first copy of the duplicates, from the location named `/home/linaro/Downloads` recursively, with depth 10, on my debian bullseye arm64 rk3588 machine.

# --- Configuration Variables ---
# The tutorial specifies /home/linaro/Downloads.
# This script uses /home/linaro/Downloads for better portability if the username is not &#39;linaro&#39;,
# assuming the script is run by the intended user.
# If you strictly need /home/linaro/Downloads and your username is different, adjust this.
FCLONES_TARGET_DIR=&quot;/home/linaro/Downloads&quot;
FCLONES_DEPTH=&quot;10&quot;

CARGO_BIN_DIR=&quot;$HOME/.cargo/bin&quot;
RUSTUP_INIT_SCRIPT_FILENAME=&quot;rustup-init.sh&quot; # Just the filename
BASHRC_FILE=&quot;$HOME/.bashrc&quot;
TEMP_DOWNLOAD_DIR=&quot;&quot; # Used for rustup-init.sh download, set by mktemp
APT_UPDATED_FLAG=&quot;&quot;  # Flag to ensure apt update runs only once

# --- Helper Functions ---

# Function to clean up temporary files on script exit or interruption
cleanup_temp_files() {
    echo &quot;Cleaning up temporary files (if any)...&quot;
    if [ -n &quot;$TEMP_DOWNLOAD_DIR&quot; ] &amp;&amp; [ -d &quot;$TEMP_DOWNLOAD_DIR&quot; ]; then
        # shellcheck disable=SC2115 # Known issue with variable in rm -rf, path is controlled by mktemp
        rm -rf &quot;$TEMP_DOWNLOAD_DIR&quot;
        echo &quot;Removed temporary directory: $TEMP_DOWNLOAD_DIR&quot;
    fi
}
# Setup trap for cleanup
trap cleanup_temp_files EXIT SIGINT SIGTERM

# Function to ensure a tool is installed via apt
ensure_tool_installed() {
    local tool_name=&quot;$1&quot;
    local package_name=&quot;${2:-$tool_name}&quot; # Use second arg as package name if provided, else tool_name
    
    # Check if the command is available first, as some tools might be installed manually
    # or come from packages with different names than the command itself.
    # If checking for a library&#39;s dev package, tool_name might be the lib name (e.g. libattr1-dev)
    # and dpkg -s is more reliable.
    if ! dpkg -s &quot;$package_name&quot; &gt;/dev/null 2&gt;&amp;1; then
        echo &quot;Package &#39;$package_name&#39; (for tool/library &#39;$tool_name&#39;) not found. Installing...&quot;
        # Run apt update once before first install attempt if not already done
        if [ -z &quot;$APT_UPDATED_FLAG&quot; ]; then
            echo &quot;Updating package lists (first time for this script run)...&quot;
            if ! sudo apt update; then
                echo &quot;Error: Failed to update package lists.&quot; &gt;&amp;2
                exit 1
            fi
            APT_UPDATED_FLAG=&quot;true&quot; # Set the flag
            echo &quot;Package lists updated successfully.&quot;
        fi

        if ! sudo apt install -y &quot;$package_name&quot;; then
            echo &quot;Error: Failed to install &#39;$package_name&#39;.&quot; &gt;&amp;2
            exit 1
        fi
        echo &quot;Package &#39;$package_name&#39; installed successfully.&quot;
    else
        echo &quot;Package &#39;$package_name&#39; (for tool/library &#39;$tool_name&#39;) is already installed.&quot;
    fi
}

# Function to ensure Rust and Cargo are installed via rustup
ensure_rust_installed() {
    if command -v cargo &gt;/dev/null 2&gt;&amp;1; then
        echo &quot;Rust and Cargo are already installed and accessible via PATH.&quot;
        # Source cargo environment in case it&#39;s installed but not in current session&#39;s PATH yet
        if [ -f &quot;$HOME/.cargo/env&quot; ]; then
            # shellcheck source=/dev/null
            source &quot;$HOME/.cargo/env&quot;
        fi
        return # Skip rustup installation
    fi

    echo &quot;Rust and Cargo not found in PATH. Installing via rustup...&quot;
    TEMP_DOWNLOAD_DIR=$(mktemp -d) # Create a temporary directory for the script
    local rustup_script_full_path=&quot;${TEMP_DOWNLOAD_DIR}/${RUSTUP_INIT_SCRIPT_FILENAME}&quot;

    echo &quot;Downloading Rust installation script to ${rustup_script_full_path}...&quot;
    if ! curl --proto &#39;=https&#39; --tlsv1.2 -sSf https://sh.rustup.rs -o &quot;${rustup_script_full_path}&quot;; then
        echo &quot;Error: Failed to download Rust installation script.&quot; &gt;&amp;2
        # TEMP_DOWNLOAD_DIR will be cleaned by the trap
        exit 1
    fi
    
    echo &quot;Running Rust installation script (rustup-init.sh)...&quot;
    # Run rustup-init.sh non-interactively:
    # -y: auto-accepts prompts.
    # --default-toolchain stable: ensures a stable version.
    # --no-modify-path: prevents rustup from modifying shell rc files directly; we handle PATH explicitly.
    if ! sh &quot;${rustup_script_full_path}&quot; -y --default-toolchain stable --no-modify-path; then
        echo &quot;Error: Rust installation failed.&quot; &gt;&amp;2
        # TEMP_DOWNLOAD_DIR will be cleaned by the trap
        exit 1
    fi
    
    # TEMP_DOWNLOAD_DIR (and script within) will be cleaned by the trap
    echo &quot;Rust and Cargo installed successfully via rustup.&quot;
    
    # Source cargo environment for the current script session
    if [ -f &quot;$HOME/.cargo/env&quot; ]; then
        # shellcheck source=/dev/null
        source &quot;$HOME/.cargo/env&quot;
        echo &quot;Sourced Cargo environment for the current session.&quot;
    else
        echo &quot;Warning: Could not source $HOME/.cargo/env. Cargo might not be in PATH for this session.&quot;
    fi
}

# Function to add a directory to PATH for current session and persist in .bashrc
add_to_path_if_not_present() {
    local dir_to_add=&quot;$1&quot;
    local rc_file=&quot;$2&quot;
    
    # For current session
    if [[ &quot;:$PATH:&quot; != *&quot;:${dir_to_add}:&quot;* ]]; then
        echo &quot;Adding ${dir_to_add} to PATH for current session...&quot;
        export PATH=&quot;${dir_to_add}:$PATH&quot;
    else
        echo &quot;${dir_to_add} is already in PATH for current session.&quot;
    fi

    # For future sessions (idempotent check)
    if ! grep -qF --fixed-strings &quot;export PATH=\&quot;${dir_to_add}:\$PATH\&quot;&quot; &quot;$rc_file&quot; &amp;&amp; \
       ! grep -qF --fixed-strings &quot;export PATH=\\\&quot;${dir_to_add}:\\\$PATH\\\&quot;&quot; &quot;$rc_file&quot;; then # Check for escaped version too
        echo &quot;Adding ${dir_to_add} to PATH in ${rc_file} for future sessions...&quot;
        # Create .bashrc if it doesn&#39;t exist
        touch &quot;$rc_file&quot;
        # Add a comment and the export line
        echo -e &quot;\n# Add ${dir_to_add} to PATH (added by fclones script)\nexport PATH=\&quot;${dir_to_add}:\$PATH\&quot;&quot; &gt;&gt; &quot;$rc_file&quot;
        echo &quot;Please source ${rc_file} or open a new terminal for changes to take full effect in other shells.&quot;
    else
        echo &quot;${dir_to_add} is already configured in ${rc_file}.&quot;
    fi
}

# --- Main Script ---
echo &quot;Starting fclones installation and usage script...&quot;
echo &quot;Target directory for fclones: ${FCLONES_TARGET_DIR}&quot;
echo &quot;Recursion depth: ${FCLONES_DEPTH}&quot;
echo &quot;---&quot;

# Step 1: Install prerequisite system packages
echo &quot;Ensuring prerequisite system packages are installed...&quot;
ensure_tool_installed &quot;curl&quot;
ensure_tool_installed &quot;build-essential&quot; # For Rust compilation
ensure_tool_installed &quot;pkg-config&quot;      # Often needed by Rust crates with C dependencies
ensure_tool_installed &quot;libssl-dev&quot;      # For crates needing OpenSSL
ensure_tool_installed &quot;git&quot;             # Cargo might need git for some dependencies
ensure_tool_installed &quot;libattr1-dev&quot;    # For xattr support in fclones
echo &quot;System prerequisite check completed.&quot;
echo &quot;---&quot;

# Step 2: Install Rust and Cargo
ensure_rust_installed
echo &quot;---&quot;

# Step 3: Add Cargo&#39;s bin directory to PATH (current session and .bashrc)
add_to_path_if_not_present &quot;${CARGO_BIN_DIR}&quot; &quot;${BASHRC_FILE}&quot;
echo &quot;---&quot;

# Step 4: Install fclones using Cargo
echo &quot;Installing fclones using Cargo...&quot;
if ! command -v cargo &gt;/dev/null 2&gt;&amp;1; then
    echo &quot;Error: cargo command not found even after setup. Installation cannot proceed.&quot; &gt;&amp;2
    echo &quot;Please ensure Rust is correctly installed and $CARGO_BIN_DIR is in your PATH.&quot; &gt;&amp;2
    exit 1
fi
if ! cargo install fclones; then
    echo &quot;Error: Failed to install fclones using Cargo.&quot; &gt;&amp;2
    exit 1
fi
echo &quot;fclones installed successfully via Cargo.&quot;
# Verify fclones is now in PATH
if ! command -v fclones &gt;/dev/null 2&gt;&amp;1; then
    echo &quot;Error: fclones installed but not found in PATH. This is unexpected.&quot; &gt;&amp;2
    echo &quot;Please check your PATH and $CARGO_BIN_DIR.&quot; &gt;&amp;2
    exit 1
fi
fclones --version
echo &quot;---&quot;

# Step 5: Set up Bash completions for fclones
echo &quot;Setting up Bash completions for fclones...&quot;
if ! grep -qF &#39;eval &quot;$(fclones complete bash)&quot;&#39; &quot;${BASHRC_FILE}&quot;; then
    echo -e &#39;\n# fclones bash completion (added by fclones script)\neval &quot;$(fclones complete bash)&quot;&#39; &gt;&gt; &quot;${BASHRC_FILE}&quot;
    echo &quot;Bash completions for fclones added to ${BASHRC_FILE}.&quot;
    echo &quot;Completions will be available in new shell sessions, or after sourcing ${BASHRC_FILE}.&quot;
else
    echo &quot;Bash completions for fclones already set up in ${BASHRC_FILE}.&quot;
fi
# Enable for current session
eval &quot;$(fclones complete bash)&quot;
echo &quot;Bash completions for fclones enabled for the current session.&quot;
echo &quot;---&quot;

# Step 6: Check if target directory exists
echo &quot;Checking target directory: ${FCLONES_TARGET_DIR}...&quot;
if [ ! -d &quot;${FCLONES_TARGET_DIR}&quot; ]; then
    echo &quot;Warning: Target directory ${FCLONES_TARGET_DIR} does not exist.&quot;
    echo &quot;fclones might not find any files to process. You may want to create it first.&quot;
    # Example of how to offer creation, commented out by default:
    # read -r -p &quot;Create directory ${FCLONES_TARGET_DIR} now? (yes/NO): &quot; create_dir_confirm
    # if [[ &quot;$create_dir_confirm&quot; == &quot;yes&quot; ]]; then
    #    if ! mkdir -p &quot;${FCLONES_TARGET_DIR}&quot;; then
    #       echo &quot;Error: Failed to create directory ${FCLONES_TARGET_DIR}.&quot; &gt;&amp;2; exit 1;
    #    fi
    #    echo &quot;Directory ${FCLONES_TARGET_DIR} created.&quot;
    # else
    #    echo &quot;Proceeding without creating the directory. fclones may find no files.&quot;
    # fi
fi
echo &quot;---&quot;

# Step 7: Execute fclones to remove duplicates
echo &quot;Preparing to remove duplicate files from ${FCLONES_TARGET_DIR} (recursive depth ${FCLONES_DEPTH}).&quot;
echo &quot;This operation will keep only unique files and the first encountered copy of any duplicates.&quot;
echo &quot;&quot;
# Explicit confirmation for the remove operation
read -r -p &quot;WARNING: This will PERMANENTLY REMOVE duplicate files from &#39;${FCLONES_TARGET_DIR}&#39;. This action is IRREVERSIBLE. Are you absolutely sure you want to continue? (Type &#39;YES&#39; to proceed): &quot; confirmation
if [[ &quot;$confirmation&quot; != &quot;YES&quot; ]]; then
    echo &quot;Operation cancelled by user. No files will be removed.&quot; &gt;&amp;2
    exit 1
fi

echo &quot;&quot;
echo &quot;Proceeding with fclones operation...&quot;
# fclones should be in PATH now
echo &quot;Running: fclones group \&quot;${FCLONES_TARGET_DIR}\&quot; --depth \&quot;${FCLONES_DEPTH}\&quot; | fclones remove&quot;
if ! fclones group &quot;${FCLONES_TARGET_DIR}&quot; --depth &quot;${FCLONES_DEPTH}&quot; | fclones remove; then
    echo &quot;Error: fclones command execution failed. fclones may have printed more specific errors above.&quot; &gt;&amp;2
    exit 1
fi
echo &quot;fclones operation completed successfully.&quot;
echo &quot;---&quot;

echo &quot;Script finished.&quot;
# Trap will handle cleanup of TEMP_DOWNLOAD_DIR
exit 0" data-download-link="" data-download-label="Download Bash">
  <code class="language-bash">#!/bin/bash
set -euo pipefail

# Script to install fclones and use it to remove duplicate files from a specified directory.
# This script will:
# 1. Ensure necessary build tools (including for xattr) and Rust/Cargo are installed.
# 2. Install fclones using &#39;cargo install&#39;.
# 3. Add ~/.cargo/bin to the PATH for the current session and .bashrc for future sessions.
# 4. Set up Bash completions for fclones.
# 5. Run fclones to group and remove duplicate files from the target directory,
#    keeping only unique files and the first encountered copy of duplicates, after user confirmation.
#
# Target Environment: Debian 11 (Bullseye) on ARM64 RK3588
# Tutorial Name: Leveraging `fclones` to remove each and every duplicated file, so, keeping only the uniques and the first copy of the duplicates, from the location named `/home/linaro/Downloads` recursively, with depth 10, on my debian bullseye arm64 rk3588 machine.

# --- Configuration Variables ---
# The tutorial specifies /home/linaro/Downloads.
# This script uses /home/linaro/Downloads for better portability if the username is not &#39;linaro&#39;,
# assuming the script is run by the intended user.
# If you strictly need /home/linaro/Downloads and your username is different, adjust this.
FCLONES_TARGET_DIR=&quot;/home/linaro/Downloads&quot;
FCLONES_DEPTH=&quot;10&quot;

CARGO_BIN_DIR=&quot;$HOME/.cargo/bin&quot;
RUSTUP_INIT_SCRIPT_FILENAME=&quot;rustup-init.sh&quot; # Just the filename
BASHRC_FILE=&quot;$HOME/.bashrc&quot;
TEMP_DOWNLOAD_DIR=&quot;&quot; # Used for rustup-init.sh download, set by mktemp
APT_UPDATED_FLAG=&quot;&quot;  # Flag to ensure apt update runs only once

# --- Helper Functions ---

# Function to clean up temporary files on script exit or interruption
cleanup_temp_files() {
    echo &quot;Cleaning up temporary files (if any)...&quot;
    if [ -n &quot;$TEMP_DOWNLOAD_DIR&quot; ] &amp;&amp; [ -d &quot;$TEMP_DOWNLOAD_DIR&quot; ]; then
        # shellcheck disable=SC2115 # Known issue with variable in rm -rf, path is controlled by mktemp
        rm -rf &quot;$TEMP_DOWNLOAD_DIR&quot;
        echo &quot;Removed temporary directory: $TEMP_DOWNLOAD_DIR&quot;
    fi
}
# Setup trap for cleanup
trap cleanup_temp_files EXIT SIGINT SIGTERM

# Function to ensure a tool is installed via apt
ensure_tool_installed() {
    local tool_name=&quot;$1&quot;
    local package_name=&quot;${2:-$tool_name}&quot; # Use second arg as package name if provided, else tool_name
    
    # Check if the command is available first, as some tools might be installed manually
    # or come from packages with different names than the command itself.
    # If checking for a library&#39;s dev package, tool_name might be the lib name (e.g. libattr1-dev)
    # and dpkg -s is more reliable.
    if ! dpkg -s &quot;$package_name&quot; &gt;/dev/null 2&gt;&amp;1; then
        echo &quot;Package &#39;$package_name&#39; (for tool/library &#39;$tool_name&#39;) not found. Installing...&quot;
        # Run apt update once before first install attempt if not already done
        if [ -z &quot;$APT_UPDATED_FLAG&quot; ]; then
            echo &quot;Updating package lists (first time for this script run)...&quot;
            if ! sudo apt update; then
                echo &quot;Error: Failed to update package lists.&quot; &gt;&amp;2
                exit 1
            fi
            APT_UPDATED_FLAG=&quot;true&quot; # Set the flag
            echo &quot;Package lists updated successfully.&quot;
        fi

        if ! sudo apt install -y &quot;$package_name&quot;; then
            echo &quot;Error: Failed to install &#39;$package_name&#39;.&quot; &gt;&amp;2
            exit 1
        fi
        echo &quot;Package &#39;$package_name&#39; installed successfully.&quot;
    else
        echo &quot;Package &#39;$package_name&#39; (for tool/library &#39;$tool_name&#39;) is already installed.&quot;
    fi
}

# Function to ensure Rust and Cargo are installed via rustup
ensure_rust_installed() {
    if command -v cargo &gt;/dev/null 2&gt;&amp;1; then
        echo &quot;Rust and Cargo are already installed and accessible via PATH.&quot;
        # Source cargo environment in case it&#39;s installed but not in current session&#39;s PATH yet
        if [ -f &quot;$HOME/.cargo/env&quot; ]; then
            # shellcheck source=/dev/null
            source &quot;$HOME/.cargo/env&quot;
        fi
        return # Skip rustup installation
    fi

    echo &quot;Rust and Cargo not found in PATH. Installing via rustup...&quot;
    TEMP_DOWNLOAD_DIR=$(mktemp -d) # Create a temporary directory for the script
    local rustup_script_full_path=&quot;${TEMP_DOWNLOAD_DIR}/${RUSTUP_INIT_SCRIPT_FILENAME}&quot;

    echo &quot;Downloading Rust installation script to ${rustup_script_full_path}...&quot;
    if ! curl --proto &#39;=https&#39; --tlsv1.2 -sSf https://sh.rustup.rs -o &quot;${rustup_script_full_path}&quot;; then
        echo &quot;Error: Failed to download Rust installation script.&quot; &gt;&amp;2
        # TEMP_DOWNLOAD_DIR will be cleaned by the trap
        exit 1
    fi
    
    echo &quot;Running Rust installation script (rustup-init.sh)...&quot;
    # Run rustup-init.sh non-interactively:
    # -y: auto-accepts prompts.
    # --default-toolchain stable: ensures a stable version.
    # --no-modify-path: prevents rustup from modifying shell rc files directly; we handle PATH explicitly.
    if ! sh &quot;${rustup_script_full_path}&quot; -y --default-toolchain stable --no-modify-path; then
        echo &quot;Error: Rust installation failed.&quot; &gt;&amp;2
        # TEMP_DOWNLOAD_DIR will be cleaned by the trap
        exit 1
    fi
    
    # TEMP_DOWNLOAD_DIR (and script within) will be cleaned by the trap
    echo &quot;Rust and Cargo installed successfully via rustup.&quot;
    
    # Source cargo environment for the current script session
    if [ -f &quot;$HOME/.cargo/env&quot; ]; then
        # shellcheck source=/dev/null
        source &quot;$HOME/.cargo/env&quot;
        echo &quot;Sourced Cargo environment for the current session.&quot;
    else
        echo &quot;Warning: Could not source $HOME/.cargo/env. Cargo might not be in PATH for this session.&quot;
    fi
}

# Function to add a directory to PATH for current session and persist in .bashrc
add_to_path_if_not_present() {
    local dir_to_add=&quot;$1&quot;
    local rc_file=&quot;$2&quot;
    
    # For current session
    if [[ &quot;:$PATH:&quot; != *&quot;:${dir_to_add}:&quot;* ]]; then
        echo &quot;Adding ${dir_to_add} to PATH for current session...&quot;
        export PATH=&quot;${dir_to_add}:$PATH&quot;
    else
        echo &quot;${dir_to_add} is already in PATH for current session.&quot;
    fi

    # For future sessions (idempotent check)
    if ! grep -qF --fixed-strings &quot;export PATH=\&quot;${dir_to_add}:\$PATH\&quot;&quot; &quot;$rc_file&quot; &amp;&amp; \
       ! grep -qF --fixed-strings &quot;export PATH=\\\&quot;${dir_to_add}:\\\$PATH\\\&quot;&quot; &quot;$rc_file&quot;; then # Check for escaped version too
        echo &quot;Adding ${dir_to_add} to PATH in ${rc_file} for future sessions...&quot;
        # Create .bashrc if it doesn&#39;t exist
        touch &quot;$rc_file&quot;
        # Add a comment and the export line
        echo -e &quot;\n# Add ${dir_to_add} to PATH (added by fclones script)\nexport PATH=\&quot;${dir_to_add}:\$PATH\&quot;&quot; &gt;&gt; &quot;$rc_file&quot;
        echo &quot;Please source ${rc_file} or open a new terminal for changes to take full effect in other shells.&quot;
    else
        echo &quot;${dir_to_add} is already configured in ${rc_file}.&quot;
    fi
}

# --- Main Script ---
echo &quot;Starting fclones installation and usage script...&quot;
echo &quot;Target directory for fclones: ${FCLONES_TARGET_DIR}&quot;
echo &quot;Recursion depth: ${FCLONES_DEPTH}&quot;
echo &quot;---&quot;

# Step 1: Install prerequisite system packages
echo &quot;Ensuring prerequisite system packages are installed...&quot;
ensure_tool_installed &quot;curl&quot;
ensure_tool_installed &quot;build-essential&quot; # For Rust compilation
ensure_tool_installed &quot;pkg-config&quot;      # Often needed by Rust crates with C dependencies
ensure_tool_installed &quot;libssl-dev&quot;      # For crates needing OpenSSL
ensure_tool_installed &quot;git&quot;             # Cargo might need git for some dependencies
ensure_tool_installed &quot;libattr1-dev&quot;    # For xattr support in fclones
echo &quot;System prerequisite check completed.&quot;
echo &quot;---&quot;

# Step 2: Install Rust and Cargo
ensure_rust_installed
echo &quot;---&quot;

# Step 3: Add Cargo&#39;s bin directory to PATH (current session and .bashrc)
add_to_path_if_not_present &quot;${CARGO_BIN_DIR}&quot; &quot;${BASHRC_FILE}&quot;
echo &quot;---&quot;

# Step 4: Install fclones using Cargo
echo &quot;Installing fclones using Cargo...&quot;
if ! command -v cargo &gt;/dev/null 2&gt;&amp;1; then
    echo &quot;Error: cargo command not found even after setup. Installation cannot proceed.&quot; &gt;&amp;2
    echo &quot;Please ensure Rust is correctly installed and $CARGO_BIN_DIR is in your PATH.&quot; &gt;&amp;2
    exit 1
fi
if ! cargo install fclones; then
    echo &quot;Error: Failed to install fclones using Cargo.&quot; &gt;&amp;2
    exit 1
fi
echo &quot;fclones installed successfully via Cargo.&quot;
# Verify fclones is now in PATH
if ! command -v fclones &gt;/dev/null 2&gt;&amp;1; then
    echo &quot;Error: fclones installed but not found in PATH. This is unexpected.&quot; &gt;&amp;2
    echo &quot;Please check your PATH and $CARGO_BIN_DIR.&quot; &gt;&amp;2
    exit 1
fi
fclones --version
echo &quot;---&quot;

# Step 5: Set up Bash completions for fclones
echo &quot;Setting up Bash completions for fclones...&quot;
if ! grep -qF &#39;eval &quot;$(fclones complete bash)&quot;&#39; &quot;${BASHRC_FILE}&quot;; then
    echo -e &#39;\n# fclones bash completion (added by fclones script)\neval &quot;$(fclones complete bash)&quot;&#39; &gt;&gt; &quot;${BASHRC_FILE}&quot;
    echo &quot;Bash completions for fclones added to ${BASHRC_FILE}.&quot;
    echo &quot;Completions will be available in new shell sessions, or after sourcing ${BASHRC_FILE}.&quot;
else
    echo &quot;Bash completions for fclones already set up in ${BASHRC_FILE}.&quot;
fi
# Enable for current session
eval &quot;$(fclones complete bash)&quot;
echo &quot;Bash completions for fclones enabled for the current session.&quot;
echo &quot;---&quot;

# Step 6: Check if target directory exists
echo &quot;Checking target directory: ${FCLONES_TARGET_DIR}...&quot;
if [ ! -d &quot;${FCLONES_TARGET_DIR}&quot; ]; then
    echo &quot;Warning: Target directory ${FCLONES_TARGET_DIR} does not exist.&quot;
    echo &quot;fclones might not find any files to process. You may want to create it first.&quot;
    # Example of how to offer creation, commented out by default:
    # read -r -p &quot;Create directory ${FCLONES_TARGET_DIR} now? (yes/NO): &quot; create_dir_confirm
    # if [[ &quot;$create_dir_confirm&quot; == &quot;yes&quot; ]]; then
    #    if ! mkdir -p &quot;${FCLONES_TARGET_DIR}&quot;; then
    #       echo &quot;Error: Failed to create directory ${FCLONES_TARGET_DIR}.&quot; &gt;&amp;2; exit 1;
    #    fi
    #    echo &quot;Directory ${FCLONES_TARGET_DIR} created.&quot;
    # else
    #    echo &quot;Proceeding without creating the directory. fclones may find no files.&quot;
    # fi
fi
echo &quot;---&quot;

# Step 7: Execute fclones to remove duplicates
echo &quot;Preparing to remove duplicate files from ${FCLONES_TARGET_DIR} (recursive depth ${FCLONES_DEPTH}).&quot;
echo &quot;This operation will keep only unique files and the first encountered copy of any duplicates.&quot;
echo &quot;&quot;
# Explicit confirmation for the remove operation
read -r -p &quot;WARNING: This will PERMANENTLY REMOVE duplicate files from &#39;${FCLONES_TARGET_DIR}&#39;. This action is IRREVERSIBLE. Are you absolutely sure you want to continue? (Type &#39;YES&#39; to proceed): &quot; confirmation
if [[ &quot;$confirmation&quot; != &quot;YES&quot; ]]; then
    echo &quot;Operation cancelled by user. No files will be removed.&quot; &gt;&amp;2
    exit 1
fi

echo &quot;&quot;
echo &quot;Proceeding with fclones operation...&quot;
# fclones should be in PATH now
echo &quot;Running: fclones group \&quot;${FCLONES_TARGET_DIR}\&quot; --depth \&quot;${FCLONES_DEPTH}\&quot; | fclones remove&quot;
if ! fclones group &quot;${FCLONES_TARGET_DIR}&quot; --depth &quot;${FCLONES_DEPTH}&quot; | fclones remove; then
    echo &quot;Error: fclones command execution failed. fclones may have printed more specific errors above.&quot; &gt;&amp;2
    exit 1
fi
echo &quot;fclones operation completed successfully.&quot;
echo &quot;---&quot;

echo &quot;Script finished.&quot;
# Trap will handle cleanup of TEMP_DOWNLOAD_DIR
exit 0</code>
</section>]]></content><author><name></name></author><category term="scratchpad" /></entry><entry><title type="html">`.eml` mail converter</title><link href="https://ib.bsb.br/eml-mail-converter/" rel="alternate" type="text/html" title="`.eml` mail converter" /><published>2025-05-29T00:00:00+00:00</published><updated>2025-05-29T12:57:27+00:00</updated><id>https://ib.bsb.br/eml-mail-converter</id><content type="html" xml:base="https://ib.bsb.br/eml-mail-converter/"><![CDATA[<section class="code-block-container" role="group" aria-label="Python Code Block" data-filename="python_code_block.py" data-code="import os
import email
from email.parser import BytesParser
from email.policy import default as default_email_policy # Modern email policy
from email.header import decode_header, make_header
import mimetypes # For guessing file extensions
import re
import traceback # For detailed error logging

def sanitize_filename(filename_str):
    &quot;&quot;&quot;
    Sanitizes a string to be used as a filename.
    Removes or replaces characters that are not allowed or problematic in filenames
    across common operating systems. Handles email header objects.
    &quot;&quot;&quot;
    if filename_str is None:
        return &quot;_unnamed_file_&quot;

    # If it&#39;s an email.header.Header object, decode it first
    if hasattr(filename_str, &#39;encode&#39;) and not isinstance(filename_str, str):
        try:
            decoded_parts = decode_header(str(filename_str))
            temp_filename_parts = []
            for part, charset in decoded_parts:
                if isinstance(part, bytes):
                    try:
                        temp_filename_parts.append(part.decode(charset or &#39;utf-8&#39;, &#39;replace&#39;))
                    except LookupError: # Fallback for unknown charset
                        temp_filename_parts.append(part.decode(&#39;utf-8&#39;, &#39;replace&#39;))
                else:
                    temp_filename_parts.append(part)
            filename_str = &quot;&quot;.join(temp_filename_parts)
        except Exception as e:
            # If decoding complex header fails, fall back to simple string conversion
            print(f&quot;    Warning: Could not fully decode filename header, using str(): {e}&quot;)
            filename_str = str(filename_str)
    elif not isinstance(filename_str, str):
        filename_str = str(filename_str) # Ensure it&#39;s a string

    # Remove or replace forbidden characters: &lt; &gt; : &quot; / \ | ? * and control characters (0-31)
    filename_str = re.sub(r&#39;[&lt;&gt;:&quot;/\\|?*\x00-\x1f]&#39;, &#39;_&#39;, filename_str)

    # Replace multiple consecutive underscores or dots that might have resulted
    filename_str = re.sub(r&#39;_+&#39;, &#39;_&#39;, filename_str)
    filename_str = re.sub(r&#39;\.+&#39;, &#39;.&#39;, filename_str) # Allow single dots for extensions

    # Remove leading/trailing problematic characters (dots, underscores, spaces)
    filename_str = filename_str.strip(&#39;._ &#39;)

    # Handle cases where the filename might become empty or just dots after sanitization
    if not filename_str or all(c == &#39;.&#39; for c in filename_str):
        return &quot;_renamed_file_&quot;

    # Prevent names that could be problematic (e.g., &quot;..&quot; relative paths)
    # The regex above should handle slashes, but this is an extra safety check.
    if &quot;..&quot; in filename_str:
        filename_str = filename_str.replace(&quot;..&quot;, &quot;_&quot;) # Replace &quot;..&quot; with a single underscore

    # Limit length (e.g., 200 characters, leaving room for extensions/counters)
    max_len = 200
    if len(filename_str) &gt; max_len:
        name_part, ext_part = os.path.splitext(filename_str)
        
        # Ensure ext_part is not excessively long itself
        if len(ext_part) &gt; max_len / 2 : # Heuristic for very long extensions
            ext_part = ext_part[:10] # Truncate very long extension
        
        available_len_for_name = max_len - len(ext_part)
        if ext_part: # if there is an extension, account for the dot
            available_len_for_name -=1
            if available_len_for_name &lt; 1: # Name part would be empty
                 name_part = &quot;_trunc_&quot; # Provide a minimal name part
                 available_len_for_name = len(name_part) # Recalculate for safety
            else:
                 name_part = name_part[:available_len_for_name]

        else: # No extension
            name_part = name_part[:max_len]
            
        filename_str = name_part + (&#39;.&#39; + ext_part.lstrip(&#39;.&#39;) if ext_part else &quot;&quot;)

    return filename_str if filename_str else &quot;_renamed_file_&quot; # Final check for empty string


def process_eml_file(eml_file_path, base_output_dir):
    &quot;&quot;&quot;
    Processes a single .eml file to extract its headers, body, and attachments.

    Args:
        eml_file_path (str): The path to the .eml file.
        base_output_dir (str): The directory where extracted content will be saved.
                               A subdirectory will be created here for each EML file.
    &quot;&quot;&quot;
    print(f&quot;\nProcessing EML file: {eml_file_path}&quot;)
    try:
        with open(eml_file_path, &#39;rb&#39;) as fp: # Read in binary mode
            msg = BytesParser(policy=default_email_policy).parse(fp)

        # --- Create a unique output directory for this email ---
        eml_filename_stem = os.path.splitext(os.path.basename(eml_file_path))[0]
        sanitized_eml_stem = sanitize_filename(eml_filename_stem)

        if not sanitized_eml_stem or sanitized_eml_stem == &quot;_renamed_file_&quot;:
            unique_id = str(abs(hash(os.path.abspath(eml_file_path))) % 1000000) # Larger range for hash
            sanitized_eml_stem = f&quot;email_extract_{unique_id}&quot;
            print(f&quot;    Warning: Original EML filename sanitized to an unusable name. Using fallback: {sanitized_eml_stem}&quot;)

        email_specific_output_dir = os.path.join(base_output_dir, sanitized_eml_stem)

        dir_counter = 1
        temp_output_dir = email_specific_output_dir
        while os.path.exists(temp_output_dir):
            temp_output_dir = f&quot;{email_specific_output_dir}_{dir_counter}&quot;
            dir_counter += 1
        email_specific_output_dir = temp_output_dir
        
        try:
            os.makedirs(email_specific_output_dir, exist_ok=True)
        except OSError as e:
            print(f&quot;    Error creating output directory {email_specific_output_dir}: {e}&quot;)
            return # Cannot proceed without output directory
        print(f&quot;  Outputting to: {email_specific_output_dir}&quot;)

        # --- Extract and save headers ---
        headers_to_extract = [&quot;Subject&quot;, &quot;From&quot;, &quot;To&quot;, &quot;Date&quot;, &quot;Message-ID&quot;, 
                              &quot;Cc&quot;, &quot;Bcc&quot;, &quot;Return-Path&quot;, &quot;Reply-To&quot;]
        header_info = []
        extracted_subject_for_log = &quot;No_Subject&quot; # Fallback

        for header_name in headers_to_extract:
            header_value = msg.get(header_name)
            if header_value:
                try:
                    # make_header handles folding and converting to a string.
                    # decode_header handles the actual charset decoding.
                    decoded_header_val = str(make_header(decode_header(str(header_value))))
                    header_info.append(f&quot;{header_name}: {decoded_header_val}&quot;)
                    if header_name.lower() == &quot;subject&quot;:
                        extracted_subject_for_log = decoded_header_val
                except Exception as e:
                    header_info.append(f&quot;{header_name}: Error decoding header - {e}&quot;)
                    print(f&quot;    Warning: Error decoding header &#39;{header_name}&#39;: {e}&quot;)
        
        if header_info:
            try:
                with open(os.path.join(email_specific_output_dir, &quot;_headers.txt&quot;), &quot;w&quot;, encoding=&quot;utf-8&quot;) as hf:
                    hf.write(&quot;\n&quot;.join(header_info))
                print(&quot;    Saved _headers.txt&quot;)
            except IOError as e:
                print(f&quot;    Error saving _headers.txt: {e}&quot;)
        else:
            print(&quot;    No standard headers found or extracted.&quot;)


        # --- Extract Body and Attachments ---
        body_text_parts = []
        body_html_parts = []
        attachment_idx = 0 

        for part_num, part in enumerate(msg.walk()):
            content_disposition = part.get(&quot;Content-Disposition&quot;)
            content_type = part.get_content_type()
            
            is_attachment = False
            # Rule 1: Explicit &quot;attachment&quot; in Content-Disposition
            if content_disposition and &quot;attachment&quot; in content_disposition.lower():
                is_attachment = True
            # Rule 2: Has a filename (even if disposition is &quot;inline&quot; or missing)
            # This helps catch inline images that are also distinct files.
            elif part.get_filename(): 
                 is_attachment = True
            # Rule 3: Non-text, non-multipart part without a disposition (e.g., a directly embedded image)
            # This is a heuristic and might sometimes misclassify, but often useful.
            elif not part.is_multipart() and \
                 not content_type.startswith(&quot;text/&quot;) and \
                 not content_type.startswith(&quot;multipart/&quot;) and \
                 not content_disposition:
                 is_attachment = True

            if is_attachment:
                attachment_idx += 1
                original_filename = part.get_filename() # This method handles decoding of filenames

                if original_filename:
                    filename = sanitize_filename(original_filename)
                else:
                    ext = mimetypes.guess_extension(content_type, strict=False) or &#39;.dat&#39;
                    filename = sanitize_filename(f&quot;attachment_{attachment_idx}{ext}&quot;)
                
                if not filename or filename == &quot;_renamed_file_&quot;: # Final fallback if sanitization fails badly
                    filename = f&quot;attachment_{attachment_idx}_fallback.dat&quot;

                filepath = os.path.join(email_specific_output_dir, filename)
                
                file_counter = 1
                base_name, ext_name = os.path.splitext(filepath)
                # Ensure base_name is not empty if original filename was just an extension (e.g. &quot;.pdf&quot;)
                if not base_name and ext_name: # e.g. if original was &quot;.txt&quot;
                    base_name = f&quot;attachment_{attachment_idx}_base&quot;

                while os.path.exists(filepath):
                    filepath = f&quot;{base_name}_{file_counter}{ext_name}&quot;
                    file_counter += 1
                    
                try:
                    payload = part.get_payload(decode=True) 
                    if payload is not None: 
                        with open(filepath, &#39;wb&#39;) as f_attach:
                            f_attach.write(payload)
                        print(f&quot;    Saved attachment: {os.path.basename(filepath)}&quot;)
                    else:
                        print(f&quot;    Skipped attachment {os.path.basename(filepath)} (empty payload after decoding).&quot;)
                except IOError as e:
                    print(f&quot;    IOError saving attachment {os.path.basename(filepath)}: {e}&quot;)
                except Exception as e:
                    print(f&quot;    Error saving attachment {os.path.basename(filepath)}: {e}&quot;)
            
            # Body parts (not explicitly attachments based on above rules)
            elif content_type == &quot;text/plain&quot; and (not content_disposition or &quot;inline&quot; in content_disposition.lower()):
                try:
                    payload = part.get_payload(decode=True)
                    if payload is not None:
                        charset = part.get_content_charset() or &#39;utf-8&#39; 
                        body_text_parts.append(payload.decode(charset, errors=&#39;replace&#39;))
                except Exception as e:
                    print(f&quot;    Error decoding text/plain part: {e}&quot;)
            
            elif content_type == &quot;text/html&quot; and (not content_disposition or &quot;inline&quot; in content_disposition.lower()):
                try:
                    payload = part.get_payload(decode=True)
                    if payload is not None:
                        charset = part.get_content_charset() or &#39;utf-8&#39;
                        body_html_parts.append(payload.decode(charset, errors=&#39;replace&#39;))
                except Exception as e:
                    print(f&quot;    Error decoding text/html part: {e}&quot;)

        # Save body parts
        if body_text_parts:
            body_text_content = &quot;\n\n--- (Next Text Part) ---\n\n&quot;.join(body_text_parts)
            body_text_filepath = os.path.join(email_specific_output_dir, &quot;body.txt&quot;)
            try:
                with open(body_text_filepath, &#39;w&#39;, encoding=&#39;utf-8&#39;) as f_body_txt:
                    f_body_txt.write(body_text_content)
                print(f&quot;    Saved text body to body.txt&quot;)
            except IOError as e:
                print(f&quot;    Error saving body.txt: {e}&quot;)
        
        if body_html_parts:
            body_html_content = &quot;\n\n&lt;hr&gt;&lt;p&gt;--- (Next HTML Part) ---&lt;/p&gt;&lt;hr&gt;\n\n&quot;.join(body_html_parts)
            body_html_filepath = os.path.join(email_specific_output_dir, &quot;body.html&quot;)
            try:
                with open(body_html_filepath, &#39;w&#39;, encoding=&#39;utf-8&#39;) as f_body_html:
                    f_body_html.write(body_html_content)
                print(f&quot;    Saved HTML body to body.html&quot;)
            except IOError as e:
                print(f&quot;    Error saving body.html: {e}&quot;)
                
        # Fallback for non-multipart messages that are purely text and weren&#39;t caught as body
        if not msg.is_multipart() and not body_text_parts and not body_html_parts and msg.get_content_type().startswith(&quot;text/&quot;):
            try:
                payload = msg.get_payload(decode=True)
                if payload is not None:
                    charset = msg.get_content_charset() or &#39;utf-8&#39;
                    body_content = payload.decode(charset, errors=&#39;replace&#39;)
                    subtype = sanitize_filename(msg.get_content_subtype() or &quot;txt&quot;)
                    if not subtype or subtype == &quot;_renamed_file_&quot;: subtype = &quot;txt&quot; # Ensure valid extension
                    body_filepath = os.path.join(email_specific_output_dir, f&quot;body_main.{subtype}&quot;)
                    with open(body_filepath, &#39;w&#39;, encoding=&#39;utf-8&#39;) as f_body_main:
                        f_body_main.write(body_content)
                    print(f&quot;    Saved main text payload to {os.path.basename(body_filepath)}&quot;)
            except Exception as e:
                print(f&quot;    Could not decode/save main text payload for non-multipart email: {e}&quot;)

        if not body_text_parts and not body_html_parts and attachment_idx == 0 and \
           (msg.is_multipart() or not msg.get_content_type().startswith(&quot;text/&quot;)):
            print(f&quot;    Note: No distinct text/html body or attachments were extracted for &#39;{os.path.basename(eml_file_path)}&#39;. The content might be in an unusual format or the EML might be empty/corrupt.&quot;)

        print(f&quot;  Finished processing {os.path.basename(eml_file_path)}&quot;)

    except FileNotFoundError:
        print(f&quot;Error: EML file not found at {eml_file_path}&quot;)
    except Exception as e:
        print(f&quot;An critical error occurred while processing {eml_file_path}: {e}&quot;)
        traceback.print_exc()


if __name__ == &quot;__main__&quot;:
    # --- HOW TO USE THIS SCRIPT ---
    # 1. Save this script as a Python file (e.g., eml_parser_revised.py).
    #
    # 2. CHOOSE ONE of the options below by UNCOMMENTING the relevant block.
    #    To uncomment a block, remove the triple quote characters (&#39;&#39;&#39; or &quot;&quot;&quot;)
    #    from the beginning and end of that block.
    #
    # 3. MODIFY THE PATHS within your chosen uncommented block to point to your
    #    actual EML files and desired output location. Use ABSOLUTE paths if unsure.
    #    e.g., on Linux: &#39;/home/youruser/my_emails/email.eml&#39;
    #    e.g., on Windows: &#39;C:\\Users\\YourUser\\Documents\\MyEMLs&#39; (note the double backslashes)
    #
    # 4. Run the script from your terminal:
    #    python3 eml_parser_revised.py
    #    (Or `python eml_parser_revised.py` if python3 is your default python)
    #
    # The script will create a main output directory, and inside it,
    # a subdirectory for each processed EML file. These subdirectories will
    # contain the extracted headers (_headers.txt), body (body.txt/body.html),
    # and any attachments.

    user_has_configured_an_option = True # This flag will be set if an option is chosen by uncommenting

    # --- OPTION 1: Process a SINGLE .eml file ---
    &quot;&quot;&quot;
    eml_file_to_process = &quot;YOUR_SINGLE_EML_FILE_PATH_HERE.eml&quot;  # &lt;-- *** SET THIS ABSOLUTE OR RELATIVE PATH ***
    main_output_folder = &quot;eml_extracted_single_output&quot;          # &lt;-- SET YOUR DESIRED OUTPUT FOLDER NAME (will be created if not exists)

    # --- Do not edit below this line for Option 1 ---
    if eml_file_to_process == &quot;YOUR_SINGLE_EML_FILE_PATH_HERE.eml&quot;:
        print(&quot;OPTION 1 IS UNCOMMENTED, BUT THE PATH IS STILL THE DEFAULT PLACEHOLDER.&quot;)
        print(&quot;Please edit &#39;eml_file_to_process&#39; to your EML file&#39;s actual path.&quot;)
    elif os.path.isfile(eml_file_to_process):
        try:
            os.makedirs(main_output_folder, exist_ok=True)
            process_eml_file(eml_file_to_process, main_output_folder)
            print(f&quot;\nSingle file processing complete. Output in: {os.path.abspath(main_output_folder)}&quot;)
        except Exception as e_main:
            print(f&quot;Error during Option 1 execution: {e_main}&quot;)
        user_has_configured_an_option = True
    else:
        print(f&quot;OPTION 1 ERROR: EML file not found at &#39;{eml_file_to_process}&#39;&quot;)
    &quot;&quot;&quot;

    # --- OPTION 2: Process ALL .eml files in a DIRECTORY ---
    # &quot;&quot;&quot;
    source_directory_with_emls = &quot;/mnt/mSATA/linaro/Desktop/00-TEMP/EML mails/&quot;  # &lt;-- *** SET THIS ABSOLUTE OR RELATIVE PATH ***
    main_output_folder = &quot;/mnt/mSATA/linaro/Desktop/00-TEMP/EMLout/&quot;                        # &lt;-- SET YOUR DESIRED OUTPUT FOLDER NAME (will be created if not exists)

    # --- Do not edit below this line for Option 2 ---
    if source_directory_with_emls == &quot;YOUR_DIRECTORY_CONTAINING_EML_FILES_HERE&quot;:
        print(&quot;OPTION 2 IS UNCOMMENTED, BUT THE PATH IS STILL THE DEFAULT PLACEHOLDER.&quot;)
        print(&quot;Please edit &#39;source_directory_with_emls&#39; to your EML directory&#39;s actual path.&quot;)
    elif os.path.isdir(source_directory_with_emls):
        try:
            os.makedirs(main_output_folder, exist_ok=True)
            eml_found_in_dir = False
            for item in os.listdir(source_directory_with_emls):
                if item.lower().endswith(&quot;.eml&quot;):
                    eml_found_in_dir = True
                    full_eml_path = os.path.join(source_directory_with_emls, item)
                    process_eml_file(full_eml_path, main_output_folder)
            if not eml_found_in_dir:
                print(f&quot;OPTION 2: No .eml files found in &#39;{source_directory_with_emls}&#39;&quot;)
            else:
                print(f&quot;\nBatch processing complete. Output in: {os.path.abspath(main_output_folder)}&quot;)
        except Exception as e_main:
            print(f&quot;Error during Option 2 execution: {e_main}&quot;)
        user_has_configured_an_option = True
    else:
        print(f&quot;OPTION 2 ERROR: Directory not found at &#39;{source_directory_with_emls}&#39;&quot;)
    # &quot;&quot;&quot;


    # --- OPTION 3: Test with the EML content provided in your prompt ---
    # To use this:
    # 1. Create a file named &quot;my_test_email.eml&quot; in the SAME directory as this script.
    # 2. Paste the FULL EML content (from your original prompt) into that &quot;my_test_email.eml&quot; file and save it.
    # 3. Then, uncomment this block and run the script.
    &quot;&quot;&quot;
    test_eml_filename = &quot;my_test_email.eml&quot; 
    main_output_folder = &quot;eml_extracted_test_sample_output&quot;

    # --- Do not edit below this line for Option 3 ---
    if os.path.isfile(test_eml_filename):
        try:
            os.makedirs(main_output_folder, exist_ok=True)
            process_eml_file(test_eml_filename, main_output_folder)
            print(f&quot;\nTest file processing complete. Output in: {os.path.abspath(main_output_folder)}&quot;)
        except Exception as e_main:
            print(f&quot;Error during Option 3 execution: {e_main}&quot;)
        user_has_configured_an_option = True
    else:
        print(f&quot;OPTION 3: Test file &#39;{test_eml_filename}&#39; not found in the script&#39;s directory.&quot;)
        print(&quot;          Please create it and paste your EML content into it to use this option.&quot;)
    &quot;&quot;&quot;

    # --- If no option was uncommented and configured by the user, print detailed help ---
    if not user_has_configured_an_option:
        print(&quot;\n--- EML EXTRACTION SCRIPT HELP ---&quot;)
        print(&quot;This script extracts content and attachments from .eml (email) files.&quot;)
        print(&quot;\nTO USE THIS SCRIPT:&quot;)
        print(&quot;1. Open this Python script file (the .py file you saved) in a text editor.&quot;)
        print(&quot;2. Scroll down to the end of the file, to the section that starts with:&quot;)
        print(&quot;   &#39;if __name__ == \&quot;__main__\&quot;:&#39;&quot;)
        print(&quot;3. You will see three &#39;OPTION&#39; blocks (OPTION 1, OPTION 2, OPTION 3).&quot;)
        print(&quot;   These blocks are currently &#39;commented out&#39; with triple quote characters&quot;)
        print(&quot;   (&#39;&#39;&#39;) at their beginning and end.&quot;)
        print(&quot;\n4. CHOOSE ONLY ONE OPTION that fits your needs:&quot;)
        print(&quot;   - OPTION 1: If you want to process a single .eml file.&quot;)
        print(&quot;   - OPTION 2: If you want to process all .eml files within a specific folder.&quot;)
        print(&quot;   - OPTION 3: If you want to test the script with a sample &#39;my_test_email.eml&#39; file&quot;)
        print(&quot;               (which you need to create first, as described in the comments for Option 3).&quot;)
        print(&quot;\n5. UNCOMMENT your chosen option&#39;s block. To do this, delete the three quote&quot;)
        print(&quot;   characters (&#39;&#39;&#39;) from the very beginning of that block, AND delete the&quot;)
        print(&quot;   three quote characters (&#39;&#39;&#39;) from the very end of that SAME block.&quot;)
        print(&quot;   Make sure only ONE option block is uncommented.&quot;)
        print(&quot;\n6. IMPORTANT: Inside the option block you just uncommented, you MUST update&quot;)
        print(&quot;   the placeholder paths. For example, change:&quot;)
        print(&quot;     &#39;YOUR_SINGLE_EML_FILE_PATH_HERE.eml&#39;&quot;)
        print(&quot;   to the actual, full path of your EML file, like:&quot;)
        print(&quot;     &#39;/home/yourusername/emails/important_email.eml&#39; (for Linux/macOS)&quot;)
        print(&quot;     &#39;C:\\Users\\YourUserName\\Documents\\Emails\\archive.eml&#39; (for Windows - note double backslashes)&quot;)
        print(&quot;   Similarly, update &#39;YOUR_DIRECTORY_CONTAINING_EML_FILES_HERE&#39; if using Option 2,&quot;)
        print(&quot;   and you can customize &#39;main_output_folder&#39; if desired.&quot;)
        print(&quot;\n7. Save the changes you made to this script file.&quot;)
        print(&quot;\n8. Open a terminal or command prompt.&quot;)
        print(&quot;9. Navigate to the directory where you saved this script file using the &#39;cd&#39; command.&quot;)
        print(&quot;   (e.g., &#39;cd /path/to/where/you/saved/the_script&#39;)&quot;)
        print(&quot;10. Run the script by typing the following command and pressing Enter:&quot;)
        print(&quot;    python3 name_of_this_script.py&quot;)
        print(&quot;    (Replace &#39;name_of_this_script.py&#39; with the actual filename you used, e.g., &#39;eml_parser_revised.py&#39;)&quot;)
        print(&quot;    If &#39;python3&#39; doesn&#39;t work, try &#39;python name_of_this_script.py&#39;.&quot;)
        print(&quot;\n   The script will then run, process your EML files, and save the extracted&quot;)
        print(&quot;   content (headers, body text/html, attachments) into subdirectories within&quot;)
        print(&quot;   the &#39;main_output_folder&#39; you specified (or the default one for that option).&quot;)
        print(&quot;-----------------------------------\n&quot;)" data-download-link="" data-download-label="Download Python">
  <code class="language-python">import os
import email
from email.parser import BytesParser
from email.policy import default as default_email_policy # Modern email policy
from email.header import decode_header, make_header
import mimetypes # For guessing file extensions
import re
import traceback # For detailed error logging

def sanitize_filename(filename_str):
    &quot;&quot;&quot;
    Sanitizes a string to be used as a filename.
    Removes or replaces characters that are not allowed or problematic in filenames
    across common operating systems. Handles email header objects.
    &quot;&quot;&quot;
    if filename_str is None:
        return &quot;_unnamed_file_&quot;

    # If it&#39;s an email.header.Header object, decode it first
    if hasattr(filename_str, &#39;encode&#39;) and not isinstance(filename_str, str):
        try:
            decoded_parts = decode_header(str(filename_str))
            temp_filename_parts = []
            for part, charset in decoded_parts:
                if isinstance(part, bytes):
                    try:
                        temp_filename_parts.append(part.decode(charset or &#39;utf-8&#39;, &#39;replace&#39;))
                    except LookupError: # Fallback for unknown charset
                        temp_filename_parts.append(part.decode(&#39;utf-8&#39;, &#39;replace&#39;))
                else:
                    temp_filename_parts.append(part)
            filename_str = &quot;&quot;.join(temp_filename_parts)
        except Exception as e:
            # If decoding complex header fails, fall back to simple string conversion
            print(f&quot;    Warning: Could not fully decode filename header, using str(): {e}&quot;)
            filename_str = str(filename_str)
    elif not isinstance(filename_str, str):
        filename_str = str(filename_str) # Ensure it&#39;s a string

    # Remove or replace forbidden characters: &lt; &gt; : &quot; / \ | ? * and control characters (0-31)
    filename_str = re.sub(r&#39;[&lt;&gt;:&quot;/\\|?*\x00-\x1f]&#39;, &#39;_&#39;, filename_str)

    # Replace multiple consecutive underscores or dots that might have resulted
    filename_str = re.sub(r&#39;_+&#39;, &#39;_&#39;, filename_str)
    filename_str = re.sub(r&#39;\.+&#39;, &#39;.&#39;, filename_str) # Allow single dots for extensions

    # Remove leading/trailing problematic characters (dots, underscores, spaces)
    filename_str = filename_str.strip(&#39;._ &#39;)

    # Handle cases where the filename might become empty or just dots after sanitization
    if not filename_str or all(c == &#39;.&#39; for c in filename_str):
        return &quot;_renamed_file_&quot;

    # Prevent names that could be problematic (e.g., &quot;..&quot; relative paths)
    # The regex above should handle slashes, but this is an extra safety check.
    if &quot;..&quot; in filename_str:
        filename_str = filename_str.replace(&quot;..&quot;, &quot;_&quot;) # Replace &quot;..&quot; with a single underscore

    # Limit length (e.g., 200 characters, leaving room for extensions/counters)
    max_len = 200
    if len(filename_str) &gt; max_len:
        name_part, ext_part = os.path.splitext(filename_str)
        
        # Ensure ext_part is not excessively long itself
        if len(ext_part) &gt; max_len / 2 : # Heuristic for very long extensions
            ext_part = ext_part[:10] # Truncate very long extension
        
        available_len_for_name = max_len - len(ext_part)
        if ext_part: # if there is an extension, account for the dot
            available_len_for_name -=1
            if available_len_for_name &lt; 1: # Name part would be empty
                 name_part = &quot;_trunc_&quot; # Provide a minimal name part
                 available_len_for_name = len(name_part) # Recalculate for safety
            else:
                 name_part = name_part[:available_len_for_name]

        else: # No extension
            name_part = name_part[:max_len]
            
        filename_str = name_part + (&#39;.&#39; + ext_part.lstrip(&#39;.&#39;) if ext_part else &quot;&quot;)

    return filename_str if filename_str else &quot;_renamed_file_&quot; # Final check for empty string


def process_eml_file(eml_file_path, base_output_dir):
    &quot;&quot;&quot;
    Processes a single .eml file to extract its headers, body, and attachments.

    Args:
        eml_file_path (str): The path to the .eml file.
        base_output_dir (str): The directory where extracted content will be saved.
                               A subdirectory will be created here for each EML file.
    &quot;&quot;&quot;
    print(f&quot;\nProcessing EML file: {eml_file_path}&quot;)
    try:
        with open(eml_file_path, &#39;rb&#39;) as fp: # Read in binary mode
            msg = BytesParser(policy=default_email_policy).parse(fp)

        # --- Create a unique output directory for this email ---
        eml_filename_stem = os.path.splitext(os.path.basename(eml_file_path))[0]
        sanitized_eml_stem = sanitize_filename(eml_filename_stem)

        if not sanitized_eml_stem or sanitized_eml_stem == &quot;_renamed_file_&quot;:
            unique_id = str(abs(hash(os.path.abspath(eml_file_path))) % 1000000) # Larger range for hash
            sanitized_eml_stem = f&quot;email_extract_{unique_id}&quot;
            print(f&quot;    Warning: Original EML filename sanitized to an unusable name. Using fallback: {sanitized_eml_stem}&quot;)

        email_specific_output_dir = os.path.join(base_output_dir, sanitized_eml_stem)

        dir_counter = 1
        temp_output_dir = email_specific_output_dir
        while os.path.exists(temp_output_dir):
            temp_output_dir = f&quot;{email_specific_output_dir}_{dir_counter}&quot;
            dir_counter += 1
        email_specific_output_dir = temp_output_dir
        
        try:
            os.makedirs(email_specific_output_dir, exist_ok=True)
        except OSError as e:
            print(f&quot;    Error creating output directory {email_specific_output_dir}: {e}&quot;)
            return # Cannot proceed without output directory
        print(f&quot;  Outputting to: {email_specific_output_dir}&quot;)

        # --- Extract and save headers ---
        headers_to_extract = [&quot;Subject&quot;, &quot;From&quot;, &quot;To&quot;, &quot;Date&quot;, &quot;Message-ID&quot;, 
                              &quot;Cc&quot;, &quot;Bcc&quot;, &quot;Return-Path&quot;, &quot;Reply-To&quot;]
        header_info = []
        extracted_subject_for_log = &quot;No_Subject&quot; # Fallback

        for header_name in headers_to_extract:
            header_value = msg.get(header_name)
            if header_value:
                try:
                    # make_header handles folding and converting to a string.
                    # decode_header handles the actual charset decoding.
                    decoded_header_val = str(make_header(decode_header(str(header_value))))
                    header_info.append(f&quot;{header_name}: {decoded_header_val}&quot;)
                    if header_name.lower() == &quot;subject&quot;:
                        extracted_subject_for_log = decoded_header_val
                except Exception as e:
                    header_info.append(f&quot;{header_name}: Error decoding header - {e}&quot;)
                    print(f&quot;    Warning: Error decoding header &#39;{header_name}&#39;: {e}&quot;)
        
        if header_info:
            try:
                with open(os.path.join(email_specific_output_dir, &quot;_headers.txt&quot;), &quot;w&quot;, encoding=&quot;utf-8&quot;) as hf:
                    hf.write(&quot;\n&quot;.join(header_info))
                print(&quot;    Saved _headers.txt&quot;)
            except IOError as e:
                print(f&quot;    Error saving _headers.txt: {e}&quot;)
        else:
            print(&quot;    No standard headers found or extracted.&quot;)


        # --- Extract Body and Attachments ---
        body_text_parts = []
        body_html_parts = []
        attachment_idx = 0 

        for part_num, part in enumerate(msg.walk()):
            content_disposition = part.get(&quot;Content-Disposition&quot;)
            content_type = part.get_content_type()
            
            is_attachment = False
            # Rule 1: Explicit &quot;attachment&quot; in Content-Disposition
            if content_disposition and &quot;attachment&quot; in content_disposition.lower():
                is_attachment = True
            # Rule 2: Has a filename (even if disposition is &quot;inline&quot; or missing)
            # This helps catch inline images that are also distinct files.
            elif part.get_filename(): 
                 is_attachment = True
            # Rule 3: Non-text, non-multipart part without a disposition (e.g., a directly embedded image)
            # This is a heuristic and might sometimes misclassify, but often useful.
            elif not part.is_multipart() and \
                 not content_type.startswith(&quot;text/&quot;) and \
                 not content_type.startswith(&quot;multipart/&quot;) and \
                 not content_disposition:
                 is_attachment = True

            if is_attachment:
                attachment_idx += 1
                original_filename = part.get_filename() # This method handles decoding of filenames

                if original_filename:
                    filename = sanitize_filename(original_filename)
                else:
                    ext = mimetypes.guess_extension(content_type, strict=False) or &#39;.dat&#39;
                    filename = sanitize_filename(f&quot;attachment_{attachment_idx}{ext}&quot;)
                
                if not filename or filename == &quot;_renamed_file_&quot;: # Final fallback if sanitization fails badly
                    filename = f&quot;attachment_{attachment_idx}_fallback.dat&quot;

                filepath = os.path.join(email_specific_output_dir, filename)
                
                file_counter = 1
                base_name, ext_name = os.path.splitext(filepath)
                # Ensure base_name is not empty if original filename was just an extension (e.g. &quot;.pdf&quot;)
                if not base_name and ext_name: # e.g. if original was &quot;.txt&quot;
                    base_name = f&quot;attachment_{attachment_idx}_base&quot;

                while os.path.exists(filepath):
                    filepath = f&quot;{base_name}_{file_counter}{ext_name}&quot;
                    file_counter += 1
                    
                try:
                    payload = part.get_payload(decode=True) 
                    if payload is not None: 
                        with open(filepath, &#39;wb&#39;) as f_attach:
                            f_attach.write(payload)
                        print(f&quot;    Saved attachment: {os.path.basename(filepath)}&quot;)
                    else:
                        print(f&quot;    Skipped attachment {os.path.basename(filepath)} (empty payload after decoding).&quot;)
                except IOError as e:
                    print(f&quot;    IOError saving attachment {os.path.basename(filepath)}: {e}&quot;)
                except Exception as e:
                    print(f&quot;    Error saving attachment {os.path.basename(filepath)}: {e}&quot;)
            
            # Body parts (not explicitly attachments based on above rules)
            elif content_type == &quot;text/plain&quot; and (not content_disposition or &quot;inline&quot; in content_disposition.lower()):
                try:
                    payload = part.get_payload(decode=True)
                    if payload is not None:
                        charset = part.get_content_charset() or &#39;utf-8&#39; 
                        body_text_parts.append(payload.decode(charset, errors=&#39;replace&#39;))
                except Exception as e:
                    print(f&quot;    Error decoding text/plain part: {e}&quot;)
            
            elif content_type == &quot;text/html&quot; and (not content_disposition or &quot;inline&quot; in content_disposition.lower()):
                try:
                    payload = part.get_payload(decode=True)
                    if payload is not None:
                        charset = part.get_content_charset() or &#39;utf-8&#39;
                        body_html_parts.append(payload.decode(charset, errors=&#39;replace&#39;))
                except Exception as e:
                    print(f&quot;    Error decoding text/html part: {e}&quot;)

        # Save body parts
        if body_text_parts:
            body_text_content = &quot;\n\n--- (Next Text Part) ---\n\n&quot;.join(body_text_parts)
            body_text_filepath = os.path.join(email_specific_output_dir, &quot;body.txt&quot;)
            try:
                with open(body_text_filepath, &#39;w&#39;, encoding=&#39;utf-8&#39;) as f_body_txt:
                    f_body_txt.write(body_text_content)
                print(f&quot;    Saved text body to body.txt&quot;)
            except IOError as e:
                print(f&quot;    Error saving body.txt: {e}&quot;)
        
        if body_html_parts:
            body_html_content = &quot;\n\n&lt;hr&gt;&lt;p&gt;--- (Next HTML Part) ---&lt;/p&gt;&lt;hr&gt;\n\n&quot;.join(body_html_parts)
            body_html_filepath = os.path.join(email_specific_output_dir, &quot;body.html&quot;)
            try:
                with open(body_html_filepath, &#39;w&#39;, encoding=&#39;utf-8&#39;) as f_body_html:
                    f_body_html.write(body_html_content)
                print(f&quot;    Saved HTML body to body.html&quot;)
            except IOError as e:
                print(f&quot;    Error saving body.html: {e}&quot;)
                
        # Fallback for non-multipart messages that are purely text and weren&#39;t caught as body
        if not msg.is_multipart() and not body_text_parts and not body_html_parts and msg.get_content_type().startswith(&quot;text/&quot;):
            try:
                payload = msg.get_payload(decode=True)
                if payload is not None:
                    charset = msg.get_content_charset() or &#39;utf-8&#39;
                    body_content = payload.decode(charset, errors=&#39;replace&#39;)
                    subtype = sanitize_filename(msg.get_content_subtype() or &quot;txt&quot;)
                    if not subtype or subtype == &quot;_renamed_file_&quot;: subtype = &quot;txt&quot; # Ensure valid extension
                    body_filepath = os.path.join(email_specific_output_dir, f&quot;body_main.{subtype}&quot;)
                    with open(body_filepath, &#39;w&#39;, encoding=&#39;utf-8&#39;) as f_body_main:
                        f_body_main.write(body_content)
                    print(f&quot;    Saved main text payload to {os.path.basename(body_filepath)}&quot;)
            except Exception as e:
                print(f&quot;    Could not decode/save main text payload for non-multipart email: {e}&quot;)

        if not body_text_parts and not body_html_parts and attachment_idx == 0 and \
           (msg.is_multipart() or not msg.get_content_type().startswith(&quot;text/&quot;)):
            print(f&quot;    Note: No distinct text/html body or attachments were extracted for &#39;{os.path.basename(eml_file_path)}&#39;. The content might be in an unusual format or the EML might be empty/corrupt.&quot;)

        print(f&quot;  Finished processing {os.path.basename(eml_file_path)}&quot;)

    except FileNotFoundError:
        print(f&quot;Error: EML file not found at {eml_file_path}&quot;)
    except Exception as e:
        print(f&quot;An critical error occurred while processing {eml_file_path}: {e}&quot;)
        traceback.print_exc()


if __name__ == &quot;__main__&quot;:
    # --- HOW TO USE THIS SCRIPT ---
    # 1. Save this script as a Python file (e.g., eml_parser_revised.py).
    #
    # 2. CHOOSE ONE of the options below by UNCOMMENTING the relevant block.
    #    To uncomment a block, remove the triple quote characters (&#39;&#39;&#39; or &quot;&quot;&quot;)
    #    from the beginning and end of that block.
    #
    # 3. MODIFY THE PATHS within your chosen uncommented block to point to your
    #    actual EML files and desired output location. Use ABSOLUTE paths if unsure.
    #    e.g., on Linux: &#39;/home/youruser/my_emails/email.eml&#39;
    #    e.g., on Windows: &#39;C:\\Users\\YourUser\\Documents\\MyEMLs&#39; (note the double backslashes)
    #
    # 4. Run the script from your terminal:
    #    python3 eml_parser_revised.py
    #    (Or `python eml_parser_revised.py` if python3 is your default python)
    #
    # The script will create a main output directory, and inside it,
    # a subdirectory for each processed EML file. These subdirectories will
    # contain the extracted headers (_headers.txt), body (body.txt/body.html),
    # and any attachments.

    user_has_configured_an_option = True # This flag will be set if an option is chosen by uncommenting

    # --- OPTION 1: Process a SINGLE .eml file ---
    &quot;&quot;&quot;
    eml_file_to_process = &quot;YOUR_SINGLE_EML_FILE_PATH_HERE.eml&quot;  # &lt;-- *** SET THIS ABSOLUTE OR RELATIVE PATH ***
    main_output_folder = &quot;eml_extracted_single_output&quot;          # &lt;-- SET YOUR DESIRED OUTPUT FOLDER NAME (will be created if not exists)

    # --- Do not edit below this line for Option 1 ---
    if eml_file_to_process == &quot;YOUR_SINGLE_EML_FILE_PATH_HERE.eml&quot;:
        print(&quot;OPTION 1 IS UNCOMMENTED, BUT THE PATH IS STILL THE DEFAULT PLACEHOLDER.&quot;)
        print(&quot;Please edit &#39;eml_file_to_process&#39; to your EML file&#39;s actual path.&quot;)
    elif os.path.isfile(eml_file_to_process):
        try:
            os.makedirs(main_output_folder, exist_ok=True)
            process_eml_file(eml_file_to_process, main_output_folder)
            print(f&quot;\nSingle file processing complete. Output in: {os.path.abspath(main_output_folder)}&quot;)
        except Exception as e_main:
            print(f&quot;Error during Option 1 execution: {e_main}&quot;)
        user_has_configured_an_option = True
    else:
        print(f&quot;OPTION 1 ERROR: EML file not found at &#39;{eml_file_to_process}&#39;&quot;)
    &quot;&quot;&quot;

    # --- OPTION 2: Process ALL .eml files in a DIRECTORY ---
    # &quot;&quot;&quot;
    source_directory_with_emls = &quot;/mnt/mSATA/linaro/Desktop/00-TEMP/EML mails/&quot;  # &lt;-- *** SET THIS ABSOLUTE OR RELATIVE PATH ***
    main_output_folder = &quot;/mnt/mSATA/linaro/Desktop/00-TEMP/EMLout/&quot;                        # &lt;-- SET YOUR DESIRED OUTPUT FOLDER NAME (will be created if not exists)

    # --- Do not edit below this line for Option 2 ---
    if source_directory_with_emls == &quot;YOUR_DIRECTORY_CONTAINING_EML_FILES_HERE&quot;:
        print(&quot;OPTION 2 IS UNCOMMENTED, BUT THE PATH IS STILL THE DEFAULT PLACEHOLDER.&quot;)
        print(&quot;Please edit &#39;source_directory_with_emls&#39; to your EML directory&#39;s actual path.&quot;)
    elif os.path.isdir(source_directory_with_emls):
        try:
            os.makedirs(main_output_folder, exist_ok=True)
            eml_found_in_dir = False
            for item in os.listdir(source_directory_with_emls):
                if item.lower().endswith(&quot;.eml&quot;):
                    eml_found_in_dir = True
                    full_eml_path = os.path.join(source_directory_with_emls, item)
                    process_eml_file(full_eml_path, main_output_folder)
            if not eml_found_in_dir:
                print(f&quot;OPTION 2: No .eml files found in &#39;{source_directory_with_emls}&#39;&quot;)
            else:
                print(f&quot;\nBatch processing complete. Output in: {os.path.abspath(main_output_folder)}&quot;)
        except Exception as e_main:
            print(f&quot;Error during Option 2 execution: {e_main}&quot;)
        user_has_configured_an_option = True
    else:
        print(f&quot;OPTION 2 ERROR: Directory not found at &#39;{source_directory_with_emls}&#39;&quot;)
    # &quot;&quot;&quot;


    # --- OPTION 3: Test with the EML content provided in your prompt ---
    # To use this:
    # 1. Create a file named &quot;my_test_email.eml&quot; in the SAME directory as this script.
    # 2. Paste the FULL EML content (from your original prompt) into that &quot;my_test_email.eml&quot; file and save it.
    # 3. Then, uncomment this block and run the script.
    &quot;&quot;&quot;
    test_eml_filename = &quot;my_test_email.eml&quot; 
    main_output_folder = &quot;eml_extracted_test_sample_output&quot;

    # --- Do not edit below this line for Option 3 ---
    if os.path.isfile(test_eml_filename):
        try:
            os.makedirs(main_output_folder, exist_ok=True)
            process_eml_file(test_eml_filename, main_output_folder)
            print(f&quot;\nTest file processing complete. Output in: {os.path.abspath(main_output_folder)}&quot;)
        except Exception as e_main:
            print(f&quot;Error during Option 3 execution: {e_main}&quot;)
        user_has_configured_an_option = True
    else:
        print(f&quot;OPTION 3: Test file &#39;{test_eml_filename}&#39; not found in the script&#39;s directory.&quot;)
        print(&quot;          Please create it and paste your EML content into it to use this option.&quot;)
    &quot;&quot;&quot;

    # --- If no option was uncommented and configured by the user, print detailed help ---
    if not user_has_configured_an_option:
        print(&quot;\n--- EML EXTRACTION SCRIPT HELP ---&quot;)
        print(&quot;This script extracts content and attachments from .eml (email) files.&quot;)
        print(&quot;\nTO USE THIS SCRIPT:&quot;)
        print(&quot;1. Open this Python script file (the .py file you saved) in a text editor.&quot;)
        print(&quot;2. Scroll down to the end of the file, to the section that starts with:&quot;)
        print(&quot;   &#39;if __name__ == \&quot;__main__\&quot;:&#39;&quot;)
        print(&quot;3. You will see three &#39;OPTION&#39; blocks (OPTION 1, OPTION 2, OPTION 3).&quot;)
        print(&quot;   These blocks are currently &#39;commented out&#39; with triple quote characters&quot;)
        print(&quot;   (&#39;&#39;&#39;) at their beginning and end.&quot;)
        print(&quot;\n4. CHOOSE ONLY ONE OPTION that fits your needs:&quot;)
        print(&quot;   - OPTION 1: If you want to process a single .eml file.&quot;)
        print(&quot;   - OPTION 2: If you want to process all .eml files within a specific folder.&quot;)
        print(&quot;   - OPTION 3: If you want to test the script with a sample &#39;my_test_email.eml&#39; file&quot;)
        print(&quot;               (which you need to create first, as described in the comments for Option 3).&quot;)
        print(&quot;\n5. UNCOMMENT your chosen option&#39;s block. To do this, delete the three quote&quot;)
        print(&quot;   characters (&#39;&#39;&#39;) from the very beginning of that block, AND delete the&quot;)
        print(&quot;   three quote characters (&#39;&#39;&#39;) from the very end of that SAME block.&quot;)
        print(&quot;   Make sure only ONE option block is uncommented.&quot;)
        print(&quot;\n6. IMPORTANT: Inside the option block you just uncommented, you MUST update&quot;)
        print(&quot;   the placeholder paths. For example, change:&quot;)
        print(&quot;     &#39;YOUR_SINGLE_EML_FILE_PATH_HERE.eml&#39;&quot;)
        print(&quot;   to the actual, full path of your EML file, like:&quot;)
        print(&quot;     &#39;/home/yourusername/emails/important_email.eml&#39; (for Linux/macOS)&quot;)
        print(&quot;     &#39;C:\\Users\\YourUserName\\Documents\\Emails\\archive.eml&#39; (for Windows - note double backslashes)&quot;)
        print(&quot;   Similarly, update &#39;YOUR_DIRECTORY_CONTAINING_EML_FILES_HERE&#39; if using Option 2,&quot;)
        print(&quot;   and you can customize &#39;main_output_folder&#39; if desired.&quot;)
        print(&quot;\n7. Save the changes you made to this script file.&quot;)
        print(&quot;\n8. Open a terminal or command prompt.&quot;)
        print(&quot;9. Navigate to the directory where you saved this script file using the &#39;cd&#39; command.&quot;)
        print(&quot;   (e.g., &#39;cd /path/to/where/you/saved/the_script&#39;)&quot;)
        print(&quot;10. Run the script by typing the following command and pressing Enter:&quot;)
        print(&quot;    python3 name_of_this_script.py&quot;)
        print(&quot;    (Replace &#39;name_of_this_script.py&#39; with the actual filename you used, e.g., &#39;eml_parser_revised.py&#39;)&quot;)
        print(&quot;    If &#39;python3&#39; doesn&#39;t work, try &#39;python name_of_this_script.py&#39;.&quot;)
        print(&quot;\n   The script will then run, process your EML files, and save the extracted&quot;)
        print(&quot;   content (headers, body text/html, attachments) into subdirectories within&quot;)
        print(&quot;   the &#39;main_output_folder&#39; you specified (or the default one for that option).&quot;)
        print(&quot;-----------------------------------\n&quot;)</code>
</section>]]></content><author><name></name></author><category term="scratchpad" /></entry><entry><title type="html">justfuckingusehtml.com (html template)</title><link href="https://ib.bsb.br/justfuckingusehtmlcom-html-template/" rel="alternate" type="text/html" title="justfuckingusehtml.com (html template)" /><published>2025-05-29T00:00:00+00:00</published><updated>2025-05-29T18:49:18+00:00</updated><id>https://ib.bsb.br/justfuckingusehtmlcom-html-template</id><content type="html" xml:base="https://ib.bsb.br/justfuckingusehtmlcom-html-template/"><![CDATA[<section class="code-block-container" role="group" aria-label="Html Code Block" data-filename="html_code_block.html" data-code="&lt;!DOCTYPE html&gt; &lt;html lang=en-US style&gt;&lt;!--
 Page saved with SingleFile 
 url: https://justfuckingusehtml.com/ 
 saved date: Fri May 16 2025 10:01:50 GMT-0400 (Eastern Daylight Time)
--&gt;&lt;meta charset=utf-8&gt;
&lt;title&gt;Just fucking use HTML&lt;/title&gt;
&lt;meta name=viewport content=&quot;width=device-width, initial-scale=1&quot;&gt;
&lt;meta name=color-scheme content=&quot;light dark&quot;&gt;
&lt;meta name=description content=&quot;Stop reinventing the wheel. The web was doing just fine before your bloated frameworks crawled out of the sewer.&quot;&gt;
&lt;meta name=robots content=&quot;index, follow&quot;&gt;
&lt;meta property=og:site_name content=&quot;Just fucking use HTML&quot;&gt;
&lt;meta property=og:title content=&quot;Just fucking use HTML&quot;&gt;
&lt;meta property=og:description content=&quot;Stop reinventing the wheel. The web was doing just fine before your bloated frameworks crawled out of the sewer.&quot;&gt;
&lt;meta property=og:image content=&quot;https://justfuckingusehtml.com/assets/images/og.png?v=d86f1a9&quot;&gt;
&lt;meta property=og:url content=https://justfuckingusehtml.com&gt;
&lt;meta property=og:type content=website&gt;
&lt;meta property=og:locale content=en_US&gt;
&lt;meta name=twitter:title content=&quot;Just fucking use HTML&quot;&gt;
&lt;meta name=twitter:description content=&quot;Stop reinventing the wheel. The web was doing just fine before your bloated frameworks crawled out of the sewer.&quot;&gt;
&lt;meta name=twitter:image content=&quot;https://justfuckingusehtml.com/assets/images/og.png?v=d86f1a9&quot;&gt;
&lt;meta name=twitter:card content=summary_large_image&gt;
&lt;meta name=twitter:creator content=@kyrylosilin&gt;
&lt;meta name=twitter:site content=@kyrylosilin&gt;
&lt;meta name=twitter:image:alt content=&quot;Just fucking use HTML&quot;&gt;
&lt;link rel=canonical href=https://justfuckingusehtml.com/&gt;
&lt;link rel=alternate hreflang=en href=https://justfuckingusehtml.com/&gt;
&lt;link rel=alternate hreflang=de href=https://justfuckingusehtml.com/de&gt;
&lt;link rel=alternate hreflang=es-AR href=https://justfuckingusehtml.com/es-AR&gt;
&lt;link rel=alternate hreflang=x-default href=https://justfuckingusehtml.com/&gt;
&lt;meta name=referrer content=no-referrer&gt;&lt;link rel=&quot;shortcut icon&quot; href=&quot;data:image/x-icon;base64,AAABAAMAMDAAAAEAIACoJQAANgAAACAgAAABACAAqBAAAN4lAAAQEAAAAQAgAGgEAACGNgAAKAAAADAAAABgAAAAAQAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////Mv///2P///+Q////uf///9b////y/////f////z////y////1v///7j///+Q////Yv///zEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////L////3f///+6////9f////////////////////////////////////////////////////////////////////X///+6////dv///y8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///zf///+P////5f///////////////////////////////////////////////////////////////////////////////////////////////////+T///+O////NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8e////f////9//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////3v///3////8dAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///0v///+3//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+3////SgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////af///9n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2f///2kAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///94////9/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////f///94AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///3j////4///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////3////eAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////af////f/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9////2kAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///9L////2v///////////////////////////////////////////////////////////////////////////////39/f/+/v7///////////////////////////////////////////////////////////////////////////////////////////////////////////9n///9KAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///x7///+3////////////////////////////////////////////////////////////////////////////////QEBA/wAAAP8AAAD/v7+///////////////////////////////////////////////////////////////////////////////////////////////////////////+3////HQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///4D/////////////////////////////////////////////////////////////////////////////////////AAAA/wAAAP8AAAD/f39/////////////////////////////////////////////////////////////////////////////////////////////////////////////////fwAAAAAAAAAAAAAAAAAAAAAAAAAA////OP///9//////////////////////////////////////////////////////////////////////////////////////AAAA/wAAAP8AAAD/QEBA////////////////////////////////////////////////////////////////////////////////////////////////////////////////3////zcAAAAAAAAAAAAAAAAAAAAA////j///////////////////////////////////////////////////////////////////////////////////////////QEBA/wAAAP8AAAD/QEBA/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////48AAAAAAAAAAAAAAAD///8v////5f//////////////////////////////////////////////////////////////////////////////////////////QEBA/wAAAP8AAAD/AAAA/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+X///8vAAAAAAAAAAD///93////////////////////////////////////////////////////////////////////////////////////////////////f39//wAAAP8AAAD/AAAA//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////93AAAAAAAAAAD///+6//////////////////////////////////////////////////////////9/f3//AAAA/39/f///////////////////////f39//wAAAP8AAAD/AAAA/7+/v/////////////////////////////////9/f3//AAAA/0BAQP////////////////////////////////////////////////////////////////////+6AAAAAP///zL////2/////////////////////////////////////////////////////0BAQP8AAAD/AAAA/wAAAP+/v7//////////////////v7+//wAAAP8AAAD/AAAA/39/f////////////////////////////7+/v/8AAAD/AAAA/wAAAP9AQED////////////////////////////////////////////////////////////////1////Mv///2P/////////////////////////////////////////////////////QEBA/wAAAP8AAAD/AAAA/wAAAP///////////////////////////wAAAP8AAAD/AAAA/39/f/////////////////////////////////8AAAD/AAAA/wAAAP8AAAD/QEBA////////////////////////////////////////////////////////////////Y////5D///////////////////////////////////////////////9AQED/AAAA/wAAAP8AAAD/AAAA/39/f////////////////////////////wAAAP8AAAD/AAAA/0BAQP////////////////////////////////9/f3//AAAA/wAAAP8AAAD/AAAA/0BAQP//////////////////////////////////////////////////////////kP///7n//////////////////////////////////////////0BAQP8AAAD/AAAA/wAAAP8AAAD/f39//////////////////////////////////0BAQP8AAAD/AAAA/0BAQP//////////////////////////////////////f39//wAAAP8AAAD/AAAA/wAAAP9AQED/////////////////////////////////////////////////////uf///9b/////////////////////////////////////QEBA/wAAAP8AAAD/AAAA/wAAAP9/f3///////////////////////////////////////0BAQP8AAAD/AAAA/wAAAP///////////////////////////////////////////39/f/8AAAD/AAAA/wAAAP8AAAD/QEBA////////////////////////////////////////////////1v////L///////////////////////////////9AQED/AAAA/wAAAP8AAAD/AAAA/39/f////////////////////////////////////////////39/f/8AAAD/AAAA/wAAAP////////////////////////////////////////////////9/f3//AAAA/wAAAP8AAAD/AAAA/0BAQP//////////////////////////////////////////8v////3//////////////////////////7+/v/8AAAD/AAAA/wAAAP8AAAD/f39//////////////////////////////////////////////////39/f/8AAAD/AAAA/wAAAP+/v7//////////////////////////////////////////////////f39//wAAAP8AAAD/AAAA/wAAAP9/f3///////////////////////////////////////f////3//////////////////////////39/f/8AAAD/AAAA/wAAAP8AAAD/f39//////////////////////////////////////////////////7+/v/8AAAD/AAAA/wAAAP9/f3//////////////////////////////////////////////////f39//wAAAP8AAAD/AAAA/wAAAP+/v7///////////////////////////////////////f////L///////////////////////////////9AQED/AAAA/wAAAP8AAAD/AAAA/39/f/////////////////////////////////////////////////8AAAD/AAAA/wAAAP9/f3////////////////////////////////////////////9/f3//AAAA/wAAAP8AAAD/AAAA/0BAQP//////////////////////////////////////////8v///9b/////////////////////////////////////QEBA/wAAAP8AAAD/AAAA/wAAAP9/f3////////////////////////////////////////////8AAAD/AAAA/wAAAP9AQED//////////////////////////////////////39/f/8AAAD/AAAA/wAAAP8AAAD/QEBA////////////////////////////////////////////////1v///7n//////////////////////////////////////////0BAQP8AAAD/AAAA/wAAAP8AAAD/f39///////////////////////////////////////9AQED/AAAA/wAAAP9AQED/////////////////////////////////f39//wAAAP8AAAD/AAAA/wAAAP9AQED/////////////////////////////////////////////////////uf///5H///////////////////////////////////////////////9AQED/AAAA/wAAAP8AAAD/AAAA/39/f/////////////////////////////////9AQED/AAAA/wAAAP8AAAD///////////////////////////9/f3//AAAA/wAAAP8AAAD/AAAA/0BAQP//////////////////////////////////////////////////////////kP///2P/////////////////////////////////////////////////////QEBA/wAAAP8AAAD/AAAA/wAAAP////////////////////////////////9/f3//AAAA/wAAAP8AAAD///////////////////////////8AAAD/AAAA/wAAAP8AAAD/QEBA////////////////////////////////////////////////////////////////Y////zL////2/////////////////////////////////////////////////////0BAQP8AAAD/AAAA/wAAAP////////////////////////////////9/f3//AAAA/wAAAP8AAAD/v7+///////////////////////8AAAD/AAAA/wAAAP9AQED////////////////////////////////////////////////////////////////2////MgAAAAD///+7//////////////////////////////////////////////////////////9AQED/AAAA/39/f/////////////////////////////////+/v7//AAAA/wAAAP8AAAD/f39///////////////////////+/v7//QEBA/39/f/////////////////////////////////////////////////////////////////////+6AAAAAAAAAAD///93////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAAA/wAAAP8AAAD/f39///////////////////////////////////////////////////////////////////////////////////////////////////////////93AAAAAAAAAAD///8w////5f//////////////////////////////////////////////////////////////////////////////////////////////////////////AAAA/wAAAP8AAAD/QEBA/////////////////////////////////////////////////////////////////////////////////////////////////////+X///8vAAAAAAAAAAAAAAAA////j///////////////////////////////////////////////////////////////////////////////////////////////////////////QEBA/wAAAP8AAAD/QEBA/////////////////////////////////////////////////////////////////////////////////////////////////////48AAAAAAAAAAAAAAAAAAAAA////OP///9//////////////////////////////////////////////////////////////////////////////////////////////////////QEBA/wAAAP8AAAD/AAAA////////////////////////////////////////////////////////////////////////////////////////////////3////zcAAAAAAAAAAAAAAAAAAAAAAAAAAP///4D/////////////////////////////////////////////////////////////////////////////////////////////////////f39//wAAAP8AAAD/AAAA////////////////////////////////////////////////////////////////////////////////////////////////fwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///x7///+4////////////////////////////////////////////////////////////////////////////////////////////////f39//wAAAP8AAAD/QEBA//////////////////////////////////////////////////////////////////////////////////////////+3////HgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///9L////2v///////////////////////////////////////////////////////////////////////////////////////////////7+/v/9/f3///////////////////////////////////////////////////////////////////////////////////////////9r///9LAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////av////j/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9////2kAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///3n////4///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////4////eAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///95////+P////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////f///94AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////av///9r/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2v///2kAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///0v///+4//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+3////SwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8e////gP///9//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////3////3////8eAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///zj///+P////5f///////////////////////////////////////////////////////////////////////////////////////////////////+X///+P////OAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////MP///3f///+7////9v////////////////////////////////////////////////////////////////////b///+6////d////y8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////Mv///2P///+R////uf///9b////y/////f////3////y////1v///7n///+Q////Y////zIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//gAH//wAA//wAAD//AAD/8AAAD/8AAP/AAAAD/wAA/4AAAAH/AAD/AAAAAP8AAP4AAAAAfwAA/AAAAAA/AAD4AAAAAB8AAPAAAAAADwAA4AAAAAAHAADgAAAAAAcAAMAAAAAAAwAAwAAAAAADAACAAAAAAAEAAIAAAAAAAQAAgAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAABAACAAAAAAAEAAIAAAAAAAQAAwAAAAAADAADAAAAAAAMAAOAAAAAABwAA4AAAAAAHAADwAAAAAA8AAPgAAAAAHwAA/AAAAAA/AAD+AAAAAH8AAP8AAAAA/wAA/4AAAAH/AAD/wAAAA/8AAP/wAAAP/wAA//wAAD//AAD//4AB//8AACgAAAAgAAAAQAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////JP///2T///+Z////xP///+z////7////+////+z////E////mv///2T///8lAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////RP///5X////k/////////////////////////////////////////////////////////+T///+V////RAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////Iv///4r////x///////////////////////////////////////////////////////////////////////////////x////iv///yIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///0r///+5////////////////////////////////////////////////////////////////////////////////////////////////////uP///0kAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///9Q////0P//////////////////////////////////////////////////////////////////////////////////////////////////////////////0P///1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////Sv///9D/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////z////0kAAAAAAAAAAAAAAAAAAAAAAAAAAP///yL///+5////////////////////////////////////////////////v7+//39/f/+/v7//////////////////////////////////////////////////////////////////////uP///yEAAAAAAAAAAAAAAAAAAAAA////iv////////////////////////////////////////////////////9/f3//AAAA/0BAQP//////////////////////////////////////////////////////////////////////////igAAAAAAAAAAAAAAAP///0T////x/////////////////////////////////////////////////////0BAQP8AAAD/QEBA///////////////////////////////////////////////////////////////////////////x////RAAAAAAAAAAA////lv//////////////////////////////////////////////////////////f39//wAAAP8AAAD///////////////////////////////////////////////////////////////////////////////+VAAAAAP///yX////k/////////////////////////////////////7+/v/////////////////+/v7//AAAA/wAAAP+/v7///////////////////////7+/v////////////////////////////////////////////////+T///8k////ZP////////////////////////////////////9/f3//AAAA/0BAQP///////////7+/v/8AAAD/AAAA/7+/v/////////////////9/f3//AAAA/wAAAP+/v7///////////////////////////////////////////2T///+a////////////////////////////////f39//wAAAP8AAAD/f39//////////////////wAAAP8AAAD/v7+//////////////////7+/v/8AAAD/AAAA/wAAAP+/v7//////////////////////////////////////mf///8T//////////////////////////39/f/8AAAD/AAAA/39/f///////////////////////AAAA/wAAAP9/f3///////////////////////39/f/8AAAD/AAAA/wAAAP+/v7/////////////////////////////////D////7P////////////////////9/f3//AAAA/wAAAP9/f3////////////////////////////9AQED/AAAA/0BAQP///////////////////////////39/f/8AAAD/AAAA/wAAAP+/v7///////////////////////////+z////7////////////////f39//wAAAP8AAAD/f39//////////////////////////////////0BAQP8AAAD/QEBA/////////////////////////////////39/f/8AAAD/AAAA/0BAQP//////////////////////////+/////v///////////////9/f3//AAAA/wAAAP9/f3//////////////////////////////////f39//wAAAP8AAAD/////////////////////////////////f39//wAAAP8AAAD/AAAA///////////////////////////7////7P////////////////////9/f3//AAAA/wAAAP9/f3////////////////////////////+/v7//AAAA/wAAAP+/v7///////////////////////39/f/8AAAD/AAAA/wAAAP+/v7///////////////////////////+z////E//////////////////////////9/f3//AAAA/wAAAP9/f3///////////////////////7+/v/8AAAD/AAAA/7+/v/////////////////9/f3//AAAA/wAAAP8AAAD/v7+/////////////////////////////////xP///5r///////////////////////////////9/f3//AAAA/wAAAP9/f3///////////////////////wAAAP8AAAD/v7+/////////////f39//wAAAP8AAAD/AAAA/7+/v/////////////////////////////////////+Z////ZP////////////////////////////////////9/f3//AAAA/39/f///////////////////////AAAA/wAAAP9/f3////////////+/v7//AAAA/wAAAP+/v7///////////////////////////////////////////2T///8l////5P////////////////////////////////////+/v7////////////////////////////9AQED/AAAA/0BAQP/////////////////////////////////////////////////////////////////////k////JAAAAAD///+W/////////////////////////////////////////////////////////////////////0BAQP8AAAD/QEBA/////////////////////////////////////////////////////////////////////5UAAAAAAAAAAP///0X////y////////////////////////////////////////////////////////////////f39//wAAAP8AAAD////////////////////////////////////////////////////////////////x////RAAAAAAAAAAAAAAAAP///4v///////////////////////////////////////////////////////////////+/v7//AAAA/wAAAP///////////////////////////////////////////////////////////////4oAAAAAAAAAAAAAAAAAAAAA////Iv///7n///////////////////////////////////////////////////////////////9/f3//f39///////////////////////////////////////////////////////////+5////IgAAAAAAAAAAAAAAAAAAAAAAAAAA////Sv///9D/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////0P///0oAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////Uf///9D//////////////////////////////////////////////////////////////////////////////////////////////////////////////9D///9QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////Sv///7n///////////////////////////////////////////////////////////////////////////////////////////////////+5////SgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////Iv///4v////y///////////////////////////////////////////////////////////////////////////////x////iv///yIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///0X///+W////5P/////////////////////////////////////////////////////////k////lv///0UAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8l////ZP///5r////E////7P////v////7////7P///8T///+a////ZP///yUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/8AD//8AAP/8AAA/+AAAH/AAAA/gAAAHwAAAA8AAAAOAAAABgAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAGAAAABwAAAA8AAAAPgAAAH8AAAD/gAAB/8AAA//wAA///AA/8oAAAAEAAAACAAAAABACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///0j///+U////2P////j////4////2f///5T///9IAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////J////5H////7////////////////////////////////////+////5H///8nAAAAAAAAAAAAAAAA////J////67/////////////////////////////////////////////////////////rv///ycAAAAAAAAAAP///5H/////////////////////v7+//39/f/////////////////////////////////////+RAAAAAP///0j////7/////////////////////7+/v/8AAAD/////////////////////////////////////+v///0j///+U////////////////f39//7+/v/+/v7//AAAA////////////f39//39/f/////////////////////+U////2f//////////f39//wAAAP///////////wAAAP+/v7///////39/f/8AAAD/f39/////////////////2P////j/////f39//wAAAP+/v7////////////9AQED/v7+/////////////f39//wAAAP+/v7////////////j////4/////39/f/8AAAD/v7+/////////////QEBA/39/f////////////39/f/8AAAD/f39////////////4////2f//////////f39//wAAAP+/v7///////39/f/9AQED//////39/f/8AAAD/f39/////////////////2P///5T///////////////9/f3////////////+/v7//QEBA//////9/f3//v7+//////////////////////5T///9I////+///////////////////////////v7+//wAAAP////////////////////////////////v///9IAAAAAP///5L//////////////////////////7+/v/9AQED///////////////////////////////+RAAAAAAAAAAD///8o////r/////////////////////////////////////////////////////////+u////JwAAAAAAAAAAAAAAAP///yj///+S////+/////////////////////////////////////v///+R////JwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///0j///+U////2f////j////4////2f///5T///9IAAAAAAAAAAAAAAAAAAAAAPAPAADAAwAAgAEAAIABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIABAACAAQAAwAMAAPAPAAA=&quot;&gt;&lt;style&gt;.sf-hidden{display:none!important}&lt;/style&gt;&lt;meta http-equiv=content-security-policy content=&quot;default-src &#39;none&#39;; font-src &#39;self&#39; data:; img-src &#39;self&#39; data:; style-src &#39;unsafe-inline&#39;; media-src &#39;self&#39; data:; script-src &#39;unsafe-inline&#39; data:; object-src &#39;self&#39; data:; frame-src &#39;self&#39; data:;&quot;&gt;&lt;/head&gt;
&lt;body&gt;
&lt;header&gt;
 &lt;h1&gt;Just fucking use HTML&lt;/h1&gt;
 &lt;p&gt;
 Hey, dipshit! You know what loads faster than your bloated, overengineered
 mess? Plain, unadulterated HTML. And you know what doesn&#39;t break every
 motherfucking Tuesday? HTML that just fucking works. Why the fuck are you
 overcomplicating things, you masochistic fuck? You&#39;re out here acting like
 you&#39;re building the next goddamn moon landing when all you need is a button
 and some text.
 &lt;/p&gt;
 &lt;p&gt;
 Newsflash, asshole: the web was doing just fine before your
 bloated frameworks crawled out of the sewer. You&#39;re out here dropping ten
 grand on some fancy-ass framework like it&#39;s a Gucci purse, just to haul
 around the same shitty groceries you could&#39;ve carried in a plastic bag from
 1995. Why the hell are you jumping through all these hoops when HTML&#39;s been
 sitting there, ready to go, since the dawn of the goddamn internet?
 &lt;/p&gt;
&lt;/header&gt;
&lt;section&gt;
 &lt;h2&gt;
 So you call yourself a web developer? Fucking pathetic.
 &lt;/h2&gt;
 &lt;p&gt;
 You&#39;ve gotta be kidding me, asshat. Do you even fucking know how to display
 a button on screen without the current modern fuckery you lean on? Here,
 little shit, is your button:
 &lt;/p&gt;
 &lt;button&gt;Fucking button&lt;/button&gt;
 &lt;p&gt;
 Tattoo this code on your forehead so that you&#39;ll remember when you look at
 your fat face in the mirror:
 &lt;/p&gt;
 &lt;pre style=display:inline-block;transform:scaleX(-1)&gt;&lt;code&gt;&amp;lt;button&amp;gt;Fucking button&amp;lt;/button&amp;gt;&lt;/code&gt;&lt;/pre&gt;
 &lt;p&gt;
 But did you notice something, you smug bastard? This HTML shit is the
 fucking Energizer Bunny of the web. It just keeps going, no fancy plugins or
 updates required. Your precious framework&#39;s out there choking on its own
 hype, obsolete before you even finish the tutorial, while this button&#39;s
 still kicking ass like it owns the place. It&#39;s been here since the web was a
 screaming toddler, and it&#39;ll still be standing when your stack&#39;s just a
 dusty footnote in some asshole&#39;s commit history.
 &lt;/p&gt;
 &lt;p&gt;
 Can&#39;t make shit beautiful with HTML, you say? Eat this, you pixel-pushing fuck:
 &lt;/p&gt;
 &lt;button&gt;&lt;em&gt;&lt;strong&gt;&lt;u&gt;Fucking beautiful button&lt;/u&gt;&lt;/strong&gt;&lt;/em&gt;&lt;/button&gt;
 &lt;p&gt;
 Why it&#39;s beautiful:
 &lt;/p&gt;
 &lt;ul&gt;
 &lt;li&gt;It is visible&lt;/li&gt;
 &lt;li&gt;It is clickable&lt;/li&gt;
 &lt;li&gt;It&#39;s just fucking beautiful&lt;/li&gt;
 &lt;/ul&gt;
 &lt;p&gt;
 Seriously, what else do you fucking need, you entitled prick? A goddamn
 participation trophy for using a framework to do what HTML does out of the
 box? Maybe a gold star for managing to overcomplicate something that&#39;s been
 solved for decades? Get over yourself, asshole. HTML works, and it doesn&#39;t
 need your bullshit to prove it.
 &lt;/p&gt;
&lt;/section&gt;
&lt;section&gt;
 &lt;h2&gt;Now that we have AI, you &lt;em&gt;still&lt;/em&gt; use JS frameworks? Are you fucking serious?&lt;/h2&gt;
 &lt;p&gt;
 AI&#39;s out here, a gift from the heavens (or at least from Sam Altman&#39;s nerd
 fortress) ready to write your shitty little to-do app in five seconds flat.
 It can churn out pixel-perfect HTML, debug your fuck-ups, and probably even
 wipe your ass if you ask nicely. But no, you&#39;re still humping your
 frameworks like they&#39;re the last lifeboat on the Titanic. What the hell is
 wrong with you? Are you that addicted to 10,000 dependencies and a build
 process that takes longer than your last failed relationship?
 &lt;/p&gt;
 &lt;p&gt;
 Sam Altman&#39;s AI army is laughing its silicon balls off while you&#39;re
 knee-deep in React&#39;s virtual DOMshit, praying your app doesn&#39;t choke on its
 own bloated corpse. This isn&#39;t progress. It&#39;s a fucking &lt;em&gt;tragedy&lt;/em&gt;.
 You&#39;ve got a shiny new Ferrari in your garage, and you&#39;re still riding a
 rusty tricycle with a flat tire. Grow the fuck up.
 &lt;/p&gt;
&lt;/section&gt;
&lt;section&gt;
 &lt;h2&gt;Why HTML rocks&lt;/h2&gt;
 &lt;h3&gt;Everybody knows HTML&lt;/h3&gt;
 &lt;p&gt;
 Listen up, dipshit. &lt;em&gt;Every-fucking-body&lt;/em&gt; knows HTML. Your dearly great grandma?
 She was out there in the goddamn trenches of World War 2, dodging Nazi bullets
 while hand-coding &lt;code&gt;&amp;lt;table&amp;gt;&lt;/code&gt; layouts to send encrypted messages to the Allies.
 Your grandad? He&#39;s got a motherfucking PhD in HTML from the prestigious
 University of Who-Gives-a-Rat&#39;s-Ass, probably hanging right next to his &quot;I
 Survived Dial-Up&quot; trophy. Your dad? That bastard was mumbling
 &lt;code&gt;&amp;lt;div&amp;gt;&lt;/code&gt; and &lt;code&gt;&amp;lt;span&amp;gt;&lt;/code&gt; before he could even
 choke out &quot;mama&quot;. Shit, even your drooling mutt probably has a side gig
 churning out HTML sites on Fiverr. So why the fuck are we still stuck
 answering your brain-dead questions? Jesus Christ, get with the program.
 &lt;/p&gt;
 &lt;h3&gt;No fucking hydration errors. Drink some water, asshole&lt;/h3&gt;
 &lt;p&gt;
 What in the &lt;em&gt;ever-loving&lt;/em&gt; fuck is a hydration error? Sounds like some hipster
 bullshit a barista would spew when your overpriced oat milk latte isn&#39;t wet
 enough. &quot;Oh, my bad, bro, your coffee&#39;s got a hydration error&quot;. Get the fuck
 outta here. And &quot;tree shaking&quot;? Are you kidding me? What is this, a coding
 bootcamp or a lumberjack convention? &quot;Yeah, boss, I spent all day shaking trees
 to trim my JavaScript bundle. Where&#39;s my flannel shirt?&quot;. Who the hell invents
 this pretentious crap? I don&#39;t have time to decode your buzzword salad, you
 self-important jackass. HTML doesn&#39;t pull this nonsense. It just fucking works.
 &lt;/p&gt;
 &lt;h3&gt;You don&#39;t need to &quot;support&quot; HTML&lt;/h3&gt;
 &lt;p&gt;
 Ever seen some motherfucker hire a whole team just to babysit HTML? That&#39;s
 fucking right. Nobody does that bullshit. HTML is so damn reliable it
 doesn&#39;t need a 24/7 support hotline like some needy-ass framework. While
 your bloated, over-engineered frameworks are out there throwing tantrums
 every time a browser updates or crying for patches every five minutes, HTML
 just sits back, cracks a beer, and does its goddamn job. So next time some
 slick salesman tries to shove &quot;premium HTML support&quot; down your throat, tell
 them to fuck off.
 &lt;/p&gt;
 &lt;h3&gt;You don&#39;t need to &quot;deploy&quot; HTML&lt;/h3&gt;
 &lt;p&gt;
 Deploying HTML? That&#39;s easier than deleting your browser history after a
 porn binge. Just throw your files into a web server directory, and boom. The
 whole fucking internet can see your crappy page. No 12-step deployment
 process, no DevOps wizards casting spells, no fucking Docker containers or
 CI/CD pipelines. Just drag, drop, and you&#39;re done. Meanwhile, your fancy
 frameworks need a goddamn NASA launch sequence just to push a button that
 says &quot;Hello, World&quot;. HTML doesn&#39;t give a shit about your trendy deployment
 tools. It&#39;s the dive bar of the web: always open, no frills, just works.
 Your framework? The hipster café that&quot;s &quot;temporarily closed&quot; every time you
 need it.
 &lt;/p&gt;
&lt;/section&gt;
&lt;section&gt;
 &lt;h2&gt;
 You don&#39;t need Sparkling Ass UI to make shit look good, dumbass
 &lt;/h2&gt;
 &lt;p&gt;
 All you need is fucking &lt;em&gt;brains&lt;/em&gt;. Every year, yet another steaming pile of
 shit gets released: blazingly fast frameworks that are two farts ahead of
 the previous &quot;groundbreaking&quot; crap. Some call it progress. More rounded
 corners, more colorful colors, and one more thing to learn.
 &lt;/p&gt;
 &lt;p&gt;
 &lt;em&gt;*&lt;sup&gt;F&lt;/sup&gt;u&lt;sup&gt;c&lt;/sup&gt;&lt;sub&gt;k&lt;/sub&gt; t&lt;sub&gt;h&lt;/sub&gt;&lt;sup&gt;a&lt;/sup&gt;&lt;sub&gt;t&lt;/sub&gt;*&lt;/em&gt;
 &lt;/p&gt;
 &lt;p&gt;
 Just fucking use HTML. I shit you not, it actually looks good:
 &lt;/p&gt;
 &lt;ul&gt;
 &lt;li&gt;&lt;b&gt;Bold text&lt;/b&gt;? Check.&lt;/li&gt;
 &lt;li&gt;&lt;u&gt;Underlined text&lt;/u&gt;. Got it.&lt;/li&gt;
 &lt;li&gt;&lt;s&gt;Strike fucking through&lt;/s&gt;? &lt;mark&gt;Highlighted text&lt;/mark&gt;? &lt;em&gt;Emphasized text&lt;/em&gt;?&lt;/li&gt;
 &lt;li&gt;Check ✓, check ✓, and ~holy shit~ check again. HTML&#39;s been doing this while you were still drooling
 over React.&lt;/li&gt;
 &lt;/ul&gt;
 &lt;p&gt;
 Oh, and abbreviations? &lt;abbr title=&quot;Hyper Mother Fucking Text&quot;&gt;HTML&lt;/abbr&gt;.
 Go ahead, find your dirty trackpad behind the slice of pizza and hover over this motherfucker.
 &lt;/p&gt;
 &lt;h2&gt;h2: Big motherfucker&lt;/h2&gt;
 &lt;p&gt;Perfect for screaming your main points at the top of your lungs, like &quot;FUCK FRAMEWORKS!&quot;&lt;/p&gt;
 &lt;h3&gt;h3: Slightly smaller motherfucker&lt;/h3&gt;
 &lt;p&gt;Still loud enough to tell your subpoints to sit down and shut up.&lt;/p&gt;
 &lt;h4&gt;h4: Even smaller&lt;/h4&gt;
 &lt;p&gt;For when you need to whisper some passive-aggressive bullshit.&lt;/p&gt;
 &lt;h5&gt;h5: You can still see me&lt;/h5&gt;
 &lt;p&gt;Small, but not small enough to ignore, like that fucking bug in your framework that haunts your every commit.&lt;/p&gt;
 &lt;h6&gt;h6: Nobody even uses these&lt;/h6&gt;
 &lt;p&gt;Unless you&#39;re writing the fine print for your soul-selling terms of service.&lt;/p&gt;
 &lt;p&gt;
 See? HTML&#39;s got hierarchy, style, and your framework&#39;s out here trying to
 reinvent the wheel, but HTML already built the goddamn car, you
 overcomplicating prick.
 &lt;/p&gt;
&lt;/section&gt;
&lt;section&gt;
 &lt;h2&gt;Interactive shit? HTML&#39;s got it, no JS needed&lt;/h2&gt;
 &lt;p&gt;
 Think you need your precious JavaScript for interactivity? Wrong, you clueless fuck. HTML&#39;s got expandable sections
 baked in:
 &lt;/p&gt;
 &lt;details&gt;
 &lt;summary&gt;Expandable motherfucker&lt;/summary&gt;
 &lt;p&gt;Fucking boo, motherfucker 👻&lt;/p&gt;
 &lt;/details&gt;
 &lt;p&gt;
 And popovers? Yeah, native, no framework bloat. Eat this:
 &lt;/p&gt;
 &lt;button popovertarget=my-popover&gt;Open it, coward&lt;/button&gt;
 &lt;div popover id=my-popover class=sf-hidden&gt;Didn&#39;t even know HTML could do this, huh? Suck it.&lt;/div&gt;
 &lt;h2&gt;Dialogs that&#39;ll make you cry for mommy&lt;/h2&gt;
 &lt;p&gt;
 Still not impressed? Fine, fine. Toss in a pinch of inline JS (right in the HTML, you purist twat) and you&#39;ve got
 native dialogs.
 Pay close attention: no build steps, no frameworks, just raw power.
 &lt;/p&gt;
 &lt;dialog id=myDialog class=sf-hidden&gt;
 
 
 &lt;/dialog&gt;
 &lt;button&gt;Open the damn dialog&lt;/button&gt;
&lt;/section&gt;
&lt;section&gt;
 &lt;h2&gt;Forms that work on every Casio calculator&lt;/h2&gt;
 &lt;form action=/submit method=post&gt;
 &lt;fieldset&gt;
 &lt;legend&gt;Prepare to be underwhelmed, asshole&lt;/legend&gt;
 &lt;label for=text-input&gt;Fucking text input:&lt;/label&gt;
 &lt;input type=text id=text-input name=text-input placeholder=&quot;Type something, genius&quot; pattern=[A-Za-z]+ title=&quot;Letters only, you illiterate fuck&quot; required value&gt;
 &lt;br&gt;
 &lt;label for=email-input&gt;Email input for spam:&lt;/label&gt;
 &lt;input type=email id=email-input name=email-input placeholder=spam@justfuckingusehtml.com required value&gt;
 &lt;br&gt;
 &lt;label for=password-input&gt;Password you&#39;ll forget in 5 minutes (8-20 characters, because fuck you):&lt;/label&gt;
 &lt;input type=password id=password-input name=password-input minlength=8 maxlength=20 required&gt;
 &lt;br&gt;
 &lt;label for=number-input&gt;Pick a number between 0 and 100, like it fucking matters:&lt;/label&gt;
 &lt;input type=number id=number-input name=number-input min=0 max=100 step=1 value&gt;
 &lt;br&gt;
 &lt;label for=range-input&gt;Slide this to show how much you love HTML (0 to 100%):&lt;/label&gt;
 &lt;input type=range id=range-input name=range-input min=0 max=100 value=50&gt;
 &lt;br&gt;
 &lt;label for=date-input&gt;Choose a date for your inevitable meltdown:&lt;/label&gt;
 &lt;input type=date id=date-input name=date-input value&gt;
 &lt;br&gt;
 &lt;label for=time-input&gt;Set a time for your daily existential crisis:&lt;/label&gt;
 &lt;input type=time id=time-input name=time-input value&gt;
 &lt;br&gt;
 &lt;label for=datetime-local-input&gt;Pick a date and time for your next panic error:&lt;/label&gt;
 &lt;input type=datetime-local id=datetime-local-input name=datetime-local-input value&gt;
 &lt;br&gt;
 &lt;label for=month-input&gt;Select a month for your quarterly breakdown:&lt;/label&gt;
 &lt;input type=month id=month-input name=month-input value&gt;
 &lt;br&gt;
 &lt;label for=week-input&gt;Choose a week to question all your life choices:&lt;/label&gt;
 &lt;input type=week id=week-input name=week-input value&gt;
 &lt;br&gt;
 &lt;label for=color-input&gt;Pick a color that matches your soul (hint: it&#39;s probably gray):&lt;/label&gt;
 &lt;input type=color id=color-input name=color-input value=#000000&gt;
 &lt;br&gt;
 &lt;label for=file-input&gt;Upload a file you&#39;ll never find again (PDF only, because we&#39;re assholes):&lt;/label&gt;
 &lt;input type=file id=file-input name=file-input accept=.pdf multiple value&gt;
 &lt;br&gt;
 &lt;label&gt;
 &lt;input type=checkbox name=checkbox value=1&gt;
 Check this if you&#39;re a robot (we won&#39;t tell, you soulless fuck)
 &lt;/label&gt;
 &lt;br&gt;
 &lt;label&gt;
 &lt;input type=radio name=radio-group value=option1&gt;
 Pick your poison: Option 1
 &lt;/label&gt;
 &lt;br&gt;
 &lt;label&gt;
 &lt;input type=radio name=radio-group value=option2&gt;
 Pick your poison: Option 2
 &lt;/label&gt;
 &lt;br&gt;
 &lt;label for=select-input&gt;Choose your favorite way to waste time, you lazy prick:&lt;/label&gt;
 &lt;select name=select-input id=select-input&gt;
        &lt;optgroup label=&quot;Productive Wasting&quot;&gt;
 &lt;option value=1 selected&gt;Organizing your desk for the 10th time&lt;/option&gt;
 &lt;option value=2&gt;Cleaning your inbox (lol, good luck)&lt;/option&gt;
 &lt;/optgroup&gt;
        &lt;optgroup label=&quot;Unproductive Wasting&quot;&gt;
 &lt;option value=3&gt;Watching cat videos&lt;/option&gt;
 &lt;option value=4&gt;Staring at the wall like a dumbass&lt;/option&gt;
 &lt;/optgroup&gt;
      &lt;/select&gt;
 &lt;br&gt;
 &lt;label for=textarea&gt;Pour your heart out here, or just bitch about frameworks:&lt;/label&gt;
 &lt;textarea name=textarea id=textarea rows=4 cols=40 placeholder=&quot;Go on, vent your pathetic frustrations&quot;&gt;&lt;/textarea&gt;
 &lt;br&gt;
 &lt;label for=browser-input&gt;Admit which browser you use (we already know it&#39;s trash):&lt;/label&gt;
 &lt;input type=text id=browser-input list=browsers value&gt;
 &lt;datalist id=browsers class=sf-hidden&gt;
 
 &lt;/datalist&gt;
 &lt;br&gt;
 &lt;label for=meter&gt;Your current level of giving a fuck:&lt;/label&gt;
 &lt;meter id=meter value=0.6&gt;60% (barely)&lt;/meter&gt;
 &lt;br&gt;
 &lt;label for=progress&gt;How close you are to rage-quitting this form:&lt;/label&gt;
 &lt;progress id=progress value=70 max=100&gt;70% (almost there)&lt;/progress&gt;
 &lt;br&gt;
 &lt;/fieldset&gt;
 &lt;button type=submit&gt;Submit (to your fate, you pain junkie)&lt;/button&gt;
 &lt;button type=reset&gt;Reset (your expectations, not that they were high)&lt;/button&gt;
 &lt;/form&gt;
 &lt;p&gt;
 &lt;small&gt;
 *This form is powered real, raw HTML. No frameworks were harmed, because
 they&#39;re useless anyway.*
 &lt;/small&gt;
 &lt;/p&gt;
 &lt;p&gt;
 So, what&#39;s your excuse now, huh? Still clinging to your trendy frameworks
 like a scared little bitch? HTML&#39;s like that crusty old barstool that&#39;s seen
 every fight and still holds your drunk ass up, no questions asked.
 Frameworks are the flimsy plastic chairs that snap the second you lean back
 too hard: overengineered bullshit that collapses under its own weight. HTML
 doesn&#39;t need your pity or your goddamn fanfare. It&#39;s too busy being the
 spine of every site you&#39;ve ever clicked on, you ungrateful prick. So keep
 jerking off to your latest tech fad. HTML&#39;s over here, sipping whiskey,
 ready to outlast your entire career.
 &lt;/p&gt;
&lt;/section&gt;
&lt;hr&gt;
&lt;section&gt;
 &lt;h2&gt;&quot;Why not write Assembly then?&quot;&lt;/h2&gt;
 &lt;p&gt;
 Oh, here comes the genius motherfucker with the big-brain counterargument:
 &quot;Well, if HTML&#39;s so great, why not just write everything in Assembly, huh?&quot;.
 Wow, look at you, you clever little prick. Did you come up with that all by
 yourself? Writing web pages in Assembly is like using a fucking scalpel to
 slice your overcooked steak: sure, it&#39;ll get the job done, but you&#39;re gonna
 look like a complete asshole while you&#39;re at it. HTML just works, you
 absolute tool. It&#39;s been the backbone of the web since Al Gore flipped the
 switch, and it&#39;ll still be here long after your trendy framework is rotting
 in a GitHub graveyard. So take your smartass logic and shove it. HTML&#39;s
 king, and you&#39;re just a peasant with a keyboard.
 &lt;/p&gt;
&lt;/section&gt;
&lt;section&gt;
 &lt;h2&gt;HTML lends crutches to your fucking JS&lt;/h2&gt;
 &lt;span hidden id=i_am_doofus class=sf-hidden&gt;
 Yes you are, motherfucker
 &lt;/span&gt;
 &lt;p&gt;
 Did you know that when you slap an id on your HTML element, HTML doesn&#39;t
 just sit there like a lazy fuck. It actually creates a fucking variable in
 JavaScript for you? Yeah, you heard me, you clueless bastard. You don&#39;t even
 have to lift a finger. HTML&#39;s out here doing the heavy lifting while your JS
 is still trying to figure out how to tie its shoes.
 &lt;/p&gt;
 &lt;p&gt;
 Now go try it, open the console and type &quot;i_am_doofus&quot;. Boom! There it is, you
 ungrateful shit. HTML just handed you a variable on a silver platter, and
 you didn&#39;t even have to beg for it. This is basic shit, and if you didn&#39;t
 know this, congrats. You&#39;re officially dumber than a bag of rocks.
 &lt;/p&gt;
 &lt;p&gt;
 This is HTML flexing its muscles, showing you it&#39;s not just some static
 bitch. It&#39;s dynamic, it&#39;s powerful, and it&#39;s been carrying your sorry ass
 since day one. Meanwhile, your JS is out here acting like it&#39;s the star of
 the show, when really, it&#39;s just riding HTML&#39;s coattails like a cheap date.
 &lt;/p&gt;
 &lt;p&gt;
 So next time you&#39;re jerking off to your fancy JS frameworks, remember: HTML&#39;s
 the one doing the real work, and it&#39;s laughing at your overcomplicated
 bullshit.
 &lt;/p&gt;
&lt;/section&gt;
&lt;section&gt;
 &lt;h2&gt;Words of wisdom&lt;/h2&gt;
 &lt;blockquote cite=https://justfuckinghtml.com&gt;
 &lt;p&gt;
 It&#39;s the kind of page that makes you want to weep tears of joy and throw
 your overpriced JavaScript framework out the window. It&#39;s the kind of page
 that makes you want to quit your job and become a full-time HTML
 evangelist. It&#39;s the kind of page that makes you want to start a cult
 dedicated to the worship of HTML. It&#39;s the kind of page that makes you
 want to write a love letter to HTML and send it to the HTML gods. It&#39;s the
 kind of page that makes you want to build a shrine to HTML in your living
 room and invite all your friends over for a candlelit HTML worship
 session. It&#39;s the kind of page that makes you want to start a YouTube
 channel dedicated to HTML tutorials and rants. It&#39;s the kind of page that
 makes you want to write a book about HTML and self-publish it on Amazon.
 It&#39;s the kind of page that makes you want to start a TikTok account
 dedicated to HTML and post daily HTML dance videos. It&#39;s the kind of page
 that makes you want to start a LinkedIn account dedicated to HTML and
 connect with other HTML professionals.
 &lt;/p&gt;
 &lt;/blockquote&gt;
 &lt;p&gt;— &lt;cite&gt;Just Fucking Use HTML&lt;/cite&gt;&lt;/p&gt;
&lt;/section&gt;
&lt;footer&gt;
 &lt;hr&gt;
 &lt;p&gt;
 &lt;small&gt;
 © Just Fucking Use HTML. All rights reserved, you framework-loving losers.
 &lt;/small&gt;
 &lt;/p&gt;
 &lt;p&gt;
 &lt;small&gt;
 Built by &lt;a href=https://x.com/kyrylosilin&gt;@kyrylosilin&lt;/a&gt; | &lt;a href=https://bsky.app/profile/kyrylo.org&gt;bluesky:@kyrylosilin&lt;/a&gt;
 &lt;/small&gt;
 &lt;/p&gt;
 &lt;p&gt;
 &lt;small&gt;
 If you&#39;re &lt;em&gt;still&lt;/em&gt; using frameworks, at least have the decency to
 slap an &lt;a href=https://telebugs.com/&gt;error tracker&lt;/a&gt; on that mess
 early. Your app&#39;s gonna crash and burn anyway, even if it&#39;s raw HTML, but
 might as well watch it as it unfolds.
 &lt;/small&gt;
 &lt;/p&gt;
 &lt;p&gt;
 &lt;small&gt;
 Inspired by → &lt;a href=https://motherfuckingwebsite.com/ rel=&quot;nofollow noreferrer noopener&quot;&gt;this&lt;/a&gt; motherfucker, who probably knows more about web development than you ever will.
 &lt;/small&gt;
 &lt;/p&gt;
 &lt;p&gt;
 &lt;small&gt;
 &lt;strong&gt;English&lt;/strong&gt; | &lt;a href=https://justfuckingusehtml.com/de&gt;Deutsch&lt;/a&gt; | &lt;a href=https://justfuckingusehtml.com/es-AR&gt;Español (es-AR)&lt;/a&gt;
 &lt;/small&gt;
 &lt;/p&gt;
&lt;/footer&gt;
&lt;div style=color-scheme:unset;forced-color-adjust:unset;mask:unset;math-depth:unset;position:absolute;position-anchor:unset;text-size-adjust:unset;appearance:unset;color:unset;font:unset;font-palette:unset;font-synthesis:unset;position-area:unset;text-orientation:unset;text-rendering:unset;text-spacing-trim:unset;-webkit-font-smoothing:unset;-webkit-locale:unset;-webkit-text-orientation:unset;-webkit-writing-mode:unset;writing-mode:unset;zoom:unset;accent-color:unset;place-content:unset;place-items:unset;place-self:unset;alignment-baseline:unset;anchor-name:unset;anchor-scope:unset;animation-composition:unset;animation:unset;app-region:unset;aspect-ratio:unset;backdrop-filter:unset;backface-visibility:unset;background:unset;background-blend-mode:unset;baseline-shift:unset;baseline-source:unset;block-size:unset;border-block:unset;border:unset;border-radius:unset;border-collapse:unset;border-end-end-radius:unset;border-end-start-radius:unset;border-inline:unset;border-start-end-radius:unset;border-start-start-radius:unset;bottom:unset;box-decoration-break:unset;box-shadow:unset;box-sizing:unset;break-after:unset;break-before:unset;break-inside:unset;buffered-rendering:unset;caption-side:unset;caret-color:unset;clear:unset;clip:unset;clip-path:unset;clip-rule:unset;color-interpolation:unset;color-interpolation-filters:unset;color-rendering:unset;columns:unset;column-fill:unset;gap:unset;column-rule:unset;column-span:unset;contain:unset;contain-intrinsic-block-size:unset;contain-intrinsic-size:unset;contain-intrinsic-inline-size:unset;container:unset;content:unset;content-visibility:unset;counter-increment:unset;counter-reset:unset;counter-set:unset;cursor:unset;cx:unset;cy:unset;d:unset;display:block;dominant-baseline:unset;dynamic-range-limit:unset;empty-cells:unset;field-sizing:unset;fill:unset;fill-opacity:unset;fill-rule:unset;filter:unset;flex:unset;flex-flow:unset;float:unset;flood-color:unset;flood-opacity:unset;grid:unset;grid-area:unset;height:unset;hyphenate-character:unset;hyphenate-limit-chars:unset;hyphens:unset;image-orientation:unset;image-rendering:unset;initial-letter:unset;inline-size:unset;inset-block:unset;inset-inline:unset;interpolate-size:unset;isolation:unset;left:0px;letter-spacing:unset;lighting-color:unset;line-break:unset;list-style:unset;margin-block:unset;margin:unset;margin-inline:unset;marker:unset;mask-type:unset;math-shift:unset;math-style:unset;max-block-size:unset;max-height:unset;max-inline-size:unset;max-width:unset;min-block-size:unset;min-height:unset;min-inline-size:unset;min-width:unset;mix-blend-mode:unset;object-fit:unset;object-position:unset;object-view-box:unset;offset:unset;opacity:unset;order:unset;orphans:unset;outline:unset;outline-offset:unset;overflow-anchor:unset;overflow-block:unset;overflow-clip-margin:unset;overflow-inline:unset;overflow-wrap:unset;overflow:unset;overlay:unset;overscroll-behavior-block:unset;overscroll-behavior-inline:unset;overscroll-behavior:unset;padding-block:unset;padding:unset;padding-inline:unset;page:unset;page-orientation:unset;paint-order:unset;perspective:unset;perspective-origin:unset;pointer-events:unset;position-try:unset;position-visibility:unset;print-color-adjust:unset;quotes:unset;r:unset;resize:unset;right:unset;rotate:unset;ruby-align:unset;ruby-position:unset;rx:unset;ry:unset;scale:unset;scroll-behavior:unset;scroll-initial-target:unset;scroll-margin-block:unset;scroll-margin:unset;scroll-margin-inline:unset;scroll-marker-group:unset;scroll-padding-block:unset;scroll-padding:unset;scroll-padding-inline:unset;scroll-snap-align:unset;scroll-snap-stop:unset;scroll-snap-type:unset;scroll-timeline:unset;scrollbar-color:unset;scrollbar-gutter:unset;scrollbar-width:unset;shape-image-threshold:unset;shape-margin:unset;shape-outside:unset;shape-rendering:unset;size:unset;speak:unset;stop-color:unset;stop-opacity:unset;stroke:unset;stroke-dasharray:unset;stroke-dashoffset:unset;stroke-linecap:unset;stroke-linejoin:unset;stroke-miterlimit:unset;stroke-opacity:unset;stroke-width:unset;tab-size:unset;table-layout:unset;text-align:unset;text-align-last:unset;text-anchor:unset;text-box:unset;text-combine-upright:unset;text-decoration:unset;text-decoration-skip-ink:unset;text-emphasis:unset;text-emphasis-position:unset;text-indent:unset;text-overflow:unset;text-shadow:unset;text-transform:unset;text-underline-offset:unset;text-underline-position:unset;text-wrap:unset;timeline-scope:unset;top:0px;touch-action:unset;transform:unset;transform-box:unset;transform-origin:unset;transform-style:unset;transition:unset;translate:unset;user-select:unset;vector-effect:unset;vertical-align:unset;view-timeline:unset;view-transition-class:unset;view-transition-name:unset;visibility:unset;border-spacing:unset;-webkit-box-align:unset;-webkit-box-decoration-break:unset;-webkit-box-direction:unset;-webkit-box-flex:unset;-webkit-box-ordinal-group:unset;-webkit-box-orient:unset;-webkit-box-pack:unset;-webkit-box-reflect:unset;-webkit-line-break:unset;-webkit-line-clamp:unset;-webkit-mask-box-image:unset;-webkit-rtl-ordering:unset;-webkit-ruby-position:unset;-webkit-tap-highlight-color:unset;-webkit-text-combine:unset;-webkit-text-decorations-in-effect:unset;-webkit-text-fill-color:unset;-webkit-text-security:unset;-webkit-text-stroke:unset;-webkit-user-drag:unset;white-space-collapse:unset;widows:unset;width:unset;will-change:unset;word-break:unset;word-spacing:unset;x:unset;y:unset;z-index:unset&gt;&lt;template shadowrootmode=closed&gt;&lt;style&gt;.kpxc-username-icon{position:absolute;cursor:pointer}.kpxc-username-icon.disconnected{background:url(chrome-extension://oboonakemofpalcgghocfoadofidjkkk/icons/disconnected.svg)right no-repeat;background-size:contain}.kpxc-username-icon.disconnected-moz{background:url(moz-extension://oboonakemofpalcgghocfoadofidjkkk/icons/disconnected.svg)right no-repeat;background-size:contain}.kpxc-username-icon.lock{background:url(chrome-extension://oboonakemofpalcgghocfoadofidjkkk/icons/locked.svg)right no-repeat;background-size:contain}.kpxc-username-icon.lock-moz{background:url(moz-extension://oboonakemofpalcgghocfoadofidjkkk/icons/locked.svg)right no-repeat;background-size:contain}.kpxc-username-icon.unlock{background:url(chrome-extension://oboonakemofpalcgghocfoadofidjkkk/icons/keepassxc.svg)right no-repeat;background-size:contain}.kpxc-username-icon.unlock-moz{background:url(moz-extension://oboonakemofpalcgghocfoadofidjkkk/icons/keepassxc.svg)right no-repeat;background-size:contain}&lt;/style&gt;&lt;div class=&quot;kpxc kpxc-username-icon lock&quot; title=&quot;Database is locked.&quot; size=16 offset=1 kpxc-pwgen-field-id=null style=z-index:10000000;width:16px;height:16px;top:2683.21px;left:297.784px;filter:saturate(100%)&gt;&lt;/div&gt;&lt;/template&gt;&lt;/div&gt;&lt;script data-template-shadow-root&gt;(()=&gt;{document.currentScript.remove();processNode(document);function processNode(node){node.querySelectorAll(&quot;template[shadowrootmode]&quot;).forEach(element=&gt;{let shadowRoot = element.parentElement.shadowRoot;if (!shadowRoot) {try {shadowRoot=element.parentElement.attachShadow({mode:element.getAttribute(&quot;shadowrootmode&quot;),delegatesFocus:element.getAttribute(&quot;shadowrootdelegatesfocus&quot;)!=null,clonable:element.getAttribute(&quot;shadowrootclonable&quot;)!=null,serializable:element.getAttribute(&quot;shadowrootserializable&quot;)!=null});shadowRoot.innerHTML=element.innerHTML;element.remove()} catch (error) {} if (shadowRoot) {processNode(shadowRoot)}}})}})()&lt;/script&gt;" data-download-link="" data-download-label="Download Html">
  <code class="language-html">&lt;!DOCTYPE html&gt; &lt;html lang=en-US style&gt;&lt;!--
 Page saved with SingleFile 
 url: https://justfuckingusehtml.com/ 
 saved date: Fri May 16 2025 10:01:50 GMT-0400 (Eastern Daylight Time)
--&gt;&lt;meta charset=utf-8&gt;
&lt;title&gt;Just fucking use HTML&lt;/title&gt;
&lt;meta name=viewport content=&quot;width=device-width, initial-scale=1&quot;&gt;
&lt;meta name=color-scheme content=&quot;light dark&quot;&gt;
&lt;meta name=description content=&quot;Stop reinventing the wheel. The web was doing just fine before your bloated frameworks crawled out of the sewer.&quot;&gt;
&lt;meta name=robots content=&quot;index, follow&quot;&gt;
&lt;meta property=og:site_name content=&quot;Just fucking use HTML&quot;&gt;
&lt;meta property=og:title content=&quot;Just fucking use HTML&quot;&gt;
&lt;meta property=og:description content=&quot;Stop reinventing the wheel. The web was doing just fine before your bloated frameworks crawled out of the sewer.&quot;&gt;
&lt;meta property=og:image content=&quot;https://justfuckingusehtml.com/assets/images/og.png?v=d86f1a9&quot;&gt;
&lt;meta property=og:url content=https://justfuckingusehtml.com&gt;
&lt;meta property=og:type content=website&gt;
&lt;meta property=og:locale content=en_US&gt;
&lt;meta name=twitter:title content=&quot;Just fucking use HTML&quot;&gt;
&lt;meta name=twitter:description content=&quot;Stop reinventing the wheel. The web was doing just fine before your bloated frameworks crawled out of the sewer.&quot;&gt;
&lt;meta name=twitter:image content=&quot;https://justfuckingusehtml.com/assets/images/og.png?v=d86f1a9&quot;&gt;
&lt;meta name=twitter:card content=summary_large_image&gt;
&lt;meta name=twitter:creator content=@kyrylosilin&gt;
&lt;meta name=twitter:site content=@kyrylosilin&gt;
&lt;meta name=twitter:image:alt content=&quot;Just fucking use HTML&quot;&gt;
&lt;link rel=canonical href=https://justfuckingusehtml.com/&gt;
&lt;link rel=alternate hreflang=en href=https://justfuckingusehtml.com/&gt;
&lt;link rel=alternate hreflang=de href=https://justfuckingusehtml.com/de&gt;
&lt;link rel=alternate hreflang=es-AR href=https://justfuckingusehtml.com/es-AR&gt;
&lt;link rel=alternate hreflang=x-default href=https://justfuckingusehtml.com/&gt;
&lt;meta name=referrer content=no-referrer&gt;&lt;link rel=&quot;shortcut icon&quot; href=&quot;data:image/x-icon;base64,AAABAAMAMDAAAAEAIACoJQAANgAAACAgAAABACAAqBAAAN4lAAAQEAAAAQAgAGgEAACGNgAAKAAAADAAAABgAAAAAQAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////Mv///2P///+Q////uf///9b////y/////f////z////y////1v///7j///+Q////Yv///zEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////L////3f///+6////9f////////////////////////////////////////////////////////////////////X///+6////dv///y8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///zf///+P////5f///////////////////////////////////////////////////////////////////////////////////////////////////+T///+O////NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8e////f////9//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////3v///3////8dAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///0v///+3//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+3////SgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////af///9n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2f///2kAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///94////9/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////f///94AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///3j////4///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////3////eAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////af////f/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9////2kAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///9L////2v///////////////////////////////////////////////////////////////////////////////39/f/+/v7///////////////////////////////////////////////////////////////////////////////////////////////////////////9n///9KAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///x7///+3////////////////////////////////////////////////////////////////////////////////QEBA/wAAAP8AAAD/v7+///////////////////////////////////////////////////////////////////////////////////////////////////////////+3////HQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///4D/////////////////////////////////////////////////////////////////////////////////////AAAA/wAAAP8AAAD/f39/////////////////////////////////////////////////////////////////////////////////////////////////////////////////fwAAAAAAAAAAAAAAAAAAAAAAAAAA////OP///9//////////////////////////////////////////////////////////////////////////////////////AAAA/wAAAP8AAAD/QEBA////////////////////////////////////////////////////////////////////////////////////////////////////////////////3////zcAAAAAAAAAAAAAAAAAAAAA////j///////////////////////////////////////////////////////////////////////////////////////////QEBA/wAAAP8AAAD/QEBA/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////48AAAAAAAAAAAAAAAD///8v////5f//////////////////////////////////////////////////////////////////////////////////////////QEBA/wAAAP8AAAD/AAAA/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+X///8vAAAAAAAAAAD///93////////////////////////////////////////////////////////////////////////////////////////////////f39//wAAAP8AAAD/AAAA//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////93AAAAAAAAAAD///+6//////////////////////////////////////////////////////////9/f3//AAAA/39/f///////////////////////f39//wAAAP8AAAD/AAAA/7+/v/////////////////////////////////9/f3//AAAA/0BAQP////////////////////////////////////////////////////////////////////+6AAAAAP///zL////2/////////////////////////////////////////////////////0BAQP8AAAD/AAAA/wAAAP+/v7//////////////////v7+//wAAAP8AAAD/AAAA/39/f////////////////////////////7+/v/8AAAD/AAAA/wAAAP9AQED////////////////////////////////////////////////////////////////1////Mv///2P/////////////////////////////////////////////////////QEBA/wAAAP8AAAD/AAAA/wAAAP///////////////////////////wAAAP8AAAD/AAAA/39/f/////////////////////////////////8AAAD/AAAA/wAAAP8AAAD/QEBA////////////////////////////////////////////////////////////////Y////5D///////////////////////////////////////////////9AQED/AAAA/wAAAP8AAAD/AAAA/39/f////////////////////////////wAAAP8AAAD/AAAA/0BAQP////////////////////////////////9/f3//AAAA/wAAAP8AAAD/AAAA/0BAQP//////////////////////////////////////////////////////////kP///7n//////////////////////////////////////////0BAQP8AAAD/AAAA/wAAAP8AAAD/f39//////////////////////////////////0BAQP8AAAD/AAAA/0BAQP//////////////////////////////////////f39//wAAAP8AAAD/AAAA/wAAAP9AQED/////////////////////////////////////////////////////uf///9b/////////////////////////////////////QEBA/wAAAP8AAAD/AAAA/wAAAP9/f3///////////////////////////////////////0BAQP8AAAD/AAAA/wAAAP///////////////////////////////////////////39/f/8AAAD/AAAA/wAAAP8AAAD/QEBA////////////////////////////////////////////////1v////L///////////////////////////////9AQED/AAAA/wAAAP8AAAD/AAAA/39/f////////////////////////////////////////////39/f/8AAAD/AAAA/wAAAP////////////////////////////////////////////////9/f3//AAAA/wAAAP8AAAD/AAAA/0BAQP//////////////////////////////////////////8v////3//////////////////////////7+/v/8AAAD/AAAA/wAAAP8AAAD/f39//////////////////////////////////////////////////39/f/8AAAD/AAAA/wAAAP+/v7//////////////////////////////////////////////////f39//wAAAP8AAAD/AAAA/wAAAP9/f3///////////////////////////////////////f////3//////////////////////////39/f/8AAAD/AAAA/wAAAP8AAAD/f39//////////////////////////////////////////////////7+/v/8AAAD/AAAA/wAAAP9/f3//////////////////////////////////////////////////f39//wAAAP8AAAD/AAAA/wAAAP+/v7///////////////////////////////////////f////L///////////////////////////////9AQED/AAAA/wAAAP8AAAD/AAAA/39/f/////////////////////////////////////////////////8AAAD/AAAA/wAAAP9/f3////////////////////////////////////////////9/f3//AAAA/wAAAP8AAAD/AAAA/0BAQP//////////////////////////////////////////8v///9b/////////////////////////////////////QEBA/wAAAP8AAAD/AAAA/wAAAP9/f3////////////////////////////////////////////8AAAD/AAAA/wAAAP9AQED//////////////////////////////////////39/f/8AAAD/AAAA/wAAAP8AAAD/QEBA////////////////////////////////////////////////1v///7n//////////////////////////////////////////0BAQP8AAAD/AAAA/wAAAP8AAAD/f39///////////////////////////////////////9AQED/AAAA/wAAAP9AQED/////////////////////////////////f39//wAAAP8AAAD/AAAA/wAAAP9AQED/////////////////////////////////////////////////////uf///5H///////////////////////////////////////////////9AQED/AAAA/wAAAP8AAAD/AAAA/39/f/////////////////////////////////9AQED/AAAA/wAAAP8AAAD///////////////////////////9/f3//AAAA/wAAAP8AAAD/AAAA/0BAQP//////////////////////////////////////////////////////////kP///2P/////////////////////////////////////////////////////QEBA/wAAAP8AAAD/AAAA/wAAAP////////////////////////////////9/f3//AAAA/wAAAP8AAAD///////////////////////////8AAAD/AAAA/wAAAP8AAAD/QEBA////////////////////////////////////////////////////////////////Y////zL////2/////////////////////////////////////////////////////0BAQP8AAAD/AAAA/wAAAP////////////////////////////////9/f3//AAAA/wAAAP8AAAD/v7+///////////////////////8AAAD/AAAA/wAAAP9AQED////////////////////////////////////////////////////////////////2////MgAAAAD///+7//////////////////////////////////////////////////////////9AQED/AAAA/39/f/////////////////////////////////+/v7//AAAA/wAAAP8AAAD/f39///////////////////////+/v7//QEBA/39/f/////////////////////////////////////////////////////////////////////+6AAAAAAAAAAD///93////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAAA/wAAAP8AAAD/f39///////////////////////////////////////////////////////////////////////////////////////////////////////////93AAAAAAAAAAD///8w////5f//////////////////////////////////////////////////////////////////////////////////////////////////////////AAAA/wAAAP8AAAD/QEBA/////////////////////////////////////////////////////////////////////////////////////////////////////+X///8vAAAAAAAAAAAAAAAA////j///////////////////////////////////////////////////////////////////////////////////////////////////////////QEBA/wAAAP8AAAD/QEBA/////////////////////////////////////////////////////////////////////////////////////////////////////48AAAAAAAAAAAAAAAAAAAAA////OP///9//////////////////////////////////////////////////////////////////////////////////////////////////////QEBA/wAAAP8AAAD/AAAA////////////////////////////////////////////////////////////////////////////////////////////////3////zcAAAAAAAAAAAAAAAAAAAAAAAAAAP///4D/////////////////////////////////////////////////////////////////////////////////////////////////////f39//wAAAP8AAAD/AAAA////////////////////////////////////////////////////////////////////////////////////////////////fwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///x7///+4////////////////////////////////////////////////////////////////////////////////////////////////f39//wAAAP8AAAD/QEBA//////////////////////////////////////////////////////////////////////////////////////////+3////HgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///9L////2v///////////////////////////////////////////////////////////////////////////////////////////////7+/v/9/f3///////////////////////////////////////////////////////////////////////////////////////////9r///9LAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////av////j/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9////2kAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///3n////4///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////4////eAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///95////+P////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////f///94AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////av///9r/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2v///2kAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///0v///+4//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+3////SwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8e////gP///9//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////3////3////8eAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///zj///+P////5f///////////////////////////////////////////////////////////////////////////////////////////////////+X///+P////OAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////MP///3f///+7////9v////////////////////////////////////////////////////////////////////b///+6////d////y8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////Mv///2P///+R////uf///9b////y/////f////3////y////1v///7n///+Q////Y////zIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//gAH//wAA//wAAD//AAD/8AAAD/8AAP/AAAAD/wAA/4AAAAH/AAD/AAAAAP8AAP4AAAAAfwAA/AAAAAA/AAD4AAAAAB8AAPAAAAAADwAA4AAAAAAHAADgAAAAAAcAAMAAAAAAAwAAwAAAAAADAACAAAAAAAEAAIAAAAAAAQAAgAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAABAACAAAAAAAEAAIAAAAAAAQAAwAAAAAADAADAAAAAAAMAAOAAAAAABwAA4AAAAAAHAADwAAAAAA8AAPgAAAAAHwAA/AAAAAA/AAD+AAAAAH8AAP8AAAAA/wAA/4AAAAH/AAD/wAAAA/8AAP/wAAAP/wAA//wAAD//AAD//4AB//8AACgAAAAgAAAAQAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////JP///2T///+Z////xP///+z////7////+////+z////E////mv///2T///8lAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////RP///5X////k/////////////////////////////////////////////////////////+T///+V////RAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////Iv///4r////x///////////////////////////////////////////////////////////////////////////////x////iv///yIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///0r///+5////////////////////////////////////////////////////////////////////////////////////////////////////uP///0kAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///9Q////0P//////////////////////////////////////////////////////////////////////////////////////////////////////////////0P///1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////Sv///9D/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////z////0kAAAAAAAAAAAAAAAAAAAAAAAAAAP///yL///+5////////////////////////////////////////////////v7+//39/f/+/v7//////////////////////////////////////////////////////////////////////uP///yEAAAAAAAAAAAAAAAAAAAAA////iv////////////////////////////////////////////////////9/f3//AAAA/0BAQP//////////////////////////////////////////////////////////////////////////igAAAAAAAAAAAAAAAP///0T////x/////////////////////////////////////////////////////0BAQP8AAAD/QEBA///////////////////////////////////////////////////////////////////////////x////RAAAAAAAAAAA////lv//////////////////////////////////////////////////////////f39//wAAAP8AAAD///////////////////////////////////////////////////////////////////////////////+VAAAAAP///yX////k/////////////////////////////////////7+/v/////////////////+/v7//AAAA/wAAAP+/v7///////////////////////7+/v////////////////////////////////////////////////+T///8k////ZP////////////////////////////////////9/f3//AAAA/0BAQP///////////7+/v/8AAAD/AAAA/7+/v/////////////////9/f3//AAAA/wAAAP+/v7///////////////////////////////////////////2T///+a////////////////////////////////f39//wAAAP8AAAD/f39//////////////////wAAAP8AAAD/v7+//////////////////7+/v/8AAAD/AAAA/wAAAP+/v7//////////////////////////////////////mf///8T//////////////////////////39/f/8AAAD/AAAA/39/f///////////////////////AAAA/wAAAP9/f3///////////////////////39/f/8AAAD/AAAA/wAAAP+/v7/////////////////////////////////D////7P////////////////////9/f3//AAAA/wAAAP9/f3////////////////////////////9AQED/AAAA/0BAQP///////////////////////////39/f/8AAAD/AAAA/wAAAP+/v7///////////////////////////+z////7////////////////f39//wAAAP8AAAD/f39//////////////////////////////////0BAQP8AAAD/QEBA/////////////////////////////////39/f/8AAAD/AAAA/0BAQP//////////////////////////+/////v///////////////9/f3//AAAA/wAAAP9/f3//////////////////////////////////f39//wAAAP8AAAD/////////////////////////////////f39//wAAAP8AAAD/AAAA///////////////////////////7////7P////////////////////9/f3//AAAA/wAAAP9/f3////////////////////////////+/v7//AAAA/wAAAP+/v7///////////////////////39/f/8AAAD/AAAA/wAAAP+/v7///////////////////////////+z////E//////////////////////////9/f3//AAAA/wAAAP9/f3///////////////////////7+/v/8AAAD/AAAA/7+/v/////////////////9/f3//AAAA/wAAAP8AAAD/v7+/////////////////////////////////xP///5r///////////////////////////////9/f3//AAAA/wAAAP9/f3///////////////////////wAAAP8AAAD/v7+/////////////f39//wAAAP8AAAD/AAAA/7+/v/////////////////////////////////////+Z////ZP////////////////////////////////////9/f3//AAAA/39/f///////////////////////AAAA/wAAAP9/f3////////////+/v7//AAAA/wAAAP+/v7///////////////////////////////////////////2T///8l////5P////////////////////////////////////+/v7////////////////////////////9AQED/AAAA/0BAQP/////////////////////////////////////////////////////////////////////k////JAAAAAD///+W/////////////////////////////////////////////////////////////////////0BAQP8AAAD/QEBA/////////////////////////////////////////////////////////////////////5UAAAAAAAAAAP///0X////y////////////////////////////////////////////////////////////////f39//wAAAP8AAAD////////////////////////////////////////////////////////////////x////RAAAAAAAAAAAAAAAAP///4v///////////////////////////////////////////////////////////////+/v7//AAAA/wAAAP///////////////////////////////////////////////////////////////4oAAAAAAAAAAAAAAAAAAAAA////Iv///7n///////////////////////////////////////////////////////////////9/f3//f39///////////////////////////////////////////////////////////+5////IgAAAAAAAAAAAAAAAAAAAAAAAAAA////Sv///9D/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////0P///0oAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////Uf///9D//////////////////////////////////////////////////////////////////////////////////////////////////////////////9D///9QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////Sv///7n///////////////////////////////////////////////////////////////////////////////////////////////////+5////SgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////Iv///4v////y///////////////////////////////////////////////////////////////////////////////x////iv///yIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///0X///+W////5P/////////////////////////////////////////////////////////k////lv///0UAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8l////ZP///5r////E////7P////v////7////7P///8T///+a////ZP///yUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/8AD//8AAP/8AAA/+AAAH/AAAA/gAAAHwAAAA8AAAAOAAAABgAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAGAAAABwAAAA8AAAAPgAAAH8AAAD/gAAB/8AAA//wAA///AA/8oAAAAEAAAACAAAAABACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///0j///+U////2P////j////4////2f///5T///9IAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////J////5H////7////////////////////////////////////+////5H///8nAAAAAAAAAAAAAAAA////J////67/////////////////////////////////////////////////////////rv///ycAAAAAAAAAAP///5H/////////////////////v7+//39/f/////////////////////////////////////+RAAAAAP///0j////7/////////////////////7+/v/8AAAD/////////////////////////////////////+v///0j///+U////////////////f39//7+/v/+/v7//AAAA////////////f39//39/f/////////////////////+U////2f//////////f39//wAAAP///////////wAAAP+/v7///////39/f/8AAAD/f39/////////////////2P////j/////f39//wAAAP+/v7////////////9AQED/v7+/////////////f39//wAAAP+/v7////////////j////4/////39/f/8AAAD/v7+/////////////QEBA/39/f////////////39/f/8AAAD/f39////////////4////2f//////////f39//wAAAP+/v7///////39/f/9AQED//////39/f/8AAAD/f39/////////////////2P///5T///////////////9/f3////////////+/v7//QEBA//////9/f3//v7+//////////////////////5T///9I////+///////////////////////////v7+//wAAAP////////////////////////////////v///9IAAAAAP///5L//////////////////////////7+/v/9AQED///////////////////////////////+RAAAAAAAAAAD///8o////r/////////////////////////////////////////////////////////+u////JwAAAAAAAAAAAAAAAP///yj///+S////+/////////////////////////////////////v///+R////JwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///0j///+U////2f////j////4////2f///5T///9IAAAAAAAAAAAAAAAAAAAAAPAPAADAAwAAgAEAAIABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIABAACAAQAAwAMAAPAPAAA=&quot;&gt;&lt;style&gt;.sf-hidden{display:none!important}&lt;/style&gt;&lt;meta http-equiv=content-security-policy content=&quot;default-src &#39;none&#39;; font-src &#39;self&#39; data:; img-src &#39;self&#39; data:; style-src &#39;unsafe-inline&#39;; media-src &#39;self&#39; data:; script-src &#39;unsafe-inline&#39; data:; object-src &#39;self&#39; data:; frame-src &#39;self&#39; data:;&quot;&gt;&lt;/head&gt;
&lt;body&gt;
&lt;header&gt;
 &lt;h1&gt;Just fucking use HTML&lt;/h1&gt;
 &lt;p&gt;
 Hey, dipshit! You know what loads faster than your bloated, overengineered
 mess? Plain, unadulterated HTML. And you know what doesn&#39;t break every
 motherfucking Tuesday? HTML that just fucking works. Why the fuck are you
 overcomplicating things, you masochistic fuck? You&#39;re out here acting like
 you&#39;re building the next goddamn moon landing when all you need is a button
 and some text.
 &lt;/p&gt;
 &lt;p&gt;
 Newsflash, asshole: the web was doing just fine before your
 bloated frameworks crawled out of the sewer. You&#39;re out here dropping ten
 grand on some fancy-ass framework like it&#39;s a Gucci purse, just to haul
 around the same shitty groceries you could&#39;ve carried in a plastic bag from
 1995. Why the hell are you jumping through all these hoops when HTML&#39;s been
 sitting there, ready to go, since the dawn of the goddamn internet?
 &lt;/p&gt;
&lt;/header&gt;
&lt;section&gt;
 &lt;h2&gt;
 So you call yourself a web developer? Fucking pathetic.
 &lt;/h2&gt;
 &lt;p&gt;
 You&#39;ve gotta be kidding me, asshat. Do you even fucking know how to display
 a button on screen without the current modern fuckery you lean on? Here,
 little shit, is your button:
 &lt;/p&gt;
 &lt;button&gt;Fucking button&lt;/button&gt;
 &lt;p&gt;
 Tattoo this code on your forehead so that you&#39;ll remember when you look at
 your fat face in the mirror:
 &lt;/p&gt;
 &lt;pre style=display:inline-block;transform:scaleX(-1)&gt;&lt;code&gt;&amp;lt;button&amp;gt;Fucking button&amp;lt;/button&amp;gt;&lt;/code&gt;&lt;/pre&gt;
 &lt;p&gt;
 But did you notice something, you smug bastard? This HTML shit is the
 fucking Energizer Bunny of the web. It just keeps going, no fancy plugins or
 updates required. Your precious framework&#39;s out there choking on its own
 hype, obsolete before you even finish the tutorial, while this button&#39;s
 still kicking ass like it owns the place. It&#39;s been here since the web was a
 screaming toddler, and it&#39;ll still be standing when your stack&#39;s just a
 dusty footnote in some asshole&#39;s commit history.
 &lt;/p&gt;
 &lt;p&gt;
 Can&#39;t make shit beautiful with HTML, you say? Eat this, you pixel-pushing fuck:
 &lt;/p&gt;
 &lt;button&gt;&lt;em&gt;&lt;strong&gt;&lt;u&gt;Fucking beautiful button&lt;/u&gt;&lt;/strong&gt;&lt;/em&gt;&lt;/button&gt;
 &lt;p&gt;
 Why it&#39;s beautiful:
 &lt;/p&gt;
 &lt;ul&gt;
 &lt;li&gt;It is visible&lt;/li&gt;
 &lt;li&gt;It is clickable&lt;/li&gt;
 &lt;li&gt;It&#39;s just fucking beautiful&lt;/li&gt;
 &lt;/ul&gt;
 &lt;p&gt;
 Seriously, what else do you fucking need, you entitled prick? A goddamn
 participation trophy for using a framework to do what HTML does out of the
 box? Maybe a gold star for managing to overcomplicate something that&#39;s been
 solved for decades? Get over yourself, asshole. HTML works, and it doesn&#39;t
 need your bullshit to prove it.
 &lt;/p&gt;
&lt;/section&gt;
&lt;section&gt;
 &lt;h2&gt;Now that we have AI, you &lt;em&gt;still&lt;/em&gt; use JS frameworks? Are you fucking serious?&lt;/h2&gt;
 &lt;p&gt;
 AI&#39;s out here, a gift from the heavens (or at least from Sam Altman&#39;s nerd
 fortress) ready to write your shitty little to-do app in five seconds flat.
 It can churn out pixel-perfect HTML, debug your fuck-ups, and probably even
 wipe your ass if you ask nicely. But no, you&#39;re still humping your
 frameworks like they&#39;re the last lifeboat on the Titanic. What the hell is
 wrong with you? Are you that addicted to 10,000 dependencies and a build
 process that takes longer than your last failed relationship?
 &lt;/p&gt;
 &lt;p&gt;
 Sam Altman&#39;s AI army is laughing its silicon balls off while you&#39;re
 knee-deep in React&#39;s virtual DOMshit, praying your app doesn&#39;t choke on its
 own bloated corpse. This isn&#39;t progress. It&#39;s a fucking &lt;em&gt;tragedy&lt;/em&gt;.
 You&#39;ve got a shiny new Ferrari in your garage, and you&#39;re still riding a
 rusty tricycle with a flat tire. Grow the fuck up.
 &lt;/p&gt;
&lt;/section&gt;
&lt;section&gt;
 &lt;h2&gt;Why HTML rocks&lt;/h2&gt;
 &lt;h3&gt;Everybody knows HTML&lt;/h3&gt;
 &lt;p&gt;
 Listen up, dipshit. &lt;em&gt;Every-fucking-body&lt;/em&gt; knows HTML. Your dearly great grandma?
 She was out there in the goddamn trenches of World War 2, dodging Nazi bullets
 while hand-coding &lt;code&gt;&amp;lt;table&amp;gt;&lt;/code&gt; layouts to send encrypted messages to the Allies.
 Your grandad? He&#39;s got a motherfucking PhD in HTML from the prestigious
 University of Who-Gives-a-Rat&#39;s-Ass, probably hanging right next to his &quot;I
 Survived Dial-Up&quot; trophy. Your dad? That bastard was mumbling
 &lt;code&gt;&amp;lt;div&amp;gt;&lt;/code&gt; and &lt;code&gt;&amp;lt;span&amp;gt;&lt;/code&gt; before he could even
 choke out &quot;mama&quot;. Shit, even your drooling mutt probably has a side gig
 churning out HTML sites on Fiverr. So why the fuck are we still stuck
 answering your brain-dead questions? Jesus Christ, get with the program.
 &lt;/p&gt;
 &lt;h3&gt;No fucking hydration errors. Drink some water, asshole&lt;/h3&gt;
 &lt;p&gt;
 What in the &lt;em&gt;ever-loving&lt;/em&gt; fuck is a hydration error? Sounds like some hipster
 bullshit a barista would spew when your overpriced oat milk latte isn&#39;t wet
 enough. &quot;Oh, my bad, bro, your coffee&#39;s got a hydration error&quot;. Get the fuck
 outta here. And &quot;tree shaking&quot;? Are you kidding me? What is this, a coding
 bootcamp or a lumberjack convention? &quot;Yeah, boss, I spent all day shaking trees
 to trim my JavaScript bundle. Where&#39;s my flannel shirt?&quot;. Who the hell invents
 this pretentious crap? I don&#39;t have time to decode your buzzword salad, you
 self-important jackass. HTML doesn&#39;t pull this nonsense. It just fucking works.
 &lt;/p&gt;
 &lt;h3&gt;You don&#39;t need to &quot;support&quot; HTML&lt;/h3&gt;
 &lt;p&gt;
 Ever seen some motherfucker hire a whole team just to babysit HTML? That&#39;s
 fucking right. Nobody does that bullshit. HTML is so damn reliable it
 doesn&#39;t need a 24/7 support hotline like some needy-ass framework. While
 your bloated, over-engineered frameworks are out there throwing tantrums
 every time a browser updates or crying for patches every five minutes, HTML
 just sits back, cracks a beer, and does its goddamn job. So next time some
 slick salesman tries to shove &quot;premium HTML support&quot; down your throat, tell
 them to fuck off.
 &lt;/p&gt;
 &lt;h3&gt;You don&#39;t need to &quot;deploy&quot; HTML&lt;/h3&gt;
 &lt;p&gt;
 Deploying HTML? That&#39;s easier than deleting your browser history after a
 porn binge. Just throw your files into a web server directory, and boom. The
 whole fucking internet can see your crappy page. No 12-step deployment
 process, no DevOps wizards casting spells, no fucking Docker containers or
 CI/CD pipelines. Just drag, drop, and you&#39;re done. Meanwhile, your fancy
 frameworks need a goddamn NASA launch sequence just to push a button that
 says &quot;Hello, World&quot;. HTML doesn&#39;t give a shit about your trendy deployment
 tools. It&#39;s the dive bar of the web: always open, no frills, just works.
 Your framework? The hipster café that&quot;s &quot;temporarily closed&quot; every time you
 need it.
 &lt;/p&gt;
&lt;/section&gt;
&lt;section&gt;
 &lt;h2&gt;
 You don&#39;t need Sparkling Ass UI to make shit look good, dumbass
 &lt;/h2&gt;
 &lt;p&gt;
 All you need is fucking &lt;em&gt;brains&lt;/em&gt;. Every year, yet another steaming pile of
 shit gets released: blazingly fast frameworks that are two farts ahead of
 the previous &quot;groundbreaking&quot; crap. Some call it progress. More rounded
 corners, more colorful colors, and one more thing to learn.
 &lt;/p&gt;
 &lt;p&gt;
 &lt;em&gt;*&lt;sup&gt;F&lt;/sup&gt;u&lt;sup&gt;c&lt;/sup&gt;&lt;sub&gt;k&lt;/sub&gt; t&lt;sub&gt;h&lt;/sub&gt;&lt;sup&gt;a&lt;/sup&gt;&lt;sub&gt;t&lt;/sub&gt;*&lt;/em&gt;
 &lt;/p&gt;
 &lt;p&gt;
 Just fucking use HTML. I shit you not, it actually looks good:
 &lt;/p&gt;
 &lt;ul&gt;
 &lt;li&gt;&lt;b&gt;Bold text&lt;/b&gt;? Check.&lt;/li&gt;
 &lt;li&gt;&lt;u&gt;Underlined text&lt;/u&gt;. Got it.&lt;/li&gt;
 &lt;li&gt;&lt;s&gt;Strike fucking through&lt;/s&gt;? &lt;mark&gt;Highlighted text&lt;/mark&gt;? &lt;em&gt;Emphasized text&lt;/em&gt;?&lt;/li&gt;
 &lt;li&gt;Check ✓, check ✓, and ~holy shit~ check again. HTML&#39;s been doing this while you were still drooling
 over React.&lt;/li&gt;
 &lt;/ul&gt;
 &lt;p&gt;
 Oh, and abbreviations? &lt;abbr title=&quot;Hyper Mother Fucking Text&quot;&gt;HTML&lt;/abbr&gt;.
 Go ahead, find your dirty trackpad behind the slice of pizza and hover over this motherfucker.
 &lt;/p&gt;
 &lt;h2&gt;h2: Big motherfucker&lt;/h2&gt;
 &lt;p&gt;Perfect for screaming your main points at the top of your lungs, like &quot;FUCK FRAMEWORKS!&quot;&lt;/p&gt;
 &lt;h3&gt;h3: Slightly smaller motherfucker&lt;/h3&gt;
 &lt;p&gt;Still loud enough to tell your subpoints to sit down and shut up.&lt;/p&gt;
 &lt;h4&gt;h4: Even smaller&lt;/h4&gt;
 &lt;p&gt;For when you need to whisper some passive-aggressive bullshit.&lt;/p&gt;
 &lt;h5&gt;h5: You can still see me&lt;/h5&gt;
 &lt;p&gt;Small, but not small enough to ignore, like that fucking bug in your framework that haunts your every commit.&lt;/p&gt;
 &lt;h6&gt;h6: Nobody even uses these&lt;/h6&gt;
 &lt;p&gt;Unless you&#39;re writing the fine print for your soul-selling terms of service.&lt;/p&gt;
 &lt;p&gt;
 See? HTML&#39;s got hierarchy, style, and your framework&#39;s out here trying to
 reinvent the wheel, but HTML already built the goddamn car, you
 overcomplicating prick.
 &lt;/p&gt;
&lt;/section&gt;
&lt;section&gt;
 &lt;h2&gt;Interactive shit? HTML&#39;s got it, no JS needed&lt;/h2&gt;
 &lt;p&gt;
 Think you need your precious JavaScript for interactivity? Wrong, you clueless fuck. HTML&#39;s got expandable sections
 baked in:
 &lt;/p&gt;
 &lt;details&gt;
 &lt;summary&gt;Expandable motherfucker&lt;/summary&gt;
 &lt;p&gt;Fucking boo, motherfucker 👻&lt;/p&gt;
 &lt;/details&gt;
 &lt;p&gt;
 And popovers? Yeah, native, no framework bloat. Eat this:
 &lt;/p&gt;
 &lt;button popovertarget=my-popover&gt;Open it, coward&lt;/button&gt;
 &lt;div popover id=my-popover class=sf-hidden&gt;Didn&#39;t even know HTML could do this, huh? Suck it.&lt;/div&gt;
 &lt;h2&gt;Dialogs that&#39;ll make you cry for mommy&lt;/h2&gt;
 &lt;p&gt;
 Still not impressed? Fine, fine. Toss in a pinch of inline JS (right in the HTML, you purist twat) and you&#39;ve got
 native dialogs.
 Pay close attention: no build steps, no frameworks, just raw power.
 &lt;/p&gt;
 &lt;dialog id=myDialog class=sf-hidden&gt;
 
 
 &lt;/dialog&gt;
 &lt;button&gt;Open the damn dialog&lt;/button&gt;
&lt;/section&gt;
&lt;section&gt;
 &lt;h2&gt;Forms that work on every Casio calculator&lt;/h2&gt;
 &lt;form action=/submit method=post&gt;
 &lt;fieldset&gt;
 &lt;legend&gt;Prepare to be underwhelmed, asshole&lt;/legend&gt;
 &lt;label for=text-input&gt;Fucking text input:&lt;/label&gt;
 &lt;input type=text id=text-input name=text-input placeholder=&quot;Type something, genius&quot; pattern=[A-Za-z]+ title=&quot;Letters only, you illiterate fuck&quot; required value&gt;
 &lt;br&gt;
 &lt;label for=email-input&gt;Email input for spam:&lt;/label&gt;
 &lt;input type=email id=email-input name=email-input placeholder=spam@justfuckingusehtml.com required value&gt;
 &lt;br&gt;
 &lt;label for=password-input&gt;Password you&#39;ll forget in 5 minutes (8-20 characters, because fuck you):&lt;/label&gt;
 &lt;input type=password id=password-input name=password-input minlength=8 maxlength=20 required&gt;
 &lt;br&gt;
 &lt;label for=number-input&gt;Pick a number between 0 and 100, like it fucking matters:&lt;/label&gt;
 &lt;input type=number id=number-input name=number-input min=0 max=100 step=1 value&gt;
 &lt;br&gt;
 &lt;label for=range-input&gt;Slide this to show how much you love HTML (0 to 100%):&lt;/label&gt;
 &lt;input type=range id=range-input name=range-input min=0 max=100 value=50&gt;
 &lt;br&gt;
 &lt;label for=date-input&gt;Choose a date for your inevitable meltdown:&lt;/label&gt;
 &lt;input type=date id=date-input name=date-input value&gt;
 &lt;br&gt;
 &lt;label for=time-input&gt;Set a time for your daily existential crisis:&lt;/label&gt;
 &lt;input type=time id=time-input name=time-input value&gt;
 &lt;br&gt;
 &lt;label for=datetime-local-input&gt;Pick a date and time for your next panic error:&lt;/label&gt;
 &lt;input type=datetime-local id=datetime-local-input name=datetime-local-input value&gt;
 &lt;br&gt;
 &lt;label for=month-input&gt;Select a month for your quarterly breakdown:&lt;/label&gt;
 &lt;input type=month id=month-input name=month-input value&gt;
 &lt;br&gt;
 &lt;label for=week-input&gt;Choose a week to question all your life choices:&lt;/label&gt;
 &lt;input type=week id=week-input name=week-input value&gt;
 &lt;br&gt;
 &lt;label for=color-input&gt;Pick a color that matches your soul (hint: it&#39;s probably gray):&lt;/label&gt;
 &lt;input type=color id=color-input name=color-input value=#000000&gt;
 &lt;br&gt;
 &lt;label for=file-input&gt;Upload a file you&#39;ll never find again (PDF only, because we&#39;re assholes):&lt;/label&gt;
 &lt;input type=file id=file-input name=file-input accept=.pdf multiple value&gt;
 &lt;br&gt;
 &lt;label&gt;
 &lt;input type=checkbox name=checkbox value=1&gt;
 Check this if you&#39;re a robot (we won&#39;t tell, you soulless fuck)
 &lt;/label&gt;
 &lt;br&gt;
 &lt;label&gt;
 &lt;input type=radio name=radio-group value=option1&gt;
 Pick your poison: Option 1
 &lt;/label&gt;
 &lt;br&gt;
 &lt;label&gt;
 &lt;input type=radio name=radio-group value=option2&gt;
 Pick your poison: Option 2
 &lt;/label&gt;
 &lt;br&gt;
 &lt;label for=select-input&gt;Choose your favorite way to waste time, you lazy prick:&lt;/label&gt;
 &lt;select name=select-input id=select-input&gt;
        &lt;optgroup label=&quot;Productive Wasting&quot;&gt;
 &lt;option value=1 selected&gt;Organizing your desk for the 10th time&lt;/option&gt;
 &lt;option value=2&gt;Cleaning your inbox (lol, good luck)&lt;/option&gt;
 &lt;/optgroup&gt;
        &lt;optgroup label=&quot;Unproductive Wasting&quot;&gt;
 &lt;option value=3&gt;Watching cat videos&lt;/option&gt;
 &lt;option value=4&gt;Staring at the wall like a dumbass&lt;/option&gt;
 &lt;/optgroup&gt;
      &lt;/select&gt;
 &lt;br&gt;
 &lt;label for=textarea&gt;Pour your heart out here, or just bitch about frameworks:&lt;/label&gt;
 &lt;textarea name=textarea id=textarea rows=4 cols=40 placeholder=&quot;Go on, vent your pathetic frustrations&quot;&gt;&lt;/textarea&gt;
 &lt;br&gt;
 &lt;label for=browser-input&gt;Admit which browser you use (we already know it&#39;s trash):&lt;/label&gt;
 &lt;input type=text id=browser-input list=browsers value&gt;
 &lt;datalist id=browsers class=sf-hidden&gt;
 
 &lt;/datalist&gt;
 &lt;br&gt;
 &lt;label for=meter&gt;Your current level of giving a fuck:&lt;/label&gt;
 &lt;meter id=meter value=0.6&gt;60% (barely)&lt;/meter&gt;
 &lt;br&gt;
 &lt;label for=progress&gt;How close you are to rage-quitting this form:&lt;/label&gt;
 &lt;progress id=progress value=70 max=100&gt;70% (almost there)&lt;/progress&gt;
 &lt;br&gt;
 &lt;/fieldset&gt;
 &lt;button type=submit&gt;Submit (to your fate, you pain junkie)&lt;/button&gt;
 &lt;button type=reset&gt;Reset (your expectations, not that they were high)&lt;/button&gt;
 &lt;/form&gt;
 &lt;p&gt;
 &lt;small&gt;
 *This form is powered real, raw HTML. No frameworks were harmed, because
 they&#39;re useless anyway.*
 &lt;/small&gt;
 &lt;/p&gt;
 &lt;p&gt;
 So, what&#39;s your excuse now, huh? Still clinging to your trendy frameworks
 like a scared little bitch? HTML&#39;s like that crusty old barstool that&#39;s seen
 every fight and still holds your drunk ass up, no questions asked.
 Frameworks are the flimsy plastic chairs that snap the second you lean back
 too hard: overengineered bullshit that collapses under its own weight. HTML
 doesn&#39;t need your pity or your goddamn fanfare. It&#39;s too busy being the
 spine of every site you&#39;ve ever clicked on, you ungrateful prick. So keep
 jerking off to your latest tech fad. HTML&#39;s over here, sipping whiskey,
 ready to outlast your entire career.
 &lt;/p&gt;
&lt;/section&gt;
&lt;hr&gt;
&lt;section&gt;
 &lt;h2&gt;&quot;Why not write Assembly then?&quot;&lt;/h2&gt;
 &lt;p&gt;
 Oh, here comes the genius motherfucker with the big-brain counterargument:
 &quot;Well, if HTML&#39;s so great, why not just write everything in Assembly, huh?&quot;.
 Wow, look at you, you clever little prick. Did you come up with that all by
 yourself? Writing web pages in Assembly is like using a fucking scalpel to
 slice your overcooked steak: sure, it&#39;ll get the job done, but you&#39;re gonna
 look like a complete asshole while you&#39;re at it. HTML just works, you
 absolute tool. It&#39;s been the backbone of the web since Al Gore flipped the
 switch, and it&#39;ll still be here long after your trendy framework is rotting
 in a GitHub graveyard. So take your smartass logic and shove it. HTML&#39;s
 king, and you&#39;re just a peasant with a keyboard.
 &lt;/p&gt;
&lt;/section&gt;
&lt;section&gt;
 &lt;h2&gt;HTML lends crutches to your fucking JS&lt;/h2&gt;
 &lt;span hidden id=i_am_doofus class=sf-hidden&gt;
 Yes you are, motherfucker
 &lt;/span&gt;
 &lt;p&gt;
 Did you know that when you slap an id on your HTML element, HTML doesn&#39;t
 just sit there like a lazy fuck. It actually creates a fucking variable in
 JavaScript for you? Yeah, you heard me, you clueless bastard. You don&#39;t even
 have to lift a finger. HTML&#39;s out here doing the heavy lifting while your JS
 is still trying to figure out how to tie its shoes.
 &lt;/p&gt;
 &lt;p&gt;
 Now go try it, open the console and type &quot;i_am_doofus&quot;. Boom! There it is, you
 ungrateful shit. HTML just handed you a variable on a silver platter, and
 you didn&#39;t even have to beg for it. This is basic shit, and if you didn&#39;t
 know this, congrats. You&#39;re officially dumber than a bag of rocks.
 &lt;/p&gt;
 &lt;p&gt;
 This is HTML flexing its muscles, showing you it&#39;s not just some static
 bitch. It&#39;s dynamic, it&#39;s powerful, and it&#39;s been carrying your sorry ass
 since day one. Meanwhile, your JS is out here acting like it&#39;s the star of
 the show, when really, it&#39;s just riding HTML&#39;s coattails like a cheap date.
 &lt;/p&gt;
 &lt;p&gt;
 So next time you&#39;re jerking off to your fancy JS frameworks, remember: HTML&#39;s
 the one doing the real work, and it&#39;s laughing at your overcomplicated
 bullshit.
 &lt;/p&gt;
&lt;/section&gt;
&lt;section&gt;
 &lt;h2&gt;Words of wisdom&lt;/h2&gt;
 &lt;blockquote cite=https://justfuckinghtml.com&gt;
 &lt;p&gt;
 It&#39;s the kind of page that makes you want to weep tears of joy and throw
 your overpriced JavaScript framework out the window. It&#39;s the kind of page
 that makes you want to quit your job and become a full-time HTML
 evangelist. It&#39;s the kind of page that makes you want to start a cult
 dedicated to the worship of HTML. It&#39;s the kind of page that makes you
 want to write a love letter to HTML and send it to the HTML gods. It&#39;s the
 kind of page that makes you want to build a shrine to HTML in your living
 room and invite all your friends over for a candlelit HTML worship
 session. It&#39;s the kind of page that makes you want to start a YouTube
 channel dedicated to HTML tutorials and rants. It&#39;s the kind of page that
 makes you want to write a book about HTML and self-publish it on Amazon.
 It&#39;s the kind of page that makes you want to start a TikTok account
 dedicated to HTML and post daily HTML dance videos. It&#39;s the kind of page
 that makes you want to start a LinkedIn account dedicated to HTML and
 connect with other HTML professionals.
 &lt;/p&gt;
 &lt;/blockquote&gt;
 &lt;p&gt;— &lt;cite&gt;Just Fucking Use HTML&lt;/cite&gt;&lt;/p&gt;
&lt;/section&gt;
&lt;footer&gt;
 &lt;hr&gt;
 &lt;p&gt;
 &lt;small&gt;
 © Just Fucking Use HTML. All rights reserved, you framework-loving losers.
 &lt;/small&gt;
 &lt;/p&gt;
 &lt;p&gt;
 &lt;small&gt;
 Built by &lt;a href=https://x.com/kyrylosilin&gt;@kyrylosilin&lt;/a&gt; | &lt;a href=https://bsky.app/profile/kyrylo.org&gt;bluesky:@kyrylosilin&lt;/a&gt;
 &lt;/small&gt;
 &lt;/p&gt;
 &lt;p&gt;
 &lt;small&gt;
 If you&#39;re &lt;em&gt;still&lt;/em&gt; using frameworks, at least have the decency to
 slap an &lt;a href=https://telebugs.com/&gt;error tracker&lt;/a&gt; on that mess
 early. Your app&#39;s gonna crash and burn anyway, even if it&#39;s raw HTML, but
 might as well watch it as it unfolds.
 &lt;/small&gt;
 &lt;/p&gt;
 &lt;p&gt;
 &lt;small&gt;
 Inspired by → &lt;a href=https://motherfuckingwebsite.com/ rel=&quot;nofollow noreferrer noopener&quot;&gt;this&lt;/a&gt; motherfucker, who probably knows more about web development than you ever will.
 &lt;/small&gt;
 &lt;/p&gt;
 &lt;p&gt;
 &lt;small&gt;
 &lt;strong&gt;English&lt;/strong&gt; | &lt;a href=https://justfuckingusehtml.com/de&gt;Deutsch&lt;/a&gt; | &lt;a href=https://justfuckingusehtml.com/es-AR&gt;Español (es-AR)&lt;/a&gt;
 &lt;/small&gt;
 &lt;/p&gt;
&lt;/footer&gt;
&lt;div style=color-scheme:unset;forced-color-adjust:unset;mask:unset;math-depth:unset;position:absolute;position-anchor:unset;text-size-adjust:unset;appearance:unset;color:unset;font:unset;font-palette:unset;font-synthesis:unset;position-area:unset;text-orientation:unset;text-rendering:unset;text-spacing-trim:unset;-webkit-font-smoothing:unset;-webkit-locale:unset;-webkit-text-orientation:unset;-webkit-writing-mode:unset;writing-mode:unset;zoom:unset;accent-color:unset;place-content:unset;place-items:unset;place-self:unset;alignment-baseline:unset;anchor-name:unset;anchor-scope:unset;animation-composition:unset;animation:unset;app-region:unset;aspect-ratio:unset;backdrop-filter:unset;backface-visibility:unset;background:unset;background-blend-mode:unset;baseline-shift:unset;baseline-source:unset;block-size:unset;border-block:unset;border:unset;border-radius:unset;border-collapse:unset;border-end-end-radius:unset;border-end-start-radius:unset;border-inline:unset;border-start-end-radius:unset;border-start-start-radius:unset;bottom:unset;box-decoration-break:unset;box-shadow:unset;box-sizing:unset;break-after:unset;break-before:unset;break-inside:unset;buffered-rendering:unset;caption-side:unset;caret-color:unset;clear:unset;clip:unset;clip-path:unset;clip-rule:unset;color-interpolation:unset;color-interpolation-filters:unset;color-rendering:unset;columns:unset;column-fill:unset;gap:unset;column-rule:unset;column-span:unset;contain:unset;contain-intrinsic-block-size:unset;contain-intrinsic-size:unset;contain-intrinsic-inline-size:unset;container:unset;content:unset;content-visibility:unset;counter-increment:unset;counter-reset:unset;counter-set:unset;cursor:unset;cx:unset;cy:unset;d:unset;display:block;dominant-baseline:unset;dynamic-range-limit:unset;empty-cells:unset;field-sizing:unset;fill:unset;fill-opacity:unset;fill-rule:unset;filter:unset;flex:unset;flex-flow:unset;float:unset;flood-color:unset;flood-opacity:unset;grid:unset;grid-area:unset;height:unset;hyphenate-character:unset;hyphenate-limit-chars:unset;hyphens:unset;image-orientation:unset;image-rendering:unset;initial-letter:unset;inline-size:unset;inset-block:unset;inset-inline:unset;interpolate-size:unset;isolation:unset;left:0px;letter-spacing:unset;lighting-color:unset;line-break:unset;list-style:unset;margin-block:unset;margin:unset;margin-inline:unset;marker:unset;mask-type:unset;math-shift:unset;math-style:unset;max-block-size:unset;max-height:unset;max-inline-size:unset;max-width:unset;min-block-size:unset;min-height:unset;min-inline-size:unset;min-width:unset;mix-blend-mode:unset;object-fit:unset;object-position:unset;object-view-box:unset;offset:unset;opacity:unset;order:unset;orphans:unset;outline:unset;outline-offset:unset;overflow-anchor:unset;overflow-block:unset;overflow-clip-margin:unset;overflow-inline:unset;overflow-wrap:unset;overflow:unset;overlay:unset;overscroll-behavior-block:unset;overscroll-behavior-inline:unset;overscroll-behavior:unset;padding-block:unset;padding:unset;padding-inline:unset;page:unset;page-orientation:unset;paint-order:unset;perspective:unset;perspective-origin:unset;pointer-events:unset;position-try:unset;position-visibility:unset;print-color-adjust:unset;quotes:unset;r:unset;resize:unset;right:unset;rotate:unset;ruby-align:unset;ruby-position:unset;rx:unset;ry:unset;scale:unset;scroll-behavior:unset;scroll-initial-target:unset;scroll-margin-block:unset;scroll-margin:unset;scroll-margin-inline:unset;scroll-marker-group:unset;scroll-padding-block:unset;scroll-padding:unset;scroll-padding-inline:unset;scroll-snap-align:unset;scroll-snap-stop:unset;scroll-snap-type:unset;scroll-timeline:unset;scrollbar-color:unset;scrollbar-gutter:unset;scrollbar-width:unset;shape-image-threshold:unset;shape-margin:unset;shape-outside:unset;shape-rendering:unset;size:unset;speak:unset;stop-color:unset;stop-opacity:unset;stroke:unset;stroke-dasharray:unset;stroke-dashoffset:unset;stroke-linecap:unset;stroke-linejoin:unset;stroke-miterlimit:unset;stroke-opacity:unset;stroke-width:unset;tab-size:unset;table-layout:unset;text-align:unset;text-align-last:unset;text-anchor:unset;text-box:unset;text-combine-upright:unset;text-decoration:unset;text-decoration-skip-ink:unset;text-emphasis:unset;text-emphasis-position:unset;text-indent:unset;text-overflow:unset;text-shadow:unset;text-transform:unset;text-underline-offset:unset;text-underline-position:unset;text-wrap:unset;timeline-scope:unset;top:0px;touch-action:unset;transform:unset;transform-box:unset;transform-origin:unset;transform-style:unset;transition:unset;translate:unset;user-select:unset;vector-effect:unset;vertical-align:unset;view-timeline:unset;view-transition-class:unset;view-transition-name:unset;visibility:unset;border-spacing:unset;-webkit-box-align:unset;-webkit-box-decoration-break:unset;-webkit-box-direction:unset;-webkit-box-flex:unset;-webkit-box-ordinal-group:unset;-webkit-box-orient:unset;-webkit-box-pack:unset;-webkit-box-reflect:unset;-webkit-line-break:unset;-webkit-line-clamp:unset;-webkit-mask-box-image:unset;-webkit-rtl-ordering:unset;-webkit-ruby-position:unset;-webkit-tap-highlight-color:unset;-webkit-text-combine:unset;-webkit-text-decorations-in-effect:unset;-webkit-text-fill-color:unset;-webkit-text-security:unset;-webkit-text-stroke:unset;-webkit-user-drag:unset;white-space-collapse:unset;widows:unset;width:unset;will-change:unset;word-break:unset;word-spacing:unset;x:unset;y:unset;z-index:unset&gt;&lt;template shadowrootmode=closed&gt;&lt;style&gt;.kpxc-username-icon{position:absolute;cursor:pointer}.kpxc-username-icon.disconnected{background:url(chrome-extension://oboonakemofpalcgghocfoadofidjkkk/icons/disconnected.svg)right no-repeat;background-size:contain}.kpxc-username-icon.disconnected-moz{background:url(moz-extension://oboonakemofpalcgghocfoadofidjkkk/icons/disconnected.svg)right no-repeat;background-size:contain}.kpxc-username-icon.lock{background:url(chrome-extension://oboonakemofpalcgghocfoadofidjkkk/icons/locked.svg)right no-repeat;background-size:contain}.kpxc-username-icon.lock-moz{background:url(moz-extension://oboonakemofpalcgghocfoadofidjkkk/icons/locked.svg)right no-repeat;background-size:contain}.kpxc-username-icon.unlock{background:url(chrome-extension://oboonakemofpalcgghocfoadofidjkkk/icons/keepassxc.svg)right no-repeat;background-size:contain}.kpxc-username-icon.unlock-moz{background:url(moz-extension://oboonakemofpalcgghocfoadofidjkkk/icons/keepassxc.svg)right no-repeat;background-size:contain}&lt;/style&gt;&lt;div class=&quot;kpxc kpxc-username-icon lock&quot; title=&quot;Database is locked.&quot; size=16 offset=1 kpxc-pwgen-field-id=null style=z-index:10000000;width:16px;height:16px;top:2683.21px;left:297.784px;filter:saturate(100%)&gt;&lt;/div&gt;&lt;/template&gt;&lt;/div&gt;&lt;script data-template-shadow-root&gt;(()=&gt;{document.currentScript.remove();processNode(document);function processNode(node){node.querySelectorAll(&quot;template[shadowrootmode]&quot;).forEach(element=&gt;{let shadowRoot = element.parentElement.shadowRoot;if (!shadowRoot) {try {shadowRoot=element.parentElement.attachShadow({mode:element.getAttribute(&quot;shadowrootmode&quot;),delegatesFocus:element.getAttribute(&quot;shadowrootdelegatesfocus&quot;)!=null,clonable:element.getAttribute(&quot;shadowrootclonable&quot;)!=null,serializable:element.getAttribute(&quot;shadowrootserializable&quot;)!=null});shadowRoot.innerHTML=element.innerHTML;element.remove()} catch (error) {} if (shadowRoot) {processNode(shadowRoot)}}})}})()&lt;/script&gt;</code>
</section>]]></content><author><name></name></author><category term="scratchpad" /></entry><entry><title type="html">Parallelization with Git Worktrees and Tmux</title><link href="https://ib.bsb.br/parallelization-with-git-worktrees-and-tmux/" rel="alternate" type="text/html" title="Parallelization with Git Worktrees and Tmux" /><published>2025-05-29T00:00:00+00:00</published><updated>2025-05-29T14:54:26+00:00</updated><id>https://ib.bsb.br/parallelization-with-git-worktrees-and-tmux</id><content type="html" xml:base="https://ib.bsb.br/parallelization-with-git-worktrees-and-tmux/"><![CDATA[<p>Published Time: 2025-05-26T18:52:00.000Z</p>

<p>Markdown Content:
May 26, 2025 , Nicholas Khami</p>

<h6 id="if-youre-underwhelmed-with-ai-coding-agents-or-simply-want-to-get-more-out-of-them-give-parallelization-a-try-after-seeing-the-results-firsthand-over-the-past-month-im-ready-to-call-myself-an-evangelist-the-throughput-improvements-are-incredible-and-i-dont-feel-like-im-losing-control-of-the-codebase">If you’re underwhelmed with AI coding agents or simply want to get more out of them, give parallelization a try. After seeing the results firsthand over the past month, I’m ready to call myself an evangelist. The throughput improvements are incredible, and I don’t feel like I’m losing control of the codebase.</h6>

<p>This realization isn’t unique to me; the effectiveness of using Git worktrees for simultaneous execution is gaining broader recognition, as evidenced by mentions in <a href="https://docs.anthropic.com/en/docs/claude-code/tutorials#run-parallel-claude-code-sessions-with-git-worktrees">Claude Code’s docs</a>, <a href="https://news.ycombinator.com/item?id=44043717">discussion on Hacker News</a>, projects like <a href="https://github.com/smtg-ai/claude-squad">Claude Squad</a>, and conversation on <a href="https://x.com/search?q=git%20worktree&amp;src=typed_query&amp;f=live">X</a>.</p>

<p>I had to vibe code <em>something</em> for this post haha. Use mouse or touch to rotate and zoom. Click “Reset View” to return to the initial angle.</p>

<h3 id="example-use-case-adding-a-ui-component">Example use-case: adding a UI component</h3>

<p>I’m building a component library called <a href="https://astrobits.dev/">astrobits</a> and wanted to add a <code class="language-plaintext highlighter-rouge">Toggle</code>. To tackle the task, I deployed two <a href="https://www.anthropic.com/claude-code">Claude Code</a> agents and two <a href="https://openai.com/index/introducing-codex/">Codex</a> agents, all with the same prompt, running in parallel within their own <a href="https://git-scm.com/docs/git-worktrees">git worktrees</a>. Worktrees are essential because they provide each agent with an isolated directory, allowing them to execute simultaneously without overwriting each other’s changes.</p>

<p>The number of agents I choose to rollout depends on the complexity of the task. Over time, you’ll develop an intuition for estimating the right number based on the situation. Here, I felt 4 was appropriate.</p>

<p><img src="https://www.skeptrune.com/_astro/4320-attempt.s98T-aCF_ZLWpD1.webp" alt="Image 1: Worktree example run toggle image" /></p>

<p><code class="language-plaintext highlighter-rouge">claude-1</code>. Mostly <strong>correct</strong>, workable, but pixelated border-image and shadow needs fixing.</p>

<p><img src="https://www.skeptrune.com/_astro/4321-attempt.BHAntrrQ_Z25wuP0.webp" alt="Image 2: Worktree example run toggle image" /></p>

<p><code class="language-plaintext highlighter-rouge">claude-2</code>. Completely <strong>broken</strong>, sliding circle too small, wrong color.</p>

<p><img src="https://www.skeptrune.com/_astro/4323-attempt.A25xk5py_Z7SM6S.webp" alt="Image 3: Worktree example run toggle image" /></p>

<p><code class="language-plaintext highlighter-rouge">codex-1</code>. Very <strong>wrong</strong> Shadow on top, active state wrong side.</p>

<p><img src="https://www.skeptrune.com/_astro/4324-attempt.DnwzufAQ_28akmr.webp" alt="Image 4: Worktree example run toggle image" /></p>

<p><code class="language-plaintext highlighter-rouge">codex-2</code>. Is <strong>unusable</strong>, circle color wrong, active side incorrect.</p>

<p>Voila, results! Only one of the four LLMs produced a solution that actually saved me time. This validates the necessity of rolling multiple agents: if each has a <code class="language-plaintext highlighter-rouge">~25%</code> chance of producing something useful, then running four gives a <code class="language-plaintext highlighter-rouge">68%</code> chance that at least one will succeed <code class="language-plaintext highlighter-rouge">(1 - 0.75^4 ≈ 0.68)</code>. Four agents was essentially the bare minimum to have reasonable confidence in getting a workable solution.</p>

<p>With LLMs being so affordable, there’s virtually no downside to running multiple agents. The cost difference between using one agent ($0.10) versus four ($0.40) is negligible compared to the 20 minutes of development time saved. Since the financial risk is minimal, you can afford to be aggressive with parallelization. If anything, I could have run even more agents to further increase the odds of getting a perfect solution on the first try.</p>

<p>And yet, the process of running them is still cumbersome and manual, it’s more effort to setup 8 than 4, so I’m often lazy and opt to run the minimum number of agents I think will get the job done. This is where the problem comes in, and why I’m excited to share my proposed solution.</p>

<h3 id="current-workflow-pain-points">Current workflow pain points</h3>

<p>Right now, I manually create git worktrees using <code class="language-plaintext highlighter-rouge">git worktree add -b newbranch ../path</code>, start a <code class="language-plaintext highlighter-rouge">tmux</code> session for each one, run Claude Code in the first pane, paste a prompt, <code class="language-plaintext highlighter-rouge">leader+c</code> into a new pane, run <code class="language-plaintext highlighter-rouge">yarn dev</code> to get a preview, switch to my browser to review, repeat if no agents succeed, then finally commit, push, and create a PR once I’m satisfied with an output.</p>

<p>Here are the top frustrations:</p>

<ul>
  <li>I can’t tell which branch a worktree was most recently rebased onto. For example, if <code class="language-plaintext highlighter-rouge">agent-1</code> was rebased onto <code class="language-plaintext highlighter-rouge">feature-x</code> but <code class="language-plaintext highlighter-rouge">agent-2</code> onto <code class="language-plaintext highlighter-rouge">main</code>, it’s easy to lose track without manual notes.</li>
  <li>There is no easy way to send the same prompt to multiple agents at once. For instance, if all agents are stuck on the same misunderstanding of the requirements, I have to copy-paste the clarification into each session.</li>
  <li>I really wish I had a shortcut to open my IDE for a given worktree without having to <code class="language-plaintext highlighter-rouge">tmux a</code>, <code class="language-plaintext highlighter-rouge">leader + c</code>, and <code class="language-plaintext highlighter-rouge">code .</code> manually. I could use a long one-liner with <code class="language-plaintext highlighter-rouge">tmux send-keys and xargs</code> to automate this, but that still feels clunky.</li>
  <li>Web previewing is a pain. I have to run <code class="language-plaintext highlighter-rouge">yarn dev</code> in each worktree, and then hold the mental model of which port each worktree is on. Automating a reverse proxy to handle this with a decent naming scheme would be a game-changer.</li>
  <li>Committing and creating pull requests (PRs) is also more cumbersome than it should be. For example, after finding a solution in <code class="language-plaintext highlighter-rouge">agent-3</code>, I have to manually attach to that tmux session then <code class="language-plaintext highlighter-rouge">commit</code>, <code class="language-plaintext highlighter-rouge">push</code>, and <code class="language-plaintext highlighter-rouge">gh pr</code>.</li>
</ul>

<p>I feel like I’ve been through the wringer enough times with this process that I can see a solution shape which would create a smoother experience.</p>

<h3 id="proposing-a-solution-uzi">Proposing a solution: <em>uzi</em></h3>

<p>To address these challenges head-on, the ideal developer experience (DX) would involve a lightweight CLI that wraps tmux, automating this complex orchestration. My co-founder Denzell and I felt these pain points acutely enough that we’ve begun developing such a tool, which we’re calling <a href="https://github.com/devflowinc/uzi"><em>uzi</em></a>. The core idea behind <em>uzi</em> is to abstract away the manual, repetitive tasks involved in managing multiple AI agent worktrees.</p>

<p>See some of the <code class="language-plaintext highlighter-rouge">uzi</code> commands we are thinking to implement below. Our goal is to make the workflow more seamless while sticking closely to the existing mechanics of worktres and tmux. We want to make sure that we feel at home using <code class="language-plaintext highlighter-rouge">uzi</code> alongside standard unix tools like <code class="language-plaintext highlighter-rouge">xargs</code>, <code class="language-plaintext highlighter-rouge">grep</code>, and <code class="language-plaintext highlighter-rouge">awk</code>.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">uzi start --agents claude:3,codex:2 --prompt "Implement feature X"</code> could initialize and prompt three Claude instances and two Codex instances, each in its own worktree.</li>
  <li><code class="language-plaintext highlighter-rouge">uzi ls</code> would display all active agents, their target branches, and current statuses.</li>
  <li><code class="language-plaintext highlighter-rouge">uzi exec --all -- yarn dev</code> could run a command like <code class="language-plaintext highlighter-rouge">yarn dev</code> across all agent worktrees.</li>
  <li><code class="language-plaintext highlighter-rouge">uzi broadcast -- "Refine the previous response by focusing on Y"</code> would send a follow-up prompt to all active agents.</li>
  <li><code class="language-plaintext highlighter-rouge">uzi checkpoint --agent claude-1 --message "Implemented initial draft"</code> could rebase the specified agent’s worktree and commit the changes.</li>
  <li><code class="language-plaintext highlighter-rouge">uzi kill --agent codex-2</code> would clean up a specific agent’s tmux session and optionally its worktree.</li>
</ul>

<p>These commands would primarily operate via <code class="language-plaintext highlighter-rouge">tmux send-keys</code> instructions to the appropriate sessions. We don’t want to reinvent the wheel; we just want to polish the existing process and make it more efficient.</p>

<h3 id="the-future-is-parallel-beyond-code">The Future is Parallel: Beyond Code</h3>

<p>While <code class="language-plaintext highlighter-rouge">uzi</code> focuses on software developers, its methodology isn’t limited to tech; the principle of leveraging multiple agents running in parallel to increase the odds of finding an optimal solution applies universally.</p>

<p>Consider a company like <a href="https://www.versionstory.com/">versionstory</a>, which is pioneering version control for transactional lawyers. An attorney could leverage their software to run multiple instances of an agent to redline a contract. After reviewing the outputs, they could select and merge the best components to finalize the document. This approach would provide additional confidence in the quality of the final review as it would be based on multiple independent analyses rather than a single agent’s output.</p>

<p>Similarly, a marketing team could employ this parallel strategy to perform data analysis on ad performance. By prompting multiple AI instances, they could quickly gather a range of analyses, review them, and select the most insightful ones to inform their strategy. More coverage of the solution space leads to better decision-making and more effective campaigns.</p>

<p>This parallel paradigm isn’t just a new technique for developers; it’s a glimpse into a more efficient, robust, and powerful future for AI-assisted productivity across various fields. I expect to see existing software products start to gain more powerful version control and parallel execution capabilities which emulate the workflow enabled by git worktrees for software development.</p>

<p>My DMs are open if you want to chat about this topic or have any questions. I’m happy to discuss.</p>]]></content><author><name></name></author><category term="scratchpad" /></entry><entry><title type="html">Recursively move all files from nested subdirectories to the top</title><link href="https://ib.bsb.br/recursively-move-all-files-from-nested-subdirectories-to-the-top/" rel="alternate" type="text/html" title="Recursively move all files from nested subdirectories to the top" /><published>2025-05-29T00:00:00+00:00</published><updated>2025-05-29T11:26:17+00:00</updated><id>https://ib.bsb.br/recursively-move-all-files-from-nested-subdirectories-to-the-top</id><content type="html" xml:base="https://ib.bsb.br/recursively-move-all-files-from-nested-subdirectories-to-the-top/"><![CDATA[<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c">#</span>
<span class="c"># flatten.sh: Recursively move all files from nested subdirectories to the root of the specified directory.</span>
<span class="c">#</span>
<span class="c"># How it works:</span>
<span class="c">#   1. Validates that exactly one argument (the path to the target directory) is provided.</span>
<span class="c">#   2. Checks if the target directory exists and is writable.</span>
<span class="c">#   3. Uses the 'find' command with -mindepth 2 to locate files not on the top-level.</span>
<span class="c">#   4. For each file, it attempts to move the file to the target directory.</span>
<span class="c">#      - If a file with the same basename exists, a Unix timestamp is prefixed to the filename to avoid overwriting.</span>
<span class="c">#   5. Optionally removes empty directories left over from the file moves.</span>
<span class="c">#</span>
<span class="c"># Usage:</span>
<span class="c">#   ./flatten.sh /path/to/target_directory</span>
<span class="c">#</span>

<span class="c"># Check that exactly one argument is provided</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"$#"</span> <span class="nt">-ne</span> 1 <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"Usage: </span><span class="nv">$0</span><span class="s2"> /path/to/target_directory"</span>
    <span class="nb">exit </span>1
<span class="k">fi

</span><span class="nv">TARGET_DIR</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>

<span class="c"># Verify that TARGET_DIR exists and is a directory</span>
<span class="k">if</span> <span class="o">[</span> <span class="o">!</span> <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$TARGET_DIR</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"Error: Directory '</span><span class="nv">$TARGET_DIR</span><span class="s2">' does not exist."</span>
    <span class="nb">exit </span>1
<span class="k">fi</span>

<span class="c"># Check if TARGET_DIR is writable</span>
<span class="k">if</span> <span class="o">[</span> <span class="o">!</span> <span class="nt">-w</span> <span class="s2">"</span><span class="nv">$TARGET_DIR</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"Error: Directory '</span><span class="nv">$TARGET_DIR</span><span class="s2">' is not writable. Please adjust permissions."</span>
    <span class="nb">exit </span>1
<span class="k">fi

</span><span class="nb">echo</span> <span class="s2">"Processing files in '</span><span class="nv">$TARGET_DIR</span><span class="s2">'..."</span>

<span class="c"># Use find to locate all files in subdirectories (depth &gt;= 2)</span>
<span class="c"># -mindepth 2 ensures that files in the top-level directory are not included.</span>
<span class="c"># -print0 and IFS= read -r -d '' handle filenames containing spaces or special characters.</span>
find <span class="s2">"</span><span class="nv">$TARGET_DIR</span><span class="s2">"</span> <span class="nt">-mindepth</span> 2 <span class="nt">-type</span> f <span class="nt">-print0</span> | <span class="k">while </span><span class="nv">IFS</span><span class="o">=</span> <span class="nb">read</span> <span class="nt">-r</span> <span class="nt">-d</span> <span class="s1">''</span> file<span class="p">;</span> <span class="k">do
    </span><span class="nv">base</span><span class="o">=</span><span class="si">$(</span><span class="nb">basename</span> <span class="s2">"</span><span class="nv">$file</span><span class="s2">"</span><span class="si">)</span>
    <span class="nv">dest</span><span class="o">=</span><span class="s2">"</span><span class="nv">$TARGET_DIR</span><span class="s2">/</span><span class="nv">$base</span><span class="s2">"</span>

    <span class="c"># If a file with the same name exists, modify the filename by appending a timestamp to avoid overwriting.</span>
    <span class="k">if</span> <span class="o">[</span> <span class="nt">-e</span> <span class="s2">"</span><span class="nv">$dest</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
        <span class="c"># Append a timestamp to the original filename. Note: This is not a guarantee against collisions if files are moved very quickly.</span>
        <span class="nv">timestamp</span><span class="o">=</span><span class="si">$(</span><span class="nb">date</span> +%s<span class="si">)</span>
        <span class="nv">dest</span><span class="o">=</span><span class="s2">"</span><span class="nv">$TARGET_DIR</span><span class="s2">/</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}</span><span class="s2">_</span><span class="nv">$base</span><span class="s2">"</span>
        <span class="nb">echo</span> <span class="s2">"Note: '</span><span class="nv">$base</span><span class="s2">' already exists. Renaming moved file to '</span><span class="si">$(</span><span class="nb">basename</span> <span class="s2">"</span><span class="nv">$dest</span><span class="s2">"</span><span class="si">)</span><span class="s2">'."</span>
    <span class="k">fi</span>

    <span class="c"># Attempt to move the file and capture any errors.</span>
    <span class="k">if </span><span class="nb">mv</span> <span class="s2">"</span><span class="nv">$file</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$dest</span><span class="s2">"</span><span class="p">;</span> <span class="k">then
        </span><span class="nb">echo</span> <span class="s2">"Moved: '</span><span class="nv">$file</span><span class="s2">' -&gt; '</span><span class="nv">$dest</span><span class="s2">'"</span>
    <span class="k">else
        </span><span class="nb">echo</span> <span class="s2">"Error moving: '</span><span class="nv">$file</span><span class="s2">'"</span> <span class="o">&gt;</span>&amp;2
    <span class="k">fi
done</span>

<span class="c"># Optional Cleanup: Remove any empty directories that remain in TARGET_DIR.</span>
<span class="c"># This may remove folders that are no longer needed. Comment out this section if unwanted.</span>
find <span class="s2">"</span><span class="nv">$TARGET_DIR</span><span class="s2">"</span> <span class="nt">-type</span> d <span class="nt">-empty</span> <span class="nt">-delete</span>

<span class="nb">echo</span> <span class="s2">"All eligible files have been moved to '</span><span class="nv">$TARGET_DIR</span><span class="s2">'."</span>
</code></pre></div></div>]]></content><author><name></name></author><category term="scratchpad" /></entry><entry><title type="html">changing IP address</title><link href="https://ib.bsb.br/ip-changing/" rel="alternate" type="text/html" title="changing IP address" /><published>2025-05-28T00:00:00+00:00</published><updated>2025-05-28T08:58:04+00:00</updated><id>https://ib.bsb.br/ip-changing</id><content type="html" xml:base="https://ib.bsb.br/ip-changing/"><![CDATA[<p>This tutorial will guide you through changing your Debian Bullseye machine’s IP address from one automatically assigned by DHCP to a static IP address. We’ll use your network interface `enP2p33s0` (currently `192.168.15.3/24`) and your router’s gateway (`192.168.15.1`) as the basis for examples.</p>

<p>Below is a step-by-step tutorial to change your Debian Bullseye machine’s IP address.</p>

<h2 id="1-confirm-current-settings--choose-your-static-ip"><strong>1. Confirm Current Settings &amp; Choose Your Static IP</strong></h2>

<ul>
  <li><strong>Current Interface and IP:</strong> Your primary network interface is enP2p33s0, currently using 192.168.15.3/24.</li>
  <li><strong>Gateway:</strong> Your router’s IP address is 192.168.15.1.</li>
  <li><strong>DNS Servers (Current):</strong> Your system logs show you’re using 8.8.8.8 and 127.0.0.53. The 127.0.0.53 address means systemd-resolved is active and acting as a local DNS stub resolver. /etc/resolv.conf will point to it, but systemd-resolved forwards queries to upstream DNS servers configured elsewhere (or via DHCP). For a static configuration, you’ll explicitly set these upstream servers.</li>
</ul>

<p><strong>Choose Your Static IP:</strong></p>

<ul>
  <li>It must be in the 192.168.15.x range.</li>
  <li>It must <strong>not</strong> be 192.168.15.1 (your router).</li>
  <li>It must <strong>not</strong> be used by another device on your network.</li>
  <li><strong>Crucially:</strong> It should be <strong>outside your router’s DHCP assignment range</strong>. Log into your ASKEY RTF8115VW router to check its DHCP settings (usually under LAN or DHCP Server sections) and find the range of IPs it assigns automatically (e.g., 192.168.15.100 to 192.168.15.200). Choose an IP outside this range, for example, 192.168.15.50.</li>
</ul>

<p><strong>Static IP Details for this Tutorial (Example):</strong></p>

<ul>
  <li><strong>IP Address:</strong> 192.168.15.50</li>
  <li><strong>Netmask:</strong> 255.255.255.0 (which is /24 in CIDR notation)</li>
  <li><strong>Gateway:</strong> 192.168.15.1</li>
  <li><strong>DNS Servers (Example Choices):</strong> 8.8.8.8 (Google) and 1.1.1.1 (Cloudflare). Alternatively, you could use your router’s IP as a DNS forwarder, e.g., 192.168.15.1 and 8.8.8.8. <em>Use the DNS servers you prefer.</em></li>
</ul>

<h2 id="2-back-up-the-current-network-configuration"><strong>2. Back Up the Current Network Configuration</strong></h2>

<p>Before making any changes, always back up your configuration. If your system uses ifupdown (common on Debian server installations), the main file is /etc/network/interfaces.</p>

<p>sudo cp /etc/network/interfaces /etc/network/interfaces.backup_$(date +%F)</p>

<p>If you plan to edit systemd-networkd files or NetworkManager configurations, back up relevant files from /etc/systemd/network/ or /etc/NetworkManager/system-connections/ respectively, if they exist and are being modified.</p>

<h2 id="3-determine-your-network-management-system"><strong>3. Determine Your Network Management System</strong></h2>

<p>Debian can use different systems to manage network configurations. You need to identify which one is actively managing enP2p33s0:</p>

<ul>
  <li>ifupdown (via /etc/network/interfaces):<br />
Check the contents: cat /etc/network/interfaces.<br />
If you see a stanza for enP2p33s0 like auto enP2p33s0 and iface enP2p33s0 inet dhcp, ifupdown is likely managing this interface. This is a traditional method, often default on servers.</li>
  <li>systemd-networkd:<br />
Check its status: sudo systemctl is-active systemd-networkd.<br />
If active, check for configuration files in /etc/systemd/network/ (e.g., ls /etc/systemd/network/). A .network file matching your interface might exist.</li>
  <li>NetworkManager:<br />
Check its status: sudo systemctl is-active NetworkManager.<br />
If active (common on desktop environments), confirm it’s managing the interface: nmcli dev status. Look for enP2p33s0.</li>
</ul>

<p>This tutorial will primarily cover <strong>Method A (ifupdown)</strong> and <strong>Method B (systemd-networkd)</strong>, with an overview of Method C (NetworkManager). Choose the method appropriate for your system.</p>

<h2 id="4-method-a--using-etcnetworkinterfaces-ifupdown"><strong>4. Method A – Using /etc/network/interfaces (ifupdown)</strong></h2>

<p>This is the traditional Debian method.</p>

<p><strong>a. Edit the configuration file:</strong></p>

<p>sudo nano /etc/network/interfaces</p>

<p>b. Modify the stanza for enP2p33s0:<br />
Find the lines for enP2p33s0. If it’s set for DHCP, it might look like:<br />
auto enP2p33s0<br />
iface enP2p33s0 inet dhcp</p>

<p>Comment out or delete these lines and add/modify the stanza for a static configuration. If no entry exists, add the following:</p>

<p># The primary network interface<br />
auto enP2p33s0<br />
iface enP2p33s0 inet static<br />
    address 192.168.15.50        # Your chosen static IP<br />
    netmask 255.255.255.0        # Your netmask<br />
    gateway 192.168.15.1         # Your gateway IP<br />
    dns-nameservers 8.8.8.8 1.1.1.1 # Your chosen DNS servers (space separated)<br />
    # dns-search yourlocaldomain.example # Optional: for local domain search</p>

<p>c. Save and Exit:<br />
In nano, press Ctrl+O (Write Out), then Enter, then Ctrl+X (Exit).<br />
d. Apply the Changes:<br />
Restart the networking service:<br />
sudo systemctl restart networking.service</p>

<p>Or, bring the interface down and then up (may cause a brief disconnection):</p>

<p>sudo ifdown enP2p33s0 &amp;&amp; sudo ifup enP2p33s0</p>

<p><em>(If ifdown complains or the settings don’t apply, another service like NetworkManager might be interfering. If NetworkManager is active and you intend to use ifupdown for this interface, you may need to stop/disable NetworkManager (sudo systemctl stop NetworkManager; sudo systemctl disable NetworkManager) or configure NetworkManager to ignore enP2p33s0 e.g., by adding unmanaged-devices=interface-name:enP2p33s0 to /etc/NetworkManager/NetworkManager.conf and restarting NetworkManager).</em></p>

<h2 id="5-method-b--using-systemd-networkd"><strong>5. Method B – Using systemd-networkd</strong></h2>

<p>If systemd-networkd is managing your network:</p>

<p>a. Create a configuration file:<br />
File names in /etc/systemd/network/ are typically prefixed with a number (e.g., 10- or 20- for ordering) and end in .network.<br />
sudo nano /etc/systemd/network/20-wired-static-enP2p33s0.network</p>

<p><strong>b. Add the following configuration:</strong></p>

<p>[Match]<br />
Name=enP2p33s0</p>

<p>[Network]<br />
Address=192.168.15.50/24   # Your static IP with CIDR netmask<br />
Gateway=192.168.15.1      # Your gateway<br />
DNS=8.8.8.8               # Primary DNS (use your chosen server)<br />
DNS=1.1.1.1               # Secondary DNS (use your chosen server)<br />
# You can add more DNS= lines if needed<br />
# Or use your router as a DNS: DNS=192.168.15.1</p>

<p><strong>c. Save and Exit.</strong></p>

<p><strong>d. Set permissions and restart the service:</strong></p>

<p>sudo chmod 644 /etc/systemd/network/20-wired-static-enP2p33s0.network<br />
sudo systemctl enable systemd-networkd # Ensure it’s enabled to start on boot<br />
sudo systemctl restart systemd-networkd</p>

<p>systemd-resolved (which is active on your system) should pick up these DNS settings from systemd-networkd.</p>

<h2 id="6-method-c--using-networkmanager-brief-overview"><strong>6. Method C – Using NetworkManager (Brief Overview)</strong></h2>

<p>If your system (especially a desktop) uses NetworkManager:</p>

<ul>
  <li><strong>Graphical Tool:</strong> Use your desktop environment’s network settings GUI. Find your wired connection (enP2p33s0), change its IPv4 settings from “Automatic (DHCP)” to “Manual,” and enter your desired IP address, netmask, gateway, and DNS servers. Save and apply.</li>
  <li>
    <p><strong>Text User Interface (</strong>nmtui<strong>):</strong><br />
sudo nmtui</p>

    <p>Navigate to “Edit a connection,” select enP2p33s0 (or its connection name), choose “Edit…”, change “IPv4 CONFIGURATION” to “Manual,” and fill in the Addresses, Gateway, and DNS servers fields. Select “OK” and quit.</p>
  </li>
  <li>
    <p><strong>Command Line (</strong>nmcli<strong>):</strong> This is more advanced. First, find your connection name: nmcli con show. Let’s assume it’s “Wired connection 1”.<br />
sudo nmcli con mod “Wired connection 1” ipv4.method manual ipv4.addresses 192.168.15.50/24 ipv4.gateway 192.168.15.1 ipv4.dns “8.8.8.8 1.1.1.1”<br />
sudo nmcli con down “Wired connection 1” &amp;&amp; sudo nmcli con up “Wired connection 1”</p>

    <p><em>(Note: For ipv4.dns, provide a space-separated list of DNS servers within the quotes).</em></p>
  </li>
</ul>

<h2 id="7-test-connectivity"><strong>7. Test Connectivity</strong></h2>

<p>After applying changes using your chosen method, verify the configuration:</p>

<p><strong>a. Check IP Address:</strong></p>

<p>ip -br addr show enP2p33s0</p>

<p>or</p>

<p>ip addr show enP2p33s0</p>

<p>You should see inet 192.168.15.50/24 (or your chosen static IP) associated with enP2p33s0.</p>

<p><strong>b. Check Routing Table:</strong></p>

<p>ip route show</p>

<p>Ensure the default route is via your gateway (e.g., default via 192.168.15.1 dev enP2p33s0).</p>

<p>c. Check DNS Resolution:<br />
Your /etc/resolv.conf file will likely show nameserver 127.0.0.53. This is expected when systemd-resolved is active. systemd-resolved listens on this local address and forwards DNS queries to the upstream servers you configured. To see the actual upstream DNS servers being used by systemd-resolved:<br />
resolvectl status</p>

<p>or</p>

<table>
  <tbody>
    <tr>
      <td>systemd-resolve --status</td>
      <td>grep -A3 ‘Current DNS Server’</td>
    </tr>
  </tbody>
</table>

<p>This should show the DNS servers you configured (e.g., 8.8.8.8, 1.1.1.1).</p>

<p><strong>d. Ping Tests:</strong></p>

<ul>
  <li>
    <p>Ping your gateway:<br />
ping -c 3 192.168.15.1</p>
  </li>
  <li>
    <p>Ping an external IP address (tests IP connectivity beyond your LAN):<br />
ping -c 3 8.8.8.8</p>
  </li>
  <li>
    <p>Ping a domain name (tests DNS resolution and full internet connectivity):<br />
ping -c 3 google.com</p>
  </li>
</ul>

<p>If all these tests pass, your static IP configuration is working correctly.</p>

<h2 id="8-important-considerations--reverting"><strong>8. Important Considerations &amp; Reverting</strong></h2>

<ul>
  <li><strong>SSH Disconnection:</strong> If you are connected to your Debian machine via SSH, changing its IP address will disconnect your session. Ensure you have physical console access or an alternative way to access the machine if issues arise.</li>
  <li><strong>IP Conflicts:</strong> Double-check that the static IP you chose is unique on your network and is <strong>not</strong> within your router’s DHCP assignment range to prevent IP address conflicts.</li>
  <li><strong>Router’s DHCP Reservation (Alternative):</strong> Instead of setting a static IP directly on the Debian machine, you can configure your ASKEY RTF8115VW router to always assign the same IP address to your Debian machine’s MAC address. This is often called “DHCP Reservation” or “Static DHCP Lease.”
    <ul>
      <li>To use this method: Find your enP2p33s0 MAC address (ip link show enP2p33s0). Log into your router, find the DHCP reservation settings, and map the MAC address to your desired IP (e.g., 192.168.15.50).</li>
      <li><strong>Crucially:</strong> If you use DHCP reservation on your router, ensure your Debian machine’s network interface (enP2p33s0) is configured to obtain an IP address <strong>automatically via DHCP</strong> (i.e., revert any static IP settings on the Debian machine itself).</li>
    </ul>
  </li>
  <li><strong>Reverting to DHCP:</strong>
    <ul>
      <li>
        <p>Method A (/etc/network/interfaces):<br />
Restore your backup:<br />
sudo cp /etc/network/interfaces.backup_YYYY-MM-DD /etc/network/interfaces # Use your actual backup filename</p>

        <p>Then, change the enP2p33s0 stanza back to:<br />
auto enP2p33s0<br />
iface enP2p33s0 inet dhcp</p>

        <p>Save, and restart networking: sudo systemctl restart networking.service.</p>
      </li>
      <li>
        <p>Method B (systemd-networkd):<br />
Remove or rename your static .network file (e.g., sudo mv /etc/systemd/network/20-wired-static-enP2p33s0.network /etc/systemd/network/20-wired-static-enP2p33s0.network.disabled).<br />
If no other .network file configures enP2p33s0 for DHCP, create one, e.g., /etc/systemd/network/10-dhcp-enP2p33s0.network:<br />
[Match]<br />
Name=enP2p33s0</p>

        <p>[Network]<br />
DHCP=yes</p>

        <p>Save, and restart: sudo systemctl restart systemd-networkd.</p>
      </li>
      <li>
        <p>Method C (NetworkManager):<br />
Using nmtui or your GUI, change the IPv4 method for the connection back to “Automatic (DHCP)”.<br />
Using nmcli (replace “Wired connection 1” with your actual connection name):<br />
sudo nmcli con mod “Wired connection 1” ipv4.method auto ipv4.addresses “” ipv4.gateway “” ipv4.dns “”<br />
sudo nmcli con up “Wired connection 1”</p>
      </li>
    </ul>
  </li>
</ul>]]></content><author><name></name></author><category term="scratchpad" /></entry></feed>