<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>
    
      cliPaperQA — infoBAG
    
  </title>
  <meta name="title" content="cliPaperQA">
  <meta name="description" content="can't steer unless already moving">

  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="cliPaperQA — infoBAG">
  <meta property="og:description" content="can't steer unless already moving">
  <meta property="og:url" content="https://ib.bsb.br/clipaper-qa/">
  <meta property="og:type" content="article">
  <meta property="og:site_name" content="infoBAG">
  

  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="cliPaperQA — infoBAG">
  <meta name="twitter:description" content="can't steer unless already moving">
  

  <link rel="canonical" href="https://ib.bsb.br/clipaper-qa/">
  <link rel="alternate" type="application/rss+xml" title="infoBAG" href="https://ib.bsb.br/rss.xml">

  
    <meta name="keywords" content="linux,scripts">
    
      <meta property="article:tag" content="linux">
    
      <meta property="article:tag" content="scripts">
    
  

  <!-- Favicons and Icons -->
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  

  <link href="/style.css" rel="stylesheet">
</head>
  <body class="post-content-body">
    
    
    
    
        
        
        "<h1 id="paperqa-cli-script-documentation">PaperQA CLI Script Documentation</h1>\n    
        
        
        "\n    
        
        
        "<p>This documentation provides a comprehensive guide on how to use the provided PaperQA CLI script. The script is designed to process PDF documents, generate embeddings, and answer questions using OpenAI’s language models.</p>\n    
        
        
        "\n    
        
        
        "<h2 id="introduction">Introduction</h2>\n    
        
        
        "\n    
        
        
        "<p>The PaperQA CLI script is a command-line tool that allows users to process PDF documents, generate embeddings, and answer questions using OpenAI’s language models. It supports various configurations and options to customize the processing and querying of documents.</p>\n    
        
        
        "\n    
        
        
        "<h2 id="prerequisites">Prerequisites</h2>\n    
        
        
        "\n    
        
        
        "<p>Before using the script, ensure you have the following:</p>\n    
        
        
        "\n    
        
        
        "<ul>\n    
        
        
        "  <li>Python 3.7 or higher</li>\n    
        
        
        "  <li>Required Python packages: <code class="language-plaintext highlighter-rouge">argparse</code>, <code class="language-plaintext highlighter-rouge">glob</code>, <code class="language-plaintext highlighter-rouge">json</code>, <code class="language-plaintext highlighter-rouge">pickle</code>, <code class="language-plaintext highlighter-rouge">sys</code>, <code class="language-plaintext highlighter-rouge">pathlib</code>, <code class="language-plaintext highlighter-rouge">typing</code>, <code class="language-plaintext highlighter-rouge">paperqa</code></li>\n    
        
        
        "</ul>\n    
        
        
        "\n    
        
        
        "<h2 id="installation">Installation</h2>\n    
        
        
        "\n    
        
        
        "<ol>\n    
        
        
        "  <li>Clone the repository or download the script.</li>\n    
        
        
        "  <li>Install the required Python packages using pip:</li>\n    
        
        
        "</ol>\n    
        
        
        "\n    
        
        
        "<section data-filename="bash_code-block.sh" data-code="pip3 install paperqa" data-download-link="" data-download-link-label="Download Bash"><code class="language-bash">pip3 install paperqa</code></section>\n    
        
        
        "\n    
        
        
        "<p>Note: The other required packages (<code class="language-plaintext highlighter-rouge">argparse</code>, <code class="language-plaintext highlighter-rouge">glob</code>, <code class="language-plaintext highlighter-rouge">json</code>, <code class="language-plaintext highlighter-rouge">pickle</code>, <code class="language-plaintext highlighter-rouge">sys</code>, <code class="language-plaintext highlighter-rouge">pathlib</code>, <code class="language-plaintext highlighter-rouge">typing</code>) are part of the Python standard library and do not need to be installed separately.</p>\n    
        
        
        "\n    
        
        
        "<h2 id="usage">Usage</h2>\n    
        
        
        "\n    
        
        
        "<h3 id="command-line-arguments">Command Line Arguments</h3>\n    
        
        
        "\n    
        
        
        "<p>The script accepts several command-line arguments to customize its behavior. Below is a list of available arguments:</p>\n    
        
        
        "\n    
        
        
        "<ul>\n    
        
        
        "  <li><code class="language-plaintext highlighter-rouge">--pdf_dir</code>: Directory containing PDF files</li>\n    
        
        
        "  <li><code class="language-plaintext highlighter-rouge">--question</code>: Question to ask (use quotes for multi-word questions)</li>\n    
        
        
        "  <li><code class="language-plaintext highlighter-rouge">--questions_file</code>: Path to a text file containing a list of questions, one per line</li>\n    
        
        
        "  <li><code class="language-plaintext highlighter-rouge">--save_embeddings</code>: Path to save the Docs object with embeddings (default: <code class="language-plaintext highlighter-rouge">paperqa_embeddings.pkl</code>)</li>\n    
        
        
        "  <li><code class="language-plaintext highlighter-rouge">--load_embeddings</code>: Path to load a pre-saved Docs object with embeddings</li>\n    
        
        
        "  <li><code class="language-plaintext highlighter-rouge">--save_answers</code>: Path to save the answers to a text file (default: <code class="language-plaintext highlighter-rouge">answers.txt</code>)</li>\n    
        
        
        "  <li><code class="language-plaintext highlighter-rouge">--save_data</code>: Path to save all data (answers, Docs object) to a pickle file (default: <code class="language-plaintext highlighter-rouge">paperqa_data.pkl</code>)</li>\n    
        
        
        "  <li><code class="language-plaintext highlighter-rouge">--save_embeddings_txt</code>: Path to save embeddings in a text file (for debugging/analysis)</li>\n    
        
        
        "  <li><code class="language-plaintext highlighter-rouge">--llm</code>: OpenAI LLM model name (default: <code class="language-plaintext highlighter-rouge">gpt-4o</code>)</li>\n    
        
        
        "  <li><code class="language-plaintext highlighter-rouge">--embedding</code>: OpenAI embedding model name (default: <code class="language-plaintext highlighter-rouge">text-embedding-3-large</code>)</li>\n    
        
        
        "  <li><code class="language-plaintext highlighter-rouge">--summary_llm</code>: OpenAI LLM model name for summarization (defaults to same as <code class="language-plaintext highlighter-rouge">--llm</code>)</li>\n    
        
        
        "  <li><code class="language-plaintext highlighter-rouge">--k</code>: Number of top-k results to retrieve for each query (default: 50)</li>\n    
        
        
        "  <li><code class="language-plaintext highlighter-rouge">--max_sources</code>: Maximum number of sources to use in the final answer (default: 50)</li>\n    
        
        
        "  <li><code class="language-plaintext highlighter-rouge">--chunk_chars</code>: Number of characters per chunk when splitting documents (default: 3200)</li>\n    
        
        
        "  <li><code class="language-plaintext highlighter-rouge">--overlap</code>: Number of overlapping characters between chunks (default: 1600)</li>\n    
        
        
        "  <li><code class="language-plaintext highlighter-rouge">--json_summary</code>: Use JSON format for summarization (requires GPT-3.5-turbo or later)</li>\n    
        
        
        "  <li><code class="language-plaintext highlighter-rouge">--detailed_citations</code>: Include full citations in the context</li>\n    
        
        
        "  <li><code class="language-plaintext highlighter-rouge">--disable_vector_search</code>: Disable vector search and use all text chunks</li>\n    
        
        
        "  <li><code class="language-plaintext highlighter-rouge">--key_filter</code>: Filter evidence by document keys based on question similarity</li>\n    
        
        
        "  <li><code class="language-plaintext highlighter-rouge">--custom_prompt_file</code>: Path to a JSON file containing custom prompts</li>\n    
        
        
        "  <li><code class="language-plaintext highlighter-rouge">--batch_size</code>: Batch size for processing documents (default: 10)</li>\n    
        
        
        "  <li><code class="language-plaintext highlighter-rouge">--max_concurrent</code>: Maximum number of concurrent requests (default: 4)</li>\n    
        
        
        "  <li><code class="language-plaintext highlighter-rouge">--strip_citations</code>: Strip citations from the generated answers</li>\n    
        
        
        "  <li><code class="language-plaintext highlighter-rouge">--jit_texts_index</code>: Enable just-in-time text indexing</li>\n    
        
        
        "  <li><code class="language-plaintext highlighter-rouge">--answer_length</code>: Specify the desired length of the answer</li>\n    
        
        
        "</ul>\n    
        
        
        "\n    
        
        
        "<h3 id="favorites">Favorites</h3>\n    
        
        
        "\n    
        
        
        "<p><code class="language-plaintext highlighter-rouge">--question</code>\n    
        
        
        "“Question to ask (use quotes for multi-word questions)”</p>\n    
        
        
        "\n    
        
        
        "<p><code class="language-plaintext highlighter-rouge">--questions_file</code>\n    
        
        
        "“Path to a text file containing a list of questions, one per line”</p>\n    
        
        
        "\n    
        
        
        "<p><code class="language-plaintext highlighter-rouge">--load_embeddings</code>\n    
        
        
        "“Path to load a pre-saved Docs object with embeddings”</p>\n    
        
        
        "\n    
        
        
        "<p><code class="language-plaintext highlighter-rouge">--save_embeddings_txt</code>\n    
        
        
        "“Path to save embeddings in a text file (for debugging/analysis)”</p>\n    
        
        
        "\n    
        
        
        "<p><code class="language-plaintext highlighter-rouge">--detailed_citations</code>\n    
        
        
        "“Include full citations in the context”</p>\n    
        
        
        "\n    
        
        
        "<p><code class="language-plaintext highlighter-rouge">--custom_prompt_file</code>\n    
        
        
        "“Path to a JSON file containing custom prompts”</p>\n    
        
        
        "\n    
        
        
        "<p><code class="language-plaintext highlighter-rouge">--answer_length</code>\n    
        
        
        "“Specify the desired length of the answer (e.g., ‘about 200 words’)”</p>\n    
        
        
        "\n    
        
        
        "<h3 id="examples">Examples</h3>\n    
        
        
        "\n    
        
        
        "<ol>\n    
        
        
        "  <li>Ask a single question:</li>\n    
        
        
        "</ol>\n    
        
        
        "\n    
        
        
        "<section data-filename="bash_code-block.sh" data-code="python script.py --pdf_dir /path/to/pdfs --question &quot;What is the impact of climate change on agriculture?&quot;" data-download-link="" data-download-link-label="Download Bash"><code class="language-bash">python script.py --pdf_dir /path/to/pdfs --question "What is the impact of climate change on agriculture?"</code></section>\n    
        
        
        "\n    
        
        
        "<ol>\n    
        
        
        "  <li>Ask multiple questions from a file:</li>\n    
        
        
        "</ol>\n    
        
        
        "\n    
        
        
        "<section data-filename="bash_code-block.sh" data-code="python script.py --pdf_dir /path/to/pdfs --questions_file questions.txt" data-download-link="" data-download-link-label="Download Bash"><code class="language-bash">python script.py --pdf_dir /path/to/pdfs --questions_file questions.txt</code></section>\n    
        
        
        "\n    
        
        
        "<h3 id="list-of-questions-template">List of questions template:</h3>\n    
        
        
        "\n    
        
        
        "<section data-filename="_code-block.txt" data-code="questions = [\n    
        
        
        "&quot;Q1?&quot;,\n    
        
        
        "&quot;Q2?&quot;,\n    
        
        
        "# ... add your 28 other questions here\n    
        
        
        "]" data-download-link="" data-download-link-label="Download "><code class="language-">questions = [\n    
        
        
        ""Q1?",\n    
        
        
        ""Q2?",\n    
        
        
        "# ... add your 28 other questions here\n    
        
        
        "]</code></section>\n    
        
        
        "\n    
        
        
        "<ol>\n    
        
        
        "  <li>Load existing embeddings and ask a question:</li>\n    
        
        
        "</ol>\n    
        
        
        "\n    
        
        
        "<section data-filename="bash_code-block.sh" data-code="python script.py --load_embeddings embeddings.pkl --question &quot;What are the latest advancements in AI?&quot;" data-download-link="" data-download-link-label="Download Bash"><code class="language-bash">python script.py --load_embeddings embeddings.pkl --question "What are the latest advancements in AI?"</code></section>\n    
        
        
        "\n    
        
        
        "<h2 id="detailed-explanation">Detailed Explanation</h2>\n    
        
        
        "\n    
        
        
        "<h3 id="loading-custom-prompts">Loading Custom Prompts</h3>\n    
        
        
        "\n    
        
        
        "<p>If a custom prompt file is provided using <code class="language-plaintext highlighter-rouge">--custom_prompt_file</code>, the script loads the prompts from the specified JSON file. This allows users to customize the prompts used for querying the documents.</p>\n    
        
        
        "\n    
        
        
        "<h3 id="creating-docs-object">Creating Docs Object</h3>\n    
        
        
        "\n    
        
        
        "<p>The script creates a <code class="language-plaintext highlighter-rouge">Docs</code> object with the specified configurations, including the LLM model, embedding model, and other parameters. This object is used to manage the documents and perform queries.</p>\n    
        
        
        "\n    
        
        
        "<h3 id="loading-existing-embeddings">Loading Existing Embeddings</h3>\n    
        
        
        "\n    
        
        
        "<p>If a pre-saved Docs object with embeddings is provided using <code class="language-plaintext highlighter-rouge">--load_embeddings</code>, the script loads the object from the specified file. This allows users to reuse previously generated embeddings.</p>\n    
        
        
        "\n    
        
        
        "<h3 id="adding-pdf-documents">Adding PDF Documents</h3>\n    
        
        
        "\n    
        
        
        "<p>The script adds PDF documents from the specified directory to the <code class="language-plaintext highlighter-rouge">Docs</code> object. It ensures that only new documents are added to avoid duplication.</p>\n    
        
        
        "\n    
        
        
        "<h3 id="getting-questions">Getting Questions</h3>\n    
        
        
        "\n    
        
        
        "<p>The script retrieves questions from the command line, a file, or standard input. It supports multiple sources for questions to provide flexibility in querying the documents.</p>\n    
        
        
        "\n    
        
        
        "<h3 id="answering-questions">Answering Questions</h3>\n    
        
        
        "\n    
        
        
        "<p>The script processes each question using the <code class="language-plaintext highlighter-rouge">Docs</code> object and generates answers. It supports various configurations for querying, including the number of top-k results, maximum sources, and answer length.</p>\n    
        
        
        "\n    
        
        
        "<h3 id="saving-data">Saving Data</h3>\n    
        
        
        "\n    
        
        
        "<p>The script saves the generated embeddings, answers, and other data to the specified files. This allows users to persist the results and reuse them later.</p>\n    
        
        
        "\n    
        
        
        "<h2 id="error-handling">Error Handling</h2>\n    
        
        
        "\n    
        
        
        "<p>The script includes error handling for various scenarios, such as file not found errors and JSON decoding errors. It prints appropriate error messages and exits gracefully in case of errors.</p>\n    
        
        
        "\n    
        
        
        "<h1 id="script">Script</h1>\n    
        
        
        "\n    
        
        
        "<section data-filename="python_code-block.py" data-code="from paperqa import Answer, Docs, PromptCollection, OpenAILLMModel, OpenAIEmbeddingModel\n    
        
        
        "import argparse\n    
        
        
        "import sys\n    
        
        
        "import pickle\n    
        
        
        "import json\n    
        
        
        "import glob\n    
        
        
        "from pathlib import Path\n    
        
        
        "from typing import List, Dict\n    
        
        
        "def main():\n    
        
        
        "parser = argparse.ArgumentParser(description=&quot;PaperQA CLI&quot;)\n    
        
        
        "parser.add_argument(\n    
        
        
        "&quot;--pdf_dir&quot;,\n    
        
        
        "type=str,\n    
        
        
        "default=&quot;/home/mario/gpt-researcher/BIBTEX&quot;,\n    
        
        
        "help=&quot;Directory containing PDF files&quot;,\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        "&quot;--question&quot;, type=str, help=&quot;Question to ask (use quotes for multi-word questions)&quot;\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        "&quot;--questions_file&quot;,\n    
        
        
        "type=str,\n    
        
        
        "help=&quot;Path to a text file containing a list of questions, one per line&quot;,\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        "&quot;--save_embeddings&quot;,\n    
        
        
        "type=str,\n    
        
        
        "default=&quot;paperqa_embeddings.pkl&quot;,\n    
        
        
        "help=&quot;Path to save the Docs object with embeddings&quot;,\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        "&quot;--load_embeddings&quot;,\n    
        
        
        "type=str,\n    
        
        
        "help=&quot;Path to load a pre-saved Docs object with embeddings&quot;,\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        "&quot;--save_answers&quot;,\n    
        
        
        "type=str,\n    
        
        
        "default=&quot;answers.txt&quot;,\n    
        
        
        "help=&quot;Path to save the answers to a text file&quot;,\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        "&quot;--save_data&quot;,\n    
        
        
        "type=str,\n    
        
        
        "default=&quot;paperqa_data.pkl&quot;,\n    
        
        
        "help=&quot;Path to save all data (answers, Docs object) to a pickle file&quot;,\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        "&quot;--save_embeddings_txt&quot;,\n    
        
        
        "type=str,\n    
        
        
        "help=&quot;Path to save embeddings in a text file (for debugging/analysis)&quot;,\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        "&quot;--llm&quot;,\n    
        
        
        "type=str,\n    
        
        
        "default=&quot;gpt-4o&quot;,\n    
        
        
        "help=&quot;OpenAI LLM model name (e.g., 'gpt-4o', 'gpt-4o')&quot;,\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        "&quot;--embedding&quot;,\n    
        
        
        "type=str,\n    
        
        
        "default=&quot;text-embedding-3-large&quot;,\n    
        
        
        "help=&quot;OpenAI embedding model name (e.g., 'text-embedding-3-large')&quot;,\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        "&quot;--summary_llm&quot;,\n    
        
        
        "type=str,\n    
        
        
        "help=&quot;OpenAI LLM model name for summarization (defaults to same as --llm)&quot;,\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        "&quot;--k&quot;,\n    
        
        
        "type=int,\n    
        
        
        "default=50,\n    
        
        
        "help=&quot;Number of top-k results to retrieve for each query&quot;,\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        "&quot;--max_sources&quot;,\n    
        
        
        "type=int,\n    
        
        
        "default=50,\n    
        
        
        "help=&quot;Maximum number of sources to use in the final answer&quot;,\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        "&quot;--chunk_chars&quot;,\n    
        
        
        "type=int,\n    
        
        
        "default=2400,\n    
        
        
        "help=&quot;Number of characters per chunk when splitting documents&quot;,\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        "&quot;--overlap&quot;,\n    
        
        
        "type=int,\n    
        
        
        "default=1200,\n    
        
        
        "help=&quot;Number of overlapping characters between chunks&quot;,\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        "&quot;--json_summary&quot;,\n    
        
        
        "action=&quot;store_true&quot;,\n    
        
        
        "help=&quot;Use JSON format for summarization (requires GPT-3.5-turbo or later)&quot;,\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        "&quot;--detailed_citations&quot;,\n    
        
        
        "action=&quot;store_true&quot;,\n    
        
        
        "help=&quot;Include full citations in the context&quot;,\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        "&quot;--disable_vector_search&quot;,\n    
        
        
        "action=&quot;store_true&quot;,\n    
        
        
        "help=&quot;Disable vector search and use all text chunks&quot;,\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        "&quot;--key_filter&quot;,\n    
        
        
        "action=&quot;store_true&quot;,\n    
        
        
        "help=&quot;Filter evidence by document keys based on question similarity&quot;,\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        "&quot;--custom_prompt_file&quot;,\n    
        
        
        "type=str,\n    
        
        
        "help=&quot;Path to a JSON file containing custom prompts&quot;,\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        "&quot;--batch_size&quot;,\n    
        
        
        "type=int,\n    
        
        
        "default=10,  # Increased batch size for efficiency\n    
        
        
        "help=&quot;Batch size for processing documents (adjust for performance)&quot;,\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        "&quot;--max_concurrent&quot;,\n    
        
        
        "type=int,\n    
        
        
        "default=4,\n    
        
        
        "help=&quot;Maximum number of concurrent requests (adjust for performance)&quot;,\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        "&quot;--strip_citations&quot;,\n    
        
        
        "action=&quot;store_true&quot;,\n    
        
        
        "help=&quot;Strip citations from the generated answers&quot;,\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        "&quot;--jit_texts_index&quot;,\n    
        
        
        "action=&quot;store_true&quot;,\n    
        
        
        "help=&quot;Enable just-in-time text indexing&quot;,\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        "&quot;--answer_length&quot;,\n    
        
        
        "type=str,\n    
        
        
        "default=&quot;about 100 words&quot;,\n    
        
        
        "help=&quot;Specify the desired length of the answer (e.g., 'about 200 words')&quot;,\n    
        
        
        ")\n    
        
        
        "args = parser.parse_args()\n    
        
        
        "# Load custom prompts from JSON file if provided\n    
        
        
        "custom_prompts: Dict[str, str] = {}\n    
        
        
        "if args.custom_prompt_file:\n    
        
        
        "try:\n    
        
        
        "with open(args.custom_prompt_file, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f:\n    
        
        
        "custom_prompts = json.load(f)\n    
        
        
        "except (FileNotFoundError, json.JSONDecodeError) as e:\n    
        
        
        "print(f&quot;Error loading custom prompts: {e}&quot;, file=sys.stderr)\n    
        
        
        "sys.exit(1)\n    
        
        
        "# Initialize PromptCollection without arguments\n    
        
        
        "prompts = PromptCollection()\n    
        
        
        "# If custom prompts are needed, set them directly\n    
        
        
        "if custom_prompts:\n    
        
        
        "for key, value in custom_prompts.items():\n    
        
        
        "setattr(prompts, key, value)\n    
        
        
        "llm_model = OpenAILLMModel(config={&quot;model&quot;: args.llm, &quot;temperature&quot;: 0.1})\n    
        
        
        "embedding_model = OpenAIEmbeddingModel(config={&quot;model&quot;: args.embedding})\n    
        
        
        "summary_llm_model = (\n    
        
        
        "OpenAILLMModel(config={&quot;model&quot;: args.summary_llm, &quot;temperature&quot;: 0.1})\n    
        
        
        "if args.summary_llm\n    
        
        
        "else llm_model\n    
        
        
        ")\n    
        
        
        "# Create Docs object with supported parameters\n    
        
        
        "docs = Docs(\n    
        
        
        "llm=args.llm,  # Pass the model name as a string\n    
        
        
        "embedding=args.embedding,  # Pass the model name as a string\n    
        
        
        "summary_llm=args.summary_llm if args.summary_llm else args.llm,  # Pass the model name as a string\n    
        
        
        "prompts=prompts,  # Use the initialized and updated PromptCollection\n    
        
        
        "max_concurrent=args.max_concurrent,\n    
        
        
        "jit_texts_index=args.jit_texts_index,\n    
        
        
        ")\n    
        
        
        "# Load existing embeddings if provided\n    
        
        
        "if args.load_embeddings:\n    
        
        
        "try:\n    
        
        
        "with open(args.load_embeddings, &quot;rb&quot;) as f:\n    
        
        
        "docs = pickle.load(f)\n    
        
        
        "docs.set_client()  # Required after loading from pickle\n    
        
        
        "except FileNotFoundError as e:\n    
        
        
        "print(f&quot;Error loading embeddings: {e}&quot;, file=sys.stderr)\n    
        
        
        "sys.exit(1)\n    
        
        
        "# Add PDF documents\n    
        
        
        "pdf_dir = Path(args.pdf_dir)\n    
        
        
        "pdf_files = glob.glob(str(pdf_dir / &quot;*.pdf&quot;))\n    
        
        
        "for pdf_file in pdf_files:\n    
        
        
        "if pdf_file not in [doc.dockey for doc in docs.docs.values()]:\n    
        
        
        "docs.add(pdf_file)\n    
        
        
        "# Get questions from command line, file, or standard input\n    
        
        
        "questions: List[str] = []\n    
        
        
        "if args.question:\n    
        
        
        "questions.append(args.question)\n    
        
        
        "if args.questions_file:\n    
        
        
        "try:\n    
        
        
        "with open(args.questions_file, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f:\n    
        
        
        "questions.extend([line.strip() for line in f])\n    
        
        
        "except FileNotFoundError as e:\n    
        
        
        "print(f&quot;Error reading questions file: {e}&quot;, file=sys.stderr)\n    
        
        
        "sys.exit(1)\n    
        
        
        "if not questions:\n    
        
        
        "questions = [line.strip() for line in sys.stdin]\n    
        
        
        "# Get answers for each question\n    
        
        
        "answers = []\n    
        
        
        "for question in questions:\n    
        
        
        "answer = docs.query(question, k=args.k, max_sources=args.max_sources)\n    
        
        
        "print(f&quot;Answer object: {answer}&quot;)  # Debug print to inspect the Answer object\n    
        
        
        "answers.append(str(answer))  # Use str(answer) to store the entire Answer object\n    
        
        
        "# Save answers to file\n    
        
        
        "with open(args.save_answers, &quot;w&quot;, encoding=&quot;utf-8&quot;) as f:\n    
        
        
        "for answer in answers:\n    
        
        
        "f.write(answer + &quot;\n&quot;)\n    
        
        
        "# Save embeddings to file\n    
        
        
        "if args.save_embeddings:\n    
        
        
        "with open(args.save_embeddings, &quot;wb&quot;) as f:\n    
        
        
        "pickle.dump(docs, f)\n    
        
        
        "# Save all data to file\n    
        
        
        "if args.save_data:\n    
        
        
        "with open(args.save_data, &quot;wb&quot;) as f:\n    
        
        
        "pickle.dump({&quot;docs&quot;: docs, &quot;answers&quot;: answers}, f)\n    
        
        
        "# Save embeddings to text file (for debugging/analysis)\n    
        
        
        "if args.save_embeddings_txt:\n    
        
        
        "with open(args.save_embeddings_txt, &quot;w&quot;, encoding=&quot;utf-8&quot;) as f:\n    
        
        
        "for doc in docs.docs.values():\n    
        
        
        "f.write(f&quot;{doc.dockey}\t{doc.embedding}\n&quot;)\n    
        
        
        "if __name__ == &quot;__main__&quot;:\n    
        
        
        "main()" data-download-link="" data-download-link-label="Download Python"><code class="language-python">from paperqa import Answer, Docs, PromptCollection, OpenAILLMModel, OpenAIEmbeddingModel\n    
        
        
        "import argparse\n    
        
        
        "import sys\n    
        
        
        "import pickle\n    
        
        
        "import json\n    
        
        
        "import glob\n    
        
        
        "from pathlib import Path\n    
        
        
        "from typing import List, Dict\n    
        
        
        "def main():\n    
        
        
        "parser = argparse.ArgumentParser(description="PaperQA CLI")\n    
        
        
        "parser.add_argument(\n    
        
        
        ""--pdf_dir",\n    
        
        
        "type=str,\n    
        
        
        "default="/home/mario/gpt-researcher/BIBTEX",\n    
        
        
        "help="Directory containing PDF files",\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        ""--question", type=str, help="Question to ask (use quotes for multi-word questions)"\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        ""--questions_file",\n    
        
        
        "type=str,\n    
        
        
        "help="Path to a text file containing a list of questions, one per line",\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        ""--save_embeddings",\n    
        
        
        "type=str,\n    
        
        
        "default="paperqa_embeddings.pkl",\n    
        
        
        "help="Path to save the Docs object with embeddings",\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        ""--load_embeddings",\n    
        
        
        "type=str,\n    
        
        
        "help="Path to load a pre-saved Docs object with embeddings",\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        ""--save_answers",\n    
        
        
        "type=str,\n    
        
        
        "default="answers.txt",\n    
        
        
        "help="Path to save the answers to a text file",\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        ""--save_data",\n    
        
        
        "type=str,\n    
        
        
        "default="paperqa_data.pkl",\n    
        
        
        "help="Path to save all data (answers, Docs object) to a pickle file",\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        ""--save_embeddings_txt",\n    
        
        
        "type=str,\n    
        
        
        "help="Path to save embeddings in a text file (for debugging/analysis)",\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        ""--llm",\n    
        
        
        "type=str,\n    
        
        
        "default="gpt-4o",\n    
        
        
        "help="OpenAI LLM model name (e.g., 'gpt-4o', 'gpt-4o')",\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        ""--embedding",\n    
        
        
        "type=str,\n    
        
        
        "default="text-embedding-3-large",\n    
        
        
        "help="OpenAI embedding model name (e.g., 'text-embedding-3-large')",\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        ""--summary_llm",\n    
        
        
        "type=str,\n    
        
        
        "help="OpenAI LLM model name for summarization (defaults to same as --llm)",\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        ""--k",\n    
        
        
        "type=int,\n    
        
        
        "default=50,\n    
        
        
        "help="Number of top-k results to retrieve for each query",\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        ""--max_sources",\n    
        
        
        "type=int,\n    
        
        
        "default=50,\n    
        
        
        "help="Maximum number of sources to use in the final answer",\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        ""--chunk_chars",\n    
        
        
        "type=int,\n    
        
        
        "default=2400,\n    
        
        
        "help="Number of characters per chunk when splitting documents",\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        ""--overlap",\n    
        
        
        "type=int,\n    
        
        
        "default=1200,\n    
        
        
        "help="Number of overlapping characters between chunks",\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        ""--json_summary",\n    
        
        
        "action="store_true",\n    
        
        
        "help="Use JSON format for summarization (requires GPT-3.5-turbo or later)",\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        ""--detailed_citations",\n    
        
        
        "action="store_true",\n    
        
        
        "help="Include full citations in the context",\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        ""--disable_vector_search",\n    
        
        
        "action="store_true",\n    
        
        
        "help="Disable vector search and use all text chunks",\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        ""--key_filter",\n    
        
        
        "action="store_true",\n    
        
        
        "help="Filter evidence by document keys based on question similarity",\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        ""--custom_prompt_file",\n    
        
        
        "type=str,\n    
        
        
        "help="Path to a JSON file containing custom prompts",\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        ""--batch_size",\n    
        
        
        "type=int,\n    
        
        
        "default=10,  # Increased batch size for efficiency\n    
        
        
        "help="Batch size for processing documents (adjust for performance)",\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        ""--max_concurrent",\n    
        
        
        "type=int,\n    
        
        
        "default=4,\n    
        
        
        "help="Maximum number of concurrent requests (adjust for performance)",\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        ""--strip_citations",\n    
        
        
        "action="store_true",\n    
        
        
        "help="Strip citations from the generated answers",\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        ""--jit_texts_index",\n    
        
        
        "action="store_true",\n    
        
        
        "help="Enable just-in-time text indexing",\n    
        
        
        ")\n    
        
        
        "parser.add_argument(\n    
        
        
        ""--answer_length",\n    
        
        
        "type=str,\n    
        
        
        "default="about 100 words",\n    
        
        
        "help="Specify the desired length of the answer (e.g., 'about 200 words')",\n    
        
        
        ")\n    
        
        
        "args = parser.parse_args()\n    
        
        
        "# Load custom prompts from JSON file if provided\n    
        
        
        "custom_prompts: Dict[str, str] = {}\n    
        
        
        "if args.custom_prompt_file:\n    
        
        
        "try:\n    
        
        
        "with open(args.custom_prompt_file, "r", encoding="utf-8") as f:\n    
        
        
        "custom_prompts = json.load(f)\n    
        
        
        "except (FileNotFoundError, json.JSONDecodeError) as e:\n    
        
        
        "print(f"Error loading custom prompts: {e}", file=sys.stderr)\n    
        
        
        "sys.exit(1)\n    
        
        
        "# Initialize PromptCollection without arguments\n    
        
        
        "prompts = PromptCollection()\n    
        
        
        "# If custom prompts are needed, set them directly\n    
        
        
        "if custom_prompts:\n    
        
        
        "for key, value in custom_prompts.items():\n    
        
        
        "setattr(prompts, key, value)\n    
        
        
        "llm_model = OpenAILLMModel(config={"model": args.llm, "temperature": 0.1})\n    
        
        
        "embedding_model = OpenAIEmbeddingModel(config={"model": args.embedding})\n    
        
        
        "summary_llm_model = (\n    
        
        
        "OpenAILLMModel(config={"model": args.summary_llm, "temperature": 0.1})\n    
        
        
        "if args.summary_llm\n    
        
        
        "else llm_model\n    
        
        
        ")\n    
        
        
        "# Create Docs object with supported parameters\n    
        
        
        "docs = Docs(\n    
        
        
        "llm=args.llm,  # Pass the model name as a string\n    
        
        
        "embedding=args.embedding,  # Pass the model name as a string\n    
        
        
        "summary_llm=args.summary_llm if args.summary_llm else args.llm,  # Pass the model name as a string\n    
        
        
        "prompts=prompts,  # Use the initialized and updated PromptCollection\n    
        
        
        "max_concurrent=args.max_concurrent,\n    
        
        
        "jit_texts_index=args.jit_texts_index,\n    
        
        
        ")\n    
        
        
        "# Load existing embeddings if provided\n    
        
        
        "if args.load_embeddings:\n    
        
        
        "try:\n    
        
        
        "with open(args.load_embeddings, "rb") as f:\n    
        
        
        "docs = pickle.load(f)\n    
        
        
        "docs.set_client()  # Required after loading from pickle\n    
        
        
        "except FileNotFoundError as e:\n    
        
        
        "print(f"Error loading embeddings: {e}", file=sys.stderr)\n    
        
        
        "sys.exit(1)\n    
        
        
        "# Add PDF documents\n    
        
        
        "pdf_dir = Path(args.pdf_dir)\n    
        
        
        "pdf_files = glob.glob(str(pdf_dir / "*.pdf"))\n    
        
        
        "for pdf_file in pdf_files:\n    
        
        
        "if pdf_file not in [doc.dockey for doc in docs.docs.values()]:\n    
        
        
        "docs.add(pdf_file)\n    
        
        
        "# Get questions from command line, file, or standard input\n    
        
        
        "questions: List[str] = []\n    
        
        
        "if args.question:\n    
        
        
        "questions.append(args.question)\n    
        
        
        "if args.questions_file:\n    
        
        
        "try:\n    
        
        
        "with open(args.questions_file, "r", encoding="utf-8") as f:\n    
        
        
        "questions.extend([line.strip() for line in f])\n    
        
        
        "except FileNotFoundError as e:\n    
        
        
        "print(f"Error reading questions file: {e}", file=sys.stderr)\n    
        
        
        "sys.exit(1)\n    
        
        
        "if not questions:\n    
        
        
        "questions = [line.strip() for line in sys.stdin]\n    
        
        
        "# Get answers for each question\n    
        
        
        "answers = []\n    
        
        
        "for question in questions:\n    
        
        
        "answer = docs.query(question, k=args.k, max_sources=args.max_sources)\n    
        
        
        "print(f"Answer object: {answer}")  # Debug print to inspect the Answer object\n    
        
        
        "answers.append(str(answer))  # Use str(answer) to store the entire Answer object\n    
        
        
        "# Save answers to file\n    
        
        
        "with open(args.save_answers, "w", encoding="utf-8") as f:\n    
        
        
        "for answer in answers:\n    
        
        
        "f.write(answer + "\n")\n    
        
        
        "# Save embeddings to file\n    
        
        
        "if args.save_embeddings:\n    
        
        
        "with open(args.save_embeddings, "wb") as f:\n    
        
        
        "pickle.dump(docs, f)\n    
        
        
        "# Save all data to file\n    
        
        
        "if args.save_data:\n    
        
        
        "with open(args.save_data, "wb") as f:\n    
        
        
        "pickle.dump({"docs": docs, "answers": answers}, f)\n    
        
        
        "# Save embeddings to text file (for debugging/analysis)\n    
        
        
        "if args.save_embeddings_txt:\n    
        
        
        "with open(args.save_embeddings_txt, "w", encoding="utf-8") as f:\n    
        
        
        "for doc in docs.docs.values():\n    
        
        
        "f.write(f"{doc.dockey}\t{doc.embedding}\n")\n    
        
        
        "if __name__ == "__main__":\n    
        
        
        "main()</code></section>\n    
        
        
        "\n    
        
        
        "<h1 id="2add">2add</h1>\n    
        
        
        "\n    
        
        
        "<hr />\n    
        
        
        "<p>Automating a list of prompts to be queried:</p>\n    
        
        
        "<ul>\n    
        
        
        "  <li>You can create a list of prompts and iterate over them, similar to the example in point 1.</li>\n    
        
        
        "  <li>Here’s an example:\n    
        
        
        "    <section data-filename="python_code-block.py" data-code="prompts = [\n    
        
        
        "&quot;Prompt 1&quot;,\n    
        
        
        "&quot;Prompt 2&quot;,\n    
        
        
        "# ...\n    
        
        
        "&quot;Prompt N&quot;\n    
        
        
        "]\n    
        
        
        "for prompt in prompts:\n    
        
        
        "answer = loaded_docs.query(prompt, k=50)\n    
        
        
        "print(f&quot;Prompt: {prompt}&quot;)\n    
        
        
        "print(f&quot;Answer: {answer.formatted_answer}\n&quot;)" data-download-link="" data-download-link-label="Download Python"><code class="language-python">prompts = [\n    
        
        
        ""Prompt 1",\n    
        
        
        ""Prompt 2",\n    
        
        
        "# ...\n    
        
        
        ""Prompt N"\n    
        
        
        "]\n    
        
        
        "for prompt in prompts:\n    
        
        
        "answer = loaded_docs.query(prompt, k=50)\n    
        
        
        "print(f"Prompt: {prompt}")\n    
        
        
        "print(f"Answer: {answer.formatted_answer}\n")</code></section>\n    
        
        
        "  </li>\n    
        
        
        "</ul>\n    
        
        
        "\n    
        
        
        "<hr />\n    
        
        
        "<p>Piping from command line stdout into the Python script:</p>\n    
        
        
        "<ul>\n    
        
        
        "  <li>You can use the <code class="language-plaintext highlighter-rouge">sys</code> module to read input from the command line.</li>\n    
        
        
        "  <li>Here’s an example:\n    
        
        
        "    <section data-filename="python_code-block.py" data-code="import sys\n    
        
        
        "question = sys.stdin.read().strip()\n    
        
        
        "answer = loaded_docs.query(question, k=50)\n    
        
        
        "print(answer.formatted_answer)" data-download-link="" data-download-link-label="Download Python"><code class="language-python">import sys\n    
        
        
        "question = sys.stdin.read().strip()\n    
        
        
        "answer = loaded_docs.query(question, k=50)\n    
        
        
        "print(answer.formatted_answer)</code></section>\n    
        
        
        "  </li>\n    
        
        
        "  <li>You can then pipe the question from the command line:\n    
        
        
        "    <section data-filename="bash_code-block.sh" data-code="echo &quot;What is the meaning of life?&quot; | python3 researcher.py" data-download-link="" data-download-link-label="Download Bash"><code class="language-bash">echo "What is the meaning of life?" | python3 researcher.py</code></section>\n    
        
        
        "  </li>\n    
        
        
        "</ul>\n    
        
        
        "\n    
        
        
        "<hr />\n    
        
        
        "<p>Using the response of a request/query as context for subsequent prompts:</p>\n    
        
        
        "<ul>\n    
        
        
        "  <li>You can use the <code class="language-plaintext highlighter-rouge">answer.context</code> attribute to access the context used for generating the answer.</li>\n    
        
        
        "  <li>Here’s an example:\n    
        
        
        "    <section data-filename="python_code-block.py" data-code="previous_context = &quot;&quot;\n    
        
        
        "for prompt in prompts:\n    
        
        
        "answer = loaded_docs.query(prompt, k=50, context=previous_context)\n    
        
        
        "previous_context = answer.context\n    
        
        
        "print(f&quot;Prompt: {prompt}&quot;)\n    
        
        
        "print(f&quot;Answer: {answer.formatted_answer}\n&quot;)" data-download-link="" data-download-link-label="Download Python"><code class="language-python">previous_context = ""\n    
        
        
        "for prompt in prompts:\n    
        
        
        "answer = loaded_docs.query(prompt, k=50, context=previous_context)\n    
        
        
        "previous_context = answer.context\n    
        
        
        "print(f"Prompt: {prompt}")\n    
        
        
        "print(f"Answer: {answer.formatted_answer}\n")</code></section>\n    
        
        
        "  </li>\n    
        
        
        "</ul>\n    
        
        
        "\n    
        
        
        "<hr />\n    
        
        
        "\n    
        
        
        "<section data-filename="_code-block.txt" data-code="Implement adversarial prompting. #131\n    
        
        
        "This adds a method adversarial_query. Adversarial queries first generate an answer, then asks the LLM to find problems with the answer, then finally generates the final response so that it addresses th\n    
        
        
        "1 commit\n    
        
        
        "2 files changed\n    
        
        
        "1 contributor\n    
        
        
        "Commits on Jun 2, 2023\n    
        
        
        "Add method for adversarial prompting. Also work around a problem with… \n    
        
        
        "davidbrodrick committed on Jun 2, 2023\n    
        
        
        "Showing  with 114 additions and 4 deletions.\n    
        
        
        "87 changes: 83 additions &amp; 4 deletions87  \n    
        
        
        "paperqa/docs.py\n    
        
        
        "Original file line number	Diff line number	Diff line change\n    
        
        
        "@@ -2,6 +2,7 @@\n    
        
        
        "import os\n    
        
        
        "import re\n    
        
        
        "import sys\n    
        
        
        "import copy\n    
        
        
        "from datetime import datetime\n    
        
        
        "from functools import reduce\n    
        
        
        "from pathlib import Path\n    
        
        
        "@@ -18,12 +19,15 @@\n    
        
        
        "from langchain.embeddings.openai import OpenAIEmbeddings\n    
        
        
        "from langchain.llms.base import LLM\n    
        
        
        "from langchain.vectorstores import FAISS\n    
        
        
        "from langchain.prompts import PromptTemplate\n    
        
        
        "from .paths import CACHE_PATH\n    
        
        
        "from .qaprompts import (\n    
        
        
        "citation_prompt,\n    
        
        
        "make_chain,\n    
        
        
        "qa_prompt,\n    
        
        
        "adversarial_prompt,\n    
        
        
        "revision_prompt,\n    
        
        
        "search_prompt,\n    
        
        
        "select_paper_prompt,\n    
        
        
        "summary_prompt,\n    
        
        
        "@@ -257,7 +261,10 @@ async def adoc_match(\n    
        
        
        "papers = [f&quot;{d.metadata['key']}: {d.page_content}&quot; for d in docs]\n    
        
        
        "result = await chain.arun(\n    
        
        
        "question=query, papers=&quot;\n&quot;.join(papers), callbacks=callbacks\n    
        
        
        ")\n    
        
        
        ")        \n    
        
        
        "if result==&quot;None.&quot;:\n    
        
        
        "#Something in that call stack returns &quot;None.&quot; as a string!\n    
        
        
        "result=[]\n    
        
        
        "return result\n    
        
        
        "def doc_match(\n    
        
        
        "@@ -378,9 +385,10 @@ async def aget_evidence(\n    
        
        
        "docs = self._faiss_index.similarity_search(\n    
        
        
        "answer.question, k=_k, fetch_k=5 * _k\n    
        
        
        ")\n    
        
        
        "# ok now filter\n    
        
        
        "if key_filter is not None:\n    
        
        
        "docs = [doc for doc in docs if doc.metadata[&quot;dockey&quot;] in key_filter][:k]\n    
        
        
        "if (key_filter is not None):\n    
        
        
        "docs = [doc for doc in docs if doc.metadata[&quot;key&quot;] in key_filter][:k]\n    
        
        
        "async def process(doc):\n    
        
        
        "if doc.metadata[&quot;dockey&quot;] in self._deleted_keys:\n    
        
        
        "@@ -468,6 +476,74 @@ def generate_search_query(self, query: str) -&gt; List[str]:\n    
        
        
        "queries = [re.sub(r&quot;^\d+\.\s*&quot;, &quot;&quot;, q) for q in queries]\n    
        
        
        "return queries\n    
        
        
        "def adversarial_query(\n    
        
        
        "self,\n    
        
        
        "query: str,\n    
        
        
        "k: int = 10,\n    
        
        
        "max_sources: int = 5,\n    
        
        
        "length_prompt: str = &quot;about 100 words&quot;,\n    
        
        
        "marginal_relevance: bool = True,\n    
        
        
        "answer: Optional[Answer] = None,\n    
        
        
        "key_filter: Optional[bool] = None,\n    
        
        
        "get_callbacks: Callable[[str], AsyncCallbackHandler] = lambda x: [],\n    
        
        
        "recontextualise: bool = False\n    
        
        
        ") -&gt; List[Answer]:\n    
        
        
        "#Get an answer to the question\n    
        
        
        "orig_answer=self.query(\n    
        
        
        "query,\n    
        
        
        "k=k,\n    
        
        
        "max_sources=max_sources,\n    
        
        
        "length_prompt=length_prompt,\n    
        
        
        "marginal_relevance=marginal_relevance,\n    
        
        
        "answer=answer,\n    
        
        
        "key_filter=key_filter,\n    
        
        
        "get_callbacks=get_callbacks,\n    
        
        
        "prompt_template=qa_prompt)\n    
        
        
        "if &quot;I cannot answer this question due to insufficient information.&quot; in orig_answer.answer:\n    
        
        
        "#We can't do an adversarial challenge if there was no answer\n    
        
        
        "return [orig_answer]\n    
        
        
        "#Ask the LLM to critique the original answer\n    
        
        
        "adversarial_query=&quot;Original Question: %s\n\nAnswer to be reviewed: %s&quot;%(query,orig_answer.answer)\n    
        
        
        "if recontextualise:\n    
        
        
        "#We will search for new context strings based on the original answer\n    
        
        
        "critique=None\n    
        
        
        "else:            \n    
        
        
        "#Use the original context strings\n    
        
        
        "critique=copy.copy(orig_answer)\n    
        
        
        "critique.question=query\n    
        
        
        "critique=self.query(\n    
        
        
        "adversarial_query,\n    
        
        
        "k=k,\n    
        
        
        "max_sources=max_sources,\n    
        
        
        "length_prompt=&quot;less than 500 words&quot;,\n    
        
        
        "marginal_relevance=marginal_relevance,\n    
        
        
        "answer=critique,\n    
        
        
        "key_filter=key_filter,\n    
        
        
        "get_callbacks=get_callbacks,\n    
        
        
        "prompt_template=adversarial_prompt)\n    
        
        
        "#Generate a new answer which addresses the criticism\n    
        
        
        "revision_query=&quot;Original Question: %s\n\nYour original answer: %s\n\nFeedback from the reviewer: %s&quot;%(query,orig_answer.answer,critique.answer)\n    
        
        
        "if recontextualise:\n    
        
        
        "final_answer=None\n    
        
        
        "else:\n    
        
        
        "final_answer=copy.copy(critique)\n    
        
        
        "critique.question=query\n    
        
        
        "final_answer=self.query(\n    
        
        
        "revision_query,\n    
        
        
        "k=k,\n    
        
        
        "max_sources=max_sources,\n    
        
        
        "length_prompt=length_prompt,\n    
        
        
        "marginal_relevance=marginal_relevance,\n    
        
        
        "answer=final_answer,\n    
        
        
        "key_filter=key_filter,\n    
        
        
        "get_callbacks=get_callbacks,\n    
        
        
        "prompt_template=revision_prompt)\n    
        
        
        "#Return all three parts of the process\n    
        
        
        "return [orig_answer, critique, final_answer]\n    
        
        
        "def query(\n    
        
        
        "self,\n    
        
        
        "query: str,\n    
        
        
        "@@ -478,6 +554,7 @@ def query(\n    
        
        
        "answer: Optional[Answer] = None,\n    
        
        
        "key_filter: Optional[bool] = None,\n    
        
        
        "get_callbacks: Callable[[str], AsyncCallbackHandler] = lambda x: [],\n    
        
        
        "prompt_template: PromptTemplate = qa_prompt\n    
        
        
        ") -&gt; Answer:\n    
        
        
        "# special case for jupyter notebooks\n    
        
        
        "if &quot;get_ipython&quot; in globals() or &quot;google.colab&quot; in sys.modules:\n    
        
        
        "@@ -499,6 +576,7 @@ def query(\n    
        
        
        "answer=answer,\n    
        
        
        "key_filter=key_filter,\n    
        
        
        "get_callbacks=get_callbacks,\n    
        
        
        "prompt_template=prompt_template\n    
        
        
        ")\n    
        
        
        ")\n    
        
        
        "@@ -512,6 +590,7 @@ async def aquery(\n    
        
        
        "answer: Optional[Answer] = None,\n    
        
        
        "key_filter: Optional[bool] = None,\n    
        
        
        "get_callbacks: Callable[[str], AsyncCallbackHandler] = lambda x: [],\n    
        
        
        "prompt_template: PromptTemplate = qa_prompt\n    
        
        
        ") -&gt; Answer:\n    
        
        
        "if k &lt; max_sources:\n    
        
        
        "raise ValueError(&quot;k should be greater than max_sources&quot;)\n    
        
        
        "@@ -542,7 +621,7 @@ async def aquery(\n    
        
        
        "else:\n    
        
        
        "cb = OpenAICallbackHandler()\n    
        
        
        "callbacks = [cb] + get_callbacks(&quot;answer&quot;)\n    
        
        
        "qa_chain = make_chain(qa_prompt, self.llm)\n    
        
        
        "qa_chain = make_chain(prompt_template, self.llm)\n    
        
        
        "answer_text = await qa_chain.arun(\n    
        
        
        "question=query,\n    
        
        
        "context_str=context_str,\n    
        
        
        "31 changes: 31 additions &amp; 0 deletions31  \n    
        
        
        "paperqa/qaprompts.py\n    
        
        
        "Original file line number	Diff line number	Diff line change\n    
        
        
        "@@ -25,6 +25,7 @@\n    
        
        
        "&quot;Relevant Information Summary:&quot;,\n    
        
        
        ")\n    
        
        
        "qa_prompt = prompts.PromptTemplate(\n    
        
        
        "input_variables=[&quot;question&quot;, &quot;context_str&quot;, &quot;length&quot;],\n    
        
        
        "template=&quot;Write an answer ({length}) &quot;\n    
        
        
        "@@ -42,6 +43,36 @@\n    
        
        
        ")\n    
        
        
        "adversarial_prompt = prompts.PromptTemplate(\n    
        
        
        "input_variables=[&quot;question&quot;, &quot;context_str&quot;],\n    
        
        
        "template=&quot;You are an adversarial and critical scientific reviewer. &quot;\n    
        
        
        "&quot;Your task is to find deficiencies and shortcomings in the following answer to the original question. &quot;\n    
        
        
        "&quot;Please be specific about the shortcomings of the answer and offer suggestions which would make the answer more complete and accurate.&quot;\n    
        
        
        "&quot;For each sentence in your critique, indicate which sources most support it &quot;\n    
        
        
        "&quot;via valid citation markers at the end of sentences, like (Example2012).\n&quot;\n    
        
        
        "&quot;{context_str}\n&quot;\n    
        
        
        "&quot;{question}\n&quot;\n    
        
        
        "&quot;Your Critique: &quot;,\n    
        
        
        ")\n    
        
        
        "revision_prompt = prompts.PromptTemplate(\n    
        
        
        "input_variables=[&quot;question&quot;, &quot;context_str&quot;],\n    
        
        
        "template=&quot;For each sentence in your answer, indicate which sources most support it &quot;\n    
        
        
        "&quot;via valid citation markers at the end of sentences, like (Example2012).\n&quot;\n    
        
        
        "&quot;You are a scientist and use a scholarly tone. &quot;\n    
        
        
        "&quot;You want to rewrite and improve your original answer to the original question to &quot;\n    
        
        
        "&quot;to include better grammatical structure and logical reasoning. &quot;\n    
        
        
        "&quot;You have also received critical feedback provided by a reviewer. Please address the &quot;\n    
        
        
        "&quot;feedback from the reviewer so that your new answer is more comprehensive. &quot;\n    
        
        
        "&quot;You can use dot points and paragraphs in your response where appropriate. &quot;\n    
        
        
        "#&quot;You may conclude with one or two opinionated sentences to summarise your answer. &quot;\n    
        
        
        "&quot;{context_str}\n&quot;\n    
        
        
        "&quot;{question}\n&quot;\n    
        
        
        "&quot;Your Improved Answer: &quot;,\n    
        
        
        ")\n    
        
        
        "search_prompt = prompts.PromptTemplate(\n    
        
        
        "input_variables=[&quot;question&quot;],\n    
        
        
        "template=&quot;We want to answer the following question: {question} \n&quot;" data-download-link="" data-download-link-label="Download "><code class="language-">Implement adversarial prompting. #131\n    
        
        
        "This adds a method adversarial_query. Adversarial queries first generate an answer, then asks the LLM to find problems with the answer, then finally generates the final response so that it addresses th\n    
        
        
        "1 commit\n    
        
        
        "2 files changed\n    
        
        
        "1 contributor\n    
        
        
        "Commits on Jun 2, 2023\n    
        
        
        "Add method for adversarial prompting. Also work around a problem with… \n    
        
        
        "davidbrodrick committed on Jun 2, 2023\n    
        
        
        "Showing  with 114 additions and 4 deletions.\n    
        
        
        "87 changes: 83 additions &amp; 4 deletions87  \n    
        
        
        "paperqa/docs.py\n    
        
        
        "Original file line number	Diff line number	Diff line change\n    
        
        
        "@@ -2,6 +2,7 @@\n    
        
        
        "import os\n    
        
        
        "import re\n    
        
        
        "import sys\n    
        
        
        "import copy\n    
        
        
        "from datetime import datetime\n    
        
        
        "from functools import reduce\n    
        
        
        "from pathlib import Path\n    
        
        
        "@@ -18,12 +19,15 @@\n    
        
        
        "from langchain.embeddings.openai import OpenAIEmbeddings\n    
        
        
        "from langchain.llms.base import LLM\n    
        
        
        "from langchain.vectorstores import FAISS\n    
        
        
        "from langchain.prompts import PromptTemplate\n    
        
        
        "from .paths import CACHE_PATH\n    
        
        
        "from .qaprompts import (\n    
        
        
        "citation_prompt,\n    
        
        
        "make_chain,\n    
        
        
        "qa_prompt,\n    
        
        
        "adversarial_prompt,\n    
        
        
        "revision_prompt,\n    
        
        
        "search_prompt,\n    
        
        
        "select_paper_prompt,\n    
        
        
        "summary_prompt,\n    
        
        
        "@@ -257,7 +261,10 @@ async def adoc_match(\n    
        
        
        "papers = [f"{d.metadata['key']}: {d.page_content}" for d in docs]\n    
        
        
        "result = await chain.arun(\n    
        
        
        "question=query, papers="\n".join(papers), callbacks=callbacks\n    
        
        
        ")\n    
        
        
        ")        \n    
        
        
        "if result=="None.":\n    
        
        
        "#Something in that call stack returns "None." as a string!\n    
        
        
        "result=[]\n    
        
        
        "return result\n    
        
        
        "def doc_match(\n    
        
        
        "@@ -378,9 +385,10 @@ async def aget_evidence(\n    
        
        
        "docs = self._faiss_index.similarity_search(\n    
        
        
        "answer.question, k=_k, fetch_k=5 * _k\n    
        
        
        ")\n    
        
        
        "# ok now filter\n    
        
        
        "if key_filter is not None:\n    
        
        
        "docs = [doc for doc in docs if doc.metadata["dockey"] in key_filter][:k]\n    
        
        
        "if (key_filter is not None):\n    
        
        
        "docs = [doc for doc in docs if doc.metadata["key"] in key_filter][:k]\n    
        
        
        "async def process(doc):\n    
        
        
        "if doc.metadata["dockey"] in self._deleted_keys:\n    
        
        
        "@@ -468,6 +476,74 @@ def generate_search_query(self, query: str) -&gt; List[str]:\n    
        
        
        "queries = [re.sub(r"^\d+\.\s*", "", q) for q in queries]\n    
        
        
        "return queries\n    
        
        
        "def adversarial_query(\n    
        
        
        "self,\n    
        
        
        "query: str,\n    
        
        
        "k: int = 10,\n    
        
        
        "max_sources: int = 5,\n    
        
        
        "length_prompt: str = "about 100 words",\n    
        
        
        "marginal_relevance: bool = True,\n    
        
        
        "answer: Optional[Answer] = None,\n    
        
        
        "key_filter: Optional[bool] = None,\n    
        
        
        "get_callbacks: Callable[[str], AsyncCallbackHandler] = lambda x: [],\n    
        
        
        "recontextualise: bool = False\n    
        
        
        ") -&gt; List[Answer]:\n    
        
        
        "#Get an answer to the question\n    
        
        
        "orig_answer=self.query(\n    
        
        
        "query,\n    
        
        
        "k=k,\n    
        
        
        "max_sources=max_sources,\n    
        
        
        "length_prompt=length_prompt,\n    
        
        
        "marginal_relevance=marginal_relevance,\n    
        
        
        "answer=answer,\n    
        
        
        "key_filter=key_filter,\n    
        
        
        "get_callbacks=get_callbacks,\n    
        
        
        "prompt_template=qa_prompt)\n    
        
        
        "if "I cannot answer this question due to insufficient information." in orig_answer.answer:\n    
        
        
        "#We can't do an adversarial challenge if there was no answer\n    
        
        
        "return [orig_answer]\n    
        
        
        "#Ask the LLM to critique the original answer\n    
        
        
        "adversarial_query="Original Question: %s\n\nAnswer to be reviewed: %s"%(query,orig_answer.answer)\n    
        
        
        "if recontextualise:\n    
        
        
        "#We will search for new context strings based on the original answer\n    
        
        
        "critique=None\n    
        
        
        "else:            \n    
        
        
        "#Use the original context strings\n    
        
        
        "critique=copy.copy(orig_answer)\n    
        
        
        "critique.question=query\n    
        
        
        "critique=self.query(\n    
        
        
        "adversarial_query,\n    
        
        
        "k=k,\n    
        
        
        "max_sources=max_sources,\n    
        
        
        "length_prompt="less than 500 words",\n    
        
        
        "marginal_relevance=marginal_relevance,\n    
        
        
        "answer=critique,\n    
        
        
        "key_filter=key_filter,\n    
        
        
        "get_callbacks=get_callbacks,\n    
        
        
        "prompt_template=adversarial_prompt)\n    
        
        
        "#Generate a new answer which addresses the criticism\n    
        
        
        "revision_query="Original Question: %s\n\nYour original answer: %s\n\nFeedback from the reviewer: %s"%(query,orig_answer.answer,critique.answer)\n    
        
        
        "if recontextualise:\n    
        
        
        "final_answer=None\n    
        
        
        "else:\n    
        
        
        "final_answer=copy.copy(critique)\n    
        
        
        "critique.question=query\n    
        
        
        "final_answer=self.query(\n    
        
        
        "revision_query,\n    
        
        
        "k=k,\n    
        
        
        "max_sources=max_sources,\n    
        
        
        "length_prompt=length_prompt,\n    
        
        
        "marginal_relevance=marginal_relevance,\n    
        
        
        "answer=final_answer,\n    
        
        
        "key_filter=key_filter,\n    
        
        
        "get_callbacks=get_callbacks,\n    
        
        
        "prompt_template=revision_prompt)\n    
        
        
        "#Return all three parts of the process\n    
        
        
        "return [orig_answer, critique, final_answer]\n    
        
        
        "def query(\n    
        
        
        "self,\n    
        
        
        "query: str,\n    
        
        
        "@@ -478,6 +554,7 @@ def query(\n    
        
        
        "answer: Optional[Answer] = None,\n    
        
        
        "key_filter: Optional[bool] = None,\n    
        
        
        "get_callbacks: Callable[[str], AsyncCallbackHandler] = lambda x: [],\n    
        
        
        "prompt_template: PromptTemplate = qa_prompt\n    
        
        
        ") -&gt; Answer:\n    
        
        
        "# special case for jupyter notebooks\n    
        
        
        "if "get_ipython" in globals() or "google.colab" in sys.modules:\n    
        
        
        "@@ -499,6 +576,7 @@ def query(\n    
        
        
        "answer=answer,\n    
        
        
        "key_filter=key_filter,\n    
        
        
        "get_callbacks=get_callbacks,\n    
        
        
        "prompt_template=prompt_template\n    
        
        
        ")\n    
        
        
        ")\n    
        
        
        "@@ -512,6 +590,7 @@ async def aquery(\n    
        
        
        "answer: Optional[Answer] = None,\n    
        
        
        "key_filter: Optional[bool] = None,\n    
        
        
        "get_callbacks: Callable[[str], AsyncCallbackHandler] = lambda x: [],\n    
        
        
        "prompt_template: PromptTemplate = qa_prompt\n    
        
        
        ") -&gt; Answer:\n    
        
        
        "if k &lt; max_sources:\n    
        
        
        "raise ValueError("k should be greater than max_sources")\n    
        
        
        "@@ -542,7 +621,7 @@ async def aquery(\n    
        
        
        "else:\n    
        
        
        "cb = OpenAICallbackHandler()\n    
        
        
        "callbacks = [cb] + get_callbacks("answer")\n    
        
        
        "qa_chain = make_chain(qa_prompt, self.llm)\n    
        
        
        "qa_chain = make_chain(prompt_template, self.llm)\n    
        
        
        "answer_text = await qa_chain.arun(\n    
        
        
        "question=query,\n    
        
        
        "context_str=context_str,\n    
        
        
        "31 changes: 31 additions &amp; 0 deletions31  \n    
        
        
        "paperqa/qaprompts.py\n    
        
        
        "Original file line number	Diff line number	Diff line change\n    
        
        
        "@@ -25,6 +25,7 @@\n    
        
        
        ""Relevant Information Summary:",\n    
        
        
        ")\n    
        
        
        "qa_prompt = prompts.PromptTemplate(\n    
        
        
        "input_variables=["question", "context_str", "length"],\n    
        
        
        "template="Write an answer ({length}) "\n    
        
        
        "@@ -42,6 +43,36 @@\n    
        
        
        ")\n    
        
        
        "adversarial_prompt = prompts.PromptTemplate(\n    
        
        
        "input_variables=["question", "context_str"],\n    
        
        
        "template="You are an adversarial and critical scientific reviewer. "\n    
        
        
        ""Your task is to find deficiencies and shortcomings in the following answer to the original question. "\n    
        
        
        ""Please be specific about the shortcomings of the answer and offer suggestions which would make the answer more complete and accurate."\n    
        
        
        ""For each sentence in your critique, indicate which sources most support it "\n    
        
        
        ""via valid citation markers at the end of sentences, like (Example2012).\n"\n    
        
        
        ""{context_str}\n"\n    
        
        
        ""{question}\n"\n    
        
        
        ""Your Critique: ",\n    
        
        
        ")\n    
        
        
        "revision_prompt = prompts.PromptTemplate(\n    
        
        
        "input_variables=["question", "context_str"],\n    
        
        
        "template="For each sentence in your answer, indicate which sources most support it "\n    
        
        
        ""via valid citation markers at the end of sentences, like (Example2012).\n"\n    
        
        
        ""You are a scientist and use a scholarly tone. "\n    
        
        
        ""You want to rewrite and improve your original answer to the original question to "\n    
        
        
        ""to include better grammatical structure and logical reasoning. "\n    
        
        
        ""You have also received critical feedback provided by a reviewer. Please address the "\n    
        
        
        ""feedback from the reviewer so that your new answer is more comprehensive. "\n    
        
        
        ""You can use dot points and paragraphs in your response where appropriate. "\n    
        
        
        "#"You may conclude with one or two opinionated sentences to summarise your answer. "\n    
        
        
        ""{context_str}\n"\n    
        
        
        ""{question}\n"\n    
        
        
        ""Your Improved Answer: ",\n    
        
        
        ")\n    
        
        
        "search_prompt = prompts.PromptTemplate(\n    
        
        
        "input_variables=["question"],\n    
        
        
        "template="We want to answer the following question: {question} \n"</code></section>\n    
        
        
        "\n    
        
        
        "<hr />\n    "
  <header class="header-container">
    <nav aria-label="Main navigation" class="header-content">
      <a href="/" aria-label="Home">
        <img src="/favicon.ico" alt="Home" class="favicon search-link" width="45" height="45" loading="lazy">
      </a>
      <a href="/tags" aria-label="Tags">
        <img src="/assets/Label.gif" alt="Tags" class="favicon search-link" width="45" height="45" loading="lazy">
      </a>
      <a href="/events" aria-label="Events">
        <img src="/assets/Paralyse_Rune.gif" alt="Events" class="favicon search-link" width="45" height="45" loading="lazy">
      </a>
      <a href="/archive" aria-label="Archive">
        <img src="/assets/Loose_Stone_Pile.gif" alt="Archive" class="favicon search-link" width="45" height="45" loading="lazy">
      </a>
    </nav>
    <h1 class="post-title">cliPaperQA</h1>
    <div class="post-meta">
      <time datetime="2024-06-16T00:00:00+00:00" class="post-date">
        16 Jun 2024
      </time>
      
        <span class="post-updated">
          ↣
          <time datetime="2024-09-20T02:37:06+00:00">20 Sep 2024</time>
        </span>
      
      
        <p class="post-slug">
          Slug: <a href="https://ib.bsb.br/clipaper-qa" class="tag">clipaper-qa</a>
        </p>
      
      
        <p class="post-tags">
          Tags:
          
            <a href="https://ib.bsb.br/tags/#linux" class="tag">linux</a>
          
            <a href="https://ib.bsb.br/tags/#scripts" class="tag">scripts</a>
          
        </p>
      
    </div>
    <div class="post-actions">
      <div class="page-stats mt-3" role="status" aria-label="Page statistics">
        <span class="badge bg-primary">
          43215 characters
        </span>
        <span class="separator mx-2" aria-hidden="true">•</span>
        <span class="badge bg-primary">
          4434 words
        </span>
      </div>
      <div class="action-buttons d-flex flex-wrap gap-2">
        
          
            <form action="https://github.com/ib-bsb-br/ib-bsb-br.github.io/edit/main/_posts/2024-06-16-clipaper-qa.md"
                  method="GET"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="d-inline-block">
              <button type="submit" class="btn btn-danger" aria-label="Edit page content">
                <span class="button-text">Improve this page?</span>
                <span class="info-text">aberto.</span>
              </button>
            </form>
          
          <form action="https://github.com/ib-bsb-br/ib-bsb-br.github.io/commits/main/_posts/2024-06-16-clipaper-qa.md"
                method="GET"
                target="_blank"
                rel="noopener noreferrer"
                class="d-inline-block">
            <button type="submit" class="btn btn-danger" aria-label="View page revision history">
              View revision history
            </button>
          </form>
        
      </div>
    </div>
  </header>
  <main class="content">
    <article class="post-wrapper">
      <div class="post-content-body">
        

        

      </div>
      
        URL: https://ib.bsb.br/clipaper-qa
      
    </article>
    <nav class="post-navigation" aria-label="Post navigation">
      
        <div class="nav-arrow prev">
          <a href="/bulk-gpt/" title="bulkGPT: multithreading for OpenAI's output limits" rel="prev">
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAAAXNSR0IArs4c6QAAAxVJREFUaEPt18FqG1cUBuD/nLkzI42UiVInkFLTCAKhS+9KA+3Kq1L8AAHjhR7AKz+ADV55qUfoqhvThTfdmC4KzTKmYJrELshJW9PIlSeKRpqZe88pUtouihvVRknqMNoMzD1zdPXNrzMM4RJ+6BLuGeWm39RdK6VL6VcIlPEo41HG401loJQupS8mUM7pi7md/6p3UtoHUJzf4vVecZb0e0EQfB7H8b0kSeqqummt/eb1buN83SebNsZ8QkQCYHVpaenu/v7+ra2tLRwdHWF1ddWq6hfM3BCRE2b+FcBHACQAHo1E5v9c+5mIhkR0e3z0VQ8LotuqWlXVw/GRmT8QkdMK89McuAOAAfwoIu8z85yIHBPRKRGN1/IAeDx0rul53hivo6psrf2ejDGfEtFOu92u7O3tBWtra2i322g0GhgOh9je3ka325UPax7fCR0iw+lp4aLxr70aeOmgkChTRY3JGSb73EroERD73uB54WpOgdhwZkXNQNQLiVDzOU1yFymAhu+lqZVopIqISQKmPLFS+atHv3A1q8AVQ/lXP/VHRPQx+b6frKysxMvLy1hfX0ez2USv18PCwgLiOEaSJKhWq/jhwQN8dnIfVOS4dsWHqCJ5YREGjBuNEMfd0eTc9WshBqnFYGhRqxrUIoNuLwMT4eb1Cp6dZshywdW6mZzr9QsEPuPmXIhfno3gnGKuEWCUC14MLKoVb1L72+8Zvj3JOl/udZt/S7darUqn0wlarRZ2d3cxPz+PJ8dPsPP1Doq8kIbL+cawjxBIM8MRFAidpBlRpIbhFc55gM2NF5IIQtVBRlRTZgTWZQ4wzvc8spO1NPM4Gr9Wh1bSDIjU98C5E0PIC8OVSX+Rlz08hl+4/LsML6X/menFxcW7BwcHtzY2NvDw8CE21zf/NdMAHskFMs3MT/EfMg3gsTsr02f8byfTo16v3+v3+//f6fGKgXNp5vT5huZbqH4nH+NvwXH6V5bS041mU1FKz8ZxepdSerrRbCpK6dk4Tu9SSk83mk1FKT0bx+ldSunpRrOpuJTSfwBcuImxpyA7XgAAAABJRU5ErkJggg==" alt="Previous article" width="45" height="45" loading="lazy">
          </a>
        </div>
      
      
        <div class="nav-arrow next">
          <a href="/gingko-toc-outliner/" title="Gingko JSON ToC outliner" rel="next">
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAAAXNSR0IArs4c6QAAAwdJREFUaEPtl01rG1cUht9z7p070ijKWLVS3I9YULtNMBRn2UIXxZtuvCjedNWfoKVXBvsHeOUfoIUx5AeY0pVXXSR052UxBJSi0kDiRplII83HvadI9CMtOFjCmBjubC7cc8+Zc555eYdLuIEP3cCe4Zu+rq/mSXvSbyHg5eHl4eVxXRrwpD3p+Qh4n56P2+xZnvTszC7MCAAUF0XfOdJa62+IaCeO40GSJA/zPP8RwB9vDjBtWmv9JRE5ImpZawdVpbo58CkAIyJnIrLAzEvOuXNm/h3AfQDOAGdj5z5m5gXn3G9ENCKilckaiDwpiFZEpCoiTyYrM3/knOtXmHs58BkABvCLc+4DZl6cxIjoh4ODA728vIzt7W2sra09PT4+fgTgQES4LMvHZIy5LyI/f/dJvfK6FKMJqAdqmBS2ZgWINY9zJyZ1whUiRJrTfmGjybSxUemwcFEmghqT1UxlUrpQEXD7jRq3NWelEz10okIi1AJOX+U2EgALgUrT0kVnmcKvQ+uazSZvbW2hWq2i3++j3W5jf38f6+vrebvdHovI5pT09+vN7teLYev990K8GpQYjS1u1TQqhnHez6EU4cM7FTw7z5AXDo16ACcyPRsaxp2FEM9ejKd7zUaIYVpiOCpRq2rUIo0XLzMwEZaaFTzvZ8hyh/iWnu69fF1AAoOfFr/A5w8eYDQaIY5jJEmC09NTNBoNdLtd7O3t4ejoCIeHh8k/pL8KUSkCZcg6hCLDjLk2ufYGpRuXAuOMYiosQiDNNEcQILQuzYgi0QxVWKuAMtcqJPdXDaKaMMOUNrOAtoFSVE5jaaY4mtQPS5dmQPS8WkdfGReYgDe/3cTdpbvo9XrY2NhAp9NBq9XKO53Ov6T/r2mlVBeX0DSAMzeHppm5h7doemdvR99buYfd3V2srq4+PTk5+a+mr9CmrqTU3+5Rr9cHg8HgYve4krddbZGb5dOXmf2d+7n4pi9D4LrOeHl40v42fl0a8KQ96fkIeJ+ej9vsWZ707Mzmy/Ck5+M2e9afhmuAz1BhwewAAAAASUVORK5CYII=" alt="Next article" width="45" height="45" loading="lazy">
          </a>
        </div>
      
    </nav>
    
    <div class="comment-box">
        Reference: <a href="https://github.com/whitead/paper-qa" title="https://github.com/whitead/paper-qa">https://github.com/whitead/paper-qa</a>
    </div>
    
  </main>
  <footer class="site-footer">
    <p>
      <a href="#" aria-label="Back to top">
        <img src="/assets/Rope_(Old).gif" alt="Back to top" width="32" height="32" loading="lazy">
      </a><a href="https://ib.bsb.br/404" aria-label="404">2024-12-28 18:06:39</a>‎ ⇔‎ <a href="https://github.com/ib-bsb-br/ib-bsb-br.github.io" aria-label="GitHub">ℹ</a>‎ <a href="/" aria-label="Homepage">infoBAG</a>
    </p>
  </footer>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://ib.bsb.br/clipaper-qa/"
    },
    "headline": "cliPaperQA",
    "description": "",
    "datePublished": "2024-06-16T00:00:00+00:00",
    "dateModified": "2024-09-20T02:37:06+00:00",
    "author": {
      "@type": "Person",
      "name": "Author"
    },
    "publisher": {
      "@type": "Organization",
      "name": "infoBAG"
      
    }
    
  }
  </script>
  <script src="/assets/js/prism.js" defer></script>
</body>
</html>
